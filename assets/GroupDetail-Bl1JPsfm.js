const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatPanel-CFsJ3JQG.js","assets/index-DyIYOLOS.js","assets/react-Dymf0t1b.js","assets/supabase-BesQZUkt.js","assets/index-6fw4z0o-.css","assets/useGroupPresence-gAguh2Jr.js","assets/ViewOtherProfileModal-CQXbB2KZ.js","assets/user-plus-DaN1YzLe.js","assets/map-pin-BnWWxXyw.js","assets/send-CHKxfaQ7.js"])))=>i.map(i=>d[i]);
import{c as p,s as o,j as e,U as qe,_ as Ie}from"./index-DyIYOLOS.js";import{f as Le,i as ze,u as Te,c as a,L as Ue}from"./react-Dymf0t1b.js";import{X as z,C as Fe,V as Ge}from"./ViewOtherProfileModal-CQXbB2KZ.js";import{u as Be}from"./useGroupPresence-gAguh2Jr.js";import{M as He}from"./map-pin-BnWWxXyw.js";import{M as Ae}from"./message-circle-Dpy0bL14.js";import{C as Re}from"./clock-B0hAcn34.js";import{P as se}from"./plus-_09bomt4.js";import"./supabase-BesQZUkt.js";import"./user-plus-DaN1YzLe.js";const We=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ae=p("check",We);const Je=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xe=p("chevron-left",Je);const Ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],le=p("circle-alert",Ke);const Qe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ye=p("log-out",Qe);const Ze=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],et=p("pen",Ze);const tt=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],st=p("share-2",tt);const at=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lt=p("trash-2",at),rt=a.lazy(()=>Ie(()=>import("./ChatPanel-CFsJ3JQG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));function pt(){const{id:j=""}=Le(),T=ze(),U=Te(),[s,F]=a.useState(null),[re,G]=a.useState(!0),[w,i]=a.useState(null),[f,ne]=a.useState(null),{isTogether:oe}=Be(j,f??void 0),[ie,B]=a.useState(!1),m=!!(f&&s&&(f===s.host_id||(s?.creator_id??null)===f)),[H,N]=a.useState(!1),[de,ce]=a.useState(!1),[A,b]=a.useState(!1),[ue,C]=a.useState(!1),[xe,me]=a.useState(null),[fe,R]=a.useState(!1),[W,S]=a.useState(!1),[M,J]=a.useState(""),[X,K]=a.useState(!1),[he,Q]=a.useState(!1),[pe,Y]=a.useState(!1),[c,y]=a.useState(null),[be,D]=a.useState([]),[ge,_]=a.useState({}),[h,E]=a.useState(0),[ve,P]=a.useState(0),[Z,g]=a.useState(null),[O,ee]=a.useState([]),[V,$]=a.useState(!1),[q,je]=a.useState("Schedule"),[te,we]=a.useState(""),[k,Ne]=a.useState("24h"),[I,ye]=a.useState(""),L=a.useMemo(()=>c?.closes_at?new Date(c.closes_at)<new Date:!1,[c]);function _e(t,r){if(t==="closed")return"Voting Closed";if(!r)return"Open";const l=new Date(r).getTime()-Date.now();if(l<=0)return"Time Expired";const u=Math.floor(l/(1e3*60*60*24)),n=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),d=Math.floor(l%(1e3*60*60)/(1e3*60));return u>0?`${u}d ${n}h left`:n>0?`${n}h ${d}m left`:`${d}m left`}a.useEffect(()=>{U.hash==="#chat"&&N(!0)},[U.hash]),a.useEffect(()=>{let t=!1;return(async()=>{G(!0);const{data:r}=await o.auth.getUser();t||ne(r.user?.id??null);const l=await o.from("groups").select("*").eq("id",j).maybeSingle();if(t||F(l.data??null),l.data&&J(l.data.purpose||""),l.data?.id){const{count:u}=await o.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",l.data.id).eq("status","active");t||E(u??0)}G(!1)})(),()=>{t=!0}},[j]),a.useEffect(()=>{let t=!1;return(async()=>{if(!s?.id){ee([]);return}const{data:r}=await o.from("group_members").select("user_id, role, created_at, status, group_id, profiles(name, avatar_url)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),l=(r??[]).map(n=>({user_id:n.user_id,role:n.role,created_at:n.created_at,group_id:s.id,status:"active",name:n.profiles?.name??"User",avatar_url:n.profiles?.avatar_url??null}));if(t)return;ee(l);const u=(await o.auth.getUser()).data.user?.id||null;u&&$(l.some(n=>n.user_id===u))})(),()=>{t=!0}},[s?.id]),a.useEffect(()=>{let t=!1;return(async()=>{if(!s?.id)return;const{data:r}=await o.from("group_polls").select("*").eq("group_id",s.id).order("created_at",{ascending:!1}).limit(1);if(t)return;const l=r&&r[0];if(y(l||null),!l){D([]),_({}),P(0);return}const{data:u}=await o.from("group_poll_options").select("*").eq("poll_id",l.id).order("created_at");if(t)return;D(u||[]);const{data:n}=await o.from("group_votes").select("option_id,user_id").eq("poll_id",l.id);if(t)return;const d={},x=new Set;n?.forEach(v=>{d[v.option_id]=(d[v.option_id]||0)+1,x.add(v.user_id)}),_(d),P(x.size)})(),()=>{t=!0}},[s?.id]);async function ke(){i(null);const{data:t}=await o.auth.getUser();if(!t.user){i("Please sign in.");return}await o.from("group_members").insert({group_id:j,user_id:t.user.id}),$(!0),E(r=>r+1)}async function Ce(){if(i(null),!(!s||!f)){if(f===s.host_id){i("Host cannot leave their own group.");return}await o.from("group_members").delete().match({group_id:s.id,user_id:f}),$(!1),E(t=>Math.max(0,t-1))}}async function Se(){s?.code&&(navigator.clipboard.writeText(s.code),B(!0),setTimeout(()=>B(!1),1500))}async function Me(){if(i(null),!!s?.id){Q(!0);try{const{data:t,error:r}=await o.rpc("make_group_invite",{p_group_id:s.id,p_hours:168,p_max_uses:null});if(r)throw r;const l=`${window.location.origin}/invite/${t}`;await navigator.clipboard.writeText(l),Y(!0),setTimeout(()=>Y(!1),1500)}catch(t){i(t.message)}finally{Q(!1)}}}async function De(){!s||!f||window.confirm("Delete this group?")&&(await o.from("groups").delete().match({id:s.id,host_id:f}),T("/browse"))}async function Ee(){if(i(null),!(!s||!m)){K(!0);try{const{error:t}=await o.from("groups").update({purpose:M}).eq("id",s.id);if(t)throw t;F(r=>r?{...r,purpose:M}:null),S(!1)}catch(t){i(t.message||"Failed to save description")}finally{K(!1)}}}async function Pe(){if(i(null),!s||!m)return;const{data:t}=await o.auth.getUser();if(!t?.user)return;let r=null;if(k==="custom")I&&(r=new Date(I).toISOString());else{const d=new Date,x=parseInt(k);d.setTime(d.getTime()+x*60*60*1e3),r=d.toISOString()}const l=(te||"").split(/\r?\n/).map(d=>d.trim()).filter(Boolean).slice(0,20);l.some(d=>d.toLowerCase()==="not coming")||l.push("Not Coming");const{data:u,error:n}=await o.from("group_polls").insert({group_id:s.id,title:(q||"Schedule").trim(),created_by:t.user.id,closes_at:r}).select("id").single();if(n||!u?.id){console.error("Poll create error:",n),i(n?.message||"Failed to create poll. Check permissions.");return}if(l.length){const d=l.map(v=>({poll_id:u.id,label:v})),{error:x}=await o.from("group_poll_options").insert(d);x&&(console.error("Option create error:",x),i("Poll created but failed to add options."))}b(!1),i(null),y({id:u.id,group_id:s.id,title:q,status:"open",closes_at:r,created_by:t.user.id}),D(l.map((d,x)=>({id:`temp-${x}`,poll_id:u.id,label:d,starts_at:null,place:null}))),_({})}async function Oe(){if(i(null),!(!c||!m)&&window.confirm("End voting? Everyone who hasn't voted will be marked as 'Not Coming'.")){g("closing");try{await o.rpc("resolve_poll",{p_poll_id:c.id}),y(t=>t&&{...t,status:"closed"})}catch(t){i(t.message)}finally{g(null)}}}async function Ve(){if(i(null),!c||!window.confirm("Delete this voting?"))return;const{error:t}=await o.from("group_polls").delete().eq("id",c.id);t?(i("Could not delete. Check database permissions."),console.error(t)):y(null)}async function $e(t){if(!c||L||c.status==="closed")return;g(t);const{data:r}=await o.auth.getUser();if(!r?.user){T("/login");return}const{error:l}=await o.from("group_votes").upsert({poll_id:c.id,option_id:t,user_id:r.user.id},{onConflict:"poll_id,user_id"});if(l){console.error(l),i("Failed to save vote"),g(null);return}const{data:u}=await o.from("group_votes").select("option_id,user_id").eq("poll_id",c.id),n={},d=new Set;u?.forEach(x=>{n[x.option_id]=(n[x.option_id]||0)+1,d.add(x.user_id)}),_(n),P(d.size),g(null)}return re?e.jsx("div",{className:"p-20 flex justify-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-neutral-300 border-t-black rounded-full"})}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"transition-all duration-300 min-h-screen bg-[#FDFBF7] pb-24 "+(H&&!de?"lg:mr-[min(92vw,520px)]":""),children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 pt-8 pb-6 px-4 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-full blur-3xl -z-10 opacity-60"}),e.jsxs("div",{className:"mx-auto max-w-5xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-neutral-500",children:[e.jsxs(Ue,{to:"/browse",className:"flex items-center gap-1 hover:text-black transition-colors",children:[e.jsx(Xe,{className:"h-4 w-4"})," Browse"]}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium text-neutral-800",children:"Group Detail"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-neutral-900 tracking-tight leading-tight mb-3",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide",children:s.category||"General"}),s.game&&e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold",children:s.game}),s.city&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(He,{className:"h-3 w-3"})," ",s.city]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(qe,{className:"h-3 w-3"})," ",h," / ",s.capacity]})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:V?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>N(!0),className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(Ae,{className:"h-4 w-4"})," Chat"]}),m&&e.jsxs("button",{onClick:Me,className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(st,{className:"h-4 w-4"})," ",he?"...":pe?"Copied":"Invite"]})]}):e.jsx("button",{onClick:ke,className:"h-10 px-6 rounded-full bg-emerald-600 text-white text-sm font-bold shadow-md hover:bg-emerald-700 hover:shadow-lg active:scale-95 transition-all",children:"Join Group"})})]})]})]}),w&&!A&&e.jsx("div",{className:"mx-auto max-w-5xl px-4 mt-4",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-2 shadow-sm animate-in fade-in slide-in-from-top-2",children:[e.jsx(le,{className:"h-4 w-4"}),w,e.jsx("button",{onClick:()=>i(null),className:"ml-auto hover:bg-red-100 p-1 rounded-full",children:e.jsx(z,{className:"h-3 w-3"})})]})}),e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8 grid gap-8 lg:grid-cols-[2fr_1fr]",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-2xl p-6 shadow-sm border border-neutral-200/60 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-neutral-900 flex items-center gap-2",children:"About this Circle"}),m&&!W&&e.jsx("button",{onClick:()=>S(!0),className:"p-1.5 rounded-full text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 transition-colors",children:e.jsx(et,{className:"h-4 w-4"})})]}),W?e.jsxs("div",{className:"animate-in fade-in duration-200",children:[e.jsx("textarea",{value:M,onChange:t=>J(t.target.value),className:"w-full min-h-[120px] p-3 rounded-xl border border-neutral-300 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none resize-y mb-3",placeholder:"What's the plan?"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-3 py-1.5 rounded-lg border border-neutral-200 text-xs font-bold hover:bg-neutral-50 text-neutral-600",children:"Cancel"}),e.jsx("button",{onClick:Ee,disabled:X,className:"px-3 py-1.5 rounded-lg bg-black text-white text-xs font-bold hover:bg-neutral-800 disabled:opacity-50",children:X?"Saving...":"Save Changes"})]})]}):e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed whitespace-pre-wrap",children:s.purpose||e.jsx("span",{className:"italic text-neutral-400",children:"No description provided."})}),s.code&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-neutral-100 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-wider",children:"Invite Code"}),e.jsx("code",{className:"text-sm font-mono bg-neutral-100 px-2 py-1 rounded text-neutral-700 border border-neutral-200",children:String(s.code).toUpperCase()}),e.jsx("button",{onClick:Se,className:"text-xs font-medium text-emerald-600 hover:underline",children:ie?"Copied":"Copy"})]})]}),e.jsxs("section",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(Fe,{className:"h-3 w-3"})," Created"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(Re,{className:"h-3 w-3"})," Format"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:s.is_online?s.online_link?"Online (Link set)":"Online":"In Person"})]})]}),V&&m&&e.jsxs("button",{onClick:De,className:"flex items-center gap-2 text-red-600 text-sm font-medium hover:text-red-700 transition-colors px-2",children:[e.jsx(lt,{className:"h-4 w-4"})," Delete this group"]}),V&&!m&&e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 text-neutral-500 text-sm font-medium hover:text-neutral-800 transition-colors px-2",children:[e.jsx(Ye,{className:"h-4 w-4"})," Leave group"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-neutral-900 flex items-center gap-2",children:"Polls & Events"}),m&&e.jsx("button",{onClick:()=>{i(null),b(!0)},className:"p-1.5 bg-neutral-50 rounded-full text-neutral-600 shadow-sm hover:scale-105 active:scale-95 transition-all border border-neutral-200 hover:bg-white hover:border-neutral-300",children:e.jsx(se,{className:"h-4 w-4"})})]}),c?e.jsxs("div",{className:"animate-in slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-bold text-neutral-900",children:c.title}),e.jsx("div",{className:`text-[10px] font-bold px-2 py-1 rounded-full border ${c.status==="closed"?"bg-neutral-200 text-neutral-600 border-neutral-300":L?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:_e(c.status,c.closes_at)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:be.map(t=>{const r=ge[t.id]??0,u=t.label==="Not Coming"?r+(h-ve):r,n=h>0?Math.round(u/h*100):0;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-neutral-100 rounded-lg transition-all duration-500",style:{width:`${n}%`}}),e.jsxs("div",{className:"relative flex items-center justify-between p-2.5 rounded-lg border border-neutral-100 hover:border-neutral-200 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-800 z-10",children:t.label}),e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-600",children:u}),c.status==="open"&&!L&&e.jsx("button",{onClick:()=>$e(t.id),className:`h-6 w-6 rounded-full flex items-center justify-center border transition-all hover:scale-110 active:scale-95 ${Z===t.id?"bg-black border-black text-white":"bg-white border-neutral-200 text-neutral-600"}`,children:Z===t.id?e.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"}):e.jsx(ae,{className:"h-3 w-3"})})]})]})]},t.id)})}),m&&e.jsxs("div",{className:"flex flex-col gap-2 pt-3 border-t border-neutral-100",children:[c.status==="open"&&e.jsxs("button",{onClick:Oe,className:"w-full bg-black text-white text-xs font-bold py-3 rounded-xl hover:bg-neutral-800 shadow-sm flex items-center justify-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"})," End & Count Games"]}),c.status==="closed"&&e.jsxs("button",{onClick:()=>{i(null),b(!0)},className:"w-full bg-neutral-100 text-neutral-700 text-xs font-bold py-3 rounded-xl hover:bg-neutral-200 flex items-center justify-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"})," Create New Vote"]}),e.jsx("button",{onClick:Ve,className:"w-full text-red-600 text-xs font-bold py-2 hover:bg-red-50 rounded-xl",children:"Delete Poll"})]})]}):e.jsxs("div",{className:"text-center py-8 px-4 bg-neutral-50 rounded-xl border border-dashed border-neutral-200",children:[e.jsx("p",{className:"text-sm text-neutral-400 mb-2 font-medium",children:"No active polls"}),m&&e.jsx("button",{onClick:()=>{i(null),b(!0)},className:"text-xs text-black font-bold hover:underline",children:"Create one"})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-bold text-neutral-900",children:["Members (",h,")"]}),e.jsx("button",{onClick:()=>C(!0),className:"text-xs font-medium text-emerald-600 hover:underline",children:"View All"})]}),e.jsxs("div",{className:"flex -space-x-2 overflow-hidden cursor-pointer",onClick:()=>C(!0),children:[O.slice(0,5).map(t=>e.jsx("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-100 flex items-center justify-center text-[10px] font-bold text-neutral-500",title:t.name||"User",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"",className:"h-full w-full object-cover rounded-full"}):(t.name||"?").slice(0,1)},t.user_id)),h>5&&e.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-50 flex items-center justify-center text-[10px] font-bold text-neutral-400",children:["+",h-5]})]})]})]})]})]}),A&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl p-6 shadow-2xl ring-1 ring-black/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"New Vote"}),e.jsx("button",{onClick:()=>b(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(z,{className:"h-5 w-5"})})]}),w&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-xl text-sm font-bold border border-red-100 flex items-center gap-2 animate-in slide-in-from-top-1",children:[e.jsx(le,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{children:w})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Topic"}),e.jsx("input",{value:q,onChange:t=>je(t.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"e.g. When to play?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Duration"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:k,onChange:t=>Ne(t.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-4 py-3 text-sm font-medium flex-1 outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"1",children:"1 Hour"}),e.jsx("option",{value:"24",children:"24 Hours"}),e.jsx("option",{value:"48",children:"2 Days"}),e.jsx("option",{value:"custom",children:"Custom..."})]}),k==="custom"&&e.jsx("input",{type:"datetime-local",value:I,onChange:t=>ye(t.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-3 py-3 text-sm font-medium flex-[1.5] outline-none focus:ring-2 focus:ring-black"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Options (one per line)"}),e.jsx("textarea",{value:te,onChange:t=>we(t.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none min-h-[100px]",placeholder:`Saturday 20:00
Sunday 14:00`}),e.jsx("p",{className:"text-[10px] text-neutral-400 mt-1 italic text-right",children:'"Not Coming" added automatically.'})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-5 py-2.5 text-sm font-bold text-neutral-500 hover:bg-neutral-50 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Pe,className:"px-6 py-2.5 text-sm font-bold bg-black text-white rounded-xl shadow-lg hover:bg-neutral-800 active:scale-95 transition-all",children:"Create Vote"})]})]})]})}),ue&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-3xl p-6 shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-neutral-900",children:["Members (",O.length,")"]}),e.jsx("button",{onClick:()=>C(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(z,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:O.map(t=>e.jsx("div",{onClick:()=>{me(t.user_id),R(!0)},className:"flex items-center justify-between p-2 rounded-xl hover:bg-neutral-50 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 flex items-center justify-center overflow-hidden",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-sm font-bold text-neutral-500",children:(t.name||"?").slice(0,1)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-neutral-900",children:t.name||"User"}),oe(t.user_id)?e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 animate-in fade-in slide-in-from-left-1",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:"Here with you"})]}):e.jsxs(e.Fragment,{children:[t.role==="host"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Host"}),t.role==="owner"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Owner"}),t.role!=="host"&&t.role!=="owner"&&e.jsx("div",{className:"text-xs text-neutral-500 capitalize",children:t.role})]})]})]})},t.user_id))})]})}),e.jsx(Ge,{isOpen:fe,onClose:()=>R(!1),viewUserId:xe}),H&&s&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>N(!1)}),e.jsx("div",{className:"relative w-full max-w-2xl h-[85vh] bg-white rounded-3xl shadow-2xl overflow-hidden ring-1 ring-black/10",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading..."}),children:e.jsx(rt,{groupId:s.id,onClose:()=>{N(!1),ce(!1)},full:!0,setFull:()=>{}})})})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Group not found."})}export{pt as default};
