function Dp(a,n){for(var s=0;s<n.length;s++){const o=n[s];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(o,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}})();function Of(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function zp(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var n=a.default;if(typeof n=="function"){var s=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var l=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:function(){return a[o]}})}),s}var Il={exports:{}},Si={},Ul={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd;function Fp(){if(Bd)return Ce;Bd=1;var a=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function N(x){return x===null||typeof x!="object"?null:(x=b&&x[b]||x["@@iterator"],typeof x=="function"?x:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,I={};function E(x,C,W){this.props=x,this.context=C,this.refs=I,this.updater=W||L}E.prototype.isReactComponent={},E.prototype.setState=function(x,C){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,C,"setState")},E.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function J(){}J.prototype=E.prototype;function Y(x,C,W){this.props=x,this.context=C,this.refs=I,this.updater=W||L}var z=Y.prototype=new J;z.constructor=Y,U(z,E.prototype),z.isPureReactComponent=!0;var Q=Array.isArray,te=Object.prototype.hasOwnProperty,se={current:null},le={key:!0,ref:!0,__self:!0,__source:!0};function Ee(x,C,W){var ee,ce={},de=null,D=null;if(C!=null)for(ee in C.ref!==void 0&&(D=C.ref),C.key!==void 0&&(de=""+C.key),C)te.call(C,ee)&&!le.hasOwnProperty(ee)&&(ce[ee]=C[ee]);var fe=arguments.length-2;if(fe===1)ce.children=W;else if(1<fe){for(var ve=Array(fe),be=0;be<fe;be++)ve[be]=arguments[be+2];ce.children=ve}if(x&&x.defaultProps)for(ee in fe=x.defaultProps,fe)ce[ee]===void 0&&(ce[ee]=fe[ee]);return{$$typeof:a,type:x,key:de,ref:D,props:ce,_owner:se.current}}function Ie(x,C){return{$$typeof:a,type:x.type,key:C,ref:x.ref,props:x.props,_owner:x._owner}}function De(x){return typeof x=="object"&&x!==null&&x.$$typeof===a}function $e(x){var C={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(W){return C[W]})}var Z=/\/+/g;function me(x,C){return typeof x=="object"&&x!==null&&x.key!=null?$e(""+x.key):C.toString(36)}function Ne(x,C,W,ee,ce){var de=typeof x;(de==="undefined"||de==="boolean")&&(x=null);var D=!1;if(x===null)D=!0;else switch(de){case"string":case"number":D=!0;break;case"object":switch(x.$$typeof){case a:case n:D=!0}}if(D)return D=x,ce=ce(D),x=ee===""?"."+me(D,0):ee,Q(ce)?(W="",x!=null&&(W=x.replace(Z,"$&/")+"/"),Ne(ce,C,W,"",function(be){return be})):ce!=null&&(De(ce)&&(ce=Ie(ce,W+(!ce.key||D&&D.key===ce.key?"":(""+ce.key).replace(Z,"$&/")+"/")+x)),C.push(ce)),1;if(D=0,ee=ee===""?".":ee+":",Q(x))for(var fe=0;fe<x.length;fe++){de=x[fe];var ve=ee+me(de,fe);D+=Ne(de,C,W,ve,ce)}else if(ve=N(x),typeof ve=="function")for(x=ve.call(x),fe=0;!(de=x.next()).done;)de=de.value,ve=ee+me(de,fe++),D+=Ne(de,C,W,ve,ce);else if(de==="object")throw C=String(x),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return D}function we(x,C,W){if(x==null)return x;var ee=[],ce=0;return Ne(x,ee,"","",function(de){return C.call(W,de,ce++)}),ee}function X(x){if(x._status===-1){var C=x._result;C=C(),C.then(function(W){(x._status===0||x._status===-1)&&(x._status=1,x._result=W)},function(W){(x._status===0||x._status===-1)&&(x._status=2,x._result=W)}),x._status===-1&&(x._status=0,x._result=C)}if(x._status===1)return x._result.default;throw x._result}var B={current:null},A={transition:null},$={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:A,ReactCurrentOwner:se};function P(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:we,forEach:function(x,C,W){we(x,function(){C.apply(this,arguments)},W)},count:function(x){var C=0;return we(x,function(){C++}),C},toArray:function(x){return we(x,function(C){return C})||[]},only:function(x){if(!De(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ce.Component=E,Ce.Fragment=s,Ce.Profiler=l,Ce.PureComponent=Y,Ce.StrictMode=o,Ce.Suspense=g,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Ce.act=P,Ce.cloneElement=function(x,C,W){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var ee=U({},x.props),ce=x.key,de=x.ref,D=x._owner;if(C!=null){if(C.ref!==void 0&&(de=C.ref,D=se.current),C.key!==void 0&&(ce=""+C.key),x.type&&x.type.defaultProps)var fe=x.type.defaultProps;for(ve in C)te.call(C,ve)&&!le.hasOwnProperty(ve)&&(ee[ve]=C[ve]===void 0&&fe!==void 0?fe[ve]:C[ve])}var ve=arguments.length-2;if(ve===1)ee.children=W;else if(1<ve){fe=Array(ve);for(var be=0;be<ve;be++)fe[be]=arguments[be+2];ee.children=fe}return{$$typeof:a,type:x.type,key:ce,ref:de,props:ee,_owner:D}},Ce.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},Ce.createElement=Ee,Ce.createFactory=function(x){var C=Ee.bind(null,x);return C.type=x,C},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(x){return{$$typeof:p,render:x}},Ce.isValidElement=De,Ce.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:X}},Ce.memo=function(x,C){return{$$typeof:v,type:x,compare:C===void 0?null:C}},Ce.startTransition=function(x){var C=A.transition;A.transition={};try{x()}finally{A.transition=C}},Ce.unstable_act=P,Ce.useCallback=function(x,C){return B.current.useCallback(x,C)},Ce.useContext=function(x){return B.current.useContext(x)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(x){return B.current.useDeferredValue(x)},Ce.useEffect=function(x,C){return B.current.useEffect(x,C)},Ce.useId=function(){return B.current.useId()},Ce.useImperativeHandle=function(x,C,W){return B.current.useImperativeHandle(x,C,W)},Ce.useInsertionEffect=function(x,C){return B.current.useInsertionEffect(x,C)},Ce.useLayoutEffect=function(x,C){return B.current.useLayoutEffect(x,C)},Ce.useMemo=function(x,C){return B.current.useMemo(x,C)},Ce.useReducer=function(x,C,W){return B.current.useReducer(x,C,W)},Ce.useRef=function(x){return B.current.useRef(x)},Ce.useState=function(x){return B.current.useState(x)},Ce.useSyncExternalStore=function(x,C,W){return B.current.useSyncExternalStore(x,C,W)},Ce.useTransition=function(){return B.current.useTransition()},Ce.version="18.3.1",Ce}var qd;function hu(){return qd||(qd=1,Ul.exports=Fp()),Ul.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function Bp(){if(Wd)return Si;Wd=1;var a=hu(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,v){var y,b={},N=null,L=null;v!==void 0&&(N=""+v),g.key!==void 0&&(N=""+g.key),g.ref!==void 0&&(L=g.ref);for(y in g)o.call(g,y)&&!c.hasOwnProperty(y)&&(b[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)b[y]===void 0&&(b[y]=g[y]);return{$$typeof:n,type:p,key:N,ref:L,props:b,_owner:l.current}}return Si.Fragment=s,Si.jsx=h,Si.jsxs=h,Si}var Vd;function qp(){return Vd||(Vd=1,Il.exports=Bp()),Il.exports}var d=qp(),w=hu();const pu=Of(w),Wp=Dp({__proto__:null,default:pu},[w]);var Bo={},Ml={exports:{}},At={},Dl={exports:{}},zl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd;function Vp(){return Hd||(Hd=1,(function(a){function n(A,$){var P=A.length;A.push($);e:for(;0<P;){var x=P-1>>>1,C=A[x];if(0<l(C,$))A[x]=$,A[P]=C,P=x;else break e}}function s(A){return A.length===0?null:A[0]}function o(A){if(A.length===0)return null;var $=A[0],P=A.pop();if(P!==$){A[0]=P;e:for(var x=0,C=A.length,W=C>>>1;x<W;){var ee=2*(x+1)-1,ce=A[ee],de=ee+1,D=A[de];if(0>l(ce,P))de<C&&0>l(D,ce)?(A[x]=D,A[de]=P,x=de):(A[x]=ce,A[ee]=P,x=ee);else if(de<C&&0>l(D,P))A[x]=D,A[de]=P,x=de;else break e}}return $}function l(A,$){var P=A.sortIndex-$.sortIndex;return P!==0?P:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();a.unstable_now=function(){return h.now()-p}}var g=[],v=[],y=1,b=null,N=3,L=!1,U=!1,I=!1,E=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(A){for(var $=s(v);$!==null;){if($.callback===null)o(v);else if($.startTime<=A)o(v),$.sortIndex=$.expirationTime,n(g,$);else break;$=s(v)}}function Q(A){if(I=!1,z(A),!U)if(s(g)!==null)U=!0,X(te);else{var $=s(v);$!==null&&B(Q,$.startTime-A)}}function te(A,$){U=!1,I&&(I=!1,J(Ee),Ee=-1),L=!0;var P=N;try{for(z($),b=s(g);b!==null&&(!(b.expirationTime>$)||A&&!$e());){var x=b.callback;if(typeof x=="function"){b.callback=null,N=b.priorityLevel;var C=x(b.expirationTime<=$);$=a.unstable_now(),typeof C=="function"?b.callback=C:b===s(g)&&o(g),z($)}else o(g);b=s(g)}if(b!==null)var W=!0;else{var ee=s(v);ee!==null&&B(Q,ee.startTime-$),W=!1}return W}finally{b=null,N=P,L=!1}}var se=!1,le=null,Ee=-1,Ie=5,De=-1;function $e(){return!(a.unstable_now()-De<Ie)}function Z(){if(le!==null){var A=a.unstable_now();De=A;var $=!0;try{$=le(!0,A)}finally{$?me():(se=!1,le=null)}}else se=!1}var me;if(typeof Y=="function")me=function(){Y(Z)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,we=Ne.port2;Ne.port1.onmessage=Z,me=function(){we.postMessage(null)}}else me=function(){E(Z,0)};function X(A){le=A,se||(se=!0,me())}function B(A,$){Ee=E(function(){A(a.unstable_now())},$)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(A){A.callback=null},a.unstable_continueExecution=function(){U||L||(U=!0,X(te))},a.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<A?Math.floor(1e3/A):5},a.unstable_getCurrentPriorityLevel=function(){return N},a.unstable_getFirstCallbackNode=function(){return s(g)},a.unstable_next=function(A){switch(N){case 1:case 2:case 3:var $=3;break;default:$=N}var P=N;N=$;try{return A()}finally{N=P}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var P=N;N=A;try{return $()}finally{N=P}},a.unstable_scheduleCallback=function(A,$,P){var x=a.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?x+P:x):P=x,A){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=P+C,A={id:y++,callback:$,priorityLevel:A,startTime:P,expirationTime:C,sortIndex:-1},P>x?(A.sortIndex=P,n(v,A),s(g)===null&&A===s(v)&&(I?(J(Ee),Ee=-1):I=!0,B(Q,P-x))):(A.sortIndex=C,n(g,A),U||L||(U=!0,X(te))),A},a.unstable_shouldYield=$e,a.unstable_wrapCallback=function(A){var $=N;return function(){var P=N;N=$;try{return A.apply(this,arguments)}finally{N=P}}}})(zl)),zl}var Gd;function Hp(){return Gd||(Gd=1,Dl.exports=Vp()),Dl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function Gp(){if(Kd)return At;Kd=1;var a=hu(),n=Hp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},b={};function N(e){return g.call(b,e)?!0:g.call(y,e)?!1:v.test(e)?b[e]=!0:(y[e]=!0,!1)}function L(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U(e,t,r,i){if(t===null||typeof t>"u"||L(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function I(e,t,r,i,u,f,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=m}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new I(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new I(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new I(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new I(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new I(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new I(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(J,Y);E[t]=new I(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(J,Y);E[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(J,Y);E[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)});function z(e,t,r,i){var u=E.hasOwnProperty(t)?E[t]:null;(u!==null?u.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(U(t,r,u,i)&&(r=null),i||u===null?N(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,i=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Q=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),se=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),$e=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),A=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=A&&e[A]||e["@@iterator"],typeof e=="function"?e:null)}var P=Object.assign,x;function C(e){if(x===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);x=t&&t[1]||""}return`
`+x+e}var W=!1;function ee(e,t){if(!e||W)return"";W=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var i=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){i=R}e.call(t.prototype)}else{try{throw Error()}catch(R){i=R}e()}}catch(R){if(R&&i&&typeof R.stack=="string"){for(var u=R.stack.split(`
`),f=i.stack.split(`
`),m=u.length-1,_=f.length-1;1<=m&&0<=_&&u[m]!==f[_];)_--;for(;1<=m&&0<=_;m--,_--)if(u[m]!==f[_]){if(m!==1||_!==1)do if(m--,_--,0>_||u[m]!==f[_]){var k=`
`+u[m].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=m&&0<=_);break}}}finally{W=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?C(e):""}function ce(e){switch(e.tag){case 5:return C(e.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return e=ee(e.type,!1),e;case 11:return e=ee(e.type.render,!1),e;case 1:return e=ee(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case le:return"Fragment";case se:return"Portal";case Ie:return"Profiler";case Ee:return"StrictMode";case me:return"Suspense";case Ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $e:return(e.displayName||"Context")+".Consumer";case De:return(e._context.displayName||"Context")+".Provider";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case we:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}function D(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(t);case 8:return t===Ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ve(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function be(e){var t=ve(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(m){i=""+m,f.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){e._valueTracker||(e._valueTracker=be(e))}function Ge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=ve(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Ue(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function We(e,t){var r=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ye(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=fe(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ke(e,t){t=t.checked,t!=null&&z(e,"checked",t,!1)}function wt(e,t){Ke(e,t);var r=fe(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vt(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vt(e,t.type,fe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vt(e,t,r){(t!=="number"||Ue(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var rr=Array.isArray;function nr(e,t,r,i){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&i&&(e[r].defaultSelected=!0)}else{for(r=""+fe(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Mr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Et(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(rr(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:fe(r)}}function gn(e,t){var r=fe(t.value),i=fe(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Dr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var K,ge=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(K=K||document.createElement("div"),K.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=K.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xe(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ae=["Webkit","ms","Moz","O"];Object.keys(je).forEach(function(e){Ae.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),je[t]=je[e]})});function _e(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||je.hasOwnProperty(e)&&je[e]?(""+t).trim():t+"px"}function ze(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,u=_e(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,u):e[r]=u}}var ft=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function It(e,t){if(t){if(ft[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function yn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ms=null;function Fr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Br=null,sr=null,gr=null;function qn(e){if(e=ui(e)){if(typeof Br!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ro(t),Br(e.stateNode,e.type,t))}}function Wn(e){sr?gr?gr.push(e):gr=[e]:sr=e}function Vn(){if(sr){var e=sr,t=gr;if(gr=sr=null,qn(e),t)for(e=0;e<t.length;e++)qn(t[e])}}function qr(e,t){return e(t)}function $i(){}var ir=!1;function Ai(e,t,r){if(ir)return e(t,r);ir=!0;try{return qr(e,t,r)}finally{ir=!1,(sr!==null||gr!==null)&&($i(),Vn())}}function Hn(e,t){var r=e.stateNode;if(r===null)return null;var i=ro(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Ds=!1;if(p)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{Ds=!1}function zs(e,t,r,i,u,f,m,_,k){var R=Array.prototype.slice.call(arguments,3);try{t.apply(r,R)}catch(q){this.onError(q)}}var Ht=!1,wn=null,Wr=!1,Gn=null,ta={onError:function(e){Ht=!0,wn=e}};function Ii(e,t,r,i,u,f,m,_,k){Ht=!1,wn=null,zs.apply(ta,arguments)}function or(e,t,r,i,u,f,m,_,k){if(Ii.apply(this,arguments),Ht){if(Ht){var R=wn;Ht=!1,wn=null}else throw Error(s(198));Wr||(Wr=!0,Gn=R)}}function jr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Fs(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ui(e){if(jr(e)!==e)throw Error(s(188))}function Mi(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var u=r.return;if(u===null)break;var f=u.alternate;if(f===null){if(i=u.return,i!==null){r=i;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===r)return Ui(u),e;if(f===i)return Ui(u),t;f=f.sibling}throw Error(s(188))}if(r.return!==i.return)r=u,i=f;else{for(var m=!1,_=u.child;_;){if(_===r){m=!0,r=u,i=f;break}if(_===i){m=!0,i=u,r=f;break}_=_.sibling}if(!m){for(_=f.child;_;){if(_===r){m=!0,r=f,i=u;break}if(_===i){m=!0,i=f,r=u;break}_=_.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function Di(e){return e=Mi(e),e!==null?Vr(e):null}function Vr(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vr(e);if(t!==null)return t;e=e.sibling}return null}var xn=n.unstable_scheduleCallback,Kn=n.unstable_cancelCallback,Jn=n.unstable_shouldYield,Bs=n.unstable_requestPaint,Je=n.unstable_now,ra=n.unstable_getCurrentPriorityLevel,_n=n.unstable_ImmediatePriority,Qn=n.unstable_UserBlockingPriority,Yn=n.unstable_NormalPriority,na=n.unstable_LowPriority,zi=n.unstable_IdlePriority,Nr=null,Gt=null;function Fi(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Nr,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:oa,sa=Math.log,ia=Math.LN2;function oa(e){return e>>>=0,e===0?32:31-(sa(e)/ia|0)|0}var bn=64,S=4194304;function H(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ue(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,u=e.suspendedLanes,f=e.pingedLanes,m=r&268435455;if(m!==0){var _=m&~u;_!==0?i=H(_):(f&=m,f!==0&&(i=H(f)))}else m=r&~u,m!==0?i=H(m):f!==0&&(i=H(f));if(i===0)return 0;if(t!==0&&t!==i&&(t&u)===0&&(u=i&-i,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Ut(t),u=1<<r,i|=e[r],t&=~u;return i}function ke(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function st(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var m=31-Ut(f),_=1<<m,k=u[m];k===-1?((_&r)===0||(_&i)!==0)&&(u[m]=ke(_,t)):k<=t&&(e.expiredLanes|=_),f&=~_}}function Tt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tt(){var e=bn;return bn<<=1,(bn&4194240)===0&&(bn=64),e}function vr(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=r}function aa(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-Ut(r),f=1<<u;t[u]=0,i[u]=-1,e[u]=-1,r&=~f}}function Mt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Ut(r),u=1<<i;u&t|e[i]&t&&(e[i]|=t),r&=~u}}var Oe=0;function qs(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ws,Vs,Hs,Gs,Ks,Xn=!1,Zn=[],Dt=null,Kt=null,ar=null,Sn=new Map,Te=new Map,Me=[],at="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yr(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Sn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(t.pointerId)}}function Js(e,t,r,i,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[u]},t!==null&&(t=ui(t),t!==null&&Vs(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function lh(e,t,r,i,u){switch(t){case"focusin":return Dt=Js(Dt,e,t,r,i,u),!0;case"dragenter":return Kt=Js(Kt,e,t,r,i,u),!0;case"mouseover":return ar=Js(ar,e,t,r,i,u),!0;case"pointerover":var f=u.pointerId;return Sn.set(f,Js(Sn.get(f)||null,e,t,r,i,u)),!0;case"gotpointercapture":return f=u.pointerId,Te.set(f,Js(Te.get(f)||null,e,t,r,i,u)),!0}return!1}function Nu(e){var t=jn(e.target);if(t!==null){var r=jr(t);if(r!==null){if(t=r.tag,t===13){if(t=Fs(r),t!==null){e.blockedOn=t,Ks(e.priority,function(){Hs(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ua(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ms=i,r.target.dispatchEvent(i),Ms=null}else return t=ui(r),t!==null&&Vs(t),e.blockedOn=r,!1;t.shift()}return!0}function Eu(e,t,r){Bi(e)&&r.delete(t)}function uh(){Xn=!1,Dt!==null&&Bi(Dt)&&(Dt=null),Kt!==null&&Bi(Kt)&&(Kt=null),ar!==null&&Bi(ar)&&(ar=null),Sn.forEach(Eu),Te.forEach(Eu)}function Qs(e,t){e.blockedOn===t&&(e.blockedOn=null,Xn||(Xn=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uh)))}function Ys(e){function t(u){return Qs(u,e)}if(0<Zn.length){Qs(Zn[0],e);for(var r=1;r<Zn.length;r++){var i=Zn[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Dt!==null&&Qs(Dt,e),Kt!==null&&Qs(Kt,e),ar!==null&&Qs(ar,e),Sn.forEach(t),Te.forEach(t),r=0;r<Me.length;r++)i=Me[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Me.length&&(r=Me[0],r.blockedOn===null);)Nu(r),r.blockedOn===null&&Me.shift()}var es=Q.ReactCurrentBatchConfig,qi=!0;function ch(e,t,r,i){var u=Oe,f=es.transition;es.transition=null;try{Oe=1,la(e,t,r,i)}finally{Oe=u,es.transition=f}}function dh(e,t,r,i){var u=Oe,f=es.transition;es.transition=null;try{Oe=4,la(e,t,r,i)}finally{Oe=u,es.transition=f}}function la(e,t,r,i){if(qi){var u=ua(e,t,r,i);if(u===null)Na(e,t,i,Wi,r),yr(e,i);else if(lh(u,e,t,r,i))i.stopPropagation();else if(yr(e,i),t&4&&-1<at.indexOf(e)){for(;u!==null;){var f=ui(u);if(f!==null&&Ws(f),f=ua(e,t,r,i),f===null&&Na(e,t,i,Wi,r),f===u)break;u=f}u!==null&&i.stopPropagation()}else Na(e,t,i,null,r)}}var Wi=null;function ua(e,t,r,i){if(Wi=null,e=Fr(i),e=jn(e),e!==null)if(t=jr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Fs(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wi=e,null}function Cu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ra()){case _n:return 1;case Qn:return 4;case Yn:case na:return 16;case zi:return 536870912;default:return 16}default:return 16}}var Hr=null,ca=null,Vi=null;function Tu(){if(Vi)return Vi;var e,t=ca,r=t.length,i,u="value"in Hr?Hr.value:Hr.textContent,f=u.length;for(e=0;e<r&&t[e]===u[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===u[f-i];i++);return Vi=u.slice(e,1<i?1-i:void 0)}function Hi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gi(){return!0}function Pu(){return!1}function zt(e){function t(r,i,u,f,m){this._reactName=r,this._targetInst=u,this.type=i,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Gi:Pu,this.isPropagationStopped=Pu,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=zt(ts),Xs=P({},ts,{view:0,detail:0}),fh=zt(Xs),fa,ha,Zs,Ki=P({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zs&&(Zs&&e.type==="mousemove"?(fa=e.screenX-Zs.screenX,ha=e.screenY-Zs.screenY):ha=fa=0,Zs=e),fa)},movementY:function(e){return"movementY"in e?e.movementY:ha}}),Ou=zt(Ki),hh=P({},Ki,{dataTransfer:0}),ph=zt(hh),mh=P({},Xs,{relatedTarget:0}),pa=zt(mh),gh=P({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=zt(gh),yh=P({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wh=zt(yh),xh=P({},ts,{data:0}),Ru=zt(xh),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kh[e])?!!t[e]:!1}function ma(){return Sh}var jh=P({},Xs,{key:function(e){if(e.key){var t=_h[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(e){return e.type==="keypress"?Hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nh=zt(jh),Eh=P({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lu=zt(Eh),Ch=P({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),Th=zt(Ch),Ph=P({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oh=zt(Ph),Rh=P({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lh=zt(Rh),$h=[9,13,27,32],ga=p&&"CompositionEvent"in window,ei=null;p&&"documentMode"in document&&(ei=document.documentMode);var Ah=p&&"TextEvent"in window&&!ei,$u=p&&(!ga||ei&&8<ei&&11>=ei),Au=" ",Iu=!1;function Uu(e,t){switch(e){case"keyup":return $h.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function Ih(e,t){switch(e){case"compositionend":return Mu(t);case"keypress":return t.which!==32?null:(Iu=!0,Au);case"textInput":return e=t.data,e===Au&&Iu?null:e;default:return null}}function Uh(e,t){if(rs)return e==="compositionend"||!ga&&Uu(e,t)?(e=Tu(),Vi=ca=Hr=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $u&&t.locale!=="ko"?null:t.data;default:return null}}var Mh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mh[e.type]:t==="textarea"}function zu(e,t,r,i){Wn(i),t=Zi(t,"onChange"),0<t.length&&(r=new da("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ti=null,ri=null;function Dh(e){sc(e,0)}function Ji(e){var t=as(e);if(Ge(t))return e}function zh(e,t){if(e==="change")return t}var Fu=!1;if(p){var va;if(p){var ya="oninput"in document;if(!ya){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),ya=typeof Bu.oninput=="function"}va=ya}else va=!1;Fu=va&&(!document.documentMode||9<document.documentMode)}function qu(){ti&&(ti.detachEvent("onpropertychange",Wu),ri=ti=null)}function Wu(e){if(e.propertyName==="value"&&Ji(ri)){var t=[];zu(t,ri,e,Fr(e)),Ai(Dh,t)}}function Fh(e,t,r){e==="focusin"?(qu(),ti=t,ri=r,ti.attachEvent("onpropertychange",Wu)):e==="focusout"&&qu()}function Bh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ji(ri)}function qh(e,t){if(e==="click")return Ji(t)}function Wh(e,t){if(e==="input"||e==="change")return Ji(t)}function Vh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lr=typeof Object.is=="function"?Object.is:Vh;function ni(e,t){if(lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var u=r[i];if(!g.call(t,u)||!lr(e[u],t[u]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hu(e,t){var r=Vu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vu(r)}}function Gu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ku(){for(var e=window,t=Ue();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ue(e.document)}return t}function wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Hh(e){var t=Ku(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gu(r.ownerDocument.documentElement,r)){if(i!==null&&wa(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,f=Math.min(i.start,u);i=i.end===void 0?f:Math.min(i.end,u),!e.extend&&f>i&&(u=i,i=f,f=u),u=Hu(r,f);var m=Hu(r,i);u&&m&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Gh=p&&"documentMode"in document&&11>=document.documentMode,ns=null,xa=null,si=null,_a=!1;function Ju(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_a||ns==null||ns!==Ue(i)||(i=ns,"selectionStart"in i&&wa(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),si&&ni(si,i)||(si=i,i=Zi(xa,"onSelect"),0<i.length&&(t=new da("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=ns)))}function Qi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ss={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionend:Qi("Transition","TransitionEnd")},ba={},Qu={};p&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Yi(e){if(ba[e])return ba[e];if(!ss[e])return e;var t=ss[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qu)return ba[e]=t[r];return e}var Yu=Yi("animationend"),Xu=Yi("animationiteration"),Zu=Yi("animationstart"),ec=Yi("transitionend"),tc=new Map,rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(e,t){tc.set(e,t),c(t,[e])}for(var ka=0;ka<rc.length;ka++){var Sa=rc[ka],Kh=Sa.toLowerCase(),Jh=Sa[0].toUpperCase()+Sa.slice(1);Gr(Kh,"on"+Jh)}Gr(Yu,"onAnimationEnd"),Gr(Xu,"onAnimationIteration"),Gr(Zu,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(ec,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function nc(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,or(i,t,void 0,e),e.currentTarget=null}function sc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],u=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var m=i.length-1;0<=m;m--){var _=i[m],k=_.instance,R=_.currentTarget;if(_=_.listener,k!==f&&u.isPropagationStopped())break e;nc(u,_,R),f=k}else for(m=0;m<i.length;m++){if(_=i[m],k=_.instance,R=_.currentTarget,_=_.listener,k!==f&&u.isPropagationStopped())break e;nc(u,_,R),f=k}}}if(Wr)throw e=Gn,Wr=!1,Gn=null,e}function Ve(e,t){var r=t[Ra];r===void 0&&(r=t[Ra]=new Set);var i=e+"__bubble";r.has(i)||(ic(t,e,2,!1),r.add(i))}function ja(e,t,r){var i=0;t&&(i|=4),ic(r,e,i,t)}var Xi="_reactListening"+Math.random().toString(36).slice(2);function oi(e){if(!e[Xi]){e[Xi]=!0,o.forEach(function(r){r!=="selectionchange"&&(Qh.has(r)||ja(r,!1,e),ja(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xi]||(t[Xi]=!0,ja("selectionchange",!1,t))}}function ic(e,t,r,i){switch(Cu(t)){case 1:var u=ch;break;case 4:u=dh;break;default:u=la}r=u.bind(null,t,r,e),u=void 0,!Ds||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function Na(e,t,r,i,u){var f=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var _=i.stateNode.containerInfo;if(_===u||_.nodeType===8&&_.parentNode===u)break;if(m===4)for(m=i.return;m!==null;){var k=m.tag;if((k===3||k===4)&&(k=m.stateNode.containerInfo,k===u||k.nodeType===8&&k.parentNode===u))return;m=m.return}for(;_!==null;){if(m=jn(_),m===null)return;if(k=m.tag,k===5||k===6){i=f=m;continue e}_=_.parentNode}}i=i.return}Ai(function(){var R=f,q=Fr(r),V=[];e:{var F=tc.get(e);if(F!==void 0){var re=da,ie=e;switch(e){case"keypress":if(Hi(r)===0)break e;case"keydown":case"keyup":re=Nh;break;case"focusin":ie="focus",re=pa;break;case"focusout":ie="blur",re=pa;break;case"beforeblur":case"afterblur":re=pa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Th;break;case Yu:case Xu:case Zu:re=vh;break;case ec:re=Oh;break;case"scroll":re=fh;break;case"wheel":re=Lh;break;case"copy":case"cut":case"paste":re=wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Lu}var oe=(t&4)!==0,rt=!oe&&e==="scroll",T=oe?F!==null?F+"Capture":null:F;oe=[];for(var j=R,O;j!==null;){O=j;var G=O.stateNode;if(O.tag===5&&G!==null&&(O=G,T!==null&&(G=Hn(j,T),G!=null&&oe.push(ai(j,G,O)))),rt)break;j=j.return}0<oe.length&&(F=new re(F,ie,null,r,q),V.push({event:F,listeners:oe}))}}if((t&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",F&&r!==Ms&&(ie=r.relatedTarget||r.fromElement)&&(jn(ie)||ie[Er]))break e;if((re||F)&&(F=q.window===q?q:(F=q.ownerDocument)?F.defaultView||F.parentWindow:window,re?(ie=r.relatedTarget||r.toElement,re=R,ie=ie?jn(ie):null,ie!==null&&(rt=jr(ie),ie!==rt||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(re=null,ie=R),re!==ie)){if(oe=Ou,G="onMouseLeave",T="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(oe=Lu,G="onPointerLeave",T="onPointerEnter",j="pointer"),rt=re==null?F:as(re),O=ie==null?F:as(ie),F=new oe(G,j+"leave",re,r,q),F.target=rt,F.relatedTarget=O,G=null,jn(q)===R&&(oe=new oe(T,j+"enter",ie,r,q),oe.target=O,oe.relatedTarget=rt,G=oe),rt=G,re&&ie)t:{for(oe=re,T=ie,j=0,O=oe;O;O=is(O))j++;for(O=0,G=T;G;G=is(G))O++;for(;0<j-O;)oe=is(oe),j--;for(;0<O-j;)T=is(T),O--;for(;j--;){if(oe===T||T!==null&&oe===T.alternate)break t;oe=is(oe),T=is(T)}oe=null}else oe=null;re!==null&&oc(V,F,re,oe,!1),ie!==null&&rt!==null&&oc(V,rt,ie,oe,!0)}}e:{if(F=R?as(R):window,re=F.nodeName&&F.nodeName.toLowerCase(),re==="select"||re==="input"&&F.type==="file")var ae=zh;else if(Du(F))if(Fu)ae=Wh;else{ae=Bh;var he=Fh}else(re=F.nodeName)&&re.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(ae=qh);if(ae&&(ae=ae(e,R))){zu(V,ae,r,q);break e}he&&he(e,F,R),e==="focusout"&&(he=F._wrapperState)&&he.controlled&&F.type==="number"&&Vt(F,"number",F.value)}switch(he=R?as(R):window,e){case"focusin":(Du(he)||he.contentEditable==="true")&&(ns=he,xa=R,si=null);break;case"focusout":si=xa=ns=null;break;case"mousedown":_a=!0;break;case"contextmenu":case"mouseup":case"dragend":_a=!1,Ju(V,r,q);break;case"selectionchange":if(Gh)break;case"keydown":case"keyup":Ju(V,r,q)}var pe;if(ga)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else rs?Uu(e,r)&&(ye="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ye="onCompositionStart");ye&&($u&&r.locale!=="ko"&&(rs||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&rs&&(pe=Tu()):(Hr=q,ca="value"in Hr?Hr.value:Hr.textContent,rs=!0)),he=Zi(R,ye),0<he.length&&(ye=new Ru(ye,e,null,r,q),V.push({event:ye,listeners:he}),pe?ye.data=pe:(pe=Mu(r),pe!==null&&(ye.data=pe)))),(pe=Ah?Ih(e,r):Uh(e,r))&&(R=Zi(R,"onBeforeInput"),0<R.length&&(q=new Ru("onBeforeInput","beforeinput",null,r,q),V.push({event:q,listeners:R}),q.data=pe))}sc(V,t)})}function ai(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Zi(e,t){for(var r=t+"Capture",i=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Hn(e,r),f!=null&&i.unshift(ai(e,f,u)),f=Hn(e,t),f!=null&&i.push(ai(e,f,u))),e=e.return}return i}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oc(e,t,r,i,u){for(var f=t._reactName,m=[];r!==null&&r!==i;){var _=r,k=_.alternate,R=_.stateNode;if(k!==null&&k===i)break;_.tag===5&&R!==null&&(_=R,u?(k=Hn(r,f),k!=null&&m.unshift(ai(r,k,_))):u||(k=Hn(r,f),k!=null&&m.push(ai(r,k,_)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var Yh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function ac(e){return(typeof e=="string"?e:""+e).replace(Yh,`
`).replace(Xh,"")}function eo(e,t,r){if(t=ac(t),ac(e)!==t&&r)throw Error(s(425))}function to(){}var Ea=null,Ca=null;function Ta(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,lc=typeof Promise=="function"?Promise:void 0,ep=typeof queueMicrotask=="function"?queueMicrotask:typeof lc<"u"?function(e){return lc.resolve(null).then(e).catch(tp)}:Pa;function tp(e){setTimeout(function(){throw e})}function Oa(e,t){var r=t,i=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0){e.removeChild(u),Ys(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=u}while(r);Ys(t)}function Kr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var os=Math.random().toString(36).slice(2),wr="__reactFiber$"+os,li="__reactProps$"+os,Er="__reactContainer$"+os,Ra="__reactEvents$"+os,rp="__reactListeners$"+os,np="__reactHandles$"+os;function jn(e){var t=e[wr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Er]||r[wr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=uc(e);e!==null;){if(r=e[wr])return r;e=uc(e)}return t}e=r,r=e.parentNode}return null}function ui(e){return e=e[wr]||e[Er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function as(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ro(e){return e[li]||null}var La=[],ls=-1;function Jr(e){return{current:e}}function He(e){0>ls||(e.current=La[ls],La[ls]=null,ls--)}function Fe(e,t){ls++,La[ls]=e.current,e.current=t}var Qr={},xt=Jr(Qr),Pt=Jr(!1),Nn=Qr;function us(e,t){var r=e.type.contextTypes;if(!r)return Qr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in r)u[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Ot(e){return e=e.childContextTypes,e!=null}function no(){He(Pt),He(xt)}function cc(e,t,r){if(xt.current!==Qr)throw Error(s(168));Fe(xt,t),Fe(Pt,r)}function dc(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var u in i)if(!(u in t))throw Error(s(108,D(e)||"Unknown",u));return P({},r,i)}function so(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qr,Nn=xt.current,Fe(xt,e),Fe(Pt,Pt.current),!0}function fc(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=dc(e,t,Nn),i.__reactInternalMemoizedMergedChildContext=e,He(Pt),He(xt),Fe(xt,e)):He(Pt),Fe(Pt,r)}var Cr=null,io=!1,$a=!1;function hc(e){Cr===null?Cr=[e]:Cr.push(e)}function sp(e){io=!0,hc(e)}function Yr(){if(!$a&&Cr!==null){$a=!0;var e=0,t=Oe;try{var r=Cr;for(Oe=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Cr=null,io=!1}catch(u){throw Cr!==null&&(Cr=Cr.slice(e+1)),xn(_n,Yr),u}finally{Oe=t,$a=!1}}return null}var cs=[],ds=0,oo=null,ao=0,Jt=[],Qt=0,En=null,Tr=1,Pr="";function Cn(e,t){cs[ds++]=ao,cs[ds++]=oo,oo=e,ao=t}function pc(e,t,r){Jt[Qt++]=Tr,Jt[Qt++]=Pr,Jt[Qt++]=En,En=e;var i=Tr;e=Pr;var u=32-Ut(i)-1;i&=~(1<<u),r+=1;var f=32-Ut(t)+u;if(30<f){var m=u-u%5;f=(i&(1<<m)-1).toString(32),i>>=m,u-=m,Tr=1<<32-Ut(t)+u|r<<u|i,Pr=f+e}else Tr=1<<f|r<<u|i,Pr=e}function Aa(e){e.return!==null&&(Cn(e,1),pc(e,1,0))}function Ia(e){for(;e===oo;)oo=cs[--ds],cs[ds]=null,ao=cs[--ds],cs[ds]=null;for(;e===En;)En=Jt[--Qt],Jt[Qt]=null,Pr=Jt[--Qt],Jt[Qt]=null,Tr=Jt[--Qt],Jt[Qt]=null}var Ft=null,Bt=null,Qe=!1,ur=null;function mc(e,t){var r=er(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,Bt=Kr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=En!==null?{id:Tr,overflow:Pr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=er(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ft=e,Bt=null,!0):!1;default:return!1}}function Ua(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ma(e){if(Qe){var t=Bt;if(t){var r=t;if(!gc(e,t)){if(Ua(e))throw Error(s(418));t=Kr(r.nextSibling);var i=Ft;t&&gc(e,t)?mc(i,r):(e.flags=e.flags&-4097|2,Qe=!1,Ft=e)}}else{if(Ua(e))throw Error(s(418));e.flags=e.flags&-4097|2,Qe=!1,Ft=e}}}function vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function lo(e){if(e!==Ft)return!1;if(!Qe)return vc(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ta(e.type,e.memoizedProps)),t&&(t=Bt)){if(Ua(e))throw yc(),Error(s(418));for(;t;)mc(e,t),t=Kr(t.nextSibling)}if(vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Bt=Kr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Ft?Kr(e.stateNode.nextSibling):null;return!0}function yc(){for(var e=Bt;e;)e=Kr(e.nextSibling)}function fs(){Bt=Ft=null,Qe=!1}function Da(e){ur===null?ur=[e]:ur.push(e)}var ip=Q.ReactCurrentBatchConfig;function ci(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var u=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(m){var _=u.refs;m===null?delete _[f]:_[f]=m},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function uo(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wc(e){var t=e._init;return t(e._payload)}function xc(e){function t(T,j){if(e){var O=T.deletions;O===null?(T.deletions=[j],T.flags|=16):O.push(j)}}function r(T,j){if(!e)return null;for(;j!==null;)t(T,j),j=j.sibling;return null}function i(T,j){for(T=new Map;j!==null;)j.key!==null?T.set(j.key,j):T.set(j.index,j),j=j.sibling;return T}function u(T,j){return T=on(T,j),T.index=0,T.sibling=null,T}function f(T,j,O){return T.index=O,e?(O=T.alternate,O!==null?(O=O.index,O<j?(T.flags|=2,j):O):(T.flags|=2,j)):(T.flags|=1048576,j)}function m(T){return e&&T.alternate===null&&(T.flags|=2),T}function _(T,j,O,G){return j===null||j.tag!==6?(j=Pl(O,T.mode,G),j.return=T,j):(j=u(j,O),j.return=T,j)}function k(T,j,O,G){var ae=O.type;return ae===le?q(T,j,O.props.children,G,O.key):j!==null&&(j.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===X&&wc(ae)===j.type)?(G=u(j,O.props),G.ref=ci(T,j,O),G.return=T,G):(G=$o(O.type,O.key,O.props,null,T.mode,G),G.ref=ci(T,j,O),G.return=T,G)}function R(T,j,O,G){return j===null||j.tag!==4||j.stateNode.containerInfo!==O.containerInfo||j.stateNode.implementation!==O.implementation?(j=Ol(O,T.mode,G),j.return=T,j):(j=u(j,O.children||[]),j.return=T,j)}function q(T,j,O,G,ae){return j===null||j.tag!==7?(j=In(O,T.mode,G,ae),j.return=T,j):(j=u(j,O),j.return=T,j)}function V(T,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Pl(""+j,T.mode,O),j.return=T,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case te:return O=$o(j.type,j.key,j.props,null,T.mode,O),O.ref=ci(T,null,j),O.return=T,O;case se:return j=Ol(j,T.mode,O),j.return=T,j;case X:var G=j._init;return V(T,G(j._payload),O)}if(rr(j)||$(j))return j=In(j,T.mode,O,null),j.return=T,j;uo(T,j)}return null}function F(T,j,O,G){var ae=j!==null?j.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ae!==null?null:_(T,j,""+O,G);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case te:return O.key===ae?k(T,j,O,G):null;case se:return O.key===ae?R(T,j,O,G):null;case X:return ae=O._init,F(T,j,ae(O._payload),G)}if(rr(O)||$(O))return ae!==null?null:q(T,j,O,G,null);uo(T,O)}return null}function re(T,j,O,G,ae){if(typeof G=="string"&&G!==""||typeof G=="number")return T=T.get(O)||null,_(j,T,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case te:return T=T.get(G.key===null?O:G.key)||null,k(j,T,G,ae);case se:return T=T.get(G.key===null?O:G.key)||null,R(j,T,G,ae);case X:var he=G._init;return re(T,j,O,he(G._payload),ae)}if(rr(G)||$(G))return T=T.get(O)||null,q(j,T,G,ae,null);uo(j,G)}return null}function ie(T,j,O,G){for(var ae=null,he=null,pe=j,ye=j=0,mt=null;pe!==null&&ye<O.length;ye++){pe.index>ye?(mt=pe,pe=null):mt=pe.sibling;var Le=F(T,pe,O[ye],G);if(Le===null){pe===null&&(pe=mt);break}e&&pe&&Le.alternate===null&&t(T,pe),j=f(Le,j,ye),he===null?ae=Le:he.sibling=Le,he=Le,pe=mt}if(ye===O.length)return r(T,pe),Qe&&Cn(T,ye),ae;if(pe===null){for(;ye<O.length;ye++)pe=V(T,O[ye],G),pe!==null&&(j=f(pe,j,ye),he===null?ae=pe:he.sibling=pe,he=pe);return Qe&&Cn(T,ye),ae}for(pe=i(T,pe);ye<O.length;ye++)mt=re(pe,T,ye,O[ye],G),mt!==null&&(e&&mt.alternate!==null&&pe.delete(mt.key===null?ye:mt.key),j=f(mt,j,ye),he===null?ae=mt:he.sibling=mt,he=mt);return e&&pe.forEach(function(an){return t(T,an)}),Qe&&Cn(T,ye),ae}function oe(T,j,O,G){var ae=$(O);if(typeof ae!="function")throw Error(s(150));if(O=ae.call(O),O==null)throw Error(s(151));for(var he=ae=null,pe=j,ye=j=0,mt=null,Le=O.next();pe!==null&&!Le.done;ye++,Le=O.next()){pe.index>ye?(mt=pe,pe=null):mt=pe.sibling;var an=F(T,pe,Le.value,G);if(an===null){pe===null&&(pe=mt);break}e&&pe&&an.alternate===null&&t(T,pe),j=f(an,j,ye),he===null?ae=an:he.sibling=an,he=an,pe=mt}if(Le.done)return r(T,pe),Qe&&Cn(T,ye),ae;if(pe===null){for(;!Le.done;ye++,Le=O.next())Le=V(T,Le.value,G),Le!==null&&(j=f(Le,j,ye),he===null?ae=Le:he.sibling=Le,he=Le);return Qe&&Cn(T,ye),ae}for(pe=i(T,pe);!Le.done;ye++,Le=O.next())Le=re(pe,T,ye,Le.value,G),Le!==null&&(e&&Le.alternate!==null&&pe.delete(Le.key===null?ye:Le.key),j=f(Le,j,ye),he===null?ae=Le:he.sibling=Le,he=Le);return e&&pe.forEach(function(Mp){return t(T,Mp)}),Qe&&Cn(T,ye),ae}function rt(T,j,O,G){if(typeof O=="object"&&O!==null&&O.type===le&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case te:e:{for(var ae=O.key,he=j;he!==null;){if(he.key===ae){if(ae=O.type,ae===le){if(he.tag===7){r(T,he.sibling),j=u(he,O.props.children),j.return=T,T=j;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===X&&wc(ae)===he.type){r(T,he.sibling),j=u(he,O.props),j.ref=ci(T,he,O),j.return=T,T=j;break e}r(T,he);break}else t(T,he);he=he.sibling}O.type===le?(j=In(O.props.children,T.mode,G,O.key),j.return=T,T=j):(G=$o(O.type,O.key,O.props,null,T.mode,G),G.ref=ci(T,j,O),G.return=T,T=G)}return m(T);case se:e:{for(he=O.key;j!==null;){if(j.key===he)if(j.tag===4&&j.stateNode.containerInfo===O.containerInfo&&j.stateNode.implementation===O.implementation){r(T,j.sibling),j=u(j,O.children||[]),j.return=T,T=j;break e}else{r(T,j);break}else t(T,j);j=j.sibling}j=Ol(O,T.mode,G),j.return=T,T=j}return m(T);case X:return he=O._init,rt(T,j,he(O._payload),G)}if(rr(O))return ie(T,j,O,G);if($(O))return oe(T,j,O,G);uo(T,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,j!==null&&j.tag===6?(r(T,j.sibling),j=u(j,O),j.return=T,T=j):(r(T,j),j=Pl(O,T.mode,G),j.return=T,T=j),m(T)):r(T,j)}return rt}var hs=xc(!0),_c=xc(!1),co=Jr(null),fo=null,ps=null,za=null;function Fa(){za=ps=fo=null}function Ba(e){var t=co.current;He(co),e._currentValue=t}function qa(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function ms(e,t){fo=e,za=ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Rt=!0),e.firstContext=null)}function Yt(e){var t=e._currentValue;if(za!==e)if(e={context:e,memoizedValue:t,next:null},ps===null){if(fo===null)throw Error(s(308));ps=e,fo.dependencies={lanes:0,firstContext:e}}else ps=ps.next=e;return t}var Tn=null;function Wa(e){Tn===null?Tn=[e]:Tn.push(e)}function bc(e,t,r,i){var u=t.interleaved;return u===null?(r.next=r,Wa(t)):(r.next=u.next,u.next=r),t.interleaved=r,Or(e,i)}function Or(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xr=!1;function Va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Re&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,Or(e,r)}return u=i.interleaved,u===null?(t.next=t,Wa(i)):(t.next=u.next,u.next=t),i.interleaved=t,Or(e,r)}function ho(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Mt(e,r)}}function Sc(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var u=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?u=f=m:f=f.next=m,r=r.next}while(r!==null);f===null?u=f=t:f=f.next=t}else u=f=t;r={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function po(e,t,r,i){var u=e.updateQueue;Xr=!1;var f=u.firstBaseUpdate,m=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var k=_,R=k.next;k.next=null,m===null?f=R:m.next=R,m=k;var q=e.alternate;q!==null&&(q=q.updateQueue,_=q.lastBaseUpdate,_!==m&&(_===null?q.firstBaseUpdate=R:_.next=R,q.lastBaseUpdate=k))}if(f!==null){var V=u.baseState;m=0,q=R=k=null,_=f;do{var F=_.lane,re=_.eventTime;if((i&F)===F){q!==null&&(q=q.next={eventTime:re,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ie=e,oe=_;switch(F=t,re=r,oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){V=ie.call(re,V,F);break e}V=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,F=typeof ie=="function"?ie.call(re,V,F):ie,F==null)break e;V=P({},V,F);break e;case 2:Xr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,F=u.effects,F===null?u.effects=[_]:F.push(_))}else re={eventTime:re,lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},q===null?(R=q=re,k=V):q=q.next=re,m|=F;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;F=_,_=F.next,F.next=null,u.lastBaseUpdate=F,u.shared.pending=null}}while(!0);if(q===null&&(k=V),u.baseState=k,u.firstBaseUpdate=R,u.lastBaseUpdate=q,t=u.shared.interleaved,t!==null){u=t;do m|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);Rn|=m,e.lanes=m,e.memoizedState=V}}function jc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],u=i.callback;if(u!==null){if(i.callback=null,i=r,typeof u!="function")throw Error(s(191,u));u.call(i)}}}var di={},xr=Jr(di),fi=Jr(di),hi=Jr(di);function Pn(e){if(e===di)throw Error(s(174));return e}function Ha(e,t){switch(Fe(hi,t),Fe(fi,e),Fe(xr,di),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zr(t,e)}He(xr),Fe(xr,t)}function gs(){He(xr),He(fi),He(hi)}function Nc(e){Pn(hi.current);var t=Pn(xr.current),r=zr(t,e.type);t!==r&&(Fe(fi,e),Fe(xr,r))}function Ga(e){fi.current===e&&(He(xr),He(fi))}var Xe=Jr(0);function mo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ka=[];function Ja(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var go=Q.ReactCurrentDispatcher,Qa=Q.ReactCurrentBatchConfig,On=0,Ze=null,lt=null,ht=null,vo=!1,pi=!1,mi=0,op=0;function _t(){throw Error(s(321))}function Ya(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lr(e[r],t[r]))return!1;return!0}function Xa(e,t,r,i,u,f){if(On=f,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,go.current=e===null||e.memoizedState===null?cp:dp,e=r(i,u),pi){f=0;do{if(pi=!1,mi=0,25<=f)throw Error(s(301));f+=1,ht=lt=null,t.updateQueue=null,go.current=fp,e=r(i,u)}while(pi)}if(go.current=xo,t=lt!==null&&lt.next!==null,On=0,ht=lt=Ze=null,vo=!1,t)throw Error(s(300));return e}function Za(){var e=mi!==0;return mi=0,e}function _r(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ze.memoizedState=ht=e:ht=ht.next=e,ht}function Xt(){if(lt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ht===null?Ze.memoizedState:ht.next;if(t!==null)ht=t,lt=e;else{if(e===null)throw Error(s(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?Ze.memoizedState=ht=e:ht=ht.next=e}return ht}function gi(e,t){return typeof t=="function"?t(e):t}function el(e){var t=Xt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=lt,u=i.baseQueue,f=r.pending;if(f!==null){if(u!==null){var m=u.next;u.next=f.next,f.next=m}i.baseQueue=u=f,r.pending=null}if(u!==null){f=u.next,i=i.baseState;var _=m=null,k=null,R=f;do{var q=R.lane;if((On&q)===q)k!==null&&(k=k.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),i=R.hasEagerState?R.eagerState:e(i,R.action);else{var V={lane:q,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};k===null?(_=k=V,m=i):k=k.next=V,Ze.lanes|=q,Rn|=q}R=R.next}while(R!==null&&R!==f);k===null?m=i:k.next=_,lr(i,t.memoizedState)||(Rt=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=k,r.lastRenderedState=i}if(e=r.interleaved,e!==null){u=e;do f=u.lane,Ze.lanes|=f,Rn|=f,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tl(e){var t=Xt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,u=r.pending,f=t.memoizedState;if(u!==null){r.pending=null;var m=u=u.next;do f=e(f,m.action),m=m.next;while(m!==u);lr(f,t.memoizedState)||(Rt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function Ec(){}function Cc(e,t){var r=Ze,i=Xt(),u=t(),f=!lr(i.memoizedState,u);if(f&&(i.memoizedState=u,Rt=!0),i=i.queue,rl(Oc.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||ht!==null&&ht.memoizedState.tag&1){if(r.flags|=2048,vi(9,Pc.bind(null,r,i,u,t),void 0,null),pt===null)throw Error(s(349));(On&30)!==0||Tc(r,t,u)}return u}function Tc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Pc(e,t,r,i){t.value=r,t.getSnapshot=i,Rc(t)&&Lc(e)}function Oc(e,t,r){return r(function(){Rc(t)&&Lc(e)})}function Rc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lr(e,r)}catch{return!0}}function Lc(e){var t=Or(e,1);t!==null&&hr(t,e,1,-1)}function $c(e){var t=_r();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t.queue=e,e=e.dispatch=up.bind(null,Ze,e),[t.memoizedState,e]}function vi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Ac(){return Xt().memoizedState}function yo(e,t,r,i){var u=_r();Ze.flags|=e,u.memoizedState=vi(1|t,r,void 0,i===void 0?null:i)}function wo(e,t,r,i){var u=Xt();i=i===void 0?null:i;var f=void 0;if(lt!==null){var m=lt.memoizedState;if(f=m.destroy,i!==null&&Ya(i,m.deps)){u.memoizedState=vi(t,r,f,i);return}}Ze.flags|=e,u.memoizedState=vi(1|t,r,f,i)}function Ic(e,t){return yo(8390656,8,e,t)}function rl(e,t){return wo(2048,8,e,t)}function Uc(e,t){return wo(4,2,e,t)}function Mc(e,t){return wo(4,4,e,t)}function Dc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zc(e,t,r){return r=r!=null?r.concat([e]):null,wo(4,4,Dc.bind(null,t,e),r)}function nl(){}function Fc(e,t){var r=Xt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Ya(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Bc(e,t){var r=Xt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Ya(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function qc(e,t,r){return(On&21)===0?(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=r):(lr(r,t)||(r=tt(),Ze.lanes|=r,Rn|=r,e.baseState=!0),t)}function ap(e,t){var r=Oe;Oe=r!==0&&4>r?r:4,e(!0);var i=Qa.transition;Qa.transition={};try{e(!1),t()}finally{Oe=r,Qa.transition=i}}function Wc(){return Xt().memoizedState}function lp(e,t,r){var i=nn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Vc(e))Hc(t,r);else if(r=bc(e,t,r,i),r!==null){var u=jt();hr(r,e,i,u),Gc(r,t,i)}}function up(e,t,r){var i=nn(e),u={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vc(e))Hc(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var m=t.lastRenderedState,_=f(m,r);if(u.hasEagerState=!0,u.eagerState=_,lr(_,m)){var k=t.interleaved;k===null?(u.next=u,Wa(t)):(u.next=k.next,k.next=u),t.interleaved=u;return}}catch{}finally{}r=bc(e,t,u,i),r!==null&&(u=jt(),hr(r,e,i,u),Gc(r,t,i))}}function Vc(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function Hc(e,t){pi=vo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Gc(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Mt(e,r)}}var xo={readContext:Yt,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},cp={readContext:Yt,useCallback:function(e,t){return _r().memoizedState=[e,t===void 0?null:t],e},useContext:Yt,useEffect:Ic,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,yo(4194308,4,Dc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var r=_r();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=_r();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=lp.bind(null,Ze,e),[i.memoizedState,e]},useRef:function(e){var t=_r();return e={current:e},t.memoizedState=e},useState:$c,useDebugValue:nl,useDeferredValue:function(e){return _r().memoizedState=e},useTransition:function(){var e=$c(!1),t=e[0];return e=ap.bind(null,e[1]),_r().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ze,u=_r();if(Qe){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),pt===null)throw Error(s(349));(On&30)!==0||Tc(i,t,r)}u.memoizedState=r;var f={value:r,getSnapshot:t};return u.queue=f,Ic(Oc.bind(null,i,f,e),[e]),i.flags|=2048,vi(9,Pc.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=_r(),t=pt.identifierPrefix;if(Qe){var r=Pr,i=Tr;r=(i&~(1<<32-Ut(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=mi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=op++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dp={readContext:Yt,useCallback:Fc,useContext:Yt,useEffect:rl,useImperativeHandle:zc,useInsertionEffect:Uc,useLayoutEffect:Mc,useMemo:Bc,useReducer:el,useRef:Ac,useState:function(){return el(gi)},useDebugValue:nl,useDeferredValue:function(e){var t=Xt();return qc(t,lt.memoizedState,e)},useTransition:function(){var e=el(gi)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Wc,unstable_isNewReconciler:!1},fp={readContext:Yt,useCallback:Fc,useContext:Yt,useEffect:rl,useImperativeHandle:zc,useInsertionEffect:Uc,useLayoutEffect:Mc,useMemo:Bc,useReducer:tl,useRef:Ac,useState:function(){return tl(gi)},useDebugValue:nl,useDeferredValue:function(e){var t=Xt();return lt===null?t.memoizedState=e:qc(t,lt.memoizedState,e)},useTransition:function(){var e=tl(gi)[0],t=Xt().memoizedState;return[e,t]},useMutableSource:Ec,useSyncExternalStore:Cc,useId:Wc,unstable_isNewReconciler:!1};function cr(e,t){if(e&&e.defaultProps){t=P({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:P({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _o={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=jt(),u=nn(e),f=Rr(i,u);f.payload=t,r!=null&&(f.callback=r),t=Zr(e,f,u),t!==null&&(hr(t,e,u,i),ho(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=jt(),u=nn(e),f=Rr(i,u);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Zr(e,f,u),t!==null&&(hr(t,e,u,i),ho(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jt(),i=nn(e),u=Rr(r,i);u.tag=2,t!=null&&(u.callback=t),t=Zr(e,u,i),t!==null&&(hr(t,e,i,r),ho(t,e,i))}};function Kc(e,t,r,i,u,f,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,m):t.prototype&&t.prototype.isPureReactComponent?!ni(r,i)||!ni(u,f):!0}function Jc(e,t,r){var i=!1,u=Qr,f=t.contextType;return typeof f=="object"&&f!==null?f=Yt(f):(u=Ot(t)?Nn:xt.current,i=t.contextTypes,f=(i=i!=null)?us(e,u):Qr),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_o,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function Qc(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&_o.enqueueReplaceState(t,t.state,null)}function il(e,t,r,i){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs={},Va(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=Yt(f):(f=Ot(t)?Nn:xt.current,u.context=us(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(sl(e,t,f,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&_o.enqueueReplaceState(u,u.state,null),po(e,r,u,i),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function vs(e,t){try{var r="",i=t;do r+=ce(i),i=i.return;while(i);var u=r}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function ol(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function al(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hp=typeof WeakMap=="function"?WeakMap:Map;function Yc(e,t,r){r=Rr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Co||(Co=!0,bl=i),al(e,t)},r}function Xc(e,t,r){r=Rr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var u=t.value;r.payload=function(){return i(u)},r.callback=function(){al(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){al(e,t),typeof i!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function Zc(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new hp;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(r)||(u.add(r),e=Ep.bind(null,e,t,r),t.then(e,e))}function ed(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function td(e,t,r,i,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rr(-1,1),t.tag=2,Zr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var pp=Q.ReactCurrentOwner,Rt=!1;function St(e,t,r,i){t.child=e===null?_c(t,null,r,i):hs(t,e.child,r,i)}function rd(e,t,r,i,u){r=r.render;var f=t.ref;return ms(t,u),i=Xa(e,t,r,i,f,u),r=Za(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Lr(e,t,u)):(Qe&&r&&Aa(t),t.flags|=1,St(e,t,i,u),t.child)}function nd(e,t,r,i,u){if(e===null){var f=r.type;return typeof f=="function"&&!Tl(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,sd(e,t,f,i,u)):(e=$o(r.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&u)===0){var m=f.memoizedProps;if(r=r.compare,r=r!==null?r:ni,r(m,i)&&e.ref===t.ref)return Lr(e,t,u)}return t.flags|=1,e=on(f,i),e.ref=t.ref,e.return=t,t.child=e}function sd(e,t,r,i,u){if(e!==null){var f=e.memoizedProps;if(ni(f,i)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=i=f,(e.lanes&u)!==0)(e.flags&131072)!==0&&(Rt=!0);else return t.lanes=e.lanes,Lr(e,t,u)}return ll(e,t,r,i,u)}function id(e,t,r){var i=t.pendingProps,u=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ws,qt),qt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(ws,qt),qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,Fe(ws,qt),qt|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,Fe(ws,qt),qt|=i;return St(e,t,u,r),t.child}function od(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ll(e,t,r,i,u){var f=Ot(r)?Nn:xt.current;return f=us(t,f),ms(t,u),r=Xa(e,t,r,i,f,u),i=Za(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Lr(e,t,u)):(Qe&&i&&Aa(t),t.flags|=1,St(e,t,r,u),t.child)}function ad(e,t,r,i,u){if(Ot(r)){var f=!0;so(t)}else f=!1;if(ms(t,u),t.stateNode===null)ko(e,t),Jc(t,r,i),il(t,r,i,u),i=!0;else if(e===null){var m=t.stateNode,_=t.memoizedProps;m.props=_;var k=m.context,R=r.contextType;typeof R=="object"&&R!==null?R=Yt(R):(R=Ot(r)?Nn:xt.current,R=us(t,R));var q=r.getDerivedStateFromProps,V=typeof q=="function"||typeof m.getSnapshotBeforeUpdate=="function";V||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==i||k!==R)&&Qc(t,m,i,R),Xr=!1;var F=t.memoizedState;m.state=F,po(t,i,m,u),k=t.memoizedState,_!==i||F!==k||Pt.current||Xr?(typeof q=="function"&&(sl(t,r,q,i),k=t.memoizedState),(_=Xr||Kc(t,r,_,i,F,k,R))?(V||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=k),m.props=i,m.state=k,m.context=R,i=_):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,kc(e,t),_=t.memoizedProps,R=t.type===t.elementType?_:cr(t.type,_),m.props=R,V=t.pendingProps,F=m.context,k=r.contextType,typeof k=="object"&&k!==null?k=Yt(k):(k=Ot(r)?Nn:xt.current,k=us(t,k));var re=r.getDerivedStateFromProps;(q=typeof re=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==V||F!==k)&&Qc(t,m,i,k),Xr=!1,F=t.memoizedState,m.state=F,po(t,i,m,u);var ie=t.memoizedState;_!==V||F!==ie||Pt.current||Xr?(typeof re=="function"&&(sl(t,r,re,i),ie=t.memoizedState),(R=Xr||Kc(t,r,R,i,F,ie,k)||!1)?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,ie,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,ie,k)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ie),m.props=i,m.state=ie,m.context=k,i=R):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),i=!1)}return ul(e,t,r,i,f,u)}function ul(e,t,r,i,u,f){od(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return u&&fc(t,r,!1),Lr(e,t,f);i=t.stateNode,pp.current=t;var _=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=hs(t,e.child,null,f),t.child=hs(t,null,_,f)):St(e,t,_,f),t.memoizedState=i.state,u&&fc(t,r,!0),t.child}function ld(e){var t=e.stateNode;t.pendingContext?cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cc(e,t.context,!1),Ha(e,t.containerInfo)}function ud(e,t,r,i,u){return fs(),Da(u),t.flags|=256,St(e,t,r,i),t.child}var cl={dehydrated:null,treeContext:null,retryLane:0};function dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function cd(e,t,r){var i=t.pendingProps,u=Xe.current,f=!1,m=(t.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(u&2)!==0),_?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Fe(Xe,u&1),e===null)return Ma(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,f?(i=t.mode,f=t.child,m={mode:"hidden",children:m},(i&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=m):f=Ao(m,i,0,null),e=In(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=dl(r),t.memoizedState=cl,e):fl(t,m));if(u=e.memoizedState,u!==null&&(_=u.dehydrated,_!==null))return mp(e,t,m,i,_,u,r);if(f){f=i.fallback,m=t.mode,u=e.child,_=u.sibling;var k={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==u?(i=t.child,i.childLanes=0,i.pendingProps=k,t.deletions=null):(i=on(u,k),i.subtreeFlags=u.subtreeFlags&14680064),_!==null?f=on(_,f):(f=In(f,m,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,m=e.child.memoizedState,m=m===null?dl(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=e.childLanes&~r,t.memoizedState=cl,i}return f=e.child,e=f.sibling,i=on(f,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function fl(e,t){return t=Ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bo(e,t,r,i){return i!==null&&Da(i),hs(t,e.child,null,r),e=fl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mp(e,t,r,i,u,f,m){if(r)return t.flags&256?(t.flags&=-257,i=ol(Error(s(422))),bo(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,u=t.mode,i=Ao({mode:"visible",children:i.children},u,0,null),f=In(f,u,m,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,(t.mode&1)!==0&&hs(t,e.child,null,m),t.child.memoizedState=dl(m),t.memoizedState=cl,f);if((t.mode&1)===0)return bo(e,t,m,null);if(u.data==="$!"){if(i=u.nextSibling&&u.nextSibling.dataset,i)var _=i.dgst;return i=_,f=Error(s(419)),i=ol(f,i,void 0),bo(e,t,m,i)}if(_=(m&e.childLanes)!==0,Rt||_){if(i=pt,i!==null){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(i.suspendedLanes|m))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,Or(e,u),hr(i,e,u,-1))}return Cl(),i=ol(Error(s(421))),bo(e,t,m,i)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Cp.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,Bt=Kr(u.nextSibling),Ft=t,Qe=!0,ur=null,e!==null&&(Jt[Qt++]=Tr,Jt[Qt++]=Pr,Jt[Qt++]=En,Tr=e.id,Pr=e.overflow,En=t),t=fl(t,i.children),t.flags|=4096,t)}function dd(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),qa(e.return,t,r)}function hl(e,t,r,i,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=u)}function fd(e,t,r){var i=t.pendingProps,u=i.revealOrder,f=i.tail;if(St(e,t,i.children,r),i=Xe.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dd(e,r,t);else if(e.tag===19)dd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Fe(Xe,i),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&mo(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),hl(t,!1,u,r,f);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&mo(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}hl(t,!0,r,null,f);break;case"together":hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ko(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=on(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=on(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gp(e,t,r){switch(t.tag){case 3:ld(t),fs();break;case 5:Nc(t);break;case 1:Ot(t.type)&&so(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,u=t.memoizedProps.value;Fe(co,i._currentValue),i._currentValue=u;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Xe,Xe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?cd(e,t,r):(Fe(Xe,Xe.current&1),e=Lr(e,t,r),e!==null?e.sibling:null);Fe(Xe,Xe.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return fd(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Fe(Xe,Xe.current),i)break;return null;case 22:case 23:return t.lanes=0,id(e,t,r)}return Lr(e,t,r)}var hd,pl,pd,md;hd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},pl=function(){},pd=function(e,t,r,i){var u=e.memoizedProps;if(u!==i){e=t.stateNode,Pn(xr.current);var f=null;switch(r){case"input":u=We(e,u),i=We(e,i),f=[];break;case"select":u=P({},u,{value:void 0}),i=P({},i,{value:void 0}),f=[];break;case"textarea":u=Mr(e,u),i=Mr(e,i),f=[];break;default:typeof u.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=to)}It(r,i);var m;r=null;for(R in u)if(!i.hasOwnProperty(R)&&u.hasOwnProperty(R)&&u[R]!=null)if(R==="style"){var _=u[R];for(m in _)_.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(l.hasOwnProperty(R)?f||(f=[]):(f=f||[]).push(R,null));for(R in i){var k=i[R];if(_=u?.[R],i.hasOwnProperty(R)&&k!==_&&(k!=null||_!=null))if(R==="style")if(_){for(m in _)!_.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in k)k.hasOwnProperty(m)&&_[m]!==k[m]&&(r||(r={}),r[m]=k[m])}else r||(f||(f=[]),f.push(R,r)),r=k;else R==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,_=_?_.__html:void 0,k!=null&&_!==k&&(f=f||[]).push(R,k)):R==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(R,""+k):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(l.hasOwnProperty(R)?(k!=null&&R==="onScroll"&&Ve("scroll",e),f||_===k||(f=[])):(f=f||[]).push(R,k))}r&&(f=f||[]).push("style",r);var R=f;(t.updateQueue=R)&&(t.flags|=4)}},md=function(e,t,r,i){r!==i&&(t.flags|=4)};function yi(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,i|=u.subtreeFlags&14680064,i|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function vp(e,t,r){var i=t.pendingProps;switch(Ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Ot(t.type)&&no(),bt(t),null;case 3:return i=t.stateNode,gs(),He(Pt),He(xt),Ja(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(lo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ur!==null&&(jl(ur),ur=null))),pl(e,t),bt(t),null;case 5:Ga(t);var u=Pn(hi.current);if(r=t.type,e!==null&&t.stateNode!=null)pd(e,t,r,i,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return bt(t),null}if(e=Pn(xr.current),lo(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[wr]=t,i[li]=f,e=(t.mode&1)!==0,r){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(u=0;u<ii.length;u++)Ve(ii[u],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ye(i,f),Ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Ve("invalid",i);break;case"textarea":Et(i,f),Ve("invalid",i)}It(r,f),u=null;for(var m in f)if(f.hasOwnProperty(m)){var _=f[m];m==="children"?typeof _=="string"?i.textContent!==_&&(f.suppressHydrationWarning!==!0&&eo(i.textContent,_,e),u=["children",_]):typeof _=="number"&&i.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&eo(i.textContent,_,e),u=["children",""+_]):l.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Ve("scroll",i)}switch(r){case"input":qe(i),Wt(i,f,!0);break;case"textarea":qe(i),Dr(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=to)}i=u,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vn(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[wr]=t,e[li]=i,hd(e,t,!1,!1),t.stateNode=e;e:{switch(m=yn(r,i),r){case"dialog":Ve("cancel",e),Ve("close",e),u=i;break;case"iframe":case"object":case"embed":Ve("load",e),u=i;break;case"video":case"audio":for(u=0;u<ii.length;u++)Ve(ii[u],e);u=i;break;case"source":Ve("error",e),u=i;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),u=i;break;case"details":Ve("toggle",e),u=i;break;case"input":Ye(e,i),u=We(e,i),Ve("invalid",e);break;case"option":u=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},u=P({},i,{value:void 0}),Ve("invalid",e);break;case"textarea":Et(e,i),u=Mr(e,i),Ve("invalid",e);break;default:u=i}It(r,u),_=u;for(f in _)if(_.hasOwnProperty(f)){var k=_[f];f==="style"?ze(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&ge(e,k)):f==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&xe(e,k):typeof k=="number"&&xe(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Ve("scroll",e):k!=null&&z(e,f,k,m))}switch(r){case"input":qe(e),Wt(e,i,!1);break;case"textarea":qe(e),Dr(e);break;case"option":i.value!=null&&e.setAttribute("value",""+fe(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?nr(e,!!i.multiple,f,!1):i.defaultValue!=null&&nr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=to)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)md(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(r=Pn(hi.current),Pn(xr.current),lo(t)){if(i=t.stateNode,r=t.memoizedProps,i[wr]=t,(f=i.nodeValue!==r)&&(e=Ft,e!==null))switch(e.tag){case 3:eo(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&eo(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[wr]=t,t.stateNode=i}return bt(t),null;case 13:if(He(Xe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&Bt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)yc(),fs(),t.flags|=98560,f=!1;else if(f=lo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[wr]=t}else fs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),f=!1}else ur!==null&&(jl(ur),ur=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Xe.current&1)!==0?ut===0&&(ut=3):Cl())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return gs(),pl(e,t),e===null&&oi(t.stateNode.containerInfo),bt(t),null;case 10:return Ba(t.type._context),bt(t),null;case 17:return Ot(t.type)&&no(),bt(t),null;case 19:if(He(Xe),f=t.memoizedState,f===null)return bt(t),null;if(i=(t.flags&128)!==0,m=f.rendering,m===null)if(i)yi(f,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=mo(e),m!==null){for(t.flags|=128,yi(f,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,e=m.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Fe(Xe,Xe.current&1|2),t.child}e=e.sibling}f.tail!==null&&Je()>xs&&(t.flags|=128,i=!0,yi(f,!1),t.lanes=4194304)}else{if(!i)if(e=mo(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Qe)return bt(t),null}else 2*Je()-f.renderingStartTime>xs&&r!==1073741824&&(t.flags|=128,i=!0,yi(f,!1),t.lanes=4194304);f.isBackwards?(m.sibling=t.child,t.child=m):(r=f.last,r!==null?r.sibling=m:t.child=m,f.last=m)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Je(),t.sibling=null,r=Xe.current,Fe(Xe,i?r&1|2:r&1),t):(bt(t),null);case 22:case 23:return El(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(qt&1073741824)!==0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function yp(e,t){switch(Ia(t),t.tag){case 1:return Ot(t.type)&&no(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gs(),He(Pt),He(xt),Ja(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ga(t),null;case 13:if(He(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));fs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Xe),null;case 4:return gs(),null;case 10:return Ba(t.type._context),null;case 22:case 23:return El(),null;case 24:return null;default:return null}}var So=!1,kt=!1,wp=typeof WeakSet=="function"?WeakSet:Set,ne=null;function ys(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){et(e,t,i)}else r.current=null}function ml(e,t,r){try{r()}catch(i){et(e,t,i)}}var gd=!1;function xp(e,t){if(Ea=qi,e=Ku(),wa(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var u=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var m=0,_=-1,k=-1,R=0,q=0,V=e,F=null;t:for(;;){for(var re;V!==r||u!==0&&V.nodeType!==3||(_=m+u),V!==f||i!==0&&V.nodeType!==3||(k=m+i),V.nodeType===3&&(m+=V.nodeValue.length),(re=V.firstChild)!==null;)F=V,V=re;for(;;){if(V===e)break t;if(F===r&&++R===u&&(_=m),F===f&&++q===i&&(k=m),(re=V.nextSibling)!==null)break;V=F,F=V.parentNode}V=re}r=_===-1||k===-1?null:{start:_,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ca={focusedElem:e,selectionRange:r},qi=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var oe=ie.memoizedProps,rt=ie.memoizedState,T=t.stateNode,j=T.getSnapshotBeforeUpdate(t.elementType===t.type?oe:cr(t.type,oe),rt);T.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(G){et(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return ie=gd,gd=!1,ie}function wi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&ml(t,r,f)}u=u.next}while(u!==i)}}function jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function gl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vd(e){var t=e.alternate;t!==null&&(e.alternate=null,vd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wr],delete t[li],delete t[Ra],delete t[rp],delete t[np])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yd(e){return e.tag===5||e.tag===3||e.tag===4}function wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=to));else if(i!==4&&(e=e.child,e!==null))for(vl(e,t,r),e=e.sibling;e!==null;)vl(e,t,r),e=e.sibling}function yl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(yl(e,t,r),e=e.sibling;e!==null;)yl(e,t,r),e=e.sibling}var vt=null,dr=!1;function en(e,t,r){for(r=r.child;r!==null;)xd(e,t,r),r=r.sibling}function xd(e,t,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Nr,r)}catch{}switch(r.tag){case 5:kt||ys(r,t);case 6:var i=vt,u=dr;vt=null,en(e,t,r),vt=i,dr=u,vt!==null&&(dr?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(dr?(e=vt,r=r.stateNode,e.nodeType===8?Oa(e.parentNode,r):e.nodeType===1&&Oa(e,r),Ys(e)):Oa(vt,r.stateNode));break;case 4:i=vt,u=dr,vt=r.stateNode.containerInfo,dr=!0,en(e,t,r),vt=i,dr=u;break;case 0:case 11:case 14:case 15:if(!kt&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){u=i=i.next;do{var f=u,m=f.destroy;f=f.tag,m!==void 0&&((f&2)!==0||(f&4)!==0)&&ml(r,t,m),u=u.next}while(u!==i)}en(e,t,r);break;case 1:if(!kt&&(ys(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(_){et(r,t,_)}en(e,t,r);break;case 21:en(e,t,r);break;case 22:r.mode&1?(kt=(i=kt)||r.memoizedState!==null,en(e,t,r),kt=i):en(e,t,r);break;default:en(e,t,r)}}function _d(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new wp),t.forEach(function(i){var u=Tp.bind(null,e,i);r.has(i)||(r.add(i),i.then(u,u))})}}function fr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var u=r[i];try{var f=e,m=t,_=m;e:for(;_!==null;){switch(_.tag){case 5:vt=_.stateNode,dr=!1;break e;case 3:vt=_.stateNode.containerInfo,dr=!0;break e;case 4:vt=_.stateNode.containerInfo,dr=!0;break e}_=_.return}if(vt===null)throw Error(s(160));xd(f,m,u),vt=null,dr=!1;var k=u.alternate;k!==null&&(k.return=null),u.return=null}catch(R){et(u,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bd(t,e),t=t.sibling}function bd(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fr(t,e),br(e),i&4){try{wi(3,e,e.return),jo(3,e)}catch(oe){et(e,e.return,oe)}try{wi(5,e,e.return)}catch(oe){et(e,e.return,oe)}}break;case 1:fr(t,e),br(e),i&512&&r!==null&&ys(r,r.return);break;case 5:if(fr(t,e),br(e),i&512&&r!==null&&ys(r,r.return),e.flags&32){var u=e.stateNode;try{xe(u,"")}catch(oe){et(e,e.return,oe)}}if(i&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,m=r!==null?r.memoizedProps:f,_=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&Ke(u,f),yn(_,m);var R=yn(_,f);for(m=0;m<k.length;m+=2){var q=k[m],V=k[m+1];q==="style"?ze(u,V):q==="dangerouslySetInnerHTML"?ge(u,V):q==="children"?xe(u,V):z(u,q,V,R)}switch(_){case"input":wt(u,f);break;case"textarea":gn(u,f);break;case"select":var F=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var re=f.value;re!=null?nr(u,!!f.multiple,re,!1):F!==!!f.multiple&&(f.defaultValue!=null?nr(u,!!f.multiple,f.defaultValue,!0):nr(u,!!f.multiple,f.multiple?[]:"",!1))}u[li]=f}catch(oe){et(e,e.return,oe)}}break;case 6:if(fr(t,e),br(e),i&4){if(e.stateNode===null)throw Error(s(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(oe){et(e,e.return,oe)}}break;case 3:if(fr(t,e),br(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ys(t.containerInfo)}catch(oe){et(e,e.return,oe)}break;case 4:fr(t,e),br(e);break;case 13:fr(t,e),br(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(_l=Je())),i&4&&_d(e);break;case 22:if(q=r!==null&&r.memoizedState!==null,e.mode&1?(kt=(R=kt)||q,fr(t,e),kt=R):fr(t,e),br(e),i&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!q&&(e.mode&1)!==0)for(ne=e,q=e.child;q!==null;){for(V=ne=q;ne!==null;){switch(F=ne,re=F.child,F.tag){case 0:case 11:case 14:case 15:wi(4,F,F.return);break;case 1:ys(F,F.return);var ie=F.stateNode;if(typeof ie.componentWillUnmount=="function"){i=F,r=F.return;try{t=i,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(oe){et(i,r,oe)}}break;case 5:ys(F,F.return);break;case 22:if(F.memoizedState!==null){jd(V);continue}}re!==null?(re.return=F,ne=re):jd(V)}q=q.sibling}e:for(q=null,V=e;;){if(V.tag===5){if(q===null){q=V;try{u=V.stateNode,R?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=V.stateNode,k=V.memoizedProps.style,m=k!=null&&k.hasOwnProperty("display")?k.display:null,_.style.display=_e("display",m))}catch(oe){et(e,e.return,oe)}}}else if(V.tag===6){if(q===null)try{V.stateNode.nodeValue=R?"":V.memoizedProps}catch(oe){et(e,e.return,oe)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===e)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===e)break e;for(;V.sibling===null;){if(V.return===null||V.return===e)break e;q===V&&(q=null),V=V.return}q===V&&(q=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:fr(t,e),br(e),i&4&&_d(e);break;case 21:break;default:fr(t,e),br(e)}}function br(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(yd(r)){var i=r;break e}r=r.return}throw Error(s(160))}switch(i.tag){case 5:var u=i.stateNode;i.flags&32&&(xe(u,""),i.flags&=-33);var f=wd(e);yl(e,f,u);break;case 3:case 4:var m=i.stateNode.containerInfo,_=wd(e);vl(e,_,m);break;default:throw Error(s(161))}}catch(k){et(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _p(e,t,r){ne=e,kd(e)}function kd(e,t,r){for(var i=(e.mode&1)!==0;ne!==null;){var u=ne,f=u.child;if(u.tag===22&&i){var m=u.memoizedState!==null||So;if(!m){var _=u.alternate,k=_!==null&&_.memoizedState!==null||kt;_=So;var R=kt;if(So=m,(kt=k)&&!R)for(ne=u;ne!==null;)m=ne,k=m.child,m.tag===22&&m.memoizedState!==null?Nd(u):k!==null?(k.return=m,ne=k):Nd(u);for(;f!==null;)ne=f,kd(f),f=f.sibling;ne=u,So=_,kt=R}Sd(e)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,ne=f):Sd(e)}}function Sd(e){for(;ne!==null;){var t=ne;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:kt||jo(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!kt)if(r===null)i.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:cr(t.type,r.memoizedProps);i.componentDidUpdate(u,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&jc(t,f,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}jc(t,m,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var q=R.memoizedState;if(q!==null){var V=q.dehydrated;V!==null&&Ys(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}kt||t.flags&512&&gl(t)}catch(F){et(t,t.return,F)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function jd(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Nd(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{jo(4,t)}catch(k){et(t,r,k)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var u=t.return;try{i.componentDidMount()}catch(k){et(t,u,k)}}var f=t.return;try{gl(t)}catch(k){et(t,f,k)}break;case 5:var m=t.return;try{gl(t)}catch(k){et(t,m,k)}}}catch(k){et(t,t.return,k)}if(t===e){ne=null;break}var _=t.sibling;if(_!==null){_.return=t.return,ne=_;break}ne=t.return}}var bp=Math.ceil,No=Q.ReactCurrentDispatcher,wl=Q.ReactCurrentOwner,Zt=Q.ReactCurrentBatchConfig,Re=0,pt=null,it=null,yt=0,qt=0,ws=Jr(0),ut=0,xi=null,Rn=0,Eo=0,xl=0,_i=null,Lt=null,_l=0,xs=1/0,$r=null,Co=!1,bl=null,tn=null,To=!1,rn=null,Po=0,bi=0,kl=null,Oo=-1,Ro=0;function jt(){return(Re&6)!==0?Je():Oo!==-1?Oo:Oo=Je()}function nn(e){return(e.mode&1)===0?1:(Re&2)!==0&&yt!==0?yt&-yt:ip.transition!==null?(Ro===0&&(Ro=tt()),Ro):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:Cu(e.type)),e)}function hr(e,t,r,i){if(50<bi)throw bi=0,kl=null,Error(s(185));kn(e,r,i),((Re&2)===0||e!==pt)&&(e===pt&&((Re&2)===0&&(Eo|=r),ut===4&&sn(e,yt)),$t(e,i),r===1&&Re===0&&(t.mode&1)===0&&(xs=Je()+500,io&&Yr()))}function $t(e,t){var r=e.callbackNode;st(e,t);var i=ue(e,e===pt?yt:0);if(i===0)r!==null&&Kn(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Kn(r),t===1)e.tag===0?sp(Cd.bind(null,e)):hc(Cd.bind(null,e)),ep(function(){(Re&6)===0&&Yr()}),r=null;else{switch(qs(i)){case 1:r=_n;break;case 4:r=Qn;break;case 16:r=Yn;break;case 536870912:r=zi;break;default:r=Yn}r=Id(r,Ed.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ed(e,t){if(Oo=-1,Ro=0,(Re&6)!==0)throw Error(s(327));var r=e.callbackNode;if(_s()&&e.callbackNode!==r)return null;var i=ue(e,e===pt?yt:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Lo(e,i);else{t=i;var u=Re;Re|=2;var f=Pd();(pt!==e||yt!==t)&&($r=null,xs=Je()+500,$n(e,t));do try{jp();break}catch(_){Td(e,_)}while(!0);Fa(),No.current=f,Re=u,it!==null?t=0:(pt=null,yt=0,t=ut)}if(t!==0){if(t===2&&(u=Tt(e),u!==0&&(i=u,t=Sl(e,u))),t===1)throw r=xi,$n(e,0),sn(e,i),$t(e,Je()),r;if(t===6)sn(e,i);else{if(u=e.current.alternate,(i&30)===0&&!kp(u)&&(t=Lo(e,i),t===2&&(f=Tt(e),f!==0&&(i=f,t=Sl(e,f))),t===1))throw r=xi,$n(e,0),sn(e,i),$t(e,Je()),r;switch(e.finishedWork=u,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:An(e,Lt,$r);break;case 3:if(sn(e,i),(i&130023424)===i&&(t=_l+500-Je(),10<t)){if(ue(e,0)!==0)break;if(u=e.suspendedLanes,(u&i)!==i){jt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Pa(An.bind(null,e,Lt,$r),t);break}An(e,Lt,$r);break;case 4:if(sn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,u=-1;0<i;){var m=31-Ut(i);f=1<<m,m=t[m],m>u&&(u=m),i&=~f}if(i=u,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bp(i/1960))-i,10<i){e.timeoutHandle=Pa(An.bind(null,e,Lt,$r),i);break}An(e,Lt,$r);break;case 5:An(e,Lt,$r);break;default:throw Error(s(329))}}}return $t(e,Je()),e.callbackNode===r?Ed.bind(null,e):null}function Sl(e,t){var r=_i;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=Lo(e,t),e!==2&&(t=Lt,Lt=r,t!==null&&jl(t)),e}function jl(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function kp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var u=r[i],f=u.getSnapshot;u=u.value;try{if(!lr(f(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~xl,t&=~Eo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ut(t),i=1<<r;e[r]=-1,t&=~i}}function Cd(e){if((Re&6)!==0)throw Error(s(327));_s();var t=ue(e,0);if((t&1)===0)return $t(e,Je()),null;var r=Lo(e,t);if(e.tag!==0&&r===2){var i=Tt(e);i!==0&&(t=i,r=Sl(e,i))}if(r===1)throw r=xi,$n(e,0),sn(e,t),$t(e,Je()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,Lt,$r),$t(e,Je()),null}function Nl(e,t){var r=Re;Re|=1;try{return e(t)}finally{Re=r,Re===0&&(xs=Je()+500,io&&Yr())}}function Ln(e){rn!==null&&rn.tag===0&&(Re&6)===0&&_s();var t=Re;Re|=1;var r=Zt.transition,i=Oe;try{if(Zt.transition=null,Oe=1,e)return e()}finally{Oe=i,Zt.transition=r,Re=t,(Re&6)===0&&Yr()}}function El(){qt=ws.current,He(ws)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Zh(r)),it!==null)for(r=it.return;r!==null;){var i=r;switch(Ia(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&no();break;case 3:gs(),He(Pt),He(xt),Ja();break;case 5:Ga(i);break;case 4:gs();break;case 13:He(Xe);break;case 19:He(Xe);break;case 10:Ba(i.type._context);break;case 22:case 23:El()}r=r.return}if(pt=e,it=e=on(e.current,null),yt=qt=t,ut=0,xi=null,xl=Eo=Rn=0,Lt=_i=null,Tn!==null){for(t=0;t<Tn.length;t++)if(r=Tn[t],i=r.interleaved,i!==null){r.interleaved=null;var u=i.next,f=r.pending;if(f!==null){var m=f.next;f.next=u,i.next=m}r.pending=i}Tn=null}return e}function Td(e,t){do{var r=it;try{if(Fa(),go.current=xo,vo){for(var i=Ze.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}vo=!1}if(On=0,ht=lt=Ze=null,pi=!1,mi=0,wl.current=null,r===null||r.return===null){ut=1,xi=t,it=null;break}e:{var f=e,m=r.return,_=r,k=t;if(t=yt,_.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var R=k,q=_,V=q.tag;if((q.mode&1)===0&&(V===0||V===11||V===15)){var F=q.alternate;F?(q.updateQueue=F.updateQueue,q.memoizedState=F.memoizedState,q.lanes=F.lanes):(q.updateQueue=null,q.memoizedState=null)}var re=ed(m);if(re!==null){re.flags&=-257,td(re,m,_,f,t),re.mode&1&&Zc(f,R,t),t=re,k=R;var ie=t.updateQueue;if(ie===null){var oe=new Set;oe.add(k),t.updateQueue=oe}else ie.add(k);break e}else{if((t&1)===0){Zc(f,R,t),Cl();break e}k=Error(s(426))}}else if(Qe&&_.mode&1){var rt=ed(m);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),td(rt,m,_,f,t),Da(vs(k,_));break e}}f=k=vs(k,_),ut!==4&&(ut=2),_i===null?_i=[f]:_i.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var T=Yc(f,k,t);Sc(f,T);break e;case 1:_=k;var j=f.type,O=f.stateNode;if((f.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(tn===null||!tn.has(O)))){f.flags|=65536,t&=-t,f.lanes|=t;var G=Xc(f,_,t);Sc(f,G);break e}}f=f.return}while(f!==null)}Rd(r)}catch(ae){t=ae,it===r&&r!==null&&(it=r=r.return);continue}break}while(!0)}function Pd(){var e=No.current;return No.current=xo,e===null?xo:e}function Cl(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||(Rn&268435455)===0&&(Eo&268435455)===0||sn(pt,yt)}function Lo(e,t){var r=Re;Re|=2;var i=Pd();(pt!==e||yt!==t)&&($r=null,$n(e,t));do try{Sp();break}catch(u){Td(e,u)}while(!0);if(Fa(),Re=r,No.current=i,it!==null)throw Error(s(261));return pt=null,yt=0,ut}function Sp(){for(;it!==null;)Od(it)}function jp(){for(;it!==null&&!Jn();)Od(it)}function Od(e){var t=Ad(e.alternate,e,qt);e.memoizedProps=e.pendingProps,t===null?Rd(e):it=t,wl.current=null}function Rd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=vp(r,t,qt),r!==null){it=r;return}}else{if(r=yp(r,t),r!==null){r.flags&=32767,it=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,it=null;return}}if(t=t.sibling,t!==null){it=t;return}it=t=e}while(t!==null);ut===0&&(ut=5)}function An(e,t,r){var i=Oe,u=Zt.transition;try{Zt.transition=null,Oe=1,Np(e,t,r,i)}finally{Zt.transition=u,Oe=i}return null}function Np(e,t,r,i){do _s();while(rn!==null);if((Re&6)!==0)throw Error(s(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(aa(e,f),e===pt&&(it=pt=null,yt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||To||(To=!0,Id(Yn,function(){return _s(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=Zt.transition,Zt.transition=null;var m=Oe;Oe=1;var _=Re;Re|=4,wl.current=null,xp(e,r),bd(r,e),Hh(Ca),qi=!!Ea,Ca=Ea=null,e.current=r,_p(r),Bs(),Re=_,Oe=m,Zt.transition=f}else e.current=r;if(To&&(To=!1,rn=e,Po=u),f=e.pendingLanes,f===0&&(tn=null),Fi(r.stateNode),$t(e,Je()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],i(u.value,{componentStack:u.stack,digest:u.digest});if(Co)throw Co=!1,e=bl,bl=null,e;return(Po&1)!==0&&e.tag!==0&&_s(),f=e.pendingLanes,(f&1)!==0?e===kl?bi++:(bi=0,kl=e):bi=0,Yr(),null}function _s(){if(rn!==null){var e=qs(Po),t=Zt.transition,r=Oe;try{if(Zt.transition=null,Oe=16>e?16:e,rn===null)var i=!1;else{if(e=rn,rn=null,Po=0,(Re&6)!==0)throw Error(s(331));var u=Re;for(Re|=4,ne=e.current;ne!==null;){var f=ne,m=f.child;if((ne.flags&16)!==0){var _=f.deletions;if(_!==null){for(var k=0;k<_.length;k++){var R=_[k];for(ne=R;ne!==null;){var q=ne;switch(q.tag){case 0:case 11:case 15:wi(8,q,f)}var V=q.child;if(V!==null)V.return=q,ne=V;else for(;ne!==null;){q=ne;var F=q.sibling,re=q.return;if(vd(q),q===R){ne=null;break}if(F!==null){F.return=re,ne=F;break}ne=re}}}var ie=f.alternate;if(ie!==null){var oe=ie.child;if(oe!==null){ie.child=null;do{var rt=oe.sibling;oe.sibling=null,oe=rt}while(oe!==null)}}ne=f}}if((f.subtreeFlags&2064)!==0&&m!==null)m.return=f,ne=m;else e:for(;ne!==null;){if(f=ne,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:wi(9,f,f.return)}var T=f.sibling;if(T!==null){T.return=f.return,ne=T;break e}ne=f.return}}var j=e.current;for(ne=j;ne!==null;){m=ne;var O=m.child;if((m.subtreeFlags&2064)!==0&&O!==null)O.return=m,ne=O;else e:for(m=j;ne!==null;){if(_=ne,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:jo(9,_)}}catch(ae){et(_,_.return,ae)}if(_===m){ne=null;break e}var G=_.sibling;if(G!==null){G.return=_.return,ne=G;break e}ne=_.return}}if(Re=u,Yr(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Nr,e)}catch{}i=!0}return i}finally{Oe=r,Zt.transition=t}}return!1}function Ld(e,t,r){t=vs(r,t),t=Yc(e,t,1),e=Zr(e,t,1),t=jt(),e!==null&&(kn(e,1,t),$t(e,t))}function et(e,t,r){if(e.tag===3)Ld(e,e,r);else for(;t!==null;){if(t.tag===3){Ld(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tn===null||!tn.has(i))){e=vs(r,e),e=Xc(t,e,1),t=Zr(t,e,1),e=jt(),t!==null&&(kn(t,1,e),$t(t,e));break}}t=t.return}}function Ep(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(yt&r)===r&&(ut===4||ut===3&&(yt&130023424)===yt&&500>Je()-_l?$n(e,0):xl|=r),$t(e,t)}function $d(e,t){t===0&&((e.mode&1)===0?t=1:(t=S,S<<=1,(S&130023424)===0&&(S=4194304)));var r=jt();e=Or(e,t),e!==null&&(kn(e,t,r),$t(e,r))}function Cp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$d(e,r)}function Tp(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),$d(e,r)}var Ad;Ad=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pt.current)Rt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Rt=!1,gp(e,t,r);Rt=(e.flags&131072)!==0}else Rt=!1,Qe&&(t.flags&1048576)!==0&&pc(t,ao,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ko(e,t),e=t.pendingProps;var u=us(t,xt.current);ms(t,r),u=Xa(null,t,i,e,u,r);var f=Za();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ot(i)?(f=!0,so(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Va(t),u.updater=_o,t.stateNode=u,u._reactInternals=t,il(t,i,e,r),t=ul(null,t,i,!0,f,r)):(t.tag=0,Qe&&f&&Aa(t),St(null,t,u,r),t=t.child),t;case 16:i=t.elementType;e:{switch(ko(e,t),e=t.pendingProps,u=i._init,i=u(i._payload),t.type=i,u=t.tag=Op(i),e=cr(i,e),u){case 0:t=ll(null,t,i,e,r);break e;case 1:t=ad(null,t,i,e,r);break e;case 11:t=rd(null,t,i,e,r);break e;case 14:t=nd(null,t,i,cr(i.type,e),r);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:cr(i,u),ll(e,t,i,u,r);case 1:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:cr(i,u),ad(e,t,i,u,r);case 3:e:{if(ld(t),e===null)throw Error(s(387));i=t.pendingProps,f=t.memoizedState,u=f.element,kc(e,t),po(t,i,null,r);var m=t.memoizedState;if(i=m.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=vs(Error(s(423)),t),t=ud(e,t,i,r,u);break e}else if(i!==u){u=vs(Error(s(424)),t),t=ud(e,t,i,r,u);break e}else for(Bt=Kr(t.stateNode.containerInfo.firstChild),Ft=t,Qe=!0,ur=null,r=_c(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fs(),i===u){t=Lr(e,t,r);break e}St(e,t,i,r)}t=t.child}return t;case 5:return Nc(t),e===null&&Ma(t),i=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,m=u.children,Ta(i,u)?m=null:f!==null&&Ta(i,f)&&(t.flags|=32),od(e,t),St(e,t,m,r),t.child;case 6:return e===null&&Ma(t),null;case 13:return cd(e,t,r);case 4:return Ha(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=hs(t,null,i,r):St(e,t,i,r),t.child;case 11:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:cr(i,u),rd(e,t,i,u,r);case 7:return St(e,t,t.pendingProps,r),t.child;case 8:return St(e,t,t.pendingProps.children,r),t.child;case 12:return St(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,u=t.pendingProps,f=t.memoizedProps,m=u.value,Fe(co,i._currentValue),i._currentValue=m,f!==null)if(lr(f.value,m)){if(f.children===u.children&&!Pt.current){t=Lr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var _=f.dependencies;if(_!==null){m=f.child;for(var k=_.firstContext;k!==null;){if(k.context===i){if(f.tag===1){k=Rr(-1,r&-r),k.tag=2;var R=f.updateQueue;if(R!==null){R=R.shared;var q=R.pending;q===null?k.next=k:(k.next=q.next,q.next=k),R.pending=k}}f.lanes|=r,k=f.alternate,k!==null&&(k.lanes|=r),qa(f.return,r,t),_.lanes|=r;break}k=k.next}}else if(f.tag===10)m=f.type===t.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(s(341));m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),qa(m,r,t),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===t){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}St(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,i=t.pendingProps.children,ms(t,r),u=Yt(u),i=i(u),t.flags|=1,St(e,t,i,r),t.child;case 14:return i=t.type,u=cr(i,t.pendingProps),u=cr(i.type,u),nd(e,t,i,u,r);case 15:return sd(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:cr(i,u),ko(e,t),t.tag=1,Ot(i)?(e=!0,so(t)):e=!1,ms(t,r),Jc(t,i,u),il(t,i,u,r),ul(null,t,i,!0,e,r);case 19:return fd(e,t,r);case 22:return id(e,t,r)}throw Error(s(156,t.tag))};function Id(e,t){return xn(e,t)}function Pp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(e,t,r,i){return new Pp(e,t,r,i)}function Tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Op(e){if(typeof e=="function")return Tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Z)return 11;if(e===we)return 14}return 2}function on(e,t){var r=e.alternate;return r===null?(r=er(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $o(e,t,r,i,u,f){var m=2;if(i=e,typeof e=="function")Tl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case le:return In(r.children,u,f,t);case Ee:m=8,u|=8;break;case Ie:return e=er(12,r,t,u|2),e.elementType=Ie,e.lanes=f,e;case me:return e=er(13,r,t,u),e.elementType=me,e.lanes=f,e;case Ne:return e=er(19,r,t,u),e.elementType=Ne,e.lanes=f,e;case B:return Ao(r,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case De:m=10;break e;case $e:m=9;break e;case Z:m=11;break e;case we:m=14;break e;case X:m=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=er(m,r,t,u),t.elementType=e,t.type=i,t.lanes=f,t}function In(e,t,r,i){return e=er(7,e,i,t),e.lanes=r,e}function Ao(e,t,r,i){return e=er(22,e,i,t),e.elementType=B,e.lanes=r,e.stateNode={isHidden:!1},e}function Pl(e,t,r){return e=er(6,e,null,t),e.lanes=r,e}function Ol(e,t,r){return t=er(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rp(e,t,r,i,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vr(0),this.expirationTimes=vr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.identifierPrefix=i,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Rl(e,t,r,i,u,f,m,_,k){return e=new Rp(e,t,r,_,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=er(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Va(f),e}function Lp(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Ud(e){if(!e)return Qr;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(Ot(r))return dc(e,r,t)}return t}function Md(e,t,r,i,u,f,m,_,k){return e=Rl(r,i,!0,e,u,f,m,_,k),e.context=Ud(null),r=e.current,i=jt(),u=nn(r),f=Rr(i,u),f.callback=t??null,Zr(r,f,u),e.current.lanes=u,kn(e,u,i),$t(e,i),e}function Io(e,t,r,i){var u=t.current,f=jt(),m=nn(u);return r=Ud(r),t.context===null?t.context=r:t.pendingContext=r,t=Rr(f,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Zr(u,t,m),e!==null&&(hr(e,u,m,f),ho(e,u,m)),m}function Uo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ll(e,t){Dd(e,t),(e=e.alternate)&&Dd(e,t)}function $p(){return null}var zd=typeof reportError=="function"?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}Mo.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Io(e,t,null,null)},Mo.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ln(function(){Io(null,e,null,null)}),t[Er]=null}};function Mo(e){this._internalRoot=e}Mo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gs();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Me.length&&t!==0&&t<Me[r].priority;r++);Me.splice(r,0,e),r===0&&Nu(e)}};function Al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Do(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fd(){}function Ap(e,t,r,i,u){if(u){if(typeof i=="function"){var f=i;i=function(){var R=Uo(m);f.call(R)}}var m=Md(t,i,e,0,null,!1,!1,"",Fd);return e._reactRootContainer=m,e[Er]=m.current,oi(e.nodeType===8?e.parentNode:e),Ln(),m}for(;u=e.lastChild;)e.removeChild(u);if(typeof i=="function"){var _=i;i=function(){var R=Uo(k);_.call(R)}}var k=Rl(e,0,!1,null,null,!1,!1,"",Fd);return e._reactRootContainer=k,e[Er]=k.current,oi(e.nodeType===8?e.parentNode:e),Ln(function(){Io(t,k,r,i)}),k}function zo(e,t,r,i,u){var f=r._reactRootContainer;if(f){var m=f;if(typeof u=="function"){var _=u;u=function(){var k=Uo(m);_.call(k)}}Io(t,m,e,u)}else m=Ap(r,t,e,u,i);return Uo(m)}Ws=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=H(t.pendingLanes);r!==0&&(Mt(t,r|1),$t(t,Je()),(Re&6)===0&&(xs=Je()+500,Yr()))}break;case 13:Ln(function(){var i=Or(e,1);if(i!==null){var u=jt();hr(i,e,1,u)}}),Ll(e,1)}},Vs=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var r=jt();hr(t,e,134217728,r)}Ll(e,134217728)}},Hs=function(e){if(e.tag===13){var t=nn(e),r=Or(e,t);if(r!==null){var i=jt();hr(r,e,t,i)}Ll(e,t)}},Gs=function(){return Oe},Ks=function(e,t){var r=Oe;try{return Oe=e,t()}finally{Oe=r}},Br=function(e,t,r){switch(t){case"input":if(wt(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var u=ro(i);if(!u)throw Error(s(90));Ge(i),wt(i,u)}}}break;case"textarea":gn(e,r);break;case"select":t=r.value,t!=null&&nr(e,!!r.multiple,t,!1)}},qr=Nl,$i=Ln;var Ip={usingClientEntryPoint:!1,Events:[ui,as,ro,Wn,Vn,Nl]},ki={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Up={bundleType:ki.bundleType,version:ki.version,rendererPackageName:ki.rendererPackageName,rendererConfig:ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Di(e),e===null?null:e.stateNode},findFiberByHostInstance:ki.findFiberByHostInstance||$p,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{Nr=Fo.inject(Up),Gt=Fo}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ip,At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Al(t))throw Error(s(200));return Lp(e,t,null,r)},At.createRoot=function(e,t){if(!Al(e))throw Error(s(299));var r=!1,i="",u=zd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Rl(e,1,!1,null,null,r,!1,i,u),e[Er]=t.current,oi(e.nodeType===8?e.parentNode:e),new $l(t)},At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Di(t),e=e===null?null:e.stateNode,e},At.flushSync=function(e){return Ln(e)},At.hydrate=function(e,t,r){if(!Do(t))throw Error(s(200));return zo(null,e,t,!0,r)},At.hydrateRoot=function(e,t,r){if(!Al(e))throw Error(s(405));var i=r!=null&&r.hydratedSources||null,u=!1,f="",m=zd;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Md(t,null,e,1,r??null,u,!1,f,m),e[Er]=t.current,oi(e),i)for(e=0;e<i.length;e++)r=i[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new Mo(t)},At.render=function(e,t,r){if(!Do(t))throw Error(s(200));return zo(null,e,t,!1,r)},At.unmountComponentAtNode=function(e){if(!Do(e))throw Error(s(40));return e._reactRootContainer?(Ln(function(){zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Er]=null})}),!0):!1},At.unstable_batchedUpdates=Nl,At.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Do(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return zo(e,t,r,!1,i)},At.version="18.3.1-next-f1338f8080-20240426",At}var Jd;function Rf(){if(Jd)return Ml.exports;Jd=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Ml.exports=Gp(),Ml.exports}var Qd;function Kp(){if(Qd)return Bo;Qd=1;var a=Rf();return Bo.createRoot=a.createRoot,Bo.hydrateRoot=a.hydrateRoot,Bo}var Jp=Kp();Rf();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pi(){return Pi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},Pi.apply(this,arguments)}var dn;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(dn||(dn={}));const Yd="popstate";function Qp(a){a===void 0&&(a={});function n(l,c){let{pathname:h="/",search:p="",hash:g=""}=Fn(l.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Yl("",{pathname:h,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(l,c){let h=l.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=l.location.href,v=g.indexOf("#");p=v===-1?g:g.slice(0,v)}return p+"#"+(typeof c=="string"?c:Ko(c))}function o(l,c){mu(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return Xp(n,s,o,a)}function nt(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function mu(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Yp(){return Math.random().toString(36).substr(2,8)}function Xd(a,n){return{usr:a.state,key:a.key,idx:n}}function Yl(a,n,s,o){return s===void 0&&(s=null),Pi({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof n=="string"?Fn(n):n,{state:s,key:n&&n.key||o||Yp()})}function Ko(a){let{pathname:n="/",search:s="",hash:o=""}=a;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Fn(a){let n={};if(a){let s=a.indexOf("#");s>=0&&(n.hash=a.substr(s),a=a.substr(0,s));let o=a.indexOf("?");o>=0&&(n.search=a.substr(o),a=a.substr(0,o)),a&&(n.pathname=a)}return n}function Xp(a,n,s,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:c=!1}=o,h=l.history,p=dn.Pop,g=null,v=y();v==null&&(v=0,h.replaceState(Pi({},h.state,{idx:v}),""));function y(){return(h.state||{idx:null}).idx}function b(){p=dn.Pop;let E=y(),J=E==null?null:E-v;v=E,g&&g({action:p,location:I.location,delta:J})}function N(E,J){p=dn.Push;let Y=Yl(I.location,E,J);s&&s(Y,E),v=y()+1;let z=Xd(Y,v),Q=I.createHref(Y);try{h.pushState(z,"",Q)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;l.location.assign(Q)}c&&g&&g({action:p,location:I.location,delta:1})}function L(E,J){p=dn.Replace;let Y=Yl(I.location,E,J);s&&s(Y,E),v=y();let z=Xd(Y,v),Q=I.createHref(Y);h.replaceState(z,"",Q),c&&g&&g({action:p,location:I.location,delta:0})}function U(E){let J=l.location.origin!=="null"?l.location.origin:l.location.href,Y=typeof E=="string"?E:Ko(E);return Y=Y.replace(/ $/,"%20"),nt(J,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,J)}let I={get action(){return p},get location(){return a(l,h)},listen(E){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Yd,b),g=E,()=>{l.removeEventListener(Yd,b),g=null}},createHref(E){return n(l,E)},createURL:U,encodeLocation(E){let J=U(E);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:N,replace:L,go(E){return h.go(E)}};return I}var Zd;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(Zd||(Zd={}));function Zp(a,n,s){return s===void 0&&(s="/"),em(a,n,s)}function em(a,n,s,o){let l=typeof n=="string"?Fn(n):n,c=gu(l.pathname||"/",s);if(c==null)return null;let h=Lf(a);tm(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let v=hm(c);p=cm(h[g],v)}return p}function Lf(a,n,s,o){n===void 0&&(n=[]),s===void 0&&(s=[]),o===void 0&&(o="");let l=(c,h,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(nt(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let v=fn([o,g.relativePath]),y=s.concat(g);c.children&&c.children.length>0&&(nt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Lf(c.children,n,y,v)),!(c.path==null&&!c.index)&&n.push({path:v,score:lm(v,c.index),routesMeta:y})};return a.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,h);else for(let g of $f(c.path))l(c,h,g)}),n}function $f(a){let n=a.split("/");if(n.length===0)return[];let[s,...o]=n,l=s.endsWith("?"),c=s.replace(/\?$/,"");if(o.length===0)return l?[c,""]:[c];let h=$f(o.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),l&&p.push(...h),p.map(g=>a.startsWith("/")&&g===""?"/":g)}function tm(a){a.sort((n,s)=>n.score!==s.score?s.score-n.score:um(n.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const rm=/^:[\w-]+$/,nm=3,sm=2,im=1,om=10,am=-2,ef=a=>a==="*";function lm(a,n){let s=a.split("/"),o=s.length;return s.some(ef)&&(o+=am),n&&(o+=sm),s.filter(l=>!ef(l)).reduce((l,c)=>l+(rm.test(c)?nm:c===""?im:om),o)}function um(a,n){return a.length===n.length&&a.slice(0,-1).every((o,l)=>o===n[l])?a[a.length-1]-n[n.length-1]:0}function cm(a,n,s){let{routesMeta:o}=a,l={},c="/",h=[];for(let p=0;p<o.length;++p){let g=o[p],v=p===o.length-1,y=c==="/"?n:n.slice(c.length)||"/",b=dm({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},y),N=g.route;if(!b)return null;Object.assign(l,b.params),h.push({params:l,pathname:fn([c,b.pathname]),pathnameBase:vm(fn([c,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(c=fn([c,b.pathnameBase]))}return h}function dm(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[s,o]=fm(a.path,a.caseSensitive,a.end),l=n.match(s);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:o.reduce((v,y,b)=>{let{paramName:N,isOptional:L}=y;if(N==="*"){let I=p[b]||"";h=c.slice(0,c.length-I.length).replace(/(.)\/+$/,"$1")}const U=p[b];return L&&!U?v[N]=void 0:v[N]=(U||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:a}}function fm(a,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),mu(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let o=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(o.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(o.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),o]}function hm(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return mu(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),a}}function gu(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,o=a.charAt(s);return o&&o!=="/"?null:a.slice(s)||"/"}function pm(a,n){n===void 0&&(n="/");let{pathname:s,search:o="",hash:l=""}=typeof a=="string"?Fn(a):a;return{pathname:s?s.startsWith("/")?s:mm(s,n):n,search:ym(o),hash:wm(l)}}function mm(a,n){let s=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function Fl(a,n,s,o){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gm(a){return a.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function vu(a,n){let s=gm(a);return n?s.map((o,l)=>l===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function yu(a,n,s,o){o===void 0&&(o=!1);let l;typeof a=="string"?l=Fn(a):(l=Pi({},a),nt(!l.pathname||!l.pathname.includes("?"),Fl("?","pathname","search",l)),nt(!l.pathname||!l.pathname.includes("#"),Fl("#","pathname","hash",l)),nt(!l.search||!l.search.includes("#"),Fl("#","search","hash",l)));let c=a===""||l.pathname==="",h=c?"/":l.pathname,p;if(h==null)p=s;else{let b=n.length-1;if(!o&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),b-=1;l.pathname=N.join("/")}p=b>=0?n[b]:"/"}let g=pm(l,p),v=h&&h!=="/"&&h.endsWith("/"),y=(c||h===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(v||y)&&(g.pathname+="/"),g}const fn=a=>a.join("/").replace(/\/\/+/g,"/"),vm=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),ym=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,wm=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function xm(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const Af=["post","put","patch","delete"];new Set(Af);const _m=["get",...Af];new Set(_m);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oi(){return Oi=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},Oi.apply(this,arguments)}const wu=w.createContext(null),bm=w.createContext(null),hn=w.createContext(null),Yo=w.createContext(null),Ur=w.createContext({outlet:null,matches:[],isDataRoute:!1}),If=w.createContext(null);function km(a,n){let{relative:s}=n===void 0?{}:n;As()||nt(!1);let{basename:o,navigator:l}=w.useContext(hn),{hash:c,pathname:h,search:p}=Mf(a,{relative:s}),g=h;return o!=="/"&&(g=h==="/"?o:fn([o,h])),l.createHref({pathname:g,search:p,hash:c})}function As(){return w.useContext(Yo)!=null}function Sr(){return As()||nt(!1),w.useContext(Yo).location}function Uf(a){w.useContext(hn).static||w.useLayoutEffect(a)}function pn(){let{isDataRoute:a}=w.useContext(Ur);return a?Im():Sm()}function Sm(){As()||nt(!1);let a=w.useContext(wu),{basename:n,future:s,navigator:o}=w.useContext(hn),{matches:l}=w.useContext(Ur),{pathname:c}=Sr(),h=JSON.stringify(vu(l,s.v7_relativeSplatPath)),p=w.useRef(!1);return Uf(()=>{p.current=!0}),w.useCallback(function(v,y){if(y===void 0&&(y={}),!p.current)return;if(typeof v=="number"){o.go(v);return}let b=yu(v,JSON.parse(h),c,y.relative==="path");a==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:fn([n,b.pathname])),(y.replace?o.replace:o.push)(b,y.state,y)},[n,o,h,c,a])}function Xo(){let{matches:a}=w.useContext(Ur),n=a[a.length-1];return n?n.params:{}}function Mf(a,n){let{relative:s}=n===void 0?{}:n,{future:o}=w.useContext(hn),{matches:l}=w.useContext(Ur),{pathname:c}=Sr(),h=JSON.stringify(vu(l,o.v7_relativeSplatPath));return w.useMemo(()=>yu(a,JSON.parse(h),c,s==="path"),[a,h,c,s])}function jm(a,n){return Nm(a,n)}function Nm(a,n,s,o){As()||nt(!1);let{navigator:l}=w.useContext(hn),{matches:c}=w.useContext(Ur),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=Sr(),y;if(n){var b;let E=typeof n=="string"?Fn(n):n;g==="/"||(b=E.pathname)!=null&&b.startsWith(g)||nt(!1),y=E}else y=v;let N=y.pathname||"/",L=N;if(g!=="/"){let E=g.replace(/^\//,"").split("/");L="/"+N.replace(/^\//,"").split("/").slice(E.length).join("/")}let U=Zp(a,{pathname:L}),I=Om(U&&U.map(E=>Object.assign({},E,{params:Object.assign({},p,E.params),pathname:fn([g,l.encodeLocation?l.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?g:fn([g,l.encodeLocation?l.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),c,s,o);return n&&I?w.createElement(Yo.Provider,{value:{location:Oi({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:dn.Pop}},I):I}function Em(){let a=Am(),n=xm(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),s=a instanceof Error?a.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),s?w.createElement("pre",{style:l},s):null,null)}const Cm=w.createElement(Em,null);class Tm extends w.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?w.createElement(Ur.Provider,{value:this.props.routeContext},w.createElement(If.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pm(a){let{routeContext:n,match:s,children:o}=a,l=w.useContext(wu);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),w.createElement(Ur.Provider,{value:n},o)}function Om(a,n,s,o){var l;if(n===void 0&&(n=[]),s===void 0&&(s=null),o===void 0&&(o=null),a==null){var c;if(!s)return null;if(s.errors)a=s.matches;else if((c=o)!=null&&c.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)a=s.matches;else return null}let h=a,p=(l=s)==null?void 0:l.errors;if(p!=null){let y=h.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);y>=0||nt(!1),h=h.slice(0,Math.min(h.length,y+1))}let g=!1,v=-1;if(s&&o&&o.v7_partialHydration)for(let y=0;y<h.length;y++){let b=h[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=y),b.route.id){let{loaderData:N,errors:L}=s,U=b.route.loader&&N[b.route.id]===void 0&&(!L||L[b.route.id]===void 0);if(b.route.lazy||U){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((y,b,N)=>{let L,U=!1,I=null,E=null;s&&(L=p&&b.route.id?p[b.route.id]:void 0,I=b.route.errorElement||Cm,g&&(v<0&&N===0?(Um("route-fallback"),U=!0,E=null):v===N&&(U=!0,E=b.route.hydrateFallbackElement||null)));let J=n.concat(h.slice(0,N+1)),Y=()=>{let z;return L?z=I:U?z=E:b.route.Component?z=w.createElement(b.route.Component,null):b.route.element?z=b.route.element:z=y,w.createElement(Pm,{match:b,routeContext:{outlet:y,matches:J,isDataRoute:s!=null},children:z})};return s&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?w.createElement(Tm,{location:s.location,revalidation:s.revalidation,component:I,error:L,children:Y(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):Y()},null)}var Df=(function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a})(Df||{}),zf=(function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a})(zf||{});function Rm(a){let n=w.useContext(wu);return n||nt(!1),n}function Lm(a){let n=w.useContext(bm);return n||nt(!1),n}function $m(a){let n=w.useContext(Ur);return n||nt(!1),n}function Ff(a){let n=$m(),s=n.matches[n.matches.length-1];return s.route.id||nt(!1),s.route.id}function Am(){var a;let n=w.useContext(If),s=Lm(),o=Ff();return n!==void 0?n:(a=s.errors)==null?void 0:a[o]}function Im(){let{router:a}=Rm(Df.UseNavigateStable),n=Ff(zf.UseNavigateStable),s=w.useRef(!1);return Uf(()=>{s.current=!0}),w.useCallback(function(l,c){c===void 0&&(c={}),s.current&&(typeof l=="number"?a.navigate(l):a.navigate(l,Oi({fromRouteId:n},c)))},[a,n])}const tf={};function Um(a,n,s){tf[a]||(tf[a]=!0)}function Mm(a,n){a?.v7_startTransition,a?.v7_relativeSplatPath}function Zo(a){let{to:n,replace:s,state:o,relative:l}=a;As()||nt(!1);let{future:c,static:h}=w.useContext(hn),{matches:p}=w.useContext(Ur),{pathname:g}=Sr(),v=pn(),y=yu(n,vu(p,c.v7_relativeSplatPath),g,l==="path"),b=JSON.stringify(y);return w.useEffect(()=>v(JSON.parse(b),{replace:s,state:o,relative:l}),[v,b,l,s,o]),null}function tr(a){nt(!1)}function Dm(a){let{basename:n="/",children:s=null,location:o,navigationType:l=dn.Pop,navigator:c,static:h=!1,future:p}=a;As()&&nt(!1);let g=n.replace(/^\/*/,"/"),v=w.useMemo(()=>({basename:g,navigator:c,static:h,future:Oi({v7_relativeSplatPath:!1},p)}),[g,p,c,h]);typeof o=="string"&&(o=Fn(o));let{pathname:y="/",search:b="",hash:N="",state:L=null,key:U="default"}=o,I=w.useMemo(()=>{let E=gu(y,g);return E==null?null:{location:{pathname:E,search:b,hash:N,state:L,key:U},navigationType:l}},[g,y,b,N,L,U,l]);return I==null?null:w.createElement(hn.Provider,{value:v},w.createElement(Yo.Provider,{children:s,value:I}))}function zm(a){let{children:n,location:s}=a;return jm(Xl(n),s)}new Promise(()=>{});function Xl(a,n){n===void 0&&(n=[]);let s=[];return w.Children.forEach(a,(o,l)=>{if(!w.isValidElement(o))return;let c=[...n,l];if(o.type===w.Fragment){s.push.apply(s,Xl(o.props.children,c));return}o.type!==tr&&nt(!1),!o.props.index||!o.props.children||nt(!1);let h={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=Xl(o.props.children,c)),s.push(h)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])}return a},Zl.apply(this,arguments)}function Fm(a,n){if(a==null)return{};var s={},o=Object.keys(a),l,c;for(c=0;c<o.length;c++)l=o[c],!(n.indexOf(l)>=0)&&(s[l]=a[l]);return s}function Bm(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function qm(a,n){return a.button===0&&(!n||n==="_self")&&!Bm(a)}function eu(a){return a===void 0&&(a=""),new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((n,s)=>{let o=a[s];return n.concat(Array.isArray(o)?o.map(l=>[s,l]):[[s,o]])},[]))}function Wm(a,n){let s=eu(a);return n&&n.forEach((o,l)=>{s.has(l)||n.getAll(l).forEach(c=>{s.append(l,c)})}),s}const Vm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hm="6";try{window.__reactRouterVersion=Hm}catch{}const Gm="startTransition",rf=Wp[Gm];function Km(a){let{basename:n,children:s,future:o,window:l}=a,c=w.useRef();c.current==null&&(c.current=Qp({window:l,v5Compat:!0}));let h=c.current,[p,g]=w.useState({action:h.action,location:h.location}),{v7_startTransition:v}=o||{},y=w.useCallback(b=>{v&&rf?rf(()=>g(b)):g(b)},[g,v]);return w.useLayoutEffect(()=>h.listen(y),[h,y]),w.useEffect(()=>Mm(o),[o]),w.createElement(Dm,{basename:n,children:s,location:p.location,navigationType:p.action,navigator:h,future:o})}const Jm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=w.forwardRef(function(n,s){let{onClick:o,relative:l,reloadDocument:c,replace:h,state:p,target:g,to:v,preventScrollReset:y,viewTransition:b}=n,N=Fm(n,Vm),{basename:L}=w.useContext(hn),U,I=!1;if(typeof v=="string"&&Qm.test(v)&&(U=v,Jm))try{let z=new URL(window.location.href),Q=v.startsWith("//")?new URL(z.protocol+v):new URL(v),te=gu(Q.pathname,L);Q.origin===z.origin&&te!=null?v=te+Q.search+Q.hash:I=!0}catch{}let E=km(v,{relative:l}),J=Ym(v,{replace:h,state:p,target:g,preventScrollReset:y,relative:l,viewTransition:b});function Y(z){o&&o(z),z.defaultPrevented||J(z)}return w.createElement("a",Zl({},N,{href:U||E,onClick:I||c?o:Y,ref:s,target:g}))});var nf;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(nf||(nf={}));var sf;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(sf||(sf={}));function Ym(a,n){let{target:s,replace:o,state:l,preventScrollReset:c,relative:h,viewTransition:p}=n===void 0?{}:n,g=pn(),v=Sr(),y=Mf(a,{relative:h});return w.useCallback(b=>{if(qm(b,s)){b.preventDefault();let N=o!==void 0?o:Ko(v)===Ko(y);g(a,{replace:N,state:l,preventScrollReset:c,relative:h,viewTransition:p})}},[v,g,y,o,l,s,a,c,h,p])}function Xm(a){let n=w.useRef(eu(a)),s=w.useRef(!1),o=Sr(),l=w.useMemo(()=>Wm(o.search,s.current?null:n.current),[o.search]),c=pn(),h=w.useCallback((p,g)=>{const v=eu(typeof p=="function"?p(l):p);s.current=!0,c("?"+v,g)},[c,l]);return[l,h]}const Zm="modulepreload",eg=function(a){return"/Circles/"+a},of={},Is=function(n,s,o){let l=Promise.resolve();if(s&&s.length>0){let g=function(v){return Promise.all(v.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(s.map(v=>{if(v=eg(v),v in of)return;of[v]=!0;const y=v.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const N=document.createElement("link");if(N.rel=y?"stylesheet":Zm,y||(N.as="script"),N.crossOrigin="",N.href=v,p&&N.setAttribute("nonce",p),document.head.appendChild(N),y)return new Promise((L,U)=>{N.addEventListener("load",L),N.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})},tg=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...s)=>Is(async()=>{const{default:o}=await Promise.resolve().then(()=>Us);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)};class xu extends Error{constructor(n,s="FunctionsError",o){super(n),this.name=s,this.context=o}}class rg extends xu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class af extends xu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class lf extends xu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var tu;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(tu||(tu={}));var ng=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};class sg{constructor(n,{headers:s={},customFetch:o,region:l=tu.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=tg(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var o;return ng(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:h}=s;let p={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=h):typeof h=="string"?(p["Content-Type"]="text/plain",y=h):typeof FormData<"u"&&h instanceof FormData?y=h:(p["Content-Type"]="application/json",y=JSON.stringify(h)));const b=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:y}).catch(I=>{throw new rg(I)}),N=b.headers.get("x-relay-error");if(N&&N==="true")throw new af(b);if(!b.ok)throw new lf(b);let L=((o=b.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),U;return L==="application/json"?U=yield b.json():L==="application/octet-stream"?U=yield b.blob():L==="text/event-stream"?U=b:L==="multipart/form-data"?U=yield b.formData():U=yield b.text(),{data:U,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof lf||l instanceof af?l.context:void 0}}})}}var gt={},bs={},ks={},Ss={},js={},Ns={},ig=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$s=ig();const og=$s.fetch,Bf=$s.fetch.bind($s),qf=$s.Headers,ag=$s.Request,lg=$s.Response,Us=Object.freeze(Object.defineProperty({__proto__:null,Headers:qf,Request:ag,Response:lg,default:Bf,fetch:og},Symbol.toStringTag,{value:"Module"})),ug=zp(Us);var qo={},uf;function Wf(){if(uf)return qo;uf=1,Object.defineProperty(qo,"__esModule",{value:!0});class a extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return qo.default=a,qo}var cf;function Vf(){if(cf)return Ns;cf=1;var a=Ns&&Ns.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ns,"__esModule",{value:!0});const n=a(ug),s=a(Wf());class o{constructor(c){var h,p;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(h=c.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=c.signal,this.isMaybeSingle=(p=c.isMaybeSingle)!==null&&p!==void 0?p:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,h){return this.headers=new Headers(this.headers),this.headers.set(c,h),this}then(c,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var y,b,N,L;let U=null,I=null,E=null,J=v.status,Y=v.statusText;if(v.ok){if(this.method!=="HEAD"){const se=await v.text();se===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?I=se:I=JSON.parse(se))}const Q=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),te=(N=v.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");Q&&te&&te.length>1&&(E=parseInt(te[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(U={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,E=null,J=406,Y="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const Q=await v.text();try{U=JSON.parse(Q),Array.isArray(U)&&v.status===404&&(I=[],U=null,J=200,Y="OK")}catch{v.status===404&&Q===""?(J=204,Y="No Content"):U={message:Q}}if(U&&this.isMaybeSingle&&(!((L=U?.details)===null||L===void 0)&&L.includes("0 rows"))&&(U=null,J=200,Y="OK"),U&&this.shouldThrowOnError)throw new s.default(U)}return{error:U,data:I,count:E,status:J,statusText:Y}});return this.shouldThrowOnError||(g=g.catch(v=>{var y,b,N;return{error:{message:`${(y=v?.name)!==null&&y!==void 0?y:"FetchError"}: ${v?.message}`,details:`${(b=v?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(N=v?.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,h)}returns(){return this}overrideTypes(){return this}}return Ns.default=o,Ns}var df;function Hf(){if(df)return js;df=1;var a=js&&js.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js,"__esModule",{value:!0});const n=a(Vf());class s extends n.default{select(l){let c=!1;const h=(l??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:h,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",y=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${y?`${y},`:""}${l}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:h=c}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,c,{foreignTable:h,referencedTable:p=h}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(v,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:h=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var y;const b=[l?"analyze":null,c?"verbose":null,h?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),N=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${N}"; options=${b};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return js.default=s,js}var ff;function _u(){if(ff)return Ss;ff=1;var a=Ss&&Ss.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ss,"__esModule",{value:!0});const n=a(Hf());class s extends n.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const h=Array.from(new Set(c)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:h,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${g}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(l,c,h){return this.url.searchParams.append(l,`not.${c}.${h}`),this}or(l,{foreignTable:c,referencedTable:h=c}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,c,h){return this.url.searchParams.append(l,`${c}.${h}`),this}}return Ss.default=s,Ss}var hf;function Gf(){if(hf)return ks;hf=1;var a=ks&&ks.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ks,"__esModule",{value:!0});const n=a(_u());class s{constructor(l,{headers:c={},schema:h,fetch:p}){this.url=l,this.headers=new Headers(c),this.schema=h,this.fetch=p}select(l,{head:c=!1,count:h}={}){const p=c?"HEAD":"GET";let g=!1;const v=(l??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:h=!0}={}){var p;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(v.length>0){const y=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:h=!1,count:p,defaultToNull:g=!0}={}){var v;const y="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((N,L)=>N.concat(Object.keys(L)),[]);if(b.length>0){const N=[...new Set(b)].map(L=>`"${L}"`);this.url.searchParams.set("columns",N.join(","))}}return new n.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(l,{count:c}={}){var h;const p="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:l}={}){var c;const h="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return ks.default=s,ks}var pf;function cg(){if(pf)return bs;pf=1;var a=bs&&bs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(bs,"__esModule",{value:!0});const n=a(Gf()),s=a(_u());class o{constructor(c,{headers:h={},schema:p,fetch:g}={}){this.url=c,this.headers=new Headers(h),this.schemaName=p,this.fetch=g}from(c){const h=new URL(`${this.url}/${c}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new o(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:p=!1,get:g=!1,count:v}={}){var y;let b;const N=new URL(`${this.url}/rpc/${c}`);let L;p||g?(b=p?"HEAD":"GET",Object.entries(h).filter(([I,E])=>E!==void 0).map(([I,E])=>[I,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([I,E])=>{N.searchParams.append(I,E)})):(b="POST",L=h);const U=new Headers(this.headers);return v&&U.set("Prefer",`count=${v}`),new s.default({method:b,url:N,headers:U,schema:this.schemaName,body:L,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return bs.default=o,bs}var mf;function dg(){if(mf)return gt;mf=1;var a=gt&&gt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(gt,"__esModule",{value:!0}),gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const n=a(cg());gt.PostgrestClient=n.default;const s=a(Gf());gt.PostgrestQueryBuilder=s.default;const o=a(_u());gt.PostgrestFilterBuilder=o.default;const l=a(Hf());gt.PostgrestTransformBuilder=l.default;const c=a(Vf());gt.PostgrestBuilder=c.default;const h=a(Wf());return gt.PostgrestError=h.default,gt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:h.default},gt}var fg=dg();const hg=Of(fg),{PostgrestClient:pg,PostgrestQueryBuilder:k0,PostgrestFilterBuilder:S0,PostgrestTransformBuilder:j0,PostgrestBuilder:N0,PostgrestError:E0}=hg;class mg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const o=this.getWebSocketConstructor();return new o(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const gg="2.15.5",vg=`realtime-js/${gg}`,yg="1.0.0",ru=1e4,wg=1e3,xg=100;var Ei;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Ei||(Ei={}));var ct;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(ct||(ct={}));var mr;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(mr||(mr={}));var nu;(function(a){a.websocket="websocket"})(nu||(nu={}));var zn;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(zn||(zn={}));class _g{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),o=new TextDecoder;return this._decodeBroadcast(n,s,o)}_decodeBroadcast(n,s,o){const l=s.getUint8(1),c=s.getUint8(2);let h=this.HEADER_LENGTH+2;const p=o.decode(n.slice(h,h+l));h=h+l;const g=o.decode(n.slice(h,h+c));h=h+c;const v=JSON.parse(o.decode(n.slice(h,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class Kf{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Be||(Be={}));const gf=(a,n,s={})=>{var o;const l=(o=s.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(n).reduce((c,h)=>(c[h]=bg(h,a,n,l),c),{})},bg=(a,n,s,o)=>{const l=n.find(p=>p.name===a),c=l?.type,h=s[a];return c&&!o.includes(c)?Jf(c,h):su(h)},Jf=(a,n)=>{if(a.charAt(0)==="_"){const s=a.slice(1,a.length);return Ng(n,s)}switch(a){case Be.bool:return kg(n);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return Sg(n);case Be.json:case Be.jsonb:return jg(n);case Be.timestamp:return Eg(n);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return su(n);default:return su(n)}},su=a=>a,kg=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Sg=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},jg=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(n){return console.log(`JSON parse error: ${n}`),a}return a},Ng=(a,n)=>{if(typeof a!="string")return a;const s=a.length-1,o=a[s];if(a[0]==="{"&&o==="}"){let c;const h=a.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>Jf(n,p))}return a},Eg=a=>typeof a=="string"?a.replace(" ","T"):a,Qf=a=>{let n=a;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class Bl{constructor(n,s,o={},l=ru){this.channel=n,this.event=s,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var o;return this._hasReceived(n)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var vf;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(vf||(vf={}));class Ci{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ci.syncState(this.state,l,c,h),this.pendingDiffs.forEach(g=>{this.state=Ci.syncDiff(this.state,g,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ci.syncDiff(this.state,l,c,h),p())}),this.onJoin((l,c,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:h})}),this.onLeave((l,c,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,o,l){const c=this.cloneDeep(n),h=this.transformState(s),p={},g={};return this.map(c,(v,y)=>{h[v]||(g[v]=y)}),this.map(h,(v,y)=>{const b=c[v];if(b){const N=y.map(E=>E.presence_ref),L=b.map(E=>E.presence_ref),U=y.filter(E=>L.indexOf(E.presence_ref)<0),I=b.filter(E=>N.indexOf(E.presence_ref)<0);U.length>0&&(p[v]=U),I.length>0&&(g[v]=I)}else p[v]=y}),this.syncDiff(c,{joins:p,leaves:g},o,l)}static syncDiff(n,s,o,l){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(p,g)=>{var v;const y=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),y.length>0){const b=n[p].map(L=>L.presence_ref),N=y.filter(L=>b.indexOf(L.presence_ref)<0);n[p].unshift(...N)}o(p,y,g)}),this.map(h,(p,g)=>{let v=n[p];if(!v)return;const y=g.map(b=>b.presence_ref);v=v.filter(b=>y.indexOf(b.presence_ref)<0),n[p]=v,l(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(o=>s(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,o)=>{const l=n[o];return"metas"in l?s[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[o]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yf;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(yf||(yf={}));var Ti;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Ti||(Ti={}));var Ir;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class bu{constructor(n,s={config:{}},o){this.topic=n,this.params=s,this.socket=o,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Bl(this,mr.join,this.params,this.timeout),this.rejoinTimer=new Kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ci(this),this.broadcastEndpointURL=Qf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:h,presence:p,private:g}}=this.params,v=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(L=>L.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Ti.PRESENCE]&&this.bindings[Ti.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},N={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(L=>n?.(Ir.CHANNEL_ERROR,L)),this._onClose(()=>n?.(Ir.CLOSED)),this.updateJoinPayload(Object.assign({config:N},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:L})=>{var U;if(this.socket.setAuth(),L===void 0){n?.(Ir.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,E=(U=I?.length)!==null&&U!==void 0?U:0,J=[];for(let Y=0;Y<E;Y++){const z=I[Y],{filter:{event:Q,schema:te,table:se,filter:le}}=z,Ee=L&&L[Y];if(Ee&&Ee.event===Q&&Ee.schema===te&&Ee.table===se&&Ee.filter===le)J.push(Object.assign(Object.assign({},z),{id:Ee.id}));else{this.unsubscribe(),this.state=ct.errored,n?.(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,n&&n(Ir.SUBSCRIBED);return}}).receive("error",L=>{this.state=ct.errored,n?.(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(L).join(", ")||"error")))}).receive("timeout",()=>{n?.(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,o){return this.state===ct.joined&&n===Ti.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,o)}async send(n,s={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:h}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ct.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Bl(this,mr.leave,{},n),o.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ct.closed,this.bindings={}}async _fetchWithTimeout(n,s,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(c),h}_push(n,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Bl(this,n,s,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>xg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,o){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,o){var l,c;const h=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:y}=mr;if(o&&[p,g,v,y].indexOf(h)>=0&&o!==this._joinRef())return;let N=this._onMessage(h,s,o);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(L=>{var U,I,E;return((U=L.filter)===null||U===void 0?void 0:U.event)==="*"||((E=(I=L.filter)===null||I===void 0?void 0:I.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===h}).map(L=>L.callback(N,o)):(c=this.bindings[h])===null||c===void 0||c.filter(L=>{var U,I,E,J,Y,z;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in L){const Q=L.id,te=(U=L.filter)===null||U===void 0?void 0:U.event;return Q&&((I=s.ids)===null||I===void 0?void 0:I.includes(Q))&&(te==="*"||te?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const Q=(Y=(J=L?.filter)===null||J===void 0?void 0:J.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return Q==="*"||Q===((z=s?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return L.type.toLocaleLowerCase()===h}).map(L=>{if(typeof N=="object"&&"ids"in N){const U=N.data,{schema:I,table:E,commit_timestamp:J,type:Y,errors:z}=U;N=Object.assign(Object.assign({},{schema:I,table:E,commit_timestamp:J,eventType:Y,new:{},old:{},errors:z}),this._getPayloadRecords(U))}L.callback(N,o)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,o){const l=n.toLocaleLowerCase(),c={type:l,filter:s,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,s){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&bu.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const o in n)if(n[o]!==s[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(mr.close,{},n)}_onError(n){this._on(mr.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=gf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=gf(n.columns,n.old_record)),s}}const ql=()=>{},Wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cg=[1e3,2e3,5e3,1e4],Tg=1e4,Pg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Og{constructor(n,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ru,this.transport=null,this.heartbeatIntervalMs=Wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ql,this.ref=0,this.reconnectTimer=null,this.logger=ql,this.conn=null,this.sendBuffer=[],this.serializer=new _g,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...h)=>Is(async()=>{const{default:p}=await Promise.resolve().then(()=>Us);return{default:p}},void 0).then(({default:p})=>p(...h)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...h)=>c(...h)},!(!((o=s?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${nu.websocket}`,this.httpEndpoint=Qf(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yg}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,o){this.logger(n,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Ei.connecting:return zn.Connecting;case Ei.open:return zn.Open;case Ei.closing:return zn.Closing;default:return zn.Closed}}isConnected(){return this.connectionState()===zn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new bu(`realtime:${n}`,s,this);return this.channels.push(c),c}}push(n){const{topic:s,event:o,payload:l,ref:c}=n,h=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${o} (${c})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(wg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:c,ref:h}=s,p=h?`(${h})`:"",g=c.status||"";this.log("receive",`${g} ${o} ${l} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(l,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(mr.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${o}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const o=new Blob([Pg],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(o=>{const l={access_token:s,version:vg};s&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(mr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Kf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,o,l,c,h,p,g,v,y;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:ru,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:Wo.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ql,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>Cg[b-1]||Tg),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((b,N)=>N(JSON.stringify(b))),this.decode=(y=n?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class ku extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function dt(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class Rg extends ku{constructor(n,s,o){super(n),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iu extends ku{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Lg=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};const Yf=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...s)=>Is(async()=>{const{default:o}=await Promise.resolve().then(()=>Us);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},$g=()=>Lg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Is(()=>Promise.resolve().then(()=>Us),void 0)).Response:Response}),ou=a=>{if(Array.isArray(a))return a.map(s=>ou(s));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([s,o])=>{const l=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=ou(o)}),n},Ag=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)};var Bn=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};const Wl=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Ig=(a,n,s)=>Bn(void 0,void 0,void 0,function*(){const o=yield $g();a instanceof o&&!s?.noResolveJson?a.json().then(l=>{const c=a.status||500,h=l?.statusCode||c+"";n(new Rg(Wl(l),c,h))}).catch(l=>{n(new iu(Wl(l),l))}):n(new iu(Wl(a),a))}),Ug=(a,n,s,o)=>{const l={method:a,headers:n?.headers||{}};return a==="GET"||!o?l:(Ag(o)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(o)):l.body=o,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function Li(a,n,s,o,l,c){return Bn(this,void 0,void 0,function*(){return new Promise((h,p)=>{a(s,Ug(n,o,l,c)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Ig(g,p,o))})})}function Jo(a,n,s,o){return Bn(this,void 0,void 0,function*(){return Li(a,"GET",n,s,o)})}function kr(a,n,s,o,l){return Bn(this,void 0,void 0,function*(){return Li(a,"POST",n,o,l,s)})}function au(a,n,s,o,l){return Bn(this,void 0,void 0,function*(){return Li(a,"PUT",n,o,l,s)})}function Mg(a,n,s,o){return Bn(this,void 0,void 0,function*(){return Li(a,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function Xf(a,n,s,o,l){return Bn(this,void 0,void 0,function*(){return Li(a,"DELETE",n,o,l,s)})}var Nt=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};const Dg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zg{constructor(n,s={},o,l){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=o,this.fetch=Yf(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,o,l){return Nt(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},wf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=o,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const v=this._removeEmptyFolders(s),y=this._getFinalPath(v),b=yield(n=="PUT"?au:kr)(this.fetch,`${this.url}/object/${y}`,c,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dt(c))return{data:null,error:c};throw c}})}upload(n,s,o){return Nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,o)})}uploadToSignedUrl(n,s,o,l){return Nt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:wf.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",v.cacheControl)):(g=o,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType);const b=yield au(this.fetch,p.toString(),g,{headers:y});return{data:{path:c,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(dt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return Nt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const c=yield kr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),h=new URL(this.url+c.url),p=h.searchParams.get("token");if(!p)throw new ku("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}update(n,s,o){return Nt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,o)})}move(n,s,o){return Nt(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}copy(n,s,o){return Nt(this,void 0,void 0,function*(){try{return{data:{path:(yield kr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,o){return Nt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield kr(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,o){return Nt(this,void 0,void 0,function*(){try{const l=yield kr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),c=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}download(n,s){return Nt(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(s?.transform||{}),h=c?`?${c}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield Jo(this.fetch,`${this.url}/${l}/${p}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(dt(p))return{data:null,error:p};throw p}})}info(n){return Nt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const o=yield Jo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ou(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}exists(n){return Nt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Mg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o)&&o instanceof iu){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(n,s){const o=this._getFinalPath(n),l=[],c=s?.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&l.push(c);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&l.push(g);let v=l.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${v}`)}}}remove(n){return Nt(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}list(n,s,o){return Nt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Dg),s),{prefix:n||""});return{data:yield kr(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(dt(l))return{data:null,error:l};throw l}})}listV2(n,s){return Nt(this,void 0,void 0,function*(){try{const o=Object.assign({},n);return{data:yield kr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Fg="2.12.1",Bg={"X-Client-Info":`storage-js/${Fg}`};var Es=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};class qg{constructor(n,s={},o,l){this.shouldThrowOnError=!1;const c=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},Bg),s),this.fetch=Yf(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Es(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dt(n))return{data:null,error:n};throw n}})}getBucket(n){return Es(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Es(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}updateBucket(n,s){return Es(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dt(o))return{data:null,error:o};throw o}})}emptyBucket(n){return Es(this,void 0,void 0,function*(){try{return{data:yield kr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Es(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(dt(s))return{data:null,error:s};throw s}})}}class Wg extends qg{constructor(n,s={},o,l){super(n,s,o,l)}from(n){return new zg(this.url,this.headers,n,this.fetch)}}const Vg="2.57.4";let Ni="";typeof Deno<"u"?Ni="deno":typeof document<"u"?Ni="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ni="react-native":Ni="node";const Hg={"X-Client-Info":`supabase-js-${Ni}/${Vg}`},Gg={headers:Hg},Kg={schema:"public"},Jg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qg={};var Yg=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};const Xg=a=>{let n;return a?n=a:typeof fetch>"u"?n=Bf:n=fetch,(...s)=>n(...s)},Zg=()=>typeof Headers>"u"?qf:Headers,ev=(a,n,s)=>{const o=Xg(s),l=Zg();return(c,h)=>Yg(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:a;let v=new l(h?.headers);return v.has("apikey")||v.set("apikey",a),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),o(c,Object.assign(Object.assign({},h),{headers:v}))})};var tv=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};function rv(a){return a.endsWith("/")?a:a+"/"}function nv(a,n){var s,o;const{db:l,auth:c,realtime:h,global:p}=a,{db:g,auth:v,realtime:y,global:b}=n,N={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},v),c),realtime:Object.assign(Object.assign({},y),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),p),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>tv(this,void 0,void 0,function*(){return""})};return a.accessToken?N.accessToken=a.accessToken:delete N.accessToken,N}function sv(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Zf="2.71.1",Rs=30*1e3,lu=3,Vl=lu*Rs,iv="http://localhost:9999",ov="supabase.auth.token",av={"X-Client-Info":`gotrue-js/${Zf}`},uu="X-Supabase-Api-Version",eh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uv=600*1e3;class Su extends Error{constructor(n,s,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function Se(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class cv extends Su{constructor(n,s,o){super(n,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function dv(a){return Se(a)&&a.name==="AuthApiError"}class th extends Su{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class mn extends Su{constructor(n,s,o,l){super(n,o,l),this.name=s,this.status=o}}class un extends mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fv(a){return Se(a)&&a.name==="AuthSessionMissingError"}class Vo extends mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ho extends mn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Go extends mn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hv(a){return Se(a)&&a.name==="AuthImplicitGrantRedirectError"}class xf extends mn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cu extends mn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Hl(a){return Se(a)&&a.name==="AuthRetryableFetchError"}class _f extends mn{constructor(n,s,o){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class du extends mn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bf=` 	
\r=`.split(""),pv=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<bf.length;n+=1)a[bf[n].charCodeAt(0)]=-2;for(let n=0;n<Qo.length;n+=1)a[Qo[n].charCodeAt(0)]=n;return a})();function kf(a,n,s){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(Qo[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;s(Qo[o]),n.queuedBits-=6}}function rh(a,n,s){const o=pv[a];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Sf(a){const n=[],s=h=>{n.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=h=>{vv(h,o,s)};for(let h=0;h<a.length;h+=1)rh(a.charCodeAt(h),l,c);return n.join("")}function mv(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function gv(a,n){for(let s=0;s<a.length;s+=1){let o=a.charCodeAt(s);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(a.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}mv(o,n)}}function vv(a,n,s){if(n.utf8seq===0){if(a<=127){s(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function yv(a){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<a.length;l+=1)rh(a.charCodeAt(l),s,o);return new Uint8Array(n)}function wv(a){const n=[];return gv(a,s=>n.push(s)),new Uint8Array(n)}function xv(a){const n=[],s={queue:0,queuedBits:0},o=l=>{n.push(l)};return a.forEach(l=>kf(l,s,o)),kf(null,s,o),n.join("")}function _v(a){return Math.round(Date.now()/1e3)+a}function bv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const n=Math.random()*16|0;return(a=="x"?n:n&3|8).toString(16)})}const pr=()=>typeof window<"u"&&typeof document<"u",Un={tested:!1,writable:!1},nh=()=>{if(!pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Un.tested)return Un.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Un.tested=!0,Un.writable=!0}catch{Un.tested=!0,Un.writable=!1}return Un.writable};function kv(a){const n={},s=new URL(a);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return s.searchParams.forEach((o,l)=>{n[l]=o}),n}const sh=a=>{let n;return a?n=a:typeof fetch>"u"?n=(...s)=>Is(async()=>{const{default:o}=await Promise.resolve().then(()=>Us);return{default:o}},void 0).then(({default:o})=>o(...s)):n=fetch,(...s)=>n(...s)},Sv=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Ls=async(a,n,s)=>{await a.setItem(n,JSON.stringify(s))},Mn=async(a,n)=>{const s=await a.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ln=async(a,n)=>{await a.removeItem(n)};class ea{constructor(){this.promise=new ea.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}ea.promiseConstructor=Promise;function Gl(a){const n=a.split(".");if(n.length!==3)throw new du("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!lv.test(n[o]))throw new du("JWT not in base64url format");return{header:JSON.parse(Sf(n[0])),payload:JSON.parse(Sf(n[1])),signature:yv(n[2]),raw:{header:n[0],payload:n[1]}}}async function jv(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function Nv(a,n){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await a(c);if(!n(c,null,h)){o(h);return}}catch(h){if(!n(c,h)){l(h);return}}})()})}function Ev(a){return("0"+a.toString(16)).substr(-2)}function Cv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let l="";for(let c=0;c<56;c++)l+=s.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,Ev).join("")}async function Tv(a){const s=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function Pv(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const s=await Tv(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cs(a,n,s=!1){const o=Cv();let l=o;s&&(l+="/PASSWORD_RECOVERY"),await Ls(a,`${n}-code-verifier`,l);const c=await Pv(o);return[c,o===c?"plain":"s256"]}const Ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(a){const n=a.headers.get(uu);if(!n||!n.match(Ov))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Lv(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function $v(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Av=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ts(a){if(!Av.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kl(){const a={};return new Proxy(a,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jf(a){return JSON.parse(JSON.stringify(a))}var Iv=function(a,n){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&n.indexOf(o)<0&&(s[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(a);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(a,o[l])&&(s[o[l]]=a[o[l]]);return s};const Dn=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Uv=[502,503,504];async function Nf(a){var n;if(!Sv(a))throw new cu(Dn(a),0);if(Uv.includes(a.status))throw new cu(Dn(a),a.status);let s;try{s=await a.json()}catch(c){throw new th(Dn(c),c)}let o;const l=Rv(a);if(l&&l.getTime()>=eh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new _f(Dn(s),a.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new un}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new _f(Dn(s),a.status,s.weak_password.reasons);throw new cv(Dn(s),a.status||500,o)}const Mv=(a,n,s,o)=>{const l={method:a,headers:n?.headers||{}};return a==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),s))};async function Pe(a,n,s,o){var l;const c=Object.assign({},o?.headers);c[uu]||(c[uu]=eh["2024-01-01"].name),o?.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const h=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Dv(a,n,s+p,{headers:c,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function Dv(a,n,s,o,l,c){const h=Mv(n,o,l,c);let p;try{p=await a(s,Object.assign({},h))}catch(g){throw console.error(g),new cu(Dn(g),0)}if(p.ok||await Nf(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Nf(g)}}function Ar(a){var n;let s=null;qv(a)&&(s=Object.assign({},a),a.expires_at||(s.expires_at=_v(a.expires_in)));const o=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:s,user:o},error:null}}function Ef(a){const n=Ar(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(n.data.weak_password=a.weak_password),n}function cn(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function zv(a){return{data:a,error:null}}function Fv(a){const{action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:c}=a,h=Iv(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:o,redirect_to:l,verification_type:c},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function Bv(a){return a}function qv(a){return a.access_token&&a.refresh_token&&a.expires_in}const Jl=["global","local","others"];var Wv=function(a,n){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&n.indexOf(o)<0&&(s[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(a);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(a,o[l])&&(s[o[l]]=a[o[l]]);return s};class Vv{constructor({url:n="",headers:s={},fetch:o}){this.url=n,this.headers=s,this.fetch=sh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=Jl[0]){if(Jl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jl.join(", ")}`);try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Se(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,s={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:cn})}catch(o){if(Se(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:s}=n,o=Wv(n,["options"]),l=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Fv,redirectTo:s?.redirectTo})}catch(s){if(Se(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:cn})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,o,l,c,h,p,g;try{const v={nextPage:null,lastPage:0,total:0},y=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Bv});if(y.error)throw y.error;const b=await y.json(),N=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,L=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return L.length>0&&(L.forEach(U=>{const I=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(U.split(";")[1].split("=")[1]);v[`${E}Page`]=I}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(Se(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Ts(n);try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:cn})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Ts(n);try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:cn})}catch(o){if(Se(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,s=!1){Ts(n);try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:cn})}catch(o){if(Se(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Ts(n.userId);try{const{data:s,error:o}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:o}}catch(s){if(Se(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Ts(n.userId),Ts(n.id);try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}}function Cf(a={}){return{getItem:n=>a[n]||null,setItem:(n,s)=>{a[n]=s},removeItem:n=>{delete a[n]}}}function Hv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ps={debug:!!(globalThis&&nh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ih extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Gv extends ih{}async function Kv(a,n,s){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,l.name);try{return await s()}finally{Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,l.name)}}else{if(n===0)throw Ps.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new Gv(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Ps.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Hv();const Jv={url:iv,storageKey:ov,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:av,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Tf(a,n,s){return await s()}const Os={};class Ri{constructor(n){var s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ri.nextInstanceID,Ri.nextInstanceID+=1,this.instanceID>0&&pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Jv),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Vv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=sh(l.fetch),this.lock=l.lock||Tf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:pr()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=Kv:this.lock=Tf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:nh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Cf(this.memoryStorage)),pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Os[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Os[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Os[this.storageKey]=Object.assign(Object.assign({},Os[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zf}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=kv(window.location.href);let o="none";if(this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce"),pr()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(s,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),hv(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Se(s)?{error:s}:{error:new th("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,o,l;try{const c=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Ar}),{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Se(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var s,o,l;try{let c;if("email"in n){const{email:y,password:b,options:N}=n;let L=null,U=null;this.flowType==="pkce"&&([L,U]=await Cs(this.storage,this.storageKey)),c=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N?.emailRedirectTo,body:{email:y,password:b,data:(s=N?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N?.captchaToken},code_challenge:L,code_challenge_method:U},xform:Ar})}else if("phone"in n){const{phone:y,password:b,options:N}=n;c=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(o=N?.data)!==null&&o!==void 0?o:{},channel:(l=N?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N?.captchaToken}},xform:Ar})}else throw new Ho("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Se(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let s;if("email"in n){const{email:c,password:h,options:p}=n;s=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Ef})}else if("phone"in n){const{phone:c,password:h,options:p}=n;s=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Ef})}else throw new Ho("You must provide either an email or phone number and a password");const{data:o,error:l}=s;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Vo}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,o,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,o,l,c,h,p,g,v,y,b,N,L;let U,I;if("message"in n)U=n.message,I=n.signature;else{const{chain:E,wallet:J,statement:Y,options:z}=n;let Q;if(pr())if(typeof J=="object")Q=J;else{const se=window;if("solana"in se&&typeof se.solana=="object"&&("signIn"in se.solana&&typeof se.solana.signIn=="function"||"signMessage"in se.solana&&typeof se.solana.signMessage=="function"))Q=se.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=J}const te=new URL((s=z?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Q&&Q.signIn){const se=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),Y?{statement:Y}:null));let le;if(Array.isArray(se)&&se[0]&&typeof se[0]=="object")le=se[0];else if(se&&typeof se=="object"&&"signedMessage"in se&&"signature"in se)le=se;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in le&&"signature"in le&&(typeof le.signedMessage=="string"||le.signedMessage instanceof Uint8Array)&&le.signature instanceof Uint8Array)U=typeof le.signedMessage=="string"?le.signedMessage:new TextDecoder().decode(le.signedMessage),I=le.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${te.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(l=(o=z?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=z?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((h=z?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((p=z?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((v=z?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((b=(y=z?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...z.signInWithSolana.resources.map(le=>`- ${le}`)]:[]].join(`
`);const se=await Q.signMessage(new TextEncoder().encode(U),"utf8");if(!se||!(se instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=se}}try{const{data:E,error:J}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:xv(I)},!((N=n.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(L=n.options)===null||L===void 0?void 0:L.captchaToken}}:null),xform:Ar});if(J)throw J;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Vo}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:J})}catch(E){if(Se(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(n){const s=await Mn(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(s??"").split("/");try{const{data:c,error:h}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Ar});if(await ln(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new Vo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:h})}catch(c){if(Se(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:s,provider:o,token:l,access_token:c,nonce:h}=n,p=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ar}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Vo}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,o,l,c,h;try{if("email"in n){const{email:p,options:g}=n;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Cs(this.storage,this.storageKey));const{error:b}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:y}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:y}}throw new Ho("You must provide either an email or phone number.")}catch(p){if(Se(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,o;try{let l,c;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:p}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Ar});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,v=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(l){if(Se(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,o,l;try{let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await Cs(this.storage,this.storageKey)),await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:zv})}catch(c){if(Se(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:o}=n;if(o)throw o;if(!s)throw new un;const{error:l}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:c}=n,{error:h}=await Pe(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:o,type:l,options:c}=n,{data:h,error:p}=await Pe(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Ho("You must provide either an email or phone number and a type")}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<Vl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const h=await Mn(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=Kl()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,v,y)=>(!h&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,v,y))})}return{data:{session:n},error:null}}const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:cn}):await this._useSession(async s=>{var o,l,c;const{data:h,error:p}=s;if(p)throw p;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new un}:await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:cn})})}catch(s){if(Se(s))return fv(s)&&(await this._removeSession(),await ln(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new un;const h=l.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Cs(this.storage,this.storageKey));const{data:v,error:y}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:cn});if(y)throw y;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(o){if(Se(o))return{data:{user:null},error:o};throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new un;const s=Date.now()/1e3;let o=s,l=!0,c=null;const{payload:h}=Gl(n.access_token);if(h.exp&&(o=h.exp,l=o<=s),l){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(Se(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var o;if(!n){const{data:h,error:p}=s;if(p)throw p;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new un;const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!pr())throw new Go("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Go(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Go("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new xf("No code detected.");const{data:Y,error:z}=await this._exchangeCodeForSession(n.code);if(z)throw z;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:h,expires_in:p,expires_at:g,token_type:v}=n;if(!c||!p||!h||!v)throw new Go("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(p);let N=y+b;g&&(N=parseInt(g));const L=N-y;L*1e3<=Rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${L}s, should have been closer to ${b}s`);const U=N-b;y-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,N,y):y-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,N,y);const{data:I,error:E}=await this._getUser(c);if(E)throw E;const J={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:b,expires_at:N,refresh_token:h,token_type:v,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:J,redirectType:n.type},error:null}}catch(o){if(Se(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Mn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:l,error:c}=s;if(c)return{error:c};const h=(o=l.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(dv(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await ln(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=bv(),o={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async s=>{var o,l;try{const{data:{session:c},error:h}=s;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,s={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Cs(this.storage,this.storageKey,!0));try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(Se(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:o,error:l}=await this._useSession(async c=>{var h,p,g,v,y;const{data:b,error:N}=c;if(N)throw N;const L=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Pe(this.fetch,"GET",L,{headers:this.headers,jwt:(y=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return pr()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o?.url),{data:{provider:n.provider,url:o?.url},error:null}}catch(o){if(Se(o))return{data:{provider:n.provider,url:null},error:o};throw o}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var o,l;const{data:c,error:h}=s;if(h)throw h;return await Pe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(Se(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await Nv(async l=>(l>0&&await jv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ar})),(l,c)=>{const h=200*Math.pow(2,l);return c&&Hl(c)&&Date.now()+h-o<Rs})}catch(o){if(this._debug(s,"error",o),Se(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",o),pr()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Mn(this.storage,this.storageKey);if(l&&this.userStorage){let h=await Mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await Ls(this.userStorage,this.storageKey+"-user",h)),l.user=(n=h?.user)!==null&&n!==void 0?n:Kl()}else if(l&&!l.user&&!l.user){const h=await Mn(this.storage,this.storageKey+"-user");h&&h?.user?(l.user=h.user,await ln(this.storage,this.storageKey+"-user"),await Ls(this.storage,this.storageKey,l)):l.user=Kl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vl;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${Vl}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),Hl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(l.access_token);!p&&h?.user?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var s,o;if(!n)throw new un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new ea;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new un;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(l,"error",c),Se(c)){const h={session:null,error:c};return Hl(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){c.push(g)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await Ls(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const c=jf(l);await Ls(this.storage,this.storageKey,c)}else{const l=jf(s);await Ls(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await ln(this.storage,this.storageKey),await ln(this.storage,this.storageKey+"-code-verifier"),await ln(this.storage,this.storageKey+"-user"),this.userStorage&&await ln(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&pr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Rs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/Rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Rs}ms, refresh threshold is ${lu} ticks`),l<=lu&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ih)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,o){const l=[`provider=${encodeURIComponent(s)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,h]=await Cs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(p.toString())}if(o?.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var o;const{data:l,error:c}=s;return c?{data:null,error:c}:await Pe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(Se(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var o,l;const{data:c,error:h}=s;if(h)return{data:null,error:h};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:v}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(Se(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:c}=s;if(c)return{data:null,error:c};const{data:h,error:p}=await Pe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(s){if(Se(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:l,error:c}=s;return c?{data:null,error:c}:await Pe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(Se(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:o}=await this._challenge({factorId:n.factorId});return o?{data:null,error:o}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const o=n?.factors||[],l=o.filter(h=>h.factor_type==="totp"&&h.status==="verified"),c=o.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:o,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,o;const{data:{session:l},error:c}=n;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Gl(l.access_token);let p=null;h.aal&&(p=h.aal);let g=p;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const y=h.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,s={keys:[]}){let o=s.keys.find(p=>p.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+uv>l)return o;const{data:c,error:h}=await Pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,s={}){try{let o=n;if(!o){const{data:L,error:U}=await this.getSession();if(U||!L.session)return{data:null,error:U};o=L.session.access_token}const{header:l,payload:c,signature:h,raw:{header:p,payload:g}}=Gl(o);s?.allowExpired||Lv(c.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:L}=await this.getUser(o);if(L)throw L;return{data:{claims:c,header:l,signature:h},error:null}}const y=$v(l.alg),b=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,h,wv(`${p}.${g}`)))throw new du("Invalid JWT signature");return{data:{claims:c,header:l,signature:h},error:null}}catch(o){if(Se(o))return{data:null,error:o};throw o}}}Ri.nextInstanceID=0;const Qv=Ri;class Yv extends Qv{constructor(n){super(n)}}var Xv=function(a,n,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(y){try{v(o.next(y))}catch(b){h(b)}}function g(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?c(y.value):l(y.value).then(p,g)}v((o=o.apply(a,n||[])).next())})};class Zv{constructor(n,s,o){var l,c,h;this.supabaseUrl=n,this.supabaseKey=s;const p=sv(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:Kg,realtime:Qg,auth:Object.assign(Object.assign({},Jg),{storageKey:g}),global:Gg},y=nv(o??{},v);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=y.auth)!==null&&h!==void 0?h:{},this.headers,y.global.fetch),this.fetch=ev(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new pg(new URL("rest/v1",p).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new Wg(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new sg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},o={}){return this.rest.rpc(n,s,o)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return Xv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,userStorage:c,storageKey:h,flowType:p,lock:g,debug:v},y,b){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yv({url:this.authUrl.href,headers:Object.assign(Object.assign({},N),y),storageKey:h,autoRefreshToken:n,persistSession:s,detectSessionInUrl:o,storage:l,userStorage:c,flowType:p,lock:g,debug:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(L=>L.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Og(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o?.access_token)})}_handleTokenChanged(n,s,o){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const e0=(a,n,s)=>new Zv(a,n,s);function t0(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const n=a.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}t0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const M=e0("https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY"),r0=["All","Games","Study","Outdoors"],fu=[{id:"hokm",name:"Hokm",blurb:"Classic Persian card game",tag:"Games",online:120,groups:8,image:"🎴"},{id:"takhtenard",name:"Takhte Nard",blurb:"Traditional backgammon",tag:"Games",online:95,groups:6,image:"🎲"},{id:"mafia",name:"Mafia",blurb:"Social deduction party game",tag:"Games",online:210,groups:12,image:"🕵️"},{id:"mono",name:"Monopoly",blurb:"Buy, sell, and trade properties",tag:"Games",online:180,groups:10,image:"💰"},{id:"uno",name:"Uno",blurb:"Colorful card matching fun",tag:"Games",online:250,groups:15,image:"🃏"},{id:"chess",name:"Chess",blurb:"Classic strategy board game",tag:"Games",online:130,groups:9,image:"♟️"},{id:"mathematics",name:"Mathematics",blurb:"Study numbers and problem solving",tag:"Study",online:75,groups:5,image:"📐"},{id:"biology",name:"Biology",blurb:"Explore life sciences",tag:"Study",online:60,groups:4,image:"🧬"},{id:"chemistry",name:"Chemistry",blurb:"Learn about chemicals and reactions",tag:"Study",online:50,groups:3,image:"⚗️"},{id:"history",name:"History",blurb:"Discover past events and cultures",tag:"Study",online:45,groups:3,image:"📜"},{id:"dreisam",name:"Mountain Dreisam Hike",blurb:"Join a hike up Dreisam mountain",tag:"Outdoors",online:40,groups:3,image:"⛰️"},{id:"visit",name:"Visiting",blurb:"Cultural and city visits",tag:"Outdoors",online:55,groups:4,image:"🏛️"},{id:"camp",name:"Camping",blurb:"Overnight outdoor camping trips",tag:"Outdoors",online:35,groups:2,image:"🏕️"},{id:"kayak",name:"Kayaking",blurb:"Water adventures on rivers and lakes",tag:"Outdoors",online:30,groups:2,image:"🛶"}];Object.fromEntries(fu.map(a=>[a.id.toLowerCase(),a]));function n0(){const[a,n]=Xm(),s=a.get("id"),o=a.get("code"),[l,c]=w.useState(a.get("q")??""),[h,p]=w.useState(a.get("category")??"All"),[g,v]=w.useState([]),[y,b]=w.useState(!1),N=w.useMemo(()=>{const D=(l||"").trim();return/^[A-Za-z0-9]{6,12}$/.test(D)?D.toUpperCase():null},[l]),L=12,[U,I]=w.useState(0),[E,J]=w.useState(!1),[Y,z]=w.useState(!1),[Q,te]=w.useState(null),[se,le]=w.useState({}),[Ee,Ie]=w.useState({}),[De,$e]=w.useState(0),[Z,me]=w.useState({}),[Ne,we]=w.useState(!1),[X,B]=w.useState(""),[A,$]=w.useState(""),[P,x]=w.useState(!1),[C,W]=w.useState(null);w.useEffect(()=>{const D=new URLSearchParams(a);h&&h!=="All"?D.set("category",h):D.delete("category"),l?D.set("q",l):D.delete("q"),s?D.set("id",s):D.delete("id"),o?D.set("code",o):D.delete("code"),!o&&N?D.set("code",N):N||D.delete("code"),D.toString()!==a.toString()&&n(D,{replace:!0})},[l,h,s,o,N]),w.useEffect(()=>{let D=!0;async function fe(ve){try{if(o||N){const Ke=o||N,{data:wt,error:Wt}=await M.from("groups").select("id, title, description, city, category, game, created_at, code").ilike("code",Ke).single();if(Wt)throw Wt;if(!D)return;v(wt?[wt]:[]),J(!1),te(null);return}if(s){const{data:Ke,error:wt}=await M.from("groups").select("id, title, description, city, category, game, created_at, code").eq("id",s).single();if(wt)throw wt;if(!D)return;v(Ke?[Ke]:[]),J(!1),te(null);return}ve&&(b(!0),v([]),I(0),J(!1),te(null));let be=M.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(h&&h!=="All"){const Ke=h.toLowerCase(),wt=Z[Ke]??[];if(wt.length){const Wt=wt.map(Vt=>`"${Vt}"`).join(",");be=be.or(`game.in.(${Wt}),category.eq.${Ke}`)}else be=be.eq("category",Ke)}if(l.trim()){const Ke=l.trim();be=be.or(`title.ilike.%${Ke}%,game.ilike.%${Ke}%`)}const qe=0,Ge=L-1,{data:Ue,error:We}=await be.range(qe,Ge);if(We)throw We;if(!D)return;const Ye=Ue??[];v(Ye),J(Ye.length===L),te(null)}catch(be){if(!D)return;te(be?.message??"Failed to load groups")}finally{if(!D)return;b(!1),z(!1)}}return fe(!0),()=>{D=!1}},[h,l,Z,s,o,N]);async function ee(){if(!(Y||y||!E)&&!s&&!o&&!N){z(!0);try{let D=M.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(h&&h!=="All"){const Ue=h.toLowerCase(),We=Z[Ue]??[];if(We.length){const Ye=We.map(Ke=>`"${Ke}"`).join(",");D=D.or(`game.in.(${Ye}),category.eq.${Ue}`)}else D=D.eq("category",Ue)}if(l.trim()){const Ue=l.trim();D=D.or(`title.ilike.%${Ue}%,game.ilike.%${Ue}%`)}const fe=(U+1)*L,ve=fe+L-1,{data:be,error:qe}=await D.range(fe,ve);if(qe)throw qe;const Ge=be??[];v(Ue=>[...Ue,...Ge]),I(Ue=>Ue+1),J(Ge.length===L)}catch(D){te(D?.message??"Failed to load groups")}finally{z(!1)}}}w.useEffect(()=>{let D=!0;return(async()=>{const{data:fe,error:ve}=await M.from("allowed_games").select("id, category").eq("is_active",!0);if(!D)return;if(ve){me({});return}const be={};(fe??[]).forEach(qe=>{const Ge=String(qe.category||"").toLowerCase(),Ue=String(qe.id||"").toLowerCase();!Ge||!Ue||(be[Ge]||(be[Ge]=[]),be[Ge].push(Ue))}),me(be)})(),()=>{D=!1}},[]),w.useEffect(()=>{let D=!0;return(async()=>{const{data:fe}=await M.from("groups").select("id, game");if(!D)return;const ve={};(fe??[]).forEach(We=>{const Ye=(We.game||"").toLowerCase();Ye&&(ve[Ye]=(ve[Ye]||0)+1)}),le(ve);const{data:be}=await M.from("group_members").select("user_id, groups(game)");if(!D)return;const qe={},Ge=new Set;(be??[]).forEach(We=>{const Ye=We?.groups?.game?String(We.groups.game).toLowerCase():"",Ke=We?.user_id?String(We.user_id):"";!Ye||!Ke||(Ge.add(Ke),qe[Ye]||(qe[Ye]=new Set),qe[Ye].add(Ke))});const Ue={};Object.entries(qe).forEach(([We,Ye])=>{Ue[We]=Ye.size}),Ie(Ue),$e(Ge.size)})(),()=>{D=!1}},[]);const ce=w.useMemo(()=>{const D=h==="All"?fu:fu.filter(ve=>ve.tag===h);return l.trim()?D.filter(ve=>ve.name.toLowerCase().includes(l.toLowerCase())):D},[l,h]),de=De;return d.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:[d.jsxs("div",{className:"mb-8 flex items-start justify-between gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight text-neutral-900",children:"Browse Games"}),d.jsx("p",{className:"mt-2 text-neutral-600",children:"Discover games and find players to join"}),d.jsxs("div",{className:"mt-5 flex items-center gap-2",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{value:l,onChange:D=>c(D.target.value),placeholder:"Search games…",className:"w-[420px] max-w-full rounded-xl border px-3 py-2 pl-9 text-sm outline-none ring-0 focus:border-emerald-500"}),d.jsx("span",{className:"pointer-events-none absolute left-3 top-2.5 text-neutral-400",children:"🔎"})]}),d.jsx(ot,{to:"/groups",className:"rounded-md border border-black/10 bg-white px-4 py-2 text-sm hover:bg-black/[0.04]",children:"My Groups"})]}),d.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r0.map(D=>d.jsx("button",{onClick:()=>p(D),className:`rounded-lg border px-3 py-1.5 text-sm ${D===h?"bg-emerald-600 text-white border-emerald-600":"bg-white text-neutral-700 hover:bg-neutral-50"}`,children:D},D))})]}),d.jsxs("div",{className:"shrink-0 text-right",children:[d.jsx("div",{className:"text-3xl font-semibold text-emerald-700",children:de.toLocaleString()}),d.jsx("div",{className:"text-sm text-neutral-500",children:"Players Online"}),d.jsx("button",{onClick:()=>{we(!0),W(null)},className:"mt-3 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Request Category"})]})]}),d.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ce.map(D=>d.jsx(s0,{game:D,groupCount:se[D.id]??0,memberCount:Ee[D.id]??0},D.id))}),d.jsxs("div",{className:"mt-10",children:[d.jsxs("div",{className:"flex items-baseline justify-between",children:[d.jsx("h2",{className:"text-xl font-semibold",children:o||N?"Group by Code":s?"Group by ID":h!=="All"?`Groups in ${h}`:l?`Groups matching “${l}”`:"Latest Groups"}),(o||N||s?!1:h!=="All"||l)&&d.jsx("button",{onClick:()=>{p("All"),c("")},className:"text-sm text-neutral-600 hover:text-neutral-800",children:"Clear filter"})]}),d.jsx("div",{className:"mt-4 rounded-xl border border-black/10 bg-white",children:Q?d.jsx("div",{className:"p-6 text-red-700",children:Q}):y&&g.length===0?d.jsx("div",{className:"p-6 text-neutral-500",children:"Loading…"}):g.length===0?d.jsx("div",{className:"p-6 text-neutral-500",children:"No groups found."}):d.jsxs(d.Fragment,{children:[d.jsx("ul",{children:g.map(D=>{const fe=D?.id??D?.group_id??D?.group?.id??D?.groups?.id;return fe?d.jsx("li",{className:"border-t border-black/5 px-6 py-4 first:border-none",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-neutral-900",children:D.title}),d.jsx("div",{className:"text-sm text-neutral-600",children:D.description}),d.jsxs("div",{className:"text-xs text-neutral-400",children:[D.city&&d.jsxs("span",{children:[D.city," · "]}),D.category&&d.jsx("span",{children:D.category}),D.code&&d.jsxs("span",{className:"ml-2 rounded-full bg-neutral-100 px-1.5 py-0.5 text-[10px] font-medium text-neutral-600",children:["Code: ",String(D.code).toUpperCase()]})]})]}),d.jsx(ot,{to:`/group/${fe}`,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"View"})]})},fe):null})}),E&&d.jsx("div",{className:"border-t border-black/5 p-4 text-center",children:d.jsx("button",{onClick:ee,className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] disabled:opacity-60",disabled:Y,children:Y?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):d.jsx(d.Fragment,{children:"Load more"})})})]})})]}),Ne&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-xl",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Request new category"}),d.jsx("button",{onClick:()=>we(!1),className:"rounded-md px-2 py-1 text-sm text-neutral-600 hover:bg-neutral-100",children:"✕"})]}),d.jsxs("form",{className:"mt-4 space-y-3",onSubmit:async D=>{D.preventDefault(),x(!0),W(null);const{data:fe,error:ve}=await M.auth.getUser();if(ve||!fe?.user){W("Sign in required."),x(!1);return}const be={name:X.trim().toLowerCase(),note:A.trim()||null,requested_by:fe.user.id},{error:qe}=await M.from("category_requests").insert(be);qe?W(qe.message):(W("Request sent."),B(""),$("")),x(!1)},children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Category name"}),d.jsx("input",{value:X,onChange:D=>B(D.target.value),placeholder:"e.g., Tournaments",required:!0,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Note (optional)"}),d.jsx("textarea",{value:A,onChange:D=>$(D.target.value),placeholder:"Why should this category be added?",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",rows:3})]}),C&&d.jsx("div",{className:"text-sm text-neutral-600",children:C}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[d.jsx("button",{type:"button",onClick:()=>we(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:P||!X.trim(),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-60",children:P?"Sending…":"Send request"})]})]})]})})]})}function s0({game:a,groupCount:n,memberCount:s}){return d.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-neutral-100 text-neutral-400 text-2xl",children:a.image}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("h3",{className:"font-semibold text-neutral-900",children:a.name}),d.jsx("span",{className:"rounded-md bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-700",children:"Trending"})]}),d.jsx("p",{className:"text-sm text-neutral-600",children:a.blurb})]})]}),d.jsx("span",{className:"rounded-md border px-2 py-0.5 text-[11px] text-neutral-600",children:a.tag})]}),d.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-neutral-600",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-emerald-600",children:"👥"}),d.jsxs("span",{children:[d.jsx("span",{className:"font-medium text-neutral-900",children:s.toLocaleString()})," online"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{children:"👤"}),d.jsxs("span",{children:[d.jsx("span",{className:"font-medium text-neutral-900",children:n})," active groups"]})]})]}),d.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[d.jsx(ot,{to:`/groups/game/${encodeURIComponent(a.id)}`,className:"inline-flex flex-1 items-center justify-center rounded-lg bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700",children:"Find Groups"}),d.jsx("button",{className:"rounded-lg border px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50",onClick:()=>alert("Quick Match coming soon"),children:"Quick Match"})]})]})}function i0(){const a=pn(),n="Games",s="",[o,l]=w.useState([]),[c,h]=w.useState([]),[p,g]=w.useState(!0);w.useEffect(()=>{let B=!0;return(async()=>{g(!0);const{data:A}=await M.from("allowed_categories").select("name").eq("is_active",!0),{data:$}=await M.from("allowed_games").select("id,name,category").eq("is_active",!0);B&&(l(A??[]),h(($??[]).map(P=>({id:P.id,label:P.name,category:P.category}))),g(!1))})(),()=>{B=!1}},[]);const[v,y]=w.useState(""),[b,N]=w.useState(""),[L,U]=w.useState(""),[I,E]=w.useState(3),[J,Y]=w.useState(!1),[z,Q]=w.useState(""),[te,se]=w.useState("");w.useEffect(()=>{if(!o.length)return;const B=String(n),A=o.find($=>$.name.toLowerCase()===B.toLowerCase());se((A?.name||o[0].name).toLowerCase())},[o,n]);const[le,Ee]=w.useState(!1),[Ie,De]=w.useState(""),[$e,Z]=w.useState("");w.useEffect(()=>{if(!c.length||!te)return;const B="".toLowerCase().replace(/\s+/g,""),A=c.find($=>$.id===B||$.label.toLowerCase().replace(/\s+/g,"")===B);A&&Z(A.id)},[c,s,te]);const me=w.useMemo(()=>{const B=z.trim().toLowerCase(),A=o.map($=>$.name);return B?A.filter($=>$.toLowerCase().includes(B)):A},[z,o]),Ne=w.useMemo(()=>{const B=c.filter($=>$.category.toLowerCase()===(te||"").toLowerCase()),A=Ie.trim().toLowerCase();return A?B.filter($=>$.label.toLowerCase().includes(A)||$.id.includes(A)):B},[te,Ie,c]),we=!p&&v.trim().length>0&&te&&$e&&I>=3&&I<=12;async function X(){if(!we)return;const{data:B,error:A}=await M.auth.getUser();if(A||!B?.user?.id){alert(A?.message||"Sign in required");return}const $=B.user.id,P=Math.max(3,Math.min(12,I)),x={title:v.trim(),purpose:b.trim()||null,category:(te||"").toLowerCase(),game:$e,capacity:P,visibility:"public",host_id:$},{data:C,error:W}=await M.from("groups").insert(x).select("id").single();if(W){alert(W.message);return}a(`/group/${C.id}`)}return d.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-6",children:[d.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Create Group"}),d.jsx(ot,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Back"})]}),p&&d.jsx("div",{className:"text-sm text-neutral-500",children:"Loading categories…"}),d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Title"}),d.jsx("input",{value:v,onChange:B=>y(B.target.value),placeholder:"e.g., Friday Night Hokm",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Category"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("input",{value:J?z:te||"",onChange:B=>{Y(!0),Q(B.target.value)},onFocus:()=>Y(!0),placeholder:"Search or choose category…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p}),J&&d.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[me.length===0&&d.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),me.map(B=>d.jsx("button",{type:"button",onClick:()=>{se(B.toLowerCase()),Y(!1),Q(""),c.some(A=>A.category===B&&A.id===$e)||Z("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:B},B))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Game / Activity"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("input",{value:le?Ie:c.find(B=>B.category.toLowerCase()===(te||"").toLowerCase()&&B.id===$e)?.label||"",onChange:B=>{Ee(!0),De(B.target.value)},onFocus:()=>Ee(!0),placeholder:"Search or choose game/activity…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p||!(te&&te.trim().length>0)}),le&&d.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[Ne.length===0&&d.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),Ne.map(B=>d.jsx("button",{type:"button",onClick:()=>{Z(B.id),Ee(!1),De("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:B.label},B.id))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"City (optional)"}),d.jsx("input",{value:L,onChange:B=>U(B.target.value),placeholder:"e.g., Freiburg",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Capacity"}),d.jsx("input",{type:"number",min:3,max:12,value:I,onChange:B=>E(Math.max(3,Math.min(12,Number(B.target.value||3)))),className:"mt-1 w-32 rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"}),d.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Must be between 3 and 12."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Description"}),d.jsx("textarea",{value:b,onChange:B=>N(B.target.value),placeholder:"Tell people what this group is about…",rows:4,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),d.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[d.jsx(ot,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),d.jsx("button",{disabled:!we,onClick:X,className:"rounded-md bg-emerald-700 px-4 py-2 text-white disabled:opacity-60",children:"Create Group"})]})]})]})}console.log("[SUPABASE]","https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY".slice(0,8));function o0(){const{id:a=""}=Xo();console.debug("[GroupDetail] route id =",a);const n=pn(),[s,o]=w.useState(null),[l,c]=w.useState(!0),[h,p]=w.useState(null),[g,v]=w.useState(null),[y,b]=w.useState(!1),[N,L]=w.useState(!1),[U,I]=w.useState(!1),[E,J]=w.useState(null),[Y,z]=w.useState([]),[Q,te]=w.useState({}),[se,le]=w.useState(0),[Ee,Ie]=w.useState(0),[De,$e]=w.useState(null),[Z,me]=w.useState([]),[Ne,we]=w.useState(!1),[X,B]=w.useState({}),[A,$]=w.useState(!1),[P,x]=w.useState(null),[C,W]=w.useState(""),[ee,ce]=w.useState(null),[de,D]=w.useState(!1),[fe,ve]=w.useState(!1),[be,qe]=w.useState("Schedule"),[Ge,Ue]=w.useState("");async function We(){if(s?.code)try{await navigator.clipboard.writeText(String(s.code)),b(!0),setTimeout(()=>b(!1),1500)}catch(K){console.warn("Clipboard failed",K)}}w.useEffect(()=>{let K=!1;return(async()=>{c(!0);const{data:ge}=await M.auth.getUser();K||v(ge.user?.id??null);let xe=null,je=null;const Ae=await M.from("groups").select("*").eq("id",a).maybeSingle();if(Ae.error&&(je=Ae.error),xe=Ae.data,je&&(console.warn("[GroupDetail] fetch error",je),K||p(`${je.code||"err"}:${je.message}`)),K||o(xe??null),xe?.id){const{count:_e,error:ze}=await M.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",xe.id).eq("status","active");K||le(_e??0),ze&&console.warn("[GroupDetail] member count error",ze)}c(!1)})(),()=>{K=!0}},[a]),w.useEffect(()=>{let K=!1;return(async()=>{if(!s?.id){me([]);return}let ge=await M.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),xe=ge.data||[];ge.error&&(xe=(await M.from("group_members").select("user_id, role, created_at").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0})).data||[]);const je=(xe??[]).map(_e=>({user_id:_e.user_id,role:_e.role??null,created_at:_e.created_at,name:_e.profiles?.name??null}));if(K)return;me(je);const Ae=(await M.auth.getUser()).data.user?.id||null;Ae&&we(je.some(_e=>_e.user_id===Ae)),Ae&&await Vt(je.map(_e=>_e.user_id))})(),()=>{K=!0}},[s?.id]),w.useEffect(()=>{let K=!1;return(async()=>{if(!A||!P){ce(null);return}D(!0);const[ge,xe,je]=await Promise.all([M.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",P).eq("status","active"),M.from("friendships").select("*",{count:"exact",head:!0}).eq("status","accepted").or(`user_id_a.eq.${P},user_id_b.eq.${P}`),M.from("groups").select("*",{count:"exact",head:!0}).eq("host_id",P)]);K||(ce({games:ge.count??0,friends:xe.count??0,created:je.count??0}),D(!1))})(),()=>{K=!0}},[A,P]);async function Ye(){if(!s)return;const{data:K}=await M.auth.getUser(),ge=K?.user?.id;if(!ge){p("Please sign in.");return}if(ge===s.host_id){p("Host cannot leave their own group.");return}p(null);const{error:xe}=await M.from("group_members").delete().match({group_id:s.id,user_id:ge});if(xe){p(xe.message);return}const{data:je}=await M.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),Ae=(je??[]).map(_e=>({user_id:_e.user_id,role:_e.role??null,created_at:_e.created_at,name:_e.profiles?.name??null}));me(Ae),we(!1),p("You left the group.")}async function Ke(K){if(!s)return;const{data:ge}=await M.auth.getUser(),xe=ge?.user?.id;if(!xe){p("Please sign in.");return}if(xe!==s.host_id){p("Only the host can remove members.");return}if(K===s.host_id){p("Host cannot remove themselves.");return}if(!window.confirm("Remove this member from the group?"))return;p(null);const{error:Ae}=await M.from("group_members").delete().match({group_id:s.id,user_id:K});if(Ae){p(Ae.message);return}me(_e=>_e.filter(ze=>ze.user_id!==K)),le(_e=>Math.max(0,(_e||1)-1))}w.useEffect(()=>{let K=!1;return(async()=>{if(!s?.id){J(null),z([]),te({}),Ie(0);return}const{data:ge,error:xe}=await M.from("group_polls").select("*").eq("group_id",s.id).eq("status","open").order("created_at",{ascending:!1}).limit(1);if(K)return;if(xe){p(xe.message);return}const je=ge&&ge[0];if(J(je||null),!je){z([]),te({}),Ie(0);return}const{data:Ae}=await M.from("group_poll_options").select("*").eq("poll_id",je.id).order("created_at");if(K)return;z(Ae||[]);const{data:_e}=await M.from("group_votes").select("option_id,user_id").eq("poll_id",je.id);if(K)return;const ze={},ft=new Set;_e?.forEach(It=>{ze[It.option_id]=(ze[It.option_id]||0)+1,ft.add(It.user_id)}),te(ze),Ie(ft.size)})(),()=>{K=!0}},[s?.id]);async function wt(){p(null);const{data:K}=await M.auth.getUser();if(!K.user){p("Please sign in.");return}if(!a){p("Invalid group id");return}const{error:ge}=await M.from("group_members").insert({group_id:a,user_id:K.user.id});if(ge&&ge.code!=="23505"){p(ge.message);return}we(!0);const{data:xe}=await M.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",a).eq("status","active").order("created_at",{ascending:!0}),je=(xe??[]).map(Ae=>({user_id:Ae.user_id,role:Ae.role??null,created_at:Ae.created_at,name:Ae.profiles?.name??null}));me(je),le(je.length)}function Wt(K,ge){return K?K.status==="accepted"?"accepted":K.status==="blocked"?"blocked":K.status==="pending"?K.requested_by===ge?"pending_out":"pending_in":"none":"none"}async function Vt(K){const ge=(await M.auth.getUser()).data.user;if(!ge)return;const xe=K.filter(_e=>_e!==ge.id);if(xe.length===0){B({});return}const{data:je}=await M.from("friendships").select("user_id_a,user_id_b,status,requested_by").or(xe.map(_e=>`and(user_id_a.eq.${ge.id},user_id_b.eq.${_e}),and(user_id_a.eq.${_e},user_id_b.eq.${ge.id})`).join(",")),Ae={};xe.forEach(_e=>{const ze=(je??[]).find(ft=>ft.user_id_a===ge.id&&ft.user_id_b===_e||ft.user_id_b===ge.id&&ft.user_id_a===_e);Ae[_e]=Wt(ze,ge.id)}),B(Ae)}async function rr(K){await M.rpc("request_friend",{target_id:K}),await Vt([K])}async function nr(K){await M.rpc("accept_friend",{from_id:K}),await Vt([K])}async function Mr(K){await M.rpc("remove_friend",{other_id:K}),await Vt([K])}function Et(K,ge){x(K),W(ge),$(!0)}async function gn(){if(!s||!g||!window.confirm("Delete this group? This cannot be undone."))return;p(null);const{error:ge}=await M.from("groups").delete().match({id:s.id,host_id:g});if(ge){p(ge.message);return}n("/browse")}async function Dr(){if(!s)return;const{data:K}=await M.auth.getUser();if(!K?.user){p("Please sign in."),n("/login");return}if(K.user.id!==s.host_id){p("Only the host can create a vote.");return}qe("Schedule"),Ue(""),ve(!0)}async function vn(){if(!s)return;const{data:K}=await M.auth.getUser();if(!K?.user){p("Please sign in."),n("/login");return}if(K.user.id!==s.host_id){p("Only the host can create a vote.");return}const{data:ge,error:xe}=await M.from("group_polls").insert({group_id:s.id,title:(be||"Schedule").trim(),created_by:K.user.id}).select("id").single();if(xe||!ge?.id){p(xe?.message||"Failed to create poll");return}const je=(Ge||"").split(/\r?\n/).map(_e=>_e.trim()).filter(Boolean).slice(0,20);if(je.length){const _e=je.map(ft=>({poll_id:ge.id,label:ft})),{error:ze}=await M.from("group_poll_options").insert(_e);if(ze){p(ze.message);return}}ve(!1),p("Voting created"),window.location.hash="polls",J({id:ge.id,group_id:s.id,title:(be||"Schedule").trim(),status:"open",closes_at:null,created_by:K.user.id});const{data:Ae}=await M.from("group_poll_options").select("*").eq("poll_id",ge.id).order("created_at");z(Ae||[]),te({}),setTimeout(()=>document.getElementById("polls")?.scrollIntoView({behavior:"smooth"}),0)}async function zr(K){if(!E)return;$e(K);const{data:ge}=await M.auth.getUser(),xe=ge?.user?.id;if(!xe){p("Please sign in."),n("/login"),$e(null);return}await M.from("group_members").upsert({group_id:E.group_id,user_id:xe,role:g===s?.host_id?"host":"member"},{onConflict:"group_id,user_id"});const{error:je}=await M.from("group_votes").upsert({poll_id:E.id,option_id:K,user_id:xe},{onConflict:"poll_id,user_id"});if(je){p(je.message),$e(null);return}const{data:Ae}=await M.from("group_votes").select("option_id,user_id").eq("poll_id",E.id),_e={},ze=new Set;Ae?.forEach(ft=>{_e[ft.option_id]=(_e[ft.option_id]||0)+1,ze.add(ft.user_id)}),te(_e),Ie(ze.size),$e(null)}return l?d.jsx("div",{className:"p-8 grid place-items-center",children:d.jsxs("div",{className:"flex items-center gap-3 text-neutral-600",children:[d.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),d.jsx("span",{children:"Loading…"})]})}):h&&!s&&!l?d.jsxs("div",{className:"p-6 space-y-2",children:[d.jsx("div",{className:"text-red-700 text-sm font-semibold",children:"Error loading group"}),d.jsx("div",{className:"text-xs break-words text-red-800",children:h}),d.jsxs("div",{className:"text-[10px] text-neutral-500",children:["id=",a]})]}):s?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"transition-all duration-300 "+(N&&!U?"mr-[min(92vw,520px)]":""),children:d.jsx("div",{className:"mx-auto max-w-5xl px-4 py-6",children:d.jsxs("div",{className:"grid gap-4 lg:grid-cols-[220px_1fr]",children:[d.jsxs("aside",{className:"order-2 lg:order-1 rounded-2xl border border-black/10 bg-white p-4 h-max shadow",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"Members"}),d.jsx("span",{className:"text-xs text-neutral-600",children:se})]}),d.jsxs("ul",{className:"mt-3 space-y-2",children:[Z.map(K=>{const ge=K.user_id===s.host_id,xe=K.name??K.user_id.slice(0,6);return d.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-2.5 py-1.5 text-sm bg-neutral-50",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"h-6 w-6 grid place-items-center rounded-full ring-1 ring-black/10 dark:ring-white/10 bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-800 dark:to-neutral-700 text-[11px] font-medium",children:xe.slice(0,2).toUpperCase()}),d.jsx("button",{onClick:()=>Et(K.user_id,xe),className:"text-neutral-900 underline-offset-2 hover:underline",children:xe}),g===s.host_id&&K.user_id!==s.host_id&&d.jsx("button",{onClick:()=>Ke(K.user_id),className:"ml-1 text-[11px] rounded border border-black/10 px-2 py-0.5 hover:bg-black/5",title:"Remove from group",children:"Remove"})]}),d.jsx("div",{className:"flex items-center gap-2",children:ge&&d.jsx("span",{className:"text-[10px] rounded-full bg-amber-500/15 text-amber-700 px-2 py-0.5",children:"HOST"})})]},K.user_id)}),Z.length===0&&d.jsx("li",{className:"text-xs text-neutral-600",children:"No members yet."})]})]}),d.jsxs("div",{className:"order-1 lg:order-2",children:[d.jsxs("div",{className:"rounded-2xl border border-black/10 bg-white p-5 shadow",children:[d.jsxs("div",{className:"mb-3 flex flex-wrap items-start justify-between gap-3",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("div",{className:"mb-1 flex flex-wrap items-center gap-2",children:[d.jsx(ot,{to:"/browse",className:"text-xs text-neutral-500 hover:underline",children:"Browse"}),d.jsx("span",{className:"text-neutral-300",children:"/"}),d.jsx("span",{className:"text-xs text-neutral-700",children:"Group"}),d.jsx("span",{className:"hidden sm:inline text-neutral-300",children:"·"}),d.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:s.category||"Uncategorized"})]}),d.jsx("h1",{className:"truncate text-3xl font-bold tracking-tight text-neutral-900",children:s.title}),d.jsxs("div",{className:"mt-1 text-xs text-neutral-500",children:["Created ",new Date(s.created_at).toLocaleDateString()," • Host: ",Z.find(K=>K.user_id===s.host_id)?.name||s.host_id.slice(0,6)]}),s.code&&d.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs",children:[d.jsxs("span",{className:"rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:["Code: ",String(s.code).toUpperCase()]}),d.jsx("button",{onClick:We,className:"rounded border border-black/10 bg-white px-2 py-0.5 hover:bg-black/[0.04]",title:"Copy group code",children:y?"Copied!":"Copy"}),d.jsx(ot,{to:`/browse?code=${s.code}`,className:"text-emerald-700 hover:underline",title:"Open this group in Browse by code",children:"Open in Browse"})]})]}),d.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[!Ne&&d.jsx("button",{onClick:wt,className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"Join"}),Ne&&g!==s.host_id&&d.jsx("button",{onClick:Ye,className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Leave"}),d.jsx("button",{onClick:()=>L(!0),className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Open Chat"}),g===s.host_id&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:Dr,className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700",children:"Create Voting"}),d.jsx("button",{onClick:gn,className:"rounded-lg bg-red-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-red-700",children:"Delete"})]})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"About"}),d.jsx("p",{className:"mt-1 text-sm text-neutral-700 whitespace-pre-wrap",children:s.purpose||"No description yet."})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-neutral-700",children:[d.jsxs("div",{children:["Capacity: ",d.jsx("span",{className:"font-medium text-neutral-900",children:s.capacity})]}),d.jsxs("div",{children:["Visibility: ",d.jsx("span",{className:"font-medium text-neutral-900",children:s.visibility||"private"})]}),d.jsxs("div",{children:["Format: ",d.jsx("span",{className:"font-medium text-neutral-900",children:s.is_online?"Online":"In person"})]}),s.is_online&&s.online_link&&d.jsxs("div",{className:"col-span-2 truncate",children:["Link: ",d.jsx("a",{className:"text-emerald-600 hover:underline",href:s.online_link??"#",target:"_blank",rel:"noreferrer",children:s.online_link})]}),!s.is_online&&s.location&&d.jsxs("div",{className:"col-span-2",children:["Location: ",d.jsx("span",{className:"font-medium text-neutral-900",children:s.location})]})]})]})]}),d.jsxs("section",{id:"polls",className:"mt-6 rounded-2xl border border-black/10 bg-white p-5 shadow",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Voting"}),g===s.host_id&&E&&d.jsx("span",{className:"text-xs text-neutral-600",children:"Open"})]}),!E&&d.jsx("div",{className:"mt-2 text-sm text-neutral-600",children:"No active voting."}),E&&d.jsxs("div",{className:"mt-3",children:[d.jsx("div",{className:"text-sm text-neutral-700",children:E.title}),d.jsxs("ul",{className:"mt-3 space-y-2",children:[Y.map(K=>d.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-3 py-2 bg-neutral-50",children:[d.jsx("div",{children:d.jsx("div",{className:"font-medium text-neutral-900",children:K.label})}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:"text-xs text-neutral-600",children:[Q[K.id]??0," votes"]}),d.jsxs("button",{onClick:()=>zr(K.id),disabled:!!De,className:"inline-flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm hover:bg-black/5 disabled:opacity-60 disabled:cursor-not-allowed",children:[De===K.id?d.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,"Vote"]})]})]},K.id)),Y.length===0&&d.jsx("li",{className:"text-sm text-neutral-600",children:"No options yet."})]}),d.jsxs("div",{className:"mt-3 text-xs text-neutral-600",children:["Voters: ",Ee," / Members: ",se]})]})]})]})]})})}),fe&&d.jsxs("div",{className:"fixed inset-0 z-50",children:[d.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ve(!1)}),d.jsxs("div",{className:"absolute left-1/2 top-1/2 w-[min(92vw,600px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl bg-white p-5 shadow-xl dark:bg-neutral-900",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Create Voting"}),d.jsx("label",{className:"mt-3 block text-sm",children:"Title"}),d.jsx("input",{value:be,onChange:K=>qe(K.target.value),className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),d.jsx("label",{className:"mt-3 block text-sm",children:"Options (one per line)"}),d.jsx("textarea",{value:Ge,onChange:K=>Ue(K.target.value),rows:6,placeholder:`Sat 19:00 @ Tacheles
Sun 18:00 @ Niko Club`,className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),d.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>ve(!1),className:"rounded-md border px-3 py-1.5 text-sm",children:"Cancel"}),d.jsx("button",{type:"button",onClick:vn,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Create"})]})]})]}),N&&d.jsx(a0,{groupId:s.id,onClose:()=>{L(!1),I(!1)},full:U,setFull:I}),A&&P&&d.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:d.jsxs("div",{className:"w-[420px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[d.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[d.jsx("div",{className:"text-base font-semibold",children:C}),d.jsx("button",{onClick:()=>$(!1),className:"rounded-md border px-2 py-1 text-sm",children:"Close"})]}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[d.jsx("div",{className:"text-[11px] text-neutral-600",children:"Games Played"}),d.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:ee?.games??(de?"…":0)})]}),d.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[d.jsx("div",{className:"text-[11px] text-neutral-600",children:"Friends"}),d.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:ee?.friends??(de?"…":0)})]}),d.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[d.jsx("div",{className:"text-[11px] text-neutral-600",children:"Groups Created"}),d.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:ee?.created??(de?"…":0)})]})]}),X[P]==="accepted"&&d.jsx("button",{onClick:()=>Mr(P),className:"w-full rounded-md border px-3 py-2",children:"Unfriend"}),X[P]==="none"&&d.jsx("button",{onClick:()=>rr(P),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Add friend"}),X[P]==="pending_out"&&d.jsx("div",{children:"Request sent."}),X[P]==="pending_in"&&d.jsx("button",{onClick:()=>nr(P),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Accept request"})]})]})})]}):d.jsxs("div",{className:"p-6",children:["Group not found. ",d.jsxs("span",{className:"text-xs text-neutral-500",children:["id=",a]})]})}function a0({groupId:a,onClose:n,full:s,setFull:o}){const[l,c]=w.useState([]),[h,p]=w.useState(""),[g,v]=w.useState(!1),[y,b]=w.useState(null),N=w.useRef(null),[L,U]=w.useState({}),[I,E]=w.useState(null),[J,Y]=w.useState(""),[z,Q]=w.useState(!0),[te,se]=w.useState({}),le=w.useRef(null),[Ee,Ie]=w.useState(null),[De,$e]=w.useState(null),[Z,me]=w.useState(!0),[Ne,we]=w.useState(!1),X=50;w.useEffect(()=>{(async()=>{const{data:$}=await M.auth.getUser(),P=$.user?.id??null;if(E(P),P){const{data:x}=await M.from("profiles").select("name").eq("user_id",P).maybeSingle();Y(x?.name||P.slice(0,6))}})()},[]),w.useEffect(()=>{let $=!1;return Q(!0),(async()=>{const{data:P,error:x}=await M.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",a).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(X);if(x){$||(b(x.message),Q(!1));return}if($){Q(!1);return}const C=(P??[]).map(de=>({id:de.id,group_id:de.group_id,user_id:de.user_id,content:de.content??"",created_at:de.created_at})),W=C[C.length-1]||null;Ie(W?W.created_at:null),$e(W?W.id:null),me(C.length===X);const ee=[...C].reverse();c(ee);const ce=Array.from(new Set(ee.map(de=>de.user_id)));if(ce.length){const{data:de}=await M.from("profiles").select("user_id, name").in("user_id",ce),D={};(de??[]).forEach(fe=>{D[fe.user_id]=fe.name??null}),$||U(D)}Q(!1)})(),()=>{$=!0}},[a]);async function B(){if(!Z||Ne||!Ee||!De)return;we(!0),b(null);const{data:$,error:P}=await M.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",a).or(`created_at.lt.${Ee},and(created_at.eq.${Ee},id.lt.${De})`).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(X);if(P){b(P.message),we(!1);return}const x=($??[]).map(ee=>({id:ee.id,group_id:ee.group_id,user_id:ee.user_id,content:ee.content??"",created_at:ee.created_at})),C=x[x.length-1]||null;Ie(C?C.created_at:Ee),$e(C?C.id:De),me(x.length===X);const W=[...x].reverse();c(ee=>[...W,...ee]),we(!1)}w.useEffect(()=>{const $=M.channel(`grp-msgs-${a}`).on("postgres_changes",{event:"*",schema:"public",table:"group_messages",filter:`group_id=eq.${a}`},P=>{if(P.eventType==="INSERT"){const x=P.new;c(C=>[...C,{id:x.id,group_id:x.group_id,user_id:x.user_id,content:x.content??"",created_at:x.created_at}]),L[x.user_id]||M.from("profiles").select("user_id, name").eq("user_id",x.user_id).maybeSingle().then(({data:C})=>{C&&U(W=>({...W,[C.user_id]:C.name??null}))})}if(P.eventType==="DELETE"){const x=P.old;c(C=>C.filter(W=>W.id!==x.id))}if(P.eventType==="UPDATE"){const x=P.new;c(C=>C.map(W=>W.id===x.id?{...W,content:x.content??""}:W))}}).on("broadcast",{event:"typing"},({payload:P})=>{const{user_id:x,name:C}=P;!x||x===I||(se(W=>({...W,[x]:{name:C,ts:Date.now()}})),setTimeout(()=>{se(W=>{const ee={...W};return ee[x]&&Date.now()-ee[x].ts>2500&&delete ee[x],ee})},3e3))}).subscribe();return()=>{M.removeChannel($)}},[a,I,L]),w.useEffect(()=>{Ne||N.current?.scrollTo({top:N.current.scrollHeight,behavior:"smooth"})},[l.length,Ne]);async function A($){$.preventDefault();const P=h.trim();if(!P)return;v(!0),b(null);const x=(await M.auth.getUser()).data.user;if(!x){b("Please sign in"),v(!1);return}const{error:C}=await M.from("group_messages").insert({group_id:a,user_id:x.id,content:P});C?b(C.message):p(""),v(!1)}return d.jsxs(d.Fragment,{children:[s&&d.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:n}),d.jsx("div",{className:"fixed right-0 top-0 z-50 h-full transform transition-transform duration-300 "+(s?"w-screen translate-x-0":"w-[min(92vw,520px)] translate-x-0"),children:d.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-none border-l border-black/10 bg-white shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-white px-3 py-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:n,className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-neutral-900",children:"Group Chat"}),d.jsx("div",{className:"text-[11px] text-neutral-500",children:"Visible to all members"})]})]}),d.jsx("button",{onClick:()=>o(!s),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:s?"Exit Fullscreen":"Fullscreen"})]}),d.jsxs("div",{ref:N,className:"flex-1 overflow-y-auto bg-neutral-50 px-3 py-3",children:[Z&&!z&&d.jsx("div",{className:"mb-2 flex justify-center",children:d.jsx("button",{onClick:B,disabled:Ne,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs hover:bg-black/5 disabled:opacity-60",children:Ne?"Loading…":"Load older"})}),l.map($=>{const P=I&&$.user_id===I,x=L[$.user_id]??$.user_id.slice(0,6);return d.jsx("div",{className:`mb-2 flex ${P?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm ${P?"bg-emerald-600 text-white":"bg-white border border-black/10"}`,children:[!P&&d.jsx("div",{className:"mb-0.5 text-[11px] font-medium text-neutral-600",children:x}),d.jsx("div",{className:"whitespace-pre-wrap break-words",children:$.content}),d.jsx("div",{className:`mt-1 text-[10px] ${P?"text-emerald-50/80":"text-neutral-500"}`,children:new Date($.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)}),l.length===0&&!z&&d.jsx("div",{className:"text-center text-sm text-neutral-500",children:"No messages yet."}),z&&d.jsx("div",{className:"flex justify-center py-6 text-neutral-400",children:d.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})})]}),Object.keys(te).length>0&&d.jsxs("div",{className:"px-3 py-1 text-[11px] text-neutral-500",children:[Object.values(te).map($=>$.name).join(", ")," typing…"]}),d.jsxs("form",{onSubmit:A,className:"border-t border-black/10 bg-white px-3 py-2",children:[d.jsxs("div",{className:"flex items-end gap-2",children:[d.jsx("textarea",{value:h,onChange:$=>p($.target.value),onInput:()=>{if(!I)return;const $=Date.now();le.current&&$-le.current<800||(le.current=$,M.channel(`grp-msgs-${a}`).send({type:"broadcast",event:"typing",payload:{user_id:I,name:J}}))},placeholder:"Type a message…",rows:1,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),$.currentTarget.form?.requestSubmit())},className:"min-h-[40px] max-h-40 flex-1 resize-none rounded-lg border border-black/10 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-500"}),d.jsx("button",{type:"submit",disabled:!h.trim()||g||z,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50",children:g||z?d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a 8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Sending…"]}):"Send"})]}),y&&d.jsx("div",{className:"mt-1 text-xs text-red-600",children:y})]})]})})]})}function l0(){const a=Sr();return w.useMemo(()=>new URLSearchParams(a.search),[a.search])}function u0(){const a=pn(),n=l0(),s=n.get("category")||"",o=n.get("q")||"",l=n.get("joined")==="1",c=n.get("created")==="1",[h,p]=w.useState(null),[g,v]=w.useState([]),[y,b]=w.useState(!1),[N,L]=w.useState(null),U=12,[I,E]=w.useState(0),[J,Y]=w.useState(!1),[z,Q]=w.useState(!1),[te,se]=w.useState({}),[le,Ee]=w.useState({});w.useEffect(()=>{let Z=!0;return(async()=>{const{data:me,error:Ne}=await M.from("allowed_games").select("id, category").eq("is_active",!0);if(!Z)return;if(Ne){Ee({});return}const we={};(me??[]).forEach(X=>{const B=String(X.category||"").toLowerCase(),A=String(X.id||"").toLowerCase();!B||!A||(we[B]||(we[B]=[]),we[B].push(A))}),Ee(we)})(),()=>{Z=!1}},[]),w.useEffect(()=>{(async()=>{const{data:Z}=await M.auth.getUser();p(Z.user?.id??null)})()},[]),w.useEffect(()=>{let Z=!0;const me=we=>{let X=we;const B=s?s.toLowerCase():"",A=new Set(["games","study","outdoors"]);if(B)if(A.has(B)){const $=le[B]??[];if($.length>0){const P=$.map(x=>`"${x}"`).join(",");X=X.or(`game.in.(${P}),category.eq.${B}`)}else X=X.eq("category",B)}else{const $=B.replace(/[^a-z0-9]+/g,"");X=X.or(`game.eq.${$},game.ilike.%${B}%,title.ilike.%${B}%`)}if(o.trim()){const $=o.trim();X=X.or(`title.ilike.%${$}%,game.ilike.%${$}%`)}return X};async function Ne(we){try{if(we&&(b(!0),v([]),E(0),Y(!1)),L(null),(l||c)&&!h){v([]),L("Please sign in to view your groups."),b(!1),Q(!1);return}let X=[];const B=(we?0:(I+1)*U)+0,A=B+U-1;if(c&&h){let $=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",h).order("created_at",{ascending:!1}).range(B,A);const{data:P,error:x}=await me($);if(x)throw x;X=P??[]}else if(l&&h){const{data:$,error:P}=await M.from("group_members").select("group_id").eq("user_id",h);if(P)throw P;const x=($??[]).map(C=>C.group_id);if(x.length>0){let C=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",x).order("created_at",{ascending:!1}).range(B,A);const{data:W,error:ee}=await me(C);if(ee)throw ee;X=W??[]}else X=[]}else{let $=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range(B,A);const{data:P,error:x}=await me($);if(x)throw x;X=P??[]}if(!Z)return;if(we&&v(X),Y(X.length===U),(X??[]).length>0){const $=X.map(C=>C.id),{data:P}=await M.from("group_polls").select("group_id").in("group_id",$).eq("status","open"),x={};(P??[]).forEach(C=>{x[C.group_id]=!0}),se(C=>({...C,...x}))}}catch(X){if(!Z)return;L(X?.message??"Failed to load groups")}finally{if(!Z)return;b(!1),Q(!1)}}return Ne(!0),()=>{Z=!1}},[s,o,l,c,h,le]);async function Ie(Z){if(!h){alert("Please sign in to join groups.");return}const{error:me}=await M.from("group_members").insert({group_id:Z,user_id:h});if(me&&me.code!=="23505"){alert(me.message);return}a(`/group/${Z}`)}async function De(Z){if(!h){alert("Please sign in.");return}const me=g.find(X=>X.id===Z);if(!me)return;if(me.host_id!==h){alert("Only the host can create a poll.");return}const{data:Ne,error:we}=await M.from("group_polls").insert({group_id:Z,title:"Schedule",created_by:h}).select("id").single();if(we){alert(we.message);return}se(X=>({...X,[Z]:!0})),a(`/group/${Z}#polls`)}const $e=c?"My Groups – Created":l?"My Groups – Joined":s?`Groups • ${s}`:"All Groups";return d.jsxs("main",{className:"mx-auto max-w-5xl px-4 py-8",children:[d.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold",children:$e}),o&&d.jsxs("p",{className:"text-sm text-neutral-600",children:["Filtered by: “",o,"”"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ot,{to:"/browse",className:"text-sm underline",children:"Back"}),d.jsx(ot,{to:"/create",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"New Group"})]})]}),d.jsx("div",{className:"mt-6 rounded-xl border border-black/10 bg-white",children:y?d.jsx("ul",{className:"divide-y divide-black/5",children:Array.from({length:6}).map((Z,me)=>d.jsxs("li",{className:"p-4 flex items-start justify-between gap-4",children:[d.jsxs("div",{className:"w-full",children:[d.jsx("div",{className:"h-4 w-48 animate-pulse rounded bg-neutral-200"}),d.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),d.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"h-8 w-20 animate-pulse rounded bg-neutral-200"}),d.jsx("div",{className:"h-8 w-20 animate-pulse rounded bg-neutral-200"})]})]},me))}):N?d.jsx("div",{className:"p-6 text-red-700",children:N}):g.length===0?d.jsx("div",{className:"p-6 text-neutral-600",children:"No groups found."}):d.jsxs(d.Fragment,{children:[d.jsx("ul",{className:"divide-y divide-black/5",children:g.map(Z=>d.jsxs("li",{className:"p-4 flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:Z.title??"Untitled group"}),Z.description&&d.jsx("div",{className:"text-sm text-neutral-600",children:Z.description}),d.jsxs("div",{className:"mt-1 text-xs text-neutral-500",children:[Z.category?`#${Z.category}`:"#general",Z.game?` • ${Z.game}`:"",Z.city?` • ${Z.city}`:"",Z.capacity?` • ${Z.capacity} slots`:""]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ot,{to:`/group/${Z.id}`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"View"}),d.jsx("button",{onClick:()=>Ie(Z.id),className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"Join"}),Z.host_id===h&&(te[Z.id]?d.jsx(ot,{to:`/group/${Z.id}#polls`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Manage voting"}):d.jsx("button",{onClick:()=>De(Z.id),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"Create voting"}))]})]},Z.id))}),J&&d.jsxs("div",{className:"border-t border-black/5 p-4 text-center",children:[d.jsx("button",{onClick:()=>(async()=>{await(async()=>{document.activeElement?.blur?.()})(),await(async()=>{})()})().then(()=>{}),className:"hidden"}),d.jsx("button",{onClick:()=>(async()=>{try{Q(!0);const Z=(I+1)*U,me=Z+U-1;let Ne=[];if(c&&h){let X=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",h).order("created_at",{ascending:!1}).range(Z,me);const{data:B,error:A}=await($=>{let P=$;const x=s?s.toLowerCase():"",C=new Set(["games","study","outdoors"]);if(x)if(C.has(x)){const W=le[x]??[];if(W.length>0){const ee=W.map(ce=>`"${ce}"`).join(",");P=P.or(`game.in.(${ee}),category.eq.${x}`)}else P=P.eq("category",x)}else{const W=x.replace(/[^a-z0-9]+/g,"");P=P.or(`game.eq.${W},game.ilike.%${x}%,title.ilike.%${x}%`)}if(o.trim()){const W=o.trim();P=P.or(`title.ilike.%${W}%,game.ilike.%${W}%`)}return P})(X);if(A)throw A;Ne=B??[]}else if(l&&h){const{data:X}=await M.from("group_members").select("group_id").eq("user_id",h),B=(X??[]).map(A=>A.group_id);if(B.length>0){let A=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",B).order("created_at",{ascending:!1}).range(Z,me);const{data:$,error:P}=await(x=>{let C=x;const W=s?s.toLowerCase():"",ee=new Set(["games","study","outdoors"]);if(W)if(ee.has(W)){const ce=le[W]??[];if(ce.length>0){const de=ce.map(D=>`"${D}"`).join(",");C=C.or(`game.in.(${de}),category.eq.${W}`)}else C=C.eq("category",W)}else{const ce=W.replace(/[^a-z0-9]+/g,"");C=C.or(`game.eq.${ce},game.ilike.%${W}%,title.ilike.%${W}%`)}if(o.trim()){const ce=o.trim();C=C.or(`title.ilike.%${ce}%,game.ilike.%${ce}%`)}return C})(A);if(P)throw P;Ne=$??[]}}else{let X=M.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range(Z,me);const{data:B,error:A}=await($=>{let P=$;const x=s?s.toLowerCase():"",C=new Set(["games","study","outdoors"]);if(x)if(C.has(x)){const W=le[x]??[];if(W.length>0){const ee=W.map(ce=>`"${ce}"`).join(",");P=P.or(`game.in.(${ee}),category.eq.${x}`)}else P=P.eq("category",x)}else{const W=x.replace(/[^a-z0-9]+/g,"");P=P.or(`game_slug.eq.${W},game.ilike.%${x}%,title.ilike.%${x}%`)}if(o.trim()){const W=o.trim();P=P.or(`title.ilike.%${W}%,game.ilike.%${W}%`)}return P})(X);if(A)throw A;Ne=B??[]}v(X=>[...X,...Ne]),E(X=>X+1),Y(Ne.length===U);const we=Ne.map(X=>X.id);if(we.length){const{data:X}=await M.from("group_polls").select("group_id").in("group_id",we).eq("status","open"),B={};(X??[]).forEach(A=>{B[A.group_id]=!0}),se(A=>({...A,...B}))}}finally{Q(!1)}})(),className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",disabled:z,children:z?d.jsxs(d.Fragment,{children:[d.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):d.jsx(d.Fragment,{children:"Load more"})})]})]})})]})}function oh(a){const n=new Date(a),s=Math.floor((Date.now()-n.getTime())/1e3);if(s<60)return`${s}s`;const o=Math.floor(s/60);if(o<60)return`${o}m`;const l=Math.floor(o/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}function c0(){const a=pn(),n=Sr();w.useLayoutEffect(()=>{n.hash==="#chat"&&sr(!0)},[n.key,n.hash]),w.useEffect(()=>{const S=()=>sr(!0);return window.addEventListener("open-chat",S),()=>window.removeEventListener("open-chat",S)},[]);const[s,o]=w.useState(null),[l,c]=w.useState(null),[h,p]=w.useState(""),[g,v]=w.useState(null),[y,b]=w.useState("system"),[N,L]=w.useState(!1),[U,I]=w.useState(!1),[E,J]=w.useState(!1),[Y,z]=w.useState(""),[Q,te]=w.useState(""),[se,le]=w.useState("UTC"),[Ee,Ie]=w.useState(""),[De,$e]=w.useState(null),[Z,me]=w.useState(!1),[Ne,we]=w.useState(!1),[X,B]=w.useState(0),[A,$]=w.useState(0),[P,x]=w.useState([]),[C,W]=w.useState("created"),[ee,ce]=w.useState(0),[de,D]=w.useState([]),[fe,ve]=w.useState(!1),[be,qe]=w.useState([]),[Ge,Ue]=w.useState([]),[We,Ye]=w.useState([]),Ke=w.useMemo(()=>{if(C==="created")return be;if(C==="joined")return P;const S=new Map;for(const H of be)H?.id&&S.set(H.id,H);for(const H of P)H?.id&&!S.has(H.id)&&S.set(H.id,H);return Array.from(S.values())},[C,be,P]),wt=w.useMemo(()=>{if(C==="created")return X;if(C==="joined")return A;const S=new Set;return be.forEach(H=>H?.id&&S.add(H.id)),P.forEach(H=>H?.id&&S.add(H.id)),S.size},[C,X,A,be,P]),Wt=w.useMemo(()=>(h||l||"?").slice(0,2).toUpperCase(),[h,l]),[Vt,rr]=w.useState(!0),[nr,Mr]=w.useState(null),[Et,gn]=w.useState(null),[Dr,vn]=w.useState(!1),[zr,K]=w.useState(null),[ge,xe]=w.useState([]),[je,Ae]=w.useState(""),_e=w.useRef(null),[ze,ft]=w.useState([]),[It,yn]=w.useState(""),[Ms,Fr]=w.useState(!1),[Br,sr]=w.useState(!0),gr=w.useRef(null),[qn,Wn]=w.useState(!1),Vn=w.useRef(null),[qr,$i]=w.useState([]),[ir,Ai]=w.useState([]),[Hn,Ds]=w.useState([]),[Ct,zs]=w.useState(new Map),Ht=w.useMemo(()=>{const S=new Map;if(ze.forEach(ke=>S.set(ke.other_id,ke)),!s)return ze;const H=[...ze];return qr.map(ke=>ke.user_id_a===s?ke.user_id_b:ke.user_id_a).forEach(ke=>{if(S.has(ke))return;const st=Ct.get(ke);H.push({other_id:ke,name:st?.name&&st.name.trim()?st.name:ke.slice(0,6),avatar_url:st?.avatar_url??null,last_body:"",last_at:new Date(0).toISOString(),last_from_me:!1,unread:!1})}),H.sort((ke,st)=>st.last_at>ke.last_at?1:st.last_at<ke.last_at?-1:0),H},[ze,qr,Ct,s]),wn=w.useMemo(()=>ze.filter(S=>!S.last_from_me),[ze]),Wr=w.useMemo(()=>ir.length+Ge.length+We.length,[ir.length,Ge.length,We.length]),Gn=w.useMemo(()=>s?qr.map(H=>H.user_id_a===s?H.user_id_b:H.user_id_a).map(H=>({id:H,name:Ct.get(H)?.name||H.slice(0,6),avatar_url:Ct.get(H)?.avatar_url??null})):[],[qr,Ct,s]),[ta,Ii]=w.useState(!1),[or,jr]=w.useState(null),[Fs,Ui]=w.useState(""),[Mi,Di]=w.useState(null),[Vr,xn]=w.useState("none");w.useEffect(()=>{_e.current?.scrollIntoView({behavior:"smooth"})},[ge.length]),w.useEffect(()=>{function S(H){const ue=H.target;qn&&Vn.current&&!Vn.current.contains(ue)&&Wn(!1),Br&&gr.current&&!gr.current.contains(ue)&&sr(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[qn,Br]);async function Kn(S){if(!s)return;Fr(!1),K(null),vn(!0),xe([]),gn(S),ft(ue=>ue.map(ke=>ke.other_id===S?{...ke,unread:!1,last_from_me:!0}:ke));const{data:H}=await M.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`and(from_id.eq.${s},to_id.eq.${S}),and(from_id.eq.${S},to_id.eq.${s})`).order("created_at",{ascending:!0}).limit(200);xe(H??[]),vn(!1)}async function Jn(S){const{data:H}=await M.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${S},user_id_b.eq.${S}`).eq("status","accepted");$i(H??[]);const{data:ue}=await M.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${S},user_id_b.eq.${S}`).eq("status","pending").neq("requested_by",S);Ai(ue??[]);const{data:ke}=await M.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").eq("requested_by",S).eq("status","pending");Ds(ke??[])}async function Bs(S){const{data:H}=await M.from("group_members").select("group_id, role, status, created_at, groups(title)").eq("user_id",S).in("status",["pending","invited"]).order("created_at",{ascending:!1}).limit(50),ue=(H??[]).map(tt=>({group_id:tt.group_id,group_title:tt.groups?.title??null,role:tt.role??null,status:tt.status??"pending",invited_at:tt.created_at}));Ue(ue);const{data:ke}=await M.from("group_members").select("group_id").eq("user_id",S).eq("status","active"),st=Array.from(new Set((ke??[]).map(tt=>tt.group_id)));let Tt=[];if(st.length){const{data:tt}=await M.from("group_messages").select("group_id, content, created_at, groups(title), user_id").in("group_id",st).neq("user_id",S).order("created_at",{ascending:!1}).limit(20);Tt=(tt??[]).map(vr=>({group_id:vr.group_id,group_title:vr.groups?.title??null,preview:String(vr.content||"").slice(0,120),created_at:vr.created_at}))}Ye(Tt)}async function Je(S){if(!s)return;jr(S);const{data:H}=await M.from("profiles").select("user_id,name,avatar_url").eq("user_id",S).maybeSingle();Ui(H?.name??S.slice(0,6)),Di(H?.avatar_url??null);const{data:ue}=await M.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`and(user_id_a.eq.${s},user_id_b.eq.${S}),and(user_id_a.eq.${S},user_id_b.eq.${s})`).limit(1).maybeSingle();let ke="none";ue&&(ue.status==="accepted"?ke="accepted":ue.status==="blocked"?ke="blocked":ue.status==="pending"&&(ke=ue.requested_by===s?"pending_out":"pending_in")),xn(ke),Ii(!0)}async function ra(S){await M.rpc("request_friend",{target_id:S}),s&&await Jn(s),xn("pending_out")}async function _n(S){await M.rpc("accept_friend",{from_id:S}),s&&await Jn(s),or===S&&xn("accepted")}async function Qn(S){await M.rpc("remove_friend",{other_id:S}),s&&await Jn(s),or===S&&xn("none")}async function Yn(S){if(!s)return;const{error:H}=await M.from("group_members").update({status:"active"}).eq("group_id",S).eq("user_id",s);if(H)try{await M.from("group_members").delete().eq("group_id",S).eq("user_id",s),await M.from("group_members").insert({group_id:S,user_id:s,status:"active",role:"member"})}catch{}await Bs(s)}async function na(S){s&&(await M.from("group_members").delete().eq("group_id",S).eq("user_id",s),await Bs(s))}function zi(S){Ye(H=>H.filter(ue=>ue.group_id!==S)),Wn(!1),a(`/group/${S}`)}const Nr=w.useMemo(()=>{if(!Et)return{name:"",avatar:null};const S=Ht.find(ue=>ue.other_id===Et);if(S)return{name:S.name,avatar:S.avatar_url};const H=Ct.get(Et);return{name:H?.name||Et.slice(0,6),avatar:H?.avatar_url??null}},[Et,Ht,Ct]);async function Gt(){if(!s)return;$e(null);const{data:S,error:H}=await M.from("profiles").select("name, city, timezone, interests, avatar_url").eq("user_id",s).maybeSingle();if(H){$e(H.message),J(!0);return}z(S?.name??""),te(S?.city??""),le(S?.timezone??"UTC");const ue=Array.isArray(S?.interests)?S.interests:[];Ie(ue.join(", ")),v(S?.avatar_url??null),J(!0)}function Fi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch{return"UTC"}}async function Ut(S){if(S&&S.preventDefault(),!!s){$e(null),me(!0);try{const H=Y.trim(),ue=Q.trim(),ke=se.trim()||"UTC",st=Ee.split(",").map(tt=>tt.trim()).filter(Boolean),{error:Tt}=await M.from("profiles").update({name:H,city:ue,timezone:ke,interests:st}).eq("user_id",s);if(Tt)throw Tt;p(H),$e("Saved."),localStorage.setItem("theme",y),localStorage.setItem("emailNotifs",N?"1":"0"),localStorage.setItem("pushNotifs",U?"1":"0"),sa(y),J(!1)}catch(H){$e(H?.message||"Failed to save")}finally{me(!1)}}}function sa(S){const H=document.documentElement;H.classList.remove("light","dark"),S==="light"?H.classList.add("light"):S==="dark"&&H.classList.add("dark")}async function ia(S){const H=S.target.files?.[0];if(!(!s||!H))try{we(!0);const ue=H.name.split(".").pop()||"jpg",ke=`${s}/${Date.now()}.${ue}`,{error:st}=await M.storage.from("avatars").upload(ke,H,{upsert:!0});if(st)throw st;const{data:Tt}=M.storage.from("avatars").getPublicUrl(ke),tt=Tt?.publicUrl||null;tt&&(await M.from("profiles").update({avatar_url:tt}).eq("user_id",s),v(tt))}catch(ue){console.error(ue),$e("Avatar upload failed")}finally{we(!1)}}async function oa(){try{await M.auth.signOut(),localStorage.removeItem("onboardingSeen"),window.location.href=`${window.location.origin}/onboarding`}catch(S){console.error("Logout failed:",S),window.location.href=`${window.location.origin}/onboarding`}}w.useEffect(()=>{(async()=>{if(!s){zs(new Map);return}const{data:S,error:H}=await M.rpc("get_my_friend_profiles");if(H){zs(new Map);return}const ue=new Map;(S??[]).forEach(ke=>{ue.set(ke.user_id,{name:ke.name??"",avatar_url:ke.avatar_url??null})}),zs(ue)})()},[s,qr.length]),w.useEffect(()=>{let S=!1;return(async()=>{rr(!0),Mr(null);const{data:H}=await M.auth.getUser(),ue=H?.user?.id||null,ke=H?.user?.email||null,st=localStorage.getItem("theme");st&&b(st);const Tt=localStorage.getItem("emailNotifs");Tt&&L(Tt==="1");const tt=localStorage.getItem("pushNotifs");if(tt&&I(tt==="1"),!ue){rr(!1),Mr("Please sign in.");return}if(S)return;o(ue),c(ke);const[vr,kn,aa]=await Promise.all([M.from("profiles").select("name, city, timezone, interests, avatar_url").eq("user_id",ue).maybeSingle(),M.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",ue).eq("status","active").in("role",["owner","host"]),M.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",ue).eq("status","active")]);if(!S){const Mt=vr.data||{};p(Mt?.name??""),te(Mt?.city??""),le(Mt?.timezone??"UTC"),Mt?.timezone||le(Fi());const Oe=Array.isArray(Mt?.interests)?Mt.interests:[];Ie(Oe.join(", ")),v(Mt?.avatar_url??null),B(kn.count??0),$(aa.count??0),rr(!1)}(async()=>{const{data:Mt,error:Oe}=await M.from("group_members").select("group_id, created_at").eq("user_id",ue).eq("status","active").in("role",["owner","host"]).order("created_at",{ascending:!1}).limit(20);!S&&Oe&&console.warn("createdMemberships error",Oe);const qs=Array.from(new Set((Mt??[]).map(Te=>Te.group_id))).filter(Boolean);let Ws=[];if(qs.length){const{data:Te}=await M.from("groups").select("id,title,game,category,created_at").in("id",qs).order("created_at",{ascending:!1}).limit(20);Ws=Te??[]}if(!S){const Te=new Set,Me=Ws.filter(at=>at?.id&&!Te.has(at.id)&&Te.add(at.id)).slice(0,5);qe(Me)}const{data:Vs,error:Hs}=await M.from("group_members").select("group_id, created_at").eq("user_id",ue).eq("status","active").order("created_at",{ascending:!1}).limit(20);!S&&Hs&&console.warn("joinedMemberships error",Hs);const Gs=Array.from(new Set((Vs??[]).map(Te=>Te.group_id))).filter(Boolean);let Ks=[];if(Gs.length){const{data:Te}=await M.from("groups").select("id,title,game,category,created_at").in("id",Gs).order("created_at",{ascending:!1}).limit(20);Ks=Te??[]}if(!S){const Te=new Set,Me=Ks.filter(at=>at?.id&&!Te.has(at.id)&&Te.add(at.id)).slice(0,5);x(Me)}const{data:Xn}=await M.from("group_members").select("group_id, groups(game)").eq("user_id",ue);if(!S){const Te=new Map;(Xn??[]).forEach(at=>{const yr=at?.groups?.game||"Unknown";Te.set(yr,(Te.get(yr)||0)+1)});const Me=Array.from(Te.entries()).map(([at,yr])=>({game:at,count:yr}));Me.sort((at,yr)=>yr.count-at.count||at.game.localeCompare(yr.game)),D(Me),ce((Xn??[]).length)}const{data:Zn}=await M.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`from_id.eq.${ue},to_id.eq.${ue}`).order("created_at",{ascending:!1}).limit(100),Dt=new Map;(Zn??[]).forEach(Te=>{const Me=Te.from_id===ue?Te.to_id:Te.from_id;Dt.has(Me)||Dt.set(Me,{last_body:Te.body,last_at:Te.created_at,last_from_me:Te.from_id===ue})});const Kt=Array.from(Dt.keys());let ar=new Map;if(Kt.length){const{data:Te}=await M.from("profiles").select("user_id,name,avatar_url").in("user_id",Kt);(Te??[]).forEach(Me=>{ar.set(Me.user_id,{name:Me.name??"",avatar_url:Me.avatar_url??null})})}const Sn=Kt.map(Te=>{const Me=Dt.get(Te),at=ar.get(Te)||{name:"",avatar_url:null};return{other_id:Te,name:at.name||Te.slice(0,6),avatar_url:at.avatar_url??null,last_body:Me.last_body,last_at:Me.last_at,last_from_me:Me.last_from_me,unread:!Me.last_from_me}});S||ft(Sn),S||await Jn(ue),S||await Bs(ue)})()})(),()=>{S=!0}},[]);async function bn(){if(!s||!Et||!je.trim())return;const S=je.trim();Ae("");const{data:H,error:ue}=await M.from("direct_messages").insert({from_id:s,to_id:Et,body:S}).select("id,from_id,to_id,body,created_at").single();if(ue){K(ue.message);return}xe(ke=>[...ke,H])}return Vt?d.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-neutral-600",children:"Loading…"}):nr?d.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-red-600",children:nr}):d.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-6",children:[d.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_360px]",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[d.jsx("div",{className:"grid h-16 w-16 place-content-center rounded-full bg-emerald-100 text-emerald-800 ring-1 ring-emerald-300/60 overflow-hidden",children:g?d.jsx("img",{src:g,alt:"",className:"h-16 w-16 object-cover"}):d.jsx("span",{className:"text-2xl font-semibold tracking-wide",children:Wt})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:h||l}),d.jsx("div",{className:"text-sm text-neutral-600",children:l}),d.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[d.jsxs("div",{ref:Vn,className:"relative",children:[d.jsxs("button",{onClick:()=>Wn(S=>!S),className:"ml-2 inline-flex items-center gap-2 rounded-full border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",title:"Notifications","aria-label":"Notifications",children:[d.jsx("span",{className:"text-base",children:"🔔"}),Wr>0&&d.jsx("span",{className:"rounded-full bg-emerald-600 px-2 py-0.5 text-white text-xs leading-none",children:Wr})]}),qn&&d.jsxs("div",{className:"absolute right-0 z-50 mt-1 w-96 max-w-[92vw] overflow-hidden rounded-xl border border-black/10 bg-white shadow-xl",children:[d.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-neutral-50 px-3 py-2",children:[d.jsx("div",{className:"text-sm font-medium text-neutral-800",children:"Notifications"}),d.jsx("span",{className:"rounded-full bg-neutral-200 px-2 py-0.5 text-[11px] text-neutral-800",children:Wr})]}),d.jsxs("div",{className:"max-h-80 overflow-y-auto p-2",children:[d.jsxs("div",{className:"mb-2",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Friend requests"}),ir.length===0?d.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new requests"}):d.jsx("ul",{className:"space-y-1",children:ir.slice(0,5).map(S=>{const H=S.user_id_a===s?S.user_id_b:S.user_id_a,ue=Ct.get(H)?.name||H.slice(0,6);return d.jsxs("li",{className:"flex items-center justify-between rounded-md border border-black/10 px-2 py-1.5",children:[d.jsx("span",{className:"truncate text-sm text-neutral-800",children:ue}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>_n(H),className:"rounded-md bg-emerald-600 px-2 py-0.5 text-xs text-white",children:"Accept"}),d.jsx("button",{onClick:()=>Qn(H),className:"rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Decline"})]})]},S.id)})})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Group messages"}),We.length===0?d.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new messages"}):d.jsx("ul",{className:"divide-y",children:We.slice(0,5).map(S=>d.jsxs("li",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{className:"min-w-0 pr-2",children:[d.jsx("div",{className:"truncate text-sm font-medium text-neutral-900",children:S.group_title||S.group_id.slice(0,6)}),d.jsx("div",{className:"truncate text-xs text-neutral-600",children:S.preview})]}),d.jsx("button",{onClick:()=>zi(S.group_id),className:"shrink-0 rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Open"})]},`${S.group_id}-${S.created_at}`))})]})]})]})]}),d.jsx("button",{onClick:Gt,className:"ml-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Settings"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[d.jsx(Pf,{label:"Groups Created",value:X,to:"/browse?created=1"}),d.jsx(Pf,{label:"Games Played",value:ee,onClick:()=>ve(!0)})]}),ir.length>0&&d.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[d.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-medium text-neutral-900",children:"Friend Requests"}),d.jsx("span",{className:"text-xs text-neutral-600",children:ir.length})]}),d.jsx("ul",{className:"divide-y",children:ir.map(S=>{const H=S.user_id_a===s?S.user_id_b:S.user_id_a;return d.jsxs("li",{className:"flex items-center justify-between py-2",children:[d.jsx("div",{className:"text-sm text-neutral-800",children:H}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>_n(H),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"}),d.jsx("button",{onClick:()=>Qn(H),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Decline"})]})]},S.id)})})]}),d.jsxs("section",{className:"mt-8 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-sm text-neutral-600",children:"Show:"}),d.jsxs("div",{className:"inline-flex rounded-lg border border-black/10 bg-white p-0.5",children:[d.jsx("button",{onClick:()=>W("created"),className:`px-3 py-1.5 text-sm rounded-md ${C==="created"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Created"}),d.jsx("button",{onClick:()=>W("joined"),className:`px-3 py-1.5 text-sm rounded-md ${C==="joined"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Joined"}),d.jsx("button",{onClick:()=>W("all"),className:`px-3 py-1.5 text-sm rounded-md ${C==="all"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"All"})]})]}),d.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[d.jsx(Ql,{title:C==="created"?"Created by me":C==="joined"?"Joined":"All my groups",count:wt,empty:"No groups yet.",children:Ke.map(S=>{const H=S?.id??S?.group_id??S?.group?.id??S?.groups?.id;return H?d.jsx(d0,{id:H,title:S.title,meta:[S.category||"–",S.game||""].filter(Boolean).join(" · ")},H):null})}),d.jsx(Ql,{title:"Friends",count:Ht.length,empty:"No friends yet.",children:Ht.map(S=>d.jsx(f0,{_otherId:S.other_id,name:S.name,avatarUrl:S.avatar_url,lastBody:S.last_body,lastAt:S.last_at,unread:S.unread,onOpen:()=>Kn(S.other_id),onView:()=>Je(S.other_id)},S.other_id))})]})]}),Ge.length>0&&d.jsx("section",{className:"mt-6",children:d.jsx(Ql,{title:"Group Invitations",count:Ge.length,empty:"No invitations",children:Ge.map(S=>d.jsxs("li",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-neutral-900",children:S.group_title||S.group_id.slice(0,6)}),d.jsxs("div",{className:"text-xs text-neutral-600",children:["Role: ",S.role||"member"," · Status: ",S.status]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>Yn(S.group_id),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs text-white",children:"Accept"}),d.jsx("button",{onClick:()=>na(S.group_id),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs",children:"Decline"})]})]},S.group_id))})})]}),Br&&d.jsxs("aside",{ref:gr,className:"rounded-2xl border border-black/10 bg-white p-4 shadow-sm h-max sticky top-4 transition-all duration-300",children:[!Et&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"mb-3 relative",children:[d.jsx("input",{value:It,onChange:S=>{yn(S.target.value),Fr(!0)},onFocus:()=>Fr(!0),onBlur:()=>setTimeout(()=>Fr(!1),120),placeholder:"Search friends…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),Ms&&It.trim().length>0&&d.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-md border border-black/10 bg-white shadow",children:d.jsxs("ul",{children:[Gn.filter(S=>S.name.toLowerCase().includes(It.toLowerCase())).slice(0,8).map(S=>d.jsxs("li",{className:"flex items-center justify-between gap-2 px-2 py-2 hover:bg-black/[0.03]",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-8 w-8 rounded-full bg-neutral-200 grid place-items-center text-[11px] font-medium overflow-hidden",children:S.avatar_url?d.jsx("img",{src:S.avatar_url,alt:"",className:"h-8 w-8 rounded-full object-cover"}):S.name.slice(0,2).toUpperCase()}),d.jsx("div",{className:"text-sm text-neutral-900",children:S.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onMouseDown:H=>H.preventDefault(),onClick:()=>{yn(""),Kn(S.id)},className:"rounded-md border border-black/10 bg-white px-2 py-1 text-xs hover:bg-black/[0.04]",children:"Chat"}),d.jsx("button",{onMouseDown:H=>H.preventDefault(),onClick:()=>{yn(""),Je(S.id)},className:"rounded-md bg-emerald-600 px-2 py-1 text-xs text-white hover:bg-emerald-700",children:"View"})]})]},S.id)),Gn.filter(S=>S.name.toLowerCase().includes(It.toLowerCase())).length===0&&d.jsx("li",{className:"px-2 py-2 text-xs text-neutral-600",children:"No matches"})]})})]}),d.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:d.jsxs("ul",{children:[Ht.filter(S=>S.name.toLowerCase().includes(It.toLowerCase())).map(S=>d.jsxs("li",{className:"flex items-center justify-between gap-2 px-1 py-2 hover:bg-black/[0.03] rounded cursor-pointer",onClick:()=>Kn(S.other_id),children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center text-sm font-medium overflow-hidden",children:S.avatar_url?d.jsx("img",{src:S.avatar_url,alt:"",className:"h-10 w-10 rounded-full object-cover"}):S.name.slice(0,2).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-neutral-900",children:S.name}),d.jsxs("div",{className:"text-xs text-neutral-600 truncate max-w-[180px]",children:[S.last_from_me?"You: ":"",S.last_body]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-neutral-500",children:oh(S.last_at)}),S.unread&&d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"})]})]},S.other_id)),Ht.length===0&&d.jsx("li",{className:"px-1 py-2 text-xs text-neutral-600",children:"No conversations yet."})]})})]}),Et&&d.jsxs("div",{className:"flex h-[70vh] flex-col",children:[d.jsxs("div",{className:"mb-2 flex items-center gap-3 border-b border-black/10 pb-2",children:[d.jsx("button",{onClick:()=>gn(null),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Back"}),d.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:Nr.avatar?d.jsx("img",{src:Nr.avatar,alt:"",className:"h-9 w-9 rounded-full object-cover"}):Nr.name.slice(0,2).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-neutral-900",children:Nr.name}),d.jsx("div",{className:"text-[11px] text-neutral-500",children:"Direct message"})]})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto rounded-md border border-black/10 p-3 text-sm",children:[Dr&&d.jsx("div",{className:"text-neutral-600",children:"Loading…"}),zr&&d.jsx("div",{className:"mb-2 rounded border border-red-200 bg-red-50 px-2 py-1 text-red-700",children:zr}),!Dr&&ge.length===0&&d.jsx("div",{className:"text-neutral-600",children:"Say hi 👋"}),!Dr&&ge.map(S=>d.jsx("div",{className:`mb-2 flex ${S.from_id===s?"justify-end":"justify-start"}`,children:d.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-1.5 ${S.from_id===s?"bg-emerald-600 text-white":"bg-neutral-100"}`,children:S.body})},S.id)),d.jsx("div",{ref:_e})]}),d.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[d.jsx("input",{value:je,onChange:S=>Ae(S.target.value),onKeyDown:S=>{S.key==="Enter"&&bn()},placeholder:"Type a message…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),d.jsx("button",{onClick:bn,className:"rounded-md bg-emerald-600 px-3 py-2 text-sm text-white",children:"Send"})]})]})]}),!Br&&d.jsxs("button",{onClick:()=>{sr(!0)},className:"fixed bottom-4 right-4 z-40 h-12 w-12 rounded-full bg-emerald-600 text-white shadow-lg flex items-center justify-center hover:bg-emerald-700 transition relative",title:"Open chat","aria-label":"Open chat",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6",children:d.jsx("path",{d:"M3.25 6.75A2.75 2.75 0 0 1 6 4h12a2.75 2.75 0 0 1 2.75 2.75v6.5A2.75 2.75 0 0 1 18 16H9.414a1.75 1.75 0 0 0-1.238.512l-2.476 2.476A.75.75 0 0 1 4 18.75V6.75z"})}),wn.length>0&&d.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-emerald-400 text-[10px] font-medium text-white animate-pulse",children:wn.length})]})]}),fe&&d.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:d.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[d.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[d.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Games Played"}),d.jsx("button",{type:"button",onClick:()=>ve(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),d.jsxs("div",{className:"mb-2 text-sm text-neutral-700",children:["Total sessions joined: ",d.jsx("span",{className:"font-medium text-neutral-900",children:ee})]}),d.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:de.length===0?d.jsx("div",{className:"text-sm text-neutral-600",children:"No games yet."}):d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-left text-neutral-500",children:[d.jsx("th",{className:"py-1 pr-2",children:"Game"}),d.jsx("th",{className:"py-1 pr-2",children:"Times"}),d.jsx("th",{className:"py-1 pr-2",children:"Share"})]})}),d.jsx("tbody",{children:de.map(S=>{const H=ee>0?Math.round(S.count/ee*100):0;return d.jsxs("tr",{className:"border-t border-black/5",children:[d.jsx("td",{className:"py-1 pr-2 text-neutral-900",children:S.game}),d.jsx("td",{className:"py-1 pr-2",children:S.count}),d.jsxs("td",{className:"py-1 pr-2 text-neutral-600",children:[H,"%"]})]},S.game)})})]})})]})}),E&&d.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:d.jsxs("form",{onSubmit:Ut,className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[d.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[d.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Edit Profile"}),d.jsx("button",{type:"button",onClick:()=>J(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Name"}),d.jsx("input",{value:Y,onChange:S=>z(S.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"Your name",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Avatar"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:g?d.jsx("img",{src:g,alt:"",className:"h-10 w-10 object-cover"}):d.jsx("span",{className:"text-xs",children:Wt})}),d.jsx("input",{type:"file",accept:"image/*",onChange:ia,className:"text-sm"}),Ne&&d.jsx("span",{className:"text-xs text-neutral-600",children:"Uploading…"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"City"}),d.jsx("input",{value:Q,onChange:S=>te(S.target.value),onBlur:()=>{(!se||se==="UTC")&&le(Fi())},className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"City"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Timezone"}),d.jsx("input",{value:se,onChange:S=>le(S.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"e.g., Europe/Berlin"}),d.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Auto-fills from your device when you set City. You can still override manually."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Interests"}),d.jsx("input",{value:Ee,onChange:S=>Ie(S.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"comma, separated, tags"}),d.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Saved as tags in your profile."})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Theme"}),d.jsxs("select",{value:y,onChange:S=>b(S.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",children:[d.jsx("option",{value:"system",children:"System"}),d.jsx("option",{value:"light",children:"Light"}),d.jsx("option",{value:"dark",children:"Dark"})]}),d.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Light/Dark applies after save."})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{id:"emailNotifs",type:"checkbox",checked:N,onChange:S=>L(S.target.checked),className:"h-4 w-4 rounded border-black/20"}),d.jsx("label",{htmlFor:"emailNotifs",className:"text-sm text-neutral-800",children:"Email notifications"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{id:"pushNotifs",type:"checkbox",checked:U,onChange:S=>I(S.target.checked),className:"h-4 w-4 rounded border-black/20"}),d.jsx("label",{htmlFor:"pushNotifs",className:"text-sm text-neutral-800",children:"Push notifications"})]}),De&&d.jsx("div",{className:"mt-3 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:De}),d.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[d.jsx("button",{type:"button",onClick:oa,className:"rounded-md border border-red-200 bg-red-50 px-3 py-1.5 text-sm text-red-700",children:"Log out"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{type:"button",onClick:()=>J(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:Z,className:`rounded-md px-3 py-1.5 text-sm text-white ${Z?"bg-neutral-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:Z?"Saving…":"Save"})]})]})]})}),ta&&d.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:d.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[d.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-12 w-12 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:Mi?d.jsx("img",{src:Mi,alt:"",className:"h-12 w-12 rounded-full object-cover"}):d.jsx("span",{className:"text-sm font-medium",children:(Fs||"").slice(0,2).toUpperCase()})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-base font-semibold text-neutral-900",children:Fs}),d.jsx("div",{className:"text-xs text-neutral-600",children:or})]})]}),d.jsx("button",{onClick:()=>Ii(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),d.jsx("div",{className:"space-y-3",children:d.jsxs("div",{className:"rounded-md border border-black/10 p-3 text-sm",children:[d.jsx("div",{className:"mb-2 font-medium text-neutral-800",children:"Friend status"}),Vr==="accepted"&&d.jsx("div",{className:"text-emerald-700",children:"Friends"}),Vr==="pending_in"&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-neutral-700",children:"Requested you"}),d.jsx("button",{onClick:()=>or&&_n(or),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"})]}),Vr==="pending_out"&&d.jsx("div",{className:"text-neutral-700",children:"Request sent"}),Vr==="none"&&or&&d.jsx("button",{onClick:()=>ra(or),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Add Friend"}),Vr==="accepted"&&or&&d.jsx("button",{onClick:()=>Qn(or),className:"ml-2 rounded-md border border-black/10 px-3 py-1.5 text-sm",children:"Remove"})]})})]})})]})}function Pf({label:a,value:n,to:s,onClick:o}){const l=d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-sm text-neutral-600",children:a}),d.jsx("div",{className:"mt-1 text-2xl font-semibold text-neutral-900",children:n})]});return s?d.jsx(ot,{to:s,className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm hover:shadow",children:l}):d.jsx("button",{onClick:o,className:"w-full rounded-xl border border-black/10 bg-white p-4 text-left shadow-sm hover:shadow",children:l})}function Ql({title:a,count:n,empty:s,children:o}){return d.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[d.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-medium text-neutral-900",children:a}),d.jsx("span",{className:"text-xs text-neutral-600",children:n})]}),pu.Children.count(o)===0?d.jsx("p",{className:"text-sm text-neutral-600",children:s}):d.jsx("ul",{className:"divide-y",children:o})]})}function d0({id:a,title:n,meta:s}){const o=String(a).slice(0,8).toUpperCase();return d.jsxs("li",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{children:[d.jsx(ot,{to:`/group/${a}`,className:"font-medium text-neutral-900 hover:underline",children:n}),d.jsx("div",{className:"text-xs text-neutral-600",children:s}),d.jsxs("div",{className:"text-[11px] text-neutral-500 tracking-wider",children:["Code: ",o]})]}),d.jsx(ot,{to:`/group/${a}`,className:"text-sm text-emerald-700 hover:underline",children:"Open"})]})}function f0({_otherId:a,name:n,avatarUrl:s,lastBody:o,lastAt:l,unread:c,onOpen:h,onView:p}){return d.jsxs("li",{className:"flex items-center justify-between py-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:s?d.jsx("img",{src:s,alt:"",className:"h-9 w-9 rounded-full object-cover"}):n.slice(0,2).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-neutral-900",children:n}),d.jsx("div",{className:"text-xs text-neutral-600 truncate max-w-[220px]",children:o})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-[10px] text-neutral-500",children:oh(l)}),c&&d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),d.jsx("button",{onClick:p,className:"text-sm text-neutral-700 hover:underline",children:"View"}),d.jsx("button",{onClick:h,className:"text-sm text-emerald-700 hover:underline",children:"Chat"})]})]})}function h0(){const{game:a=""}=Xo(),n=(a||"").toLowerCase().replace(/[^a-z0-9]+/g,"").trim(),s=(a||"").replace(/-/g," ").trim(),[o,l]=w.useState([]),[c,h]=w.useState(null),[p,g]=w.useState(!0),[v,y]=w.useState(null),[b,N]=w.useState(new Set),[L,U]=w.useState(null);w.useEffect(()=>{let E=!0;return(async()=>{g(!0);const{data:J,error:Y}=await M.from("groups").select("*").eq("game",n).order("created_at",{ascending:!1}).limit(100);E&&(Y?h(Y.message):l(J??[]),g(!1))})(),()=>{E=!1}},[n]),w.useEffect(()=>{let E=!0;return(async()=>{const{data:J}=await M.auth.getUser(),Y=J?.user?.id??null;if(!E)return;if(y(Y),!Y){N(new Set);return}const{data:z,error:Q}=await M.from("group_members").select("group_id").eq("user_id",Y);if(E){if(Q){N(new Set);return}N(new Set((z??[]).map(te=>te.group_id)))}})(),()=>{E=!1}},[]);async function I(E){if(!v){h("Sign in required");return}U(E);const{error:J}=await M.from("group_members").insert({group_id:E,user_id:v,role:"member"});if(J)h(J.message);else{const Y=new Set(b);Y.add(E),N(Y)}U(null)}return d.jsxs("main",{className:"max-w-5xl mx-auto p-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h1",{className:"text-2xl font-semibold",children:["Groups · ",s]}),d.jsx(ot,{to:"/browse",className:"text-sm underline",children:"Back"})]}),p&&d.jsx("p",{className:"mt-6 text-gray-600",children:"Loading…"}),c&&d.jsxs("p",{className:"mt-6 text-red-600",children:["Load error: ",c]}),!p&&!c&&o.length===0&&d.jsx("p",{className:"mt-6 text-gray-600",children:"No groups found."}),d.jsx("ul",{className:"mt-6 grid gap-4",children:o.map(E=>d.jsxs("li",{className:"border rounded-xl p-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-lg font-medium",children:E.name||E.title||E.group_name||"Untitled group"}),d.jsx("span",{className:"text-xs px-2 py-1 rounded border",children:E.is_online?"Online":"In-person"})]}),E.description&&d.jsx("p",{className:"mt-2 text-sm text-gray-700",children:E.description}),d.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Game: ",E.game," · Category: ",E.category,E.city?` · City: ${E.city}`:""]}),E.is_online&&E.online_link&&d.jsx("a",{className:"mt-3 inline-block text-sm underline",href:E.online_link,target:"_blank",rel:"noreferrer",children:"Join link"}),d.jsx("div",{className:"mt-4 flex gap-2",children:b.has(E.id)?d.jsx(ot,{to:`/group/${E.id}`,className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"View"}):d.jsx("button",{onClick:()=>I(E.id),disabled:L===E.id,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-60",children:L===E.id?"Joining…":"Join"})})]},E.id))})]})}function p0(){const{id:a}=Xo(),[n,s]=w.useState(null),[o,l]=w.useState([]),[c,h]=w.useState(!0),[p,g]=w.useState(null);return w.useEffect(()=>{let v=!1;return(async()=>{h(!0),g(null);const{data:y}=await M.auth.getSession();console.debug("[GroupDetail] fetching group",{id:a,uid:y?.session?.user?.id});const{data:b,error:N,status:L}=await M.from("groups").select("id, title, name, group_name, purpose, game, category, capacity, visibility, host_id, is_online, online_link, location, created_at").eq("id",a).maybeSingle();if(!v){if(N){console.error("[GroupDetail] groups fetch error",{status:L,error:N}),g(`fetch_failed:${L}:${N.code}:${N.message}`),s(null),h(!1);return}if(!b){console.warn("[GroupDetail] no row for id",a),g("not_found"),s(null),h(!1);return}s(b),h(!1)}})(),()=>{v=!0}},[a]),w.useEffect(()=>{a&&(async()=>{const{data:v,error:y}=await M.from("group_members").select("user_id, role, status, created_at, profiles(user_id, name)").eq("group_id",a).order("created_at",{ascending:!0});if(y){g(y.message);return}l((v||[]).map(b=>({...b,profiles:Array.isArray(b.profiles)?b.profiles[0]||null:b.profiles??null})))})()},[a]),!n&&!c?d.jsxs("div",{className:"p-6",children:["Group not found. ",d.jsxs("span",{className:"text-xs text-neutral-500",children:["id=",a]})]}):d.jsxs("main",{className:"max-w-5xl mx-auto p-6",children:[c&&d.jsx("p",{children:"Loading group details..."}),p&&d.jsx("p",{className:"text-red-600",children:p}),n&&d.jsxs(d.Fragment,{children:[d.jsx("h1",{className:"text-3xl font-bold",children:n.title||n.name||n.group_name||"Untitled Group"}),d.jsx("p",{children:n.purpose}),d.jsxs("div",{children:[d.jsx("strong",{children:"Game:"})," ",n.game,"  ",d.jsx("strong",{children:"Category:"})," ",n.category,"  ",d.jsx("strong",{children:"Capacity:"})," ",n.capacity,"  ",d.jsx("strong",{children:"Visibility:"})," ",n.visibility,"  ",d.jsx("strong",{children:"Location:"})," ",n.location,"  ",d.jsx("strong",{children:"Online:"})," ",n.is_online?"Yes":"No","  ",n.is_online&&n.online_link&&d.jsx("a",{href:n.online_link,target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"Online Link"})]}),d.jsx("h2",{className:"mt-6 text-xl font-semibold",children:"Members"}),d.jsx("ul",{children:o.map(v=>d.jsxs("li",{className:"border-b py-2",children:[v.profiles?.name||v.user_id," - ",v.role," - ",v.status]},v.user_id))})]})]})}const m0=w.lazy(()=>Is(()=>import("./Onboarding-DhWMn23q.js"),[])),ah=w.createContext({user:null,loading:!0});function ju(){return w.useContext(ah)}function g0({children:a}){const[n,s]=w.useState(null),[o,l]=w.useState(!0);w.useEffect(()=>{let h=!0;(async()=>{const{data:g}=await M.auth.getUser();h&&(s(g.user??null),l(!1))})();const{data:{subscription:p}}=M.auth.onAuthStateChange((g,v)=>{s(v?.user??null)});return()=>{p.unsubscribe(),h=!1}},[]);const c=w.useMemo(()=>({user:n,loading:o}),[n,o]);return d.jsx(ah.Provider,{value:c,children:a})}function ji({children:a}){const{user:n,loading:s}=ju(),o=Sr();return s?null:n?d.jsx(d.Fragment,{children:a}):d.jsx(Zo,{to:"/onboarding",replace:!0,state:{from:o}})}function v0(){return d.jsx("div",{className:"fixed top-4 left-4 z-50",children:d.jsx(ot,{to:"/onboarding",className:"flex items-center justify-center h-10 w-10 rounded-full border border-black/10 bg-white/90 text-xl shadow-md hover:bg-black/[0.04]","aria-label":"Onboarding",title:"Onboarding",children:"🎯"})})}function y0(){pn();const{user:a}=ju(),s=Sr().pathname.startsWith("/onboarding");return!a||s?null:d.jsx("div",{className:"fixed inset-x-0 bottom-4 z-[60] flex items-center justify-center pointer-events-none",children:d.jsxs("nav",{className:"pointer-events-auto flex items-center gap-4 rounded-full border border-black/10 bg-white/90 backdrop-blur px-4 py-2 shadow-lg",children:[d.jsx(ot,{to:"/browse",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Browse",title:"Browse",children:d.jsx("span",{className:"text-2xl",children:"🔍"})}),d.jsx(ot,{to:"/",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Home",title:"Home",children:d.jsx("span",{className:"text-2xl",children:"🏠"})}),d.jsx(ot,{to:"/create",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Create group",title:"Create group",children:d.jsx("span",{className:"text-2xl",children:"➕"})})]})})}class w0 extends pu.Component{constructor(n){super(n),this.state={error:null}}static getDerivedStateFromError(n){return{error:n}}render(){return this.state.error?d.jsx("div",{className:"grid min-h-screen place-items-center p-6",children:d.jsxs("div",{className:"max-w-md text-center",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Something broke"}),d.jsx("p",{className:"text-sm text-neutral-600 break-words mt-2",children:String(this.state.error?.message??this.state.error)}),d.jsx("button",{className:"mt-4 rounded-md border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/[0.04]",onClick:()=>location.reload(),children:"Reload"})]})}):this.props.children}}function x0(){const{user:a,loading:n}=ju();return n?null:d.jsx(Zo,{to:a?"/profile":"/onboarding",replace:!0})}function _0(){const{id:a}=Xo();return d.jsx(Zo,{to:`/group/${a}`,replace:!0})}function b0(){return d.jsxs(g0,{children:[d.jsx(v0,{}),d.jsx(y0,{}),d.jsx(w0,{children:d.jsx(w.Suspense,{fallback:d.jsx("div",{className:"grid min-h-screen place-items-center text-sm text-neutral-600",children:"Loading…"}),children:d.jsxs(zm,{children:[d.jsx(tr,{path:"/",element:d.jsx(x0,{})}),d.jsx(tr,{path:"/onboarding",element:d.jsx(m0,{})}),d.jsx(tr,{path:"/browse",element:d.jsx(n0,{})}),d.jsx(tr,{path:"/groups",element:d.jsx(u0,{})}),d.jsx(tr,{path:"/profile",element:d.jsx(ji,{children:d.jsx(c0,{})})}),d.jsx(tr,{path:"/create",element:d.jsx(ji,{children:d.jsx(i0,{})})}),d.jsx(tr,{path:"/group/:id",element:d.jsx(ji,{children:d.jsx(o0,{})})}),d.jsx(tr,{path:"/groups/game/:game",element:d.jsx(ji,{children:d.jsx(h0,{})})}),d.jsx(tr,{path:"/groups/mine",element:d.jsx(ji,{children:d.jsx(p0,{})})}),d.jsx(tr,{path:"/groups/:id",element:d.jsx(_0,{})}),d.jsx(tr,{path:"*",element:d.jsx(Zo,{to:"/",replace:!0})})]})})})]})}Jp.createRoot(document.getElementById("root")).render(d.jsx(w.StrictMode,{children:d.jsx(Km,{children:d.jsx(b0,{})})}));export{d as j,w as r,M as s,pn as u};
