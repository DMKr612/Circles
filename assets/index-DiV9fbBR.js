function Bp(o,n){for(var s=0;s<n.length;s++){const a=n[s];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in o)){const u=Object.getOwnPropertyDescriptor(a,l);u&&Object.defineProperty(o,l,u.get?u:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function Df(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function qp(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var s=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var l=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:function(){return o[a]}})}),s}var Kl={exports:{}},Ki={},Jl={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function Wp(){if(Jd)return Pe;Jd=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.iterator;function C(w){return w===null||typeof w!="object"?null:(w=b&&w[b]||w["@@iterator"],typeof w=="function"?w:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function N(w,T,q){this.props=w,this.context=T,this.refs=I,this.updater=q||L}N.prototype.isReactComponent={},N.prototype.setState=function(w,T){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,T,"setState")},N.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function J(){}J.prototype=N.prototype;function Z(w,T,q){this.props=w,this.context=T,this.refs=I,this.updater=q||L}var F=Z.prototype=new J;F.constructor=Z,M(F,N.prototype),F.isPureReactComponent=!0;var Y=Array.isArray,ne=Object.prototype.hasOwnProperty,ae={current:null},we={key:!0,ref:!0,__self:!0,__source:!0};function Ee(w,T,q){var X,le={},me=null,z=null;if(T!=null)for(X in T.ref!==void 0&&(z=T.ref),T.key!==void 0&&(me=""+T.key),T)ne.call(T,X)&&!we.hasOwnProperty(X)&&(le[X]=T[X]);var ge=arguments.length-2;if(ge===1)le.children=q;else if(1<ge){for(var _e=Array(ge),Se=0;Se<ge;Se++)_e[Se]=arguments[Se+2];le.children=_e}if(w&&w.defaultProps)for(X in ge=w.defaultProps,ge)le[X]===void 0&&(le[X]=ge[X]);return{$$typeof:o,type:w,key:me,ref:z,props:le,_owner:ae.current}}function et(w,T){return{$$typeof:o,type:w.type,key:T,ref:w.ref,props:w.props,_owner:w._owner}}function Fe(w){return typeof w=="object"&&w!==null&&w.$$typeof===o}function qe(w){var T={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(q){return T[q]})}var We=/\/+/g;function Be(w,T){return typeof w=="object"&&w!==null&&w.key!=null?qe(""+w.key):T.toString(36)}function G(w,T,q,X,le){var me=typeof w;(me==="undefined"||me==="boolean")&&(w=null);var z=!1;if(w===null)z=!0;else switch(me){case"string":case"number":z=!0;break;case"object":switch(w.$$typeof){case o:case n:z=!0}}if(z)return z=w,le=le(z),w=X===""?"."+Be(z,0):X,Y(le)?(q="",w!=null&&(q=w.replace(We,"$&/")+"/"),G(le,T,q,"",function(Se){return Se})):le!=null&&(Fe(le)&&(le=et(le,q+(!le.key||z&&z.key===le.key?"":(""+le.key).replace(We,"$&/")+"/")+w)),T.push(le)),1;if(z=0,X=X===""?".":X+":",Y(w))for(var ge=0;ge<w.length;ge++){me=w[ge];var _e=X+Be(me,ge);z+=G(me,T,q,_e,le)}else if(_e=C(w),typeof _e=="function")for(w=_e.call(w),ge=0;!(me=w.next()).done;)me=me.value,_e=X+Be(me,ge++),z+=G(me,T,q,_e,le);else if(me==="object")throw T=String(w),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return z}function he(w,T,q){if(w==null)return w;var X=[],le=0;return G(w,X,"","",function(me){return T.call(q,me,le++)}),X}function pe(w){if(w._status===-1){var T=w._result;T=T(),T.then(function(q){(w._status===0||w._status===-1)&&(w._status=1,w._result=q)},function(q){(w._status===0||w._status===-1)&&(w._status=2,w._result=q)}),w._status===-1&&(w._status=0,w._result=T)}if(w._status===1)return w._result.default;throw w._result}var re={current:null},U={transition:null},$={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:U,ReactCurrentOwner:ae};function R(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:he,forEach:function(w,T,q){he(w,function(){T.apply(this,arguments)},q)},count:function(w){var T=0;return he(w,function(){T++}),T},toArray:function(w){return he(w,function(T){return T})||[]},only:function(w){if(!Fe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Pe.Component=N,Pe.Fragment=s,Pe.Profiler=l,Pe.PureComponent=Z,Pe.StrictMode=a,Pe.Suspense=g,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Pe.act=R,Pe.cloneElement=function(w,T,q){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var X=M({},w.props),le=w.key,me=w.ref,z=w._owner;if(T!=null){if(T.ref!==void 0&&(me=T.ref,z=ae.current),T.key!==void 0&&(le=""+T.key),w.type&&w.type.defaultProps)var ge=w.type.defaultProps;for(_e in T)ne.call(T,_e)&&!we.hasOwnProperty(_e)&&(X[_e]=T[_e]===void 0&&ge!==void 0?ge[_e]:T[_e])}var _e=arguments.length-2;if(_e===1)X.children=q;else if(1<_e){ge=Array(_e);for(var Se=0;Se<_e;Se++)ge[Se]=arguments[Se+2];X.children=ge}return{$$typeof:o,type:w.type,key:le,ref:me,props:X,_owner:z}},Pe.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:u,_context:w},w.Consumer=w},Pe.createElement=Ee,Pe.createFactory=function(w){var T=Ee.bind(null,w);return T.type=w,T},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(w){return{$$typeof:p,render:w}},Pe.isValidElement=Fe,Pe.lazy=function(w){return{$$typeof:x,_payload:{_status:-1,_result:w},_init:pe}},Pe.memo=function(w,T){return{$$typeof:v,type:w,compare:T===void 0?null:T}},Pe.startTransition=function(w){var T=U.transition;U.transition={};try{w()}finally{U.transition=T}},Pe.unstable_act=R,Pe.useCallback=function(w,T){return re.current.useCallback(w,T)},Pe.useContext=function(w){return re.current.useContext(w)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(w){return re.current.useDeferredValue(w)},Pe.useEffect=function(w,T){return re.current.useEffect(w,T)},Pe.useId=function(){return re.current.useId()},Pe.useImperativeHandle=function(w,T,q){return re.current.useImperativeHandle(w,T,q)},Pe.useInsertionEffect=function(w,T){return re.current.useInsertionEffect(w,T)},Pe.useLayoutEffect=function(w,T){return re.current.useLayoutEffect(w,T)},Pe.useMemo=function(w,T){return re.current.useMemo(w,T)},Pe.useReducer=function(w,T,q){return re.current.useReducer(w,T,q)},Pe.useRef=function(w){return re.current.useRef(w)},Pe.useState=function(w){return re.current.useState(w)},Pe.useSyncExternalStore=function(w,T,q){return re.current.useSyncExternalStore(w,T,q)},Pe.useTransition=function(){return re.current.useTransition()},Pe.version="18.3.1",Pe}var Qd;function Su(){return Qd||(Qd=1,Jl.exports=Wp()),Jl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function Vp(){if(Yd)return Ki;Yd=1;var o=Su(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,v){var x,b={},C=null,L=null;v!==void 0&&(C=""+v),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(L=g.ref);for(x in g)a.call(g,x)&&!u.hasOwnProperty(x)&&(b[x]=g[x]);if(p&&p.defaultProps)for(x in g=p.defaultProps,g)b[x]===void 0&&(b[x]=g[x]);return{$$typeof:n,type:p,key:C,ref:L,props:b,_owner:l.current}}return Ki.Fragment=s,Ki.jsx=f,Ki.jsxs=f,Ki}var Xd;function Hp(){return Xd||(Xd=1,Kl.exports=Vp()),Kl.exports}var c=Hp(),y=Su();const Nu=Df(y),Gp=Bp({__proto__:null,default:Nu},[y]);var uo={},Ql={exports:{}},Bt={},Yl={exports:{}},Xl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd;function Kp(){return Zd||(Zd=1,(function(o){function n(U,$){var R=U.length;U.push($);e:for(;0<R;){var w=R-1>>>1,T=U[w];if(0<l(T,$))U[w]=$,U[R]=T,R=w;else break e}}function s(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var $=U[0],R=U.pop();if(R!==$){U[0]=R;e:for(var w=0,T=U.length,q=T>>>1;w<q;){var X=2*(w+1)-1,le=U[X],me=X+1,z=U[me];if(0>l(le,R))me<T&&0>l(z,le)?(U[w]=z,U[me]=R,w=me):(U[w]=le,U[X]=R,w=X);else if(me<T&&0>l(z,R))U[w]=z,U[me]=R,w=me;else break e}}return $}function l(U,$){var R=U.sortIndex-$.sortIndex;return R!==0?R:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();o.unstable_now=function(){return f.now()-p}}var g=[],v=[],x=1,b=null,C=3,L=!1,M=!1,I=!1,N=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(U){for(var $=s(v);$!==null;){if($.callback===null)a(v);else if($.startTime<=U)a(v),$.sortIndex=$.expirationTime,n(g,$);else break;$=s(v)}}function Y(U){if(I=!1,F(U),!M)if(s(g)!==null)M=!0,pe(ne);else{var $=s(v);$!==null&&re(Y,$.startTime-U)}}function ne(U,$){M=!1,I&&(I=!1,J(Ee),Ee=-1),L=!0;var R=C;try{for(F($),b=s(g);b!==null&&(!(b.expirationTime>$)||U&&!qe());){var w=b.callback;if(typeof w=="function"){b.callback=null,C=b.priorityLevel;var T=w(b.expirationTime<=$);$=o.unstable_now(),typeof T=="function"?b.callback=T:b===s(g)&&a(g),F($)}else a(g);b=s(g)}if(b!==null)var q=!0;else{var X=s(v);X!==null&&re(Y,X.startTime-$),q=!1}return q}finally{b=null,C=R,L=!1}}var ae=!1,we=null,Ee=-1,et=5,Fe=-1;function qe(){return!(o.unstable_now()-Fe<et)}function We(){if(we!==null){var U=o.unstable_now();Fe=U;var $=!0;try{$=we(!0,U)}finally{$?Be():(ae=!1,we=null)}}else ae=!1}var Be;if(typeof Z=="function")Be=function(){Z(We)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,he=G.port2;G.port1.onmessage=We,Be=function(){he.postMessage(null)}}else Be=function(){N(We,0)};function pe(U){we=U,ae||(ae=!0,Be())}function re(U,$){Ee=N(function(){U(o.unstable_now())},$)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_continueExecution=function(){M||L||(M=!0,pe(ne))},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return C},o.unstable_getFirstCallbackNode=function(){return s(g)},o.unstable_next=function(U){switch(C){case 1:case 2:case 3:var $=3;break;default:$=C}var R=C;C=$;try{return U()}finally{C=R}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var R=C;C=U;try{return $()}finally{C=R}},o.unstable_scheduleCallback=function(U,$,R){var w=o.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?w+R:w):R=w,U){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=R+T,U={id:x++,callback:$,priorityLevel:U,startTime:R,expirationTime:T,sortIndex:-1},R>w?(U.sortIndex=R,n(v,U),s(g)===null&&U===s(v)&&(I?(J(Ee),Ee=-1):I=!0,re(Y,R-w))):(U.sortIndex=T,n(g,U),M||L||(M=!0,pe(ne))),U},o.unstable_shouldYield=qe,o.unstable_wrapCallback=function(U){var $=C;return function(){var R=C;C=$;try{return U.apply(this,arguments)}finally{C=R}}}})(Xl)),Xl}var ef;function Jp(){return ef||(ef=1,Yl.exports=Kp()),Yl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function Qp(){if(tf)return Bt;tf=1;var o=Su(),n=Jp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function u(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},b={};function C(e){return g.call(b,e)?!0:g.call(x,e)?!1:v.test(e)?b[e]=!0:(x[e]=!0,!1)}function L(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M(e,t,r,i){if(t===null||typeof t>"u"||L(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function I(e,t,r,i,d,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new I(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new I(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new I(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new I(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new I(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new I(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(J,Z);N[t]=new I(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(J,Z);N[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(J,Z);N[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)});function F(e,t,r,i){var d=N.hasOwnProperty(t)?N[t]:null;(d!==null?d.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M(t,r,d,i)&&(r=null),i||d===null?C(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,i=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Y=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ae=Symbol.for("react.portal"),we=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),et=Symbol.for("react.profiler"),Fe=Symbol.for("react.provider"),qe=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),U=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,w;function T(e){if(w===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var q=!1;function X(e,t){if(!e||q)return"";q=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var i=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){i=O}e.call(t.prototype)}else{try{throw Error()}catch(O){i=O}e()}}catch(O){if(O&&i&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),h=i.stack.split(`
`),m=d.length-1,_=h.length-1;1<=m&&0<=_&&d[m]!==h[_];)_--;for(;1<=m&&0<=_;m--,_--)if(d[m]!==h[_]){if(m!==1||_!==1)do if(m--,_--,0>_||d[m]!==h[_]){var j=`
`+d[m].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=m&&0<=_);break}}}finally{q=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?T(e):""}function le(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=X(e.type,!1),e;case 11:return e=X(e.type.render,!1),e;case 1:return e=X(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case we:return"Fragment";case ae:return"Portal";case et:return"Profiler";case Ee:return"StrictMode";case Be:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qe:return(e.displayName||"Context")+".Consumer";case Fe:return(e._context.displayName||"Context")+".Provider";case We:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case he:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===Ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ge(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Se(e){var t=_e(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(m){i=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function V(e){e._valueTracker||(e._valueTracker=Se(e))}function se(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=_e(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function je(e,t){var r=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function De(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ge(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ue(e,t){t=t.checked,t!=null&&F(e,"checked",t,!1)}function Qe(e,t){Ue(e,t);var r=ge(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xt(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xt(e,t.type,ge(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xt(e,t,r){(t!=="number"||ce(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ze=Array.isArray;function At(e,t,r,i){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ge(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function qt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(ze(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ge(r)}}function Rr(e,t){var r=ge(t.value),i=ge(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function xr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ls(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ls(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qr,us=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function or(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yr=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(e){Yr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wr[t]=wr[e]})});function $t(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wr.hasOwnProperty(e)&&wr[e]?(""+t).trim():t+"px"}function Q(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,d=$t(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,d):e[r]=d}}var xe=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(e,t){if(t){if(xe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Te(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function be(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ye=null,Xe=null,Wt=null;function ii(e){if(e=Li(e)){if(typeof Ye!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ja(t),Ye(e.stateNode,e.type,t))}}function Lr(e){Xe?Wt?Wt.push(e):Wt=[e]:Xe=e}function ai(){if(Xe){var e=Xe,t=Wt;if(Wt=Xe=null,ii(e),t)for(e=0;e<t.length;e++)ii(t[e])}}function Xr(e,t){return e(t)}function cs(){}var oi=!1;function On(e,t,r){if(oi)return e(t,r);oi=!0;try{return Xr(e,t,r)}finally{oi=!1,(Xe!==null||Wt!==null)&&(cs(),ai())}}function _r(e,t){var r=e.stateNode;if(r===null)return null;var i=ja(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Zr=!1;if(p)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Zr=!1}function li(e,t,r,i,d,h,m,_,j){var O=Array.prototype.slice.call(arguments,3);try{t.apply(r,O)}catch(W){this.onError(W)}}var $r=!1,en=null,br=!1,ui=null,Ir={onError:function(e){$r=!0,en=e}};function ko(e,t,r,i,d,h,m,_,j){$r=!1,en=null,li.apply(Ir,arguments)}function Mu(e,t,r,i,d,h,m,_,j){if(ko.apply(this,arguments),$r){if($r){var O=en;$r=!1,en=null}else throw Error(s(198));br||(br=!0,ui=O)}}function Ur(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function lr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ci(e){if(Ur(e)!==e)throw Error(s(188))}function tn(e){var t=e.alternate;if(!t){if(t=Ur(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var d=r.return;if(d===null)break;var h=d.alternate;if(h===null){if(i=d.return,i!==null){r=i;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===r)return ci(d),e;if(h===i)return ci(d),t;h=h.sibling}throw Error(s(188))}if(r.return!==i.return)r=d,i=h;else{for(var m=!1,_=d.child;_;){if(_===r){m=!0,r=d,i=h;break}if(_===i){m=!0,i=d,r=h;break}_=_.sibling}if(!m){for(_=h.child;_;){if(_===r){m=!0,r=h,i=d;break}if(_===i){m=!0,i=h,r=d;break}_=_.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function di(e){return e=tn(e),e!==null?ds(e):null}function ds(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ds(e);if(t!==null)return t;e=e.sibling}return null}var fi=n.unstable_scheduleCallback,sa=n.unstable_cancelCallback,ia=n.unstable_shouldYield,Tt=n.unstable_requestPaint,tt=n.unstable_now,fs=n.unstable_getCurrentPriorityLevel,hi=n.unstable_ImmediatePriority,hs=n.unstable_UserBlockingPriority,ps=n.unstable_NormalPriority,kt=n.unstable_LowPriority,aa=n.unstable_IdlePriority,ms=null,Vt=null;function oa(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(ms,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Ht,gs=Math.log,pi=Math.LN2;function Ht(e){return e>>>=0,e===0?32:31-(gs(e)/pi|0)|0}var Rn=64,vs=4194304;function rn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nn(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,d=e.suspendedLanes,h=e.pingedLanes,m=r&268435455;if(m!==0){var _=m&~d;_!==0?i=rn(_):(h&=m,h!==0&&(i=rn(h)))}else m=r&~d,m!==0?i=rn(m):h!==0&&(i=rn(h));if(i===0)return 0;if(t!==0&&t!==i&&(t&d)===0&&(d=i&-i,h=t&-t,d>=h||d===16&&(h&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-It(t),d=1<<r,i|=e[r],t&=~d;return i}function mi(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-It(h),_=1<<m,j=d[m];j===-1?((_&r)===0||(_&i)!==0)&&(d[m]=mi(_,t)):j<=t&&(e.expiredLanes|=_),h&=~_}}function sn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function la(){var e=Rn;return Rn<<=1,(Rn&4194240)===0&&(Rn=64),e}function ys(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function an(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=r}function ua(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-It(r),h=1<<d;t[d]=0,i[d]=-1,e[d]=-1,r&=~h}}function gi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-It(r),d=1<<i;d&t|e[i]&t&&(e[i]|=t),r&=~d}}var Le=0;function ca(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var da,An,$n,xs,fa,In=!1,on=[],Gt=null,kr=null,jr=null,Un=new Map,Mn=new Map,Kt=[],jo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vi(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(t.pointerId)}}function Dn(e,t,r,i,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:h,targetContainers:[d]},t!==null&&(t=Li(t),t!==null&&An(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function So(e,t,r,i,d){switch(t){case"focusin":return Gt=Dn(Gt,e,t,r,i,d),!0;case"dragenter":return kr=Dn(kr,e,t,r,i,d),!0;case"mouseover":return jr=Dn(jr,e,t,r,i,d),!0;case"pointerover":var h=d.pointerId;return Un.set(h,Dn(Un.get(h)||null,e,t,r,i,d)),!0;case"gotpointercapture":return h=d.pointerId,Mn.set(h,Dn(Mn.get(h)||null,e,t,r,i,d)),!0}return!1}function ha(e){var t=Bn(e.target);if(t!==null){var r=Ur(t);if(r!==null){if(t=r.tag,t===13){if(t=lr(r),t!==null){e.blockedOn=t,fa(e.priority,function(){$n(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ws(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ae=i,r.target.dispatchEvent(i),Ae=null}else return t=Li(r),t!==null&&An(t),e.blockedOn=r,!1;t.shift()}return!0}function pa(e,t,r){ws(e)&&r.delete(t)}function ma(){In=!1,Gt!==null&&ws(Gt)&&(Gt=null),kr!==null&&ws(kr)&&(kr=null),jr!==null&&ws(jr)&&(jr=null),Un.forEach(pa),Mn.forEach(pa)}function k(e,t){e.blockedOn===t&&(e.blockedOn=null,In||(In=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ma)))}function D(e){function t(d){return k(d,e)}if(0<on.length){k(on[0],e);for(var r=1;r<on.length;r++){var i=on[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Gt!==null&&k(Gt,e),kr!==null&&k(kr,e),jr!==null&&k(jr,e),Un.forEach(t),Mn.forEach(t),r=0;r<Kt.length;r++)i=Kt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Kt.length&&(r=Kt[0],r.blockedOn===null);)ha(r),r.blockedOn===null&&Kt.shift()}var ee=Y.ReactCurrentBatchConfig,fe=!0;function $e(e,t,r,i){var d=Le,h=ee.transition;ee.transition=null;try{Le=1,it(e,t,r,i)}finally{Le=d,ee.transition=h}}function er(e,t,r,i){var d=Le,h=ee.transition;ee.transition=null;try{Le=4,it(e,t,r,i)}finally{Le=d,ee.transition=h}}function it(e,t,r,i){if(fe){var d=yi(e,t,r,i);if(d===null)Mo(e,t,i,ur,r),vi(e,i);else if(So(d,e,t,r,i))i.stopPropagation();else if(vi(e,i),t&4&&-1<jo.indexOf(e)){for(;d!==null;){var h=Li(d);if(h!==null&&da(h),h=yi(e,t,r,i),h===null&&Mo(e,t,i,ur,r),h===d)break;d=h}d!==null&&i.stopPropagation()}else Mo(e,t,i,null,r)}}var ur=null;function yi(e,t,r,i){if(ur=null,e=be(i),e=Bn(e),e!==null)if(t=Ur(e),t===null)e=null;else if(r=t.tag,r===13){if(e=lr(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ur=e,null}function ga(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fs()){case hi:return 1;case hs:return 4;case ps:case kt:return 16;case aa:return 536870912;default:return 16}default:return 16}}var ot=null,ln=null,zn=null;function xi(){if(zn)return zn;var e,t=ln,r=t.length,i,d="value"in ot?ot.value:ot.textContent,h=d.length;for(e=0;e<r&&t[e]===d[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===d[h-i];i++);return zn=d.slice(e,1<i?1-i:void 0)}function _s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fn(){return!0}function wi(){return!1}function jt(e){function t(r,i,d,h,m){this._reactName=r,this._targetInst=d,this.type=i,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Fn:wi,this.isPropagationStopped=wi,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=jt(Mr),Sr=R({},Mr,{view:0,detail:0}),bi=jt(Sr),bs,ki,Oe,rt=R({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oe&&(Oe&&e.type==="mousemove"?(bs=e.screenX-Oe.screenX,ki=e.screenY-Oe.screenY):ki=bs=0,Oe=e),bs)},movementY:function(e){return"movementY"in e?e.movementY:ki}}),ct=jt(rt),Dr=R({},rt,{dataTransfer:0}),vh=jt(Dr),yh=R({},Sr,{relatedTarget:0}),No=jt(yh),xh=R({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=jt(xh),_h=R({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bh=jt(_h),kh=R({},Mr,{data:0}),Du=jt(kh),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ch(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nh[e])?!!t[e]:!1}function Co(){return Ch}var Eh=R({},Sr,{key:function(e){if(e.key){var t=jh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(e){return e.type==="keypress"?_s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Th=jt(Eh),Ph=R({},rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=jt(Ph),Oh=R({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),Rh=jt(Oh),Lh=R({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ah=jt(Lh),$h=R({},rt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ih=jt($h),Uh=[9,13,27,32],Eo=p&&"CompositionEvent"in window,ji=null;p&&"documentMode"in document&&(ji=document.documentMode);var Mh=p&&"TextEvent"in window&&!ji,Fu=p&&(!Eo||ji&&8<ji&&11>=ji),Bu=" ",qu=!1;function Wu(e,t){switch(e){case"keyup":return Uh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ks=!1;function Dh(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(qu=!0,Bu);case"textInput":return e=t.data,e===Bu&&qu?null:e;default:return null}}function zh(e,t){if(ks)return e==="compositionend"||!Eo&&Wu(e,t)?(e=xi(),zn=ln=ot=null,ks=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fu&&t.locale!=="ko"?null:t.data;default:return null}}var Fh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fh[e.type]:t==="textarea"}function Gu(e,t,r,i){Lr(i),t=_a(t,"onChange"),0<t.length&&(r=new _i("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Si=null,Ni=null;function Bh(e){dc(e,0)}function va(e){var t=Es(e);if(se(t))return e}function qh(e,t){if(e==="change")return t}var Ku=!1;if(p){var To;if(p){var Po="oninput"in document;if(!Po){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Po=typeof Ju.oninput=="function"}To=Po}else To=!1;Ku=To&&(!document.documentMode||9<document.documentMode)}function Qu(){Si&&(Si.detachEvent("onpropertychange",Yu),Ni=Si=null)}function Yu(e){if(e.propertyName==="value"&&va(Ni)){var t=[];Gu(t,Ni,e,be(e)),On(Bh,t)}}function Wh(e,t,r){e==="focusin"?(Qu(),Si=t,Ni=r,Si.attachEvent("onpropertychange",Yu)):e==="focusout"&&Qu()}function Vh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return va(Ni)}function Hh(e,t){if(e==="click")return va(t)}function Gh(e,t){if(e==="input"||e==="change")return va(t)}function Kh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cr=typeof Object.is=="function"?Object.is:Kh;function Ci(e,t){if(cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var d=r[i];if(!g.call(t,d)||!cr(e[d],t[d]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var r=Xu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xu(r)}}function ec(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ec(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tc(){for(var e=window,t=ce();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ce(e.document)}return t}function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jh(e){var t=tc(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ec(r.ownerDocument.documentElement,r)){if(i!==null&&Oo(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,h=Math.min(i.start,d);i=i.end===void 0?h:Math.min(i.end,d),!e.extend&&h>i&&(d=i,i=h,h=d),d=Zu(r,h);var m=Zu(r,i);d&&m&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),h>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=p&&"documentMode"in document&&11>=document.documentMode,js=null,Ro=null,Ei=null,Lo=!1;function rc(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lo||js==null||js!==ce(i)||(i=js,"selectionStart"in i&&Oo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ei&&Ci(Ei,i)||(Ei=i,i=_a(Ro,"onSelect"),0<i.length&&(t=new _i("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=js)))}function ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ss={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},Ao={},nc={};p&&(nc=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function xa(e){if(Ao[e])return Ao[e];if(!Ss[e])return e;var t=Ss[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nc)return Ao[e]=t[r];return e}var sc=xa("animationend"),ic=xa("animationiteration"),ac=xa("animationstart"),oc=xa("transitionend"),lc=new Map,uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){lc.set(e,t),u(t,[e])}for(var $o=0;$o<uc.length;$o++){var Io=uc[$o],Yh=Io.toLowerCase(),Xh=Io[0].toUpperCase()+Io.slice(1);un(Yh,"on"+Xh)}un(sc,"onAnimationEnd"),un(ic,"onAnimationIteration"),un(ac,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(oc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function cc(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Mu(i,t,void 0,e),e.currentTarget=null}function dc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],d=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var m=i.length-1;0<=m;m--){var _=i[m],j=_.instance,O=_.currentTarget;if(_=_.listener,j!==h&&d.isPropagationStopped())break e;cc(d,_,O),h=j}else for(m=0;m<i.length;m++){if(_=i[m],j=_.instance,O=_.currentTarget,_=_.listener,j!==h&&d.isPropagationStopped())break e;cc(d,_,O),h=j}}}if(br)throw e=ui,br=!1,ui=null,e}function Ke(e,t){var r=t[Wo];r===void 0&&(r=t[Wo]=new Set);var i=e+"__bubble";r.has(i)||(fc(t,e,2,!1),r.add(i))}function Uo(e,t,r){var i=0;t&&(i|=4),fc(r,e,i,t)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Pi(e){if(!e[wa]){e[wa]=!0,a.forEach(function(r){r!=="selectionchange"&&(Zh.has(r)||Uo(r,!1,e),Uo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wa]||(t[wa]=!0,Uo("selectionchange",!1,t))}}function fc(e,t,r,i){switch(ga(t)){case 1:var d=$e;break;case 4:d=er;break;default:d=it}r=d.bind(null,t,r,e),d=void 0,!Zr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function Mo(e,t,r,i,d){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var _=i.stateNode.containerInfo;if(_===d||_.nodeType===8&&_.parentNode===d)break;if(m===4)for(m=i.return;m!==null;){var j=m.tag;if((j===3||j===4)&&(j=m.stateNode.containerInfo,j===d||j.nodeType===8&&j.parentNode===d))return;m=m.return}for(;_!==null;){if(m=Bn(_),m===null)return;if(j=m.tag,j===5||j===6){i=h=m;continue e}_=_.parentNode}}i=i.return}On(function(){var O=h,W=be(r),H=[];e:{var B=lc.get(e);if(B!==void 0){var te=_i,oe=e;switch(e){case"keypress":if(_s(r)===0)break e;case"keydown":case"keyup":te=Th;break;case"focusin":oe="focus",te=No;break;case"focusout":oe="blur",te=No;break;case"beforeblur":case"afterblur":te=No;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Rh;break;case sc:case ic:case ac:te=wh;break;case oc:te=Ah;break;case"scroll":te=bi;break;case"wheel":te=Ih;break;case"copy":case"cut":case"paste":te=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=zu}var ue=(t&4)!==0,lt=!ue&&e==="scroll",E=ue?B!==null?B+"Capture":null:B;ue=[];for(var S=O,P;S!==null;){P=S;var K=P.stateNode;if(P.tag===5&&K!==null&&(P=K,E!==null&&(K=_r(S,E),K!=null&&ue.push(Oi(S,K,P)))),lt)break;S=S.return}0<ue.length&&(B=new te(B,oe,null,r,W),H.push({event:B,listeners:ue}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",B&&r!==Ae&&(oe=r.relatedTarget||r.fromElement)&&(Bn(oe)||oe[zr]))break e;if((te||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,te?(oe=r.relatedTarget||r.toElement,te=O,oe=oe?Bn(oe):null,oe!==null&&(lt=Ur(oe),oe!==lt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(te=null,oe=O),te!==oe)){if(ue=ct,K="onMouseLeave",E="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ue=zu,K="onPointerLeave",E="onPointerEnter",S="pointer"),lt=te==null?B:Es(te),P=oe==null?B:Es(oe),B=new ue(K,S+"leave",te,r,W),B.target=lt,B.relatedTarget=P,K=null,Bn(W)===O&&(ue=new ue(E,S+"enter",oe,r,W),ue.target=P,ue.relatedTarget=lt,K=ue),lt=K,te&&oe)t:{for(ue=te,E=oe,S=0,P=ue;P;P=Ns(P))S++;for(P=0,K=E;K;K=Ns(K))P++;for(;0<S-P;)ue=Ns(ue),S--;for(;0<P-S;)E=Ns(E),P--;for(;S--;){if(ue===E||E!==null&&ue===E.alternate)break t;ue=Ns(ue),E=Ns(E)}ue=null}else ue=null;te!==null&&hc(H,B,te,ue,!1),oe!==null&&lt!==null&&hc(H,lt,oe,ue,!0)}}e:{if(B=O?Es(O):window,te=B.nodeName&&B.nodeName.toLowerCase(),te==="select"||te==="input"&&B.type==="file")var de=qh;else if(Hu(B))if(Ku)de=Gh;else{de=Vh;var ve=Wh}else(te=B.nodeName)&&te.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(de=Hh);if(de&&(de=de(e,O))){Gu(H,de,r,W);break e}ve&&ve(e,B,O),e==="focusout"&&(ve=B._wrapperState)&&ve.controlled&&B.type==="number"&&Xt(B,"number",B.value)}switch(ve=O?Es(O):window,e){case"focusin":(Hu(ve)||ve.contentEditable==="true")&&(js=ve,Ro=O,Ei=null);break;case"focusout":Ei=Ro=js=null;break;case"mousedown":Lo=!0;break;case"contextmenu":case"mouseup":case"dragend":Lo=!1,rc(H,r,W);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":rc(H,r,W)}var ye;if(Eo)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ks?Wu(e,r)&&(ke="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ke="onCompositionStart");ke&&(Fu&&r.locale!=="ko"&&(ks||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ks&&(ye=xi()):(ot=W,ln="value"in ot?ot.value:ot.textContent,ks=!0)),ve=_a(O,ke),0<ve.length&&(ke=new Du(ke,e,null,r,W),H.push({event:ke,listeners:ve}),ye?ke.data=ye:(ye=Vu(r),ye!==null&&(ke.data=ye)))),(ye=Mh?Dh(e,r):zh(e,r))&&(O=_a(O,"onBeforeInput"),0<O.length&&(W=new Du("onBeforeInput","beforeinput",null,r,W),H.push({event:W,listeners:O}),W.data=ye))}dc(H,t)})}function Oi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _a(e,t){for(var r=t+"Capture",i=[];e!==null;){var d=e,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=_r(e,r),h!=null&&i.unshift(Oi(e,h,d)),h=_r(e,t),h!=null&&i.push(Oi(e,h,d))),e=e.return}return i}function Ns(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hc(e,t,r,i,d){for(var h=t._reactName,m=[];r!==null&&r!==i;){var _=r,j=_.alternate,O=_.stateNode;if(j!==null&&j===i)break;_.tag===5&&O!==null&&(_=O,d?(j=_r(r,h),j!=null&&m.unshift(Oi(r,j,_))):d||(j=_r(r,h),j!=null&&m.push(Oi(r,j,_)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var ep=/\r\n?/g,tp=/\u0000|\uFFFD/g;function pc(e){return(typeof e=="string"?e:""+e).replace(ep,`
`).replace(tp,"")}function ba(e,t,r){if(t=pc(t),pc(e)!==t&&r)throw Error(s(425))}function ka(){}var Do=null,zo=null;function Fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bo=typeof setTimeout=="function"?setTimeout:void 0,rp=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(e){return mc.resolve(null).then(e).catch(sp)}:Bo;function sp(e){setTimeout(function(){throw e})}function qo(e,t){var r=t,i=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(i===0){e.removeChild(d),D(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=d}while(r);D(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Cs,Ri="__reactProps$"+Cs,zr="__reactContainer$"+Cs,Wo="__reactEvents$"+Cs,ip="__reactListeners$"+Cs,ap="__reactHandles$"+Cs;function Bn(e){var t=e[Nr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zr]||r[Nr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=gc(e);e!==null;){if(r=e[Nr])return r;e=gc(e)}return t}e=r,r=e.parentNode}return null}function Li(e){return e=e[Nr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ja(e){return e[Ri]||null}var Vo=[],Ts=-1;function dn(e){return{current:e}}function Je(e){0>Ts||(e.current=Vo[Ts],Vo[Ts]=null,Ts--)}function He(e,t){Ts++,Vo[Ts]=e.current,e.current=t}var fn={},St=dn(fn),Ut=dn(!1),qn=fn;function Ps(e,t){var r=e.type.contextTypes;if(!r)return fn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in r)d[h]=t[h];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function Mt(e){return e=e.childContextTypes,e!=null}function Sa(){Je(Ut),Je(St)}function vc(e,t,r){if(St.current!==fn)throw Error(s(168));He(St,t),He(Ut,r)}function yc(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var d in i)if(!(d in t))throw Error(s(108,z(e)||"Unknown",d));return R({},r,i)}function Na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,qn=St.current,He(St,e),He(Ut,Ut.current),!0}function xc(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=yc(e,t,qn),i.__reactInternalMemoizedMergedChildContext=e,Je(Ut),Je(St),He(St,e)):Je(Ut),He(Ut,r)}var Fr=null,Ca=!1,Ho=!1;function wc(e){Fr===null?Fr=[e]:Fr.push(e)}function op(e){Ca=!0,wc(e)}function hn(){if(!Ho&&Fr!==null){Ho=!0;var e=0,t=Le;try{var r=Fr;for(Le=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Fr=null,Ca=!1}catch(d){throw Fr!==null&&(Fr=Fr.slice(e+1)),fi(hi,hn),d}finally{Le=t,Ho=!1}}return null}var Os=[],Rs=0,Ea=null,Ta=0,tr=[],rr=0,Wn=null,Br=1,qr="";function Vn(e,t){Os[Rs++]=Ta,Os[Rs++]=Ea,Ea=e,Ta=t}function _c(e,t,r){tr[rr++]=Br,tr[rr++]=qr,tr[rr++]=Wn,Wn=e;var i=Br;e=qr;var d=32-It(i)-1;i&=~(1<<d),r+=1;var h=32-It(t)+d;if(30<h){var m=d-d%5;h=(i&(1<<m)-1).toString(32),i>>=m,d-=m,Br=1<<32-It(t)+d|r<<d|i,qr=h+e}else Br=1<<h|r<<d|i,qr=e}function Go(e){e.return!==null&&(Vn(e,1),_c(e,1,0))}function Ko(e){for(;e===Ea;)Ea=Os[--Rs],Os[Rs]=null,Ta=Os[--Rs],Os[Rs]=null;for(;e===Wn;)Wn=tr[--rr],tr[rr]=null,qr=tr[--rr],tr[rr]=null,Br=tr[--rr],tr[rr]=null}var Jt=null,Qt=null,Ze=!1,dr=null;function bc(e,t){var r=ar(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function kc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jt=e,Qt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wn!==null?{id:Br,overflow:qr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ar(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jt=e,Qt=null,!0):!1;default:return!1}}function Jo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qo(e){if(Ze){var t=Qt;if(t){var r=t;if(!kc(e,t)){if(Jo(e))throw Error(s(418));t=cn(r.nextSibling);var i=Jt;t&&kc(e,t)?bc(i,r):(e.flags=e.flags&-4097|2,Ze=!1,Jt=e)}}else{if(Jo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ze=!1,Jt=e}}}function jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jt=e}function Pa(e){if(e!==Jt)return!1;if(!Ze)return jc(e),Ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fo(e.type,e.memoizedProps)),t&&(t=Qt)){if(Jo(e))throw Sc(),Error(s(418));for(;t;)bc(e,t),t=cn(t.nextSibling)}if(jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qt=cn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Jt?cn(e.stateNode.nextSibling):null;return!0}function Sc(){for(var e=Qt;e;)e=cn(e.nextSibling)}function Ls(){Qt=Jt=null,Ze=!1}function Yo(e){dr===null?dr=[e]:dr.push(e)}var lp=Y.ReactCurrentBatchConfig;function Ai(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var d=i,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var _=d.refs;m===null?delete _[h]:_[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Oa(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nc(e){var t=e._init;return t(e._payload)}function Cc(e){function t(E,S){if(e){var P=E.deletions;P===null?(E.deletions=[S],E.flags|=16):P.push(S)}}function r(E,S){if(!e)return null;for(;S!==null;)t(E,S),S=S.sibling;return null}function i(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function d(E,S){return E=_n(E,S),E.index=0,E.sibling=null,E}function h(E,S,P){return E.index=P,e?(P=E.alternate,P!==null?(P=P.index,P<S?(E.flags|=2,S):P):(E.flags|=2,S)):(E.flags|=1048576,S)}function m(E){return e&&E.alternate===null&&(E.flags|=2),E}function _(E,S,P,K){return S===null||S.tag!==6?(S=Bl(P,E.mode,K),S.return=E,S):(S=d(S,P),S.return=E,S)}function j(E,S,P,K){var de=P.type;return de===we?W(E,S,P.props.children,K,P.key):S!==null&&(S.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===pe&&Nc(de)===S.type)?(K=d(S,P.props),K.ref=Ai(E,S,P),K.return=E,K):(K=to(P.type,P.key,P.props,null,E.mode,K),K.ref=Ai(E,S,P),K.return=E,K)}function O(E,S,P,K){return S===null||S.tag!==4||S.stateNode.containerInfo!==P.containerInfo||S.stateNode.implementation!==P.implementation?(S=ql(P,E.mode,K),S.return=E,S):(S=d(S,P.children||[]),S.return=E,S)}function W(E,S,P,K,de){return S===null||S.tag!==7?(S=Zn(P,E.mode,K,de),S.return=E,S):(S=d(S,P),S.return=E,S)}function H(E,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Bl(""+S,E.mode,P),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ne:return P=to(S.type,S.key,S.props,null,E.mode,P),P.ref=Ai(E,null,S),P.return=E,P;case ae:return S=ql(S,E.mode,P),S.return=E,S;case pe:var K=S._init;return H(E,K(S._payload),P)}if(ze(S)||$(S))return S=Zn(S,E.mode,P,null),S.return=E,S;Oa(E,S)}return null}function B(E,S,P,K){var de=S!==null?S.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return de!==null?null:_(E,S,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:return P.key===de?j(E,S,P,K):null;case ae:return P.key===de?O(E,S,P,K):null;case pe:return de=P._init,B(E,S,de(P._payload),K)}if(ze(P)||$(P))return de!==null?null:W(E,S,P,K,null);Oa(E,P)}return null}function te(E,S,P,K,de){if(typeof K=="string"&&K!==""||typeof K=="number")return E=E.get(P)||null,_(S,E,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ne:return E=E.get(K.key===null?P:K.key)||null,j(S,E,K,de);case ae:return E=E.get(K.key===null?P:K.key)||null,O(S,E,K,de);case pe:var ve=K._init;return te(E,S,P,ve(K._payload),de)}if(ze(K)||$(K))return E=E.get(P)||null,W(S,E,K,de,null);Oa(S,K)}return null}function oe(E,S,P,K){for(var de=null,ve=null,ye=S,ke=S=0,yt=null;ye!==null&&ke<P.length;ke++){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var Me=B(E,ye,P[ke],K);if(Me===null){ye===null&&(ye=yt);break}e&&ye&&Me.alternate===null&&t(E,ye),S=h(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me,ye=yt}if(ke===P.length)return r(E,ye),Ze&&Vn(E,ke),de;if(ye===null){for(;ke<P.length;ke++)ye=H(E,P[ke],K),ye!==null&&(S=h(ye,S,ke),ve===null?de=ye:ve.sibling=ye,ve=ye);return Ze&&Vn(E,ke),de}for(ye=i(E,ye);ke<P.length;ke++)yt=te(ye,E,ke,P[ke],K),yt!==null&&(e&&yt.alternate!==null&&ye.delete(yt.key===null?ke:yt.key),S=h(yt,S,ke),ve===null?de=yt:ve.sibling=yt,ve=yt);return e&&ye.forEach(function(bn){return t(E,bn)}),Ze&&Vn(E,ke),de}function ue(E,S,P,K){var de=$(P);if(typeof de!="function")throw Error(s(150));if(P=de.call(P),P==null)throw Error(s(151));for(var ve=de=null,ye=S,ke=S=0,yt=null,Me=P.next();ye!==null&&!Me.done;ke++,Me=P.next()){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var bn=B(E,ye,Me.value,K);if(bn===null){ye===null&&(ye=yt);break}e&&ye&&bn.alternate===null&&t(E,ye),S=h(bn,S,ke),ve===null?de=bn:ve.sibling=bn,ve=bn,ye=yt}if(Me.done)return r(E,ye),Ze&&Vn(E,ke),de;if(ye===null){for(;!Me.done;ke++,Me=P.next())Me=H(E,Me.value,K),Me!==null&&(S=h(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me);return Ze&&Vn(E,ke),de}for(ye=i(E,ye);!Me.done;ke++,Me=P.next())Me=te(ye,E,ke,Me.value,K),Me!==null&&(e&&Me.alternate!==null&&ye.delete(Me.key===null?ke:Me.key),S=h(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me);return e&&ye.forEach(function(Fp){return t(E,Fp)}),Ze&&Vn(E,ke),de}function lt(E,S,P,K){if(typeof P=="object"&&P!==null&&P.type===we&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:e:{for(var de=P.key,ve=S;ve!==null;){if(ve.key===de){if(de=P.type,de===we){if(ve.tag===7){r(E,ve.sibling),S=d(ve,P.props.children),S.return=E,E=S;break e}}else if(ve.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===pe&&Nc(de)===ve.type){r(E,ve.sibling),S=d(ve,P.props),S.ref=Ai(E,ve,P),S.return=E,E=S;break e}r(E,ve);break}else t(E,ve);ve=ve.sibling}P.type===we?(S=Zn(P.props.children,E.mode,K,P.key),S.return=E,E=S):(K=to(P.type,P.key,P.props,null,E.mode,K),K.ref=Ai(E,S,P),K.return=E,E=K)}return m(E);case ae:e:{for(ve=P.key;S!==null;){if(S.key===ve)if(S.tag===4&&S.stateNode.containerInfo===P.containerInfo&&S.stateNode.implementation===P.implementation){r(E,S.sibling),S=d(S,P.children||[]),S.return=E,E=S;break e}else{r(E,S);break}else t(E,S);S=S.sibling}S=ql(P,E.mode,K),S.return=E,E=S}return m(E);case pe:return ve=P._init,lt(E,S,ve(P._payload),K)}if(ze(P))return oe(E,S,P,K);if($(P))return ue(E,S,P,K);Oa(E,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,S!==null&&S.tag===6?(r(E,S.sibling),S=d(S,P),S.return=E,E=S):(r(E,S),S=Bl(P,E.mode,K),S.return=E,E=S),m(E)):r(E,S)}return lt}var As=Cc(!0),Ec=Cc(!1),Ra=dn(null),La=null,$s=null,Xo=null;function Zo(){Xo=$s=La=null}function el(e){var t=Ra.current;Je(Ra),e._currentValue=t}function tl(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Is(e,t){La=e,Xo=$s=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Dt=!0),e.firstContext=null)}function nr(e){var t=e._currentValue;if(Xo!==e)if(e={context:e,memoizedValue:t,next:null},$s===null){if(La===null)throw Error(s(308));$s=e,La.dependencies={lanes:0,firstContext:e}}else $s=$s.next=e;return t}var Hn=null;function rl(e){Hn===null?Hn=[e]:Hn.push(e)}function Tc(e,t,r,i){var d=t.interleaved;return d===null?(r.next=r,rl(t)):(r.next=d.next,d.next=r),t.interleaved=r,Wr(e,i)}function Wr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pn=!1;function nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ie&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,Wr(e,r)}return d=i.interleaved,d===null?(t.next=t,rl(i)):(t.next=d.next,d.next=t),i.interleaved=t,Wr(e,r)}function Aa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,gi(e,r)}}function Oc(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var d=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?d=h=m:h=h.next=m,r=r.next}while(r!==null);h===null?d=h=t:h=h.next=t}else d=h=t;r={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $a(e,t,r,i){var d=e.updateQueue;pn=!1;var h=d.firstBaseUpdate,m=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var j=_,O=j.next;j.next=null,m===null?h=O:m.next=O,m=j;var W=e.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==m&&(_===null?W.firstBaseUpdate=O:_.next=O,W.lastBaseUpdate=j))}if(h!==null){var H=d.baseState;m=0,W=O=j=null,_=h;do{var B=_.lane,te=_.eventTime;if((i&B)===B){W!==null&&(W=W.next={eventTime:te,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var oe=e,ue=_;switch(B=t,te=r,ue.tag){case 1:if(oe=ue.payload,typeof oe=="function"){H=oe.call(te,H,B);break e}H=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ue.payload,B=typeof oe=="function"?oe.call(te,H,B):oe,B==null)break e;H=R({},H,B);break e;case 2:pn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,B=d.effects,B===null?d.effects=[_]:B.push(_))}else te={eventTime:te,lane:B,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(O=W=te,j=H):W=W.next=te,m|=B;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;B=_,_=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);if(W===null&&(j=H),d.baseState=j,d.firstBaseUpdate=O,d.lastBaseUpdate=W,t=d.shared.interleaved,t!==null){d=t;do m|=d.lane,d=d.next;while(d!==t)}else h===null&&(d.shared.lanes=0);Jn|=m,e.lanes=m,e.memoizedState=H}}function Rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],d=i.callback;if(d!==null){if(i.callback=null,i=r,typeof d!="function")throw Error(s(191,d));d.call(i)}}}var $i={},Cr=dn($i),Ii=dn($i),Ui=dn($i);function Gn(e){if(e===$i)throw Error(s(174));return e}function sl(e,t){switch(He(Ui,t),He(Ii,e),He(Cr,$i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pn(t,e)}Je(Cr),He(Cr,t)}function Us(){Je(Cr),Je(Ii),Je(Ui)}function Lc(e){Gn(Ui.current);var t=Gn(Cr.current),r=Pn(t,e.type);t!==r&&(He(Ii,e),He(Cr,r))}function il(e){Ii.current===e&&(Je(Cr),Je(Ii))}var nt=dn(0);function Ia(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var al=[];function ol(){for(var e=0;e<al.length;e++)al[e]._workInProgressVersionPrimary=null;al.length=0}var Ua=Y.ReactCurrentDispatcher,ll=Y.ReactCurrentBatchConfig,Kn=0,st=null,ft=null,gt=null,Ma=!1,Mi=!1,Di=0,up=0;function Nt(){throw Error(s(321))}function ul(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cr(e[r],t[r]))return!1;return!0}function cl(e,t,r,i,d,h){if(Kn=h,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ua.current=e===null||e.memoizedState===null?hp:pp,e=r(i,d),Mi){h=0;do{if(Mi=!1,Di=0,25<=h)throw Error(s(301));h+=1,gt=ft=null,t.updateQueue=null,Ua.current=mp,e=r(i,d)}while(Mi)}if(Ua.current=Fa,t=ft!==null&&ft.next!==null,Kn=0,gt=ft=st=null,Ma=!1,t)throw Error(s(300));return e}function dl(){var e=Di!==0;return Di=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?st.memoizedState=gt=e:gt=gt.next=e,gt}function sr(){if(ft===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=gt===null?st.memoizedState:gt.next;if(t!==null)gt=t,ft=e;else{if(e===null)throw Error(s(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},gt===null?st.memoizedState=gt=e:gt=gt.next=e}return gt}function zi(e,t){return typeof t=="function"?t(e):t}function fl(e){var t=sr(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=ft,d=i.baseQueue,h=r.pending;if(h!==null){if(d!==null){var m=d.next;d.next=h.next,h.next=m}i.baseQueue=d=h,r.pending=null}if(d!==null){h=d.next,i=i.baseState;var _=m=null,j=null,O=h;do{var W=O.lane;if((Kn&W)===W)j!==null&&(j=j.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),i=O.hasEagerState?O.eagerState:e(i,O.action);else{var H={lane:W,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};j===null?(_=j=H,m=i):j=j.next=H,st.lanes|=W,Jn|=W}O=O.next}while(O!==null&&O!==h);j===null?m=i:j.next=_,cr(i,t.memoizedState)||(Dt=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=j,r.lastRenderedState=i}if(e=r.interleaved,e!==null){d=e;do h=d.lane,st.lanes|=h,Jn|=h,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hl(e){var t=sr(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,d=r.pending,h=t.memoizedState;if(d!==null){r.pending=null;var m=d=d.next;do h=e(h,m.action),m=m.next;while(m!==d);cr(h,t.memoizedState)||(Dt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,i]}function Ac(){}function $c(e,t){var r=st,i=sr(),d=t(),h=!cr(i.memoizedState,d);if(h&&(i.memoizedState=d,Dt=!0),i=i.queue,pl(Mc.bind(null,r,i,e),[e]),i.getSnapshot!==t||h||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Fi(9,Uc.bind(null,r,i,d,t),void 0,null),vt===null)throw Error(s(349));(Kn&30)!==0||Ic(r,t,d)}return d}function Ic(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Uc(e,t,r,i){t.value=r,t.getSnapshot=i,Dc(t)&&zc(e)}function Mc(e,t,r){return r(function(){Dc(t)&&zc(e)})}function Dc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cr(e,r)}catch{return!0}}function zc(e){var t=Wr(e,1);t!==null&&mr(t,e,1,-1)}function Fc(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t.queue=e,e=e.dispatch=fp.bind(null,st,e),[t.memoizedState,e]}function Fi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Bc(){return sr().memoizedState}function Da(e,t,r,i){var d=Er();st.flags|=e,d.memoizedState=Fi(1|t,r,void 0,i===void 0?null:i)}function za(e,t,r,i){var d=sr();i=i===void 0?null:i;var h=void 0;if(ft!==null){var m=ft.memoizedState;if(h=m.destroy,i!==null&&ul(i,m.deps)){d.memoizedState=Fi(t,r,h,i);return}}st.flags|=e,d.memoizedState=Fi(1|t,r,h,i)}function qc(e,t){return Da(8390656,8,e,t)}function pl(e,t){return za(2048,8,e,t)}function Wc(e,t){return za(4,2,e,t)}function Vc(e,t){return za(4,4,e,t)}function Hc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gc(e,t,r){return r=r!=null?r.concat([e]):null,za(4,4,Hc.bind(null,t,e),r)}function ml(){}function Kc(e,t){var r=sr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ul(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Jc(e,t){var r=sr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ul(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Qc(e,t,r){return(Kn&21)===0?(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=r):(cr(r,t)||(r=la(),st.lanes|=r,Jn|=r,e.baseState=!0),t)}function cp(e,t){var r=Le;Le=r!==0&&4>r?r:4,e(!0);var i=ll.transition;ll.transition={};try{e(!1),t()}finally{Le=r,ll.transition=i}}function Yc(){return sr().memoizedState}function dp(e,t,r){var i=xn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Xc(e))Zc(t,r);else if(r=Tc(e,t,r,i),r!==null){var d=Ot();mr(r,e,i,d),ed(r,t,i)}}function fp(e,t,r){var i=xn(e),d={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xc(e))Zc(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,_=h(m,r);if(d.hasEagerState=!0,d.eagerState=_,cr(_,m)){var j=t.interleaved;j===null?(d.next=d,rl(t)):(d.next=j.next,j.next=d),t.interleaved=d;return}}catch{}finally{}r=Tc(e,t,d,i),r!==null&&(d=Ot(),mr(r,e,i,d),ed(r,t,i))}}function Xc(e){var t=e.alternate;return e===st||t!==null&&t===st}function Zc(e,t){Mi=Ma=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ed(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,gi(e,r)}}var Fa={readContext:nr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},hp={readContext:nr,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:nr,useEffect:qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Da(4194308,4,Hc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var r=Er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Er();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=dp.bind(null,st,e),[i.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:ml,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=cp.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=st,d=Er();if(Ze){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),vt===null)throw Error(s(349));(Kn&30)!==0||Ic(i,t,r)}d.memoizedState=r;var h={value:r,getSnapshot:t};return d.queue=h,qc(Mc.bind(null,i,h,e),[e]),i.flags|=2048,Fi(9,Uc.bind(null,i,h,r,t),void 0,null),r},useId:function(){var e=Er(),t=vt.identifierPrefix;if(Ze){var r=qr,i=Br;r=(i&~(1<<32-It(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Di++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=up++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pp={readContext:nr,useCallback:Kc,useContext:nr,useEffect:pl,useImperativeHandle:Gc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Jc,useReducer:fl,useRef:Bc,useState:function(){return fl(zi)},useDebugValue:ml,useDeferredValue:function(e){var t=sr();return Qc(t,ft.memoizedState,e)},useTransition:function(){var e=fl(zi)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ac,useSyncExternalStore:$c,useId:Yc,unstable_isNewReconciler:!1},mp={readContext:nr,useCallback:Kc,useContext:nr,useEffect:pl,useImperativeHandle:Gc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Jc,useReducer:hl,useRef:Bc,useState:function(){return hl(zi)},useDebugValue:ml,useDeferredValue:function(e){var t=sr();return ft===null?t.memoizedState=e:Qc(t,ft.memoizedState,e)},useTransition:function(){var e=hl(zi)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ac,useSyncExternalStore:$c,useId:Yc,unstable_isNewReconciler:!1};function fr(e,t){if(e&&e.defaultProps){t=R({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:R({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ba={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Ot(),d=xn(e),h=Vr(i,d);h.payload=t,r!=null&&(h.callback=r),t=mn(e,h,d),t!==null&&(mr(t,e,d,i),Aa(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Ot(),d=xn(e),h=Vr(i,d);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=mn(e,h,d),t!==null&&(mr(t,e,d,i),Aa(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ot(),i=xn(e),d=Vr(r,i);d.tag=2,t!=null&&(d.callback=t),t=mn(e,d,i),t!==null&&(mr(t,e,i,r),Aa(t,e,i))}};function td(e,t,r,i,d,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,m):t.prototype&&t.prototype.isPureReactComponent?!Ci(r,i)||!Ci(d,h):!0}function rd(e,t,r){var i=!1,d=fn,h=t.contextType;return typeof h=="object"&&h!==null?h=nr(h):(d=Mt(t)?qn:St.current,i=t.contextTypes,h=(i=i!=null)?Ps(e,d):fn),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=h),t}function nd(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function vl(e,t,r,i){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},nl(e);var h=t.contextType;typeof h=="object"&&h!==null?d.context=nr(h):(h=Mt(t)?qn:St.current,d.context=Ps(e,h)),d.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(gl(e,t,h,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Ba.enqueueReplaceState(d,d.state,null),$a(e,r,d,i),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Ms(e,t){try{var r="",i=t;do r+=le(i),i=i.return;while(i);var d=r}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:d,digest:null}}function yl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gp=typeof WeakMap=="function"?WeakMap:Map;function sd(e,t,r){r=Vr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ja||(Ja=!0,Al=i),xl(e,t)},r}function id(e,t,r){r=Vr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var d=t.value;r.payload=function(){return i(d)},r.callback=function(){xl(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){xl(e,t),typeof i!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function ad(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new gp;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(r)||(d.add(r),e=Pp.bind(null,e,t,r),t.then(e,e))}function od(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ld(e,t,r,i,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vr(-1,1),t.tag=2,mn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var vp=Y.ReactCurrentOwner,Dt=!1;function Pt(e,t,r,i){t.child=e===null?Ec(t,null,r,i):As(t,e.child,r,i)}function ud(e,t,r,i,d){r=r.render;var h=t.ref;return Is(t,d),i=cl(e,t,r,i,h,d),r=dl(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Hr(e,t,d)):(Ze&&r&&Go(t),t.flags|=1,Pt(e,t,i,d),t.child)}function cd(e,t,r,i,d){if(e===null){var h=r.type;return typeof h=="function"&&!Fl(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,dd(e,t,h,i,d)):(e=to(r.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&d)===0){var m=h.memoizedProps;if(r=r.compare,r=r!==null?r:Ci,r(m,i)&&e.ref===t.ref)return Hr(e,t,d)}return t.flags|=1,e=_n(h,i),e.ref=t.ref,e.return=t,t.child=e}function dd(e,t,r,i,d){if(e!==null){var h=e.memoizedProps;if(Ci(h,i)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=i=h,(e.lanes&d)!==0)(e.flags&131072)!==0&&(Dt=!0);else return t.lanes=e.lanes,Hr(e,t,d)}return wl(e,t,r,i,d)}function fd(e,t,r){var i=t.pendingProps,d=i.children,h=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(zs,Yt),Yt|=r;else{if((r&1073741824)===0)return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(zs,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=h!==null?h.baseLanes:r,He(zs,Yt),Yt|=i}else h!==null?(i=h.baseLanes|r,t.memoizedState=null):i=r,He(zs,Yt),Yt|=i;return Pt(e,t,d,r),t.child}function hd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wl(e,t,r,i,d){var h=Mt(r)?qn:St.current;return h=Ps(t,h),Is(t,d),r=cl(e,t,r,i,h,d),i=dl(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Hr(e,t,d)):(Ze&&i&&Go(t),t.flags|=1,Pt(e,t,r,d),t.child)}function pd(e,t,r,i,d){if(Mt(r)){var h=!0;Na(t)}else h=!1;if(Is(t,d),t.stateNode===null)Wa(e,t),rd(t,r,i),vl(t,r,i,d),i=!0;else if(e===null){var m=t.stateNode,_=t.memoizedProps;m.props=_;var j=m.context,O=r.contextType;typeof O=="object"&&O!==null?O=nr(O):(O=Mt(r)?qn:St.current,O=Ps(t,O));var W=r.getDerivedStateFromProps,H=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function";H||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==i||j!==O)&&nd(t,m,i,O),pn=!1;var B=t.memoizedState;m.state=B,$a(t,i,m,d),j=t.memoizedState,_!==i||B!==j||Ut.current||pn?(typeof W=="function"&&(gl(t,r,W,i),j=t.memoizedState),(_=pn||td(t,r,_,i,B,j,O))?(H||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=j),m.props=i,m.state=j,m.context=O,i=_):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,Pc(e,t),_=t.memoizedProps,O=t.type===t.elementType?_:fr(t.type,_),m.props=O,H=t.pendingProps,B=m.context,j=r.contextType,typeof j=="object"&&j!==null?j=nr(j):(j=Mt(r)?qn:St.current,j=Ps(t,j));var te=r.getDerivedStateFromProps;(W=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==H||B!==j)&&nd(t,m,i,j),pn=!1,B=t.memoizedState,m.state=B,$a(t,i,m,d);var oe=t.memoizedState;_!==H||B!==oe||Ut.current||pn?(typeof te=="function"&&(gl(t,r,te,i),oe=t.memoizedState),(O=pn||td(t,r,O,i,B,oe,j)||!1)?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,oe,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,oe,j)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=oe),m.props=i,m.state=oe,m.context=j,i=O):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),i=!1)}return _l(e,t,r,i,h,d)}function _l(e,t,r,i,d,h){hd(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return d&&xc(t,r,!1),Hr(e,t,h);i=t.stateNode,vp.current=t;var _=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=As(t,e.child,null,h),t.child=As(t,null,_,h)):Pt(e,t,_,h),t.memoizedState=i.state,d&&xc(t,r,!0),t.child}function md(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),sl(e,t.containerInfo)}function gd(e,t,r,i,d){return Ls(),Yo(d),t.flags|=256,Pt(e,t,r,i),t.child}var bl={dehydrated:null,treeContext:null,retryLane:0};function kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function vd(e,t,r){var i=t.pendingProps,d=nt.current,h=!1,m=(t.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(d&2)!==0),_?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),He(nt,d&1),e===null)return Qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,h?(i=t.mode,h=t.child,m={mode:"hidden",children:m},(i&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=ro(m,i,0,null),e=Zn(e,i,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=kl(r),t.memoizedState=bl,e):jl(t,m));if(d=e.memoizedState,d!==null&&(_=d.dehydrated,_!==null))return yp(e,t,m,i,_,d,r);if(h){h=i.fallback,m=t.mode,d=e.child,_=d.sibling;var j={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==d?(i=t.child,i.childLanes=0,i.pendingProps=j,t.deletions=null):(i=_n(d,j),i.subtreeFlags=d.subtreeFlags&14680064),_!==null?h=_n(_,h):(h=Zn(h,m,r,null),h.flags|=2),h.return=t,i.return=t,i.sibling=h,t.child=i,i=h,h=t.child,m=e.child.memoizedState,m=m===null?kl(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~r,t.memoizedState=bl,i}return h=e.child,e=h.sibling,i=_n(h,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function jl(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qa(e,t,r,i){return i!==null&&Yo(i),As(t,e.child,null,r),e=jl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yp(e,t,r,i,d,h,m){if(r)return t.flags&256?(t.flags&=-257,i=yl(Error(s(422))),qa(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=i.fallback,d=t.mode,i=ro({mode:"visible",children:i.children},d,0,null),h=Zn(h,d,m,null),h.flags|=2,i.return=t,h.return=t,i.sibling=h,t.child=i,(t.mode&1)!==0&&As(t,e.child,null,m),t.child.memoizedState=kl(m),t.memoizedState=bl,h);if((t.mode&1)===0)return qa(e,t,m,null);if(d.data==="$!"){if(i=d.nextSibling&&d.nextSibling.dataset,i)var _=i.dgst;return i=_,h=Error(s(419)),i=yl(h,i,void 0),qa(e,t,m,i)}if(_=(m&e.childLanes)!==0,Dt||_){if(i=vt,i!==null){switch(m&-m){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(i.suspendedLanes|m))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,Wr(e,d),mr(i,e,d,-1))}return zl(),i=yl(Error(s(421))),qa(e,t,m,i)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Op.bind(null,e),d._reactRetry=t,null):(e=h.treeContext,Qt=cn(d.nextSibling),Jt=t,Ze=!0,dr=null,e!==null&&(tr[rr++]=Br,tr[rr++]=qr,tr[rr++]=Wn,Br=e.id,qr=e.overflow,Wn=t),t=jl(t,i.children),t.flags|=4096,t)}function yd(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),tl(e.return,t,r)}function Sl(e,t,r,i,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=i,h.tail=r,h.tailMode=d)}function xd(e,t,r){var i=t.pendingProps,d=i.revealOrder,h=i.tail;if(Pt(e,t,i.children,r),i=nt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yd(e,r,t);else if(e.tag===19)yd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(He(nt,i),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Ia(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Sl(t,!1,d,r,h);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ia(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Sl(t,!0,r,null,h);break;case"together":Sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=_n(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_n(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function xp(e,t,r){switch(t.tag){case 3:md(t),Ls();break;case 5:Lc(t);break;case 1:Mt(t.type)&&Na(t);break;case 4:sl(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,d=t.memoizedProps.value;He(Ra,i._currentValue),i._currentValue=d;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(He(nt,nt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?vd(e,t,r):(He(nt,nt.current&1),e=Hr(e,t,r),e!==null?e.sibling:null);He(nt,nt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return xd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(nt,nt.current),i)break;return null;case 22:case 23:return t.lanes=0,fd(e,t,r)}return Hr(e,t,r)}var wd,Nl,_d,bd;wd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Nl=function(){},_d=function(e,t,r,i){var d=e.memoizedProps;if(d!==i){e=t.stateNode,Gn(Cr.current);var h=null;switch(r){case"input":d=je(e,d),i=je(e,i),h=[];break;case"select":d=R({},d,{value:void 0}),i=R({},i,{value:void 0}),h=[];break;case"textarea":d=qt(e,d),i=qt(e,i),h=[];break;default:typeof d.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ka)}Ne(r,i);var m;r=null;for(O in d)if(!i.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var _=d[O];for(m in _)_.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(l.hasOwnProperty(O)?h||(h=[]):(h=h||[]).push(O,null));for(O in i){var j=i[O];if(_=d?.[O],i.hasOwnProperty(O)&&j!==_&&(j!=null||_!=null))if(O==="style")if(_){for(m in _)!_.hasOwnProperty(m)||j&&j.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in j)j.hasOwnProperty(m)&&_[m]!==j[m]&&(r||(r={}),r[m]=j[m])}else r||(h||(h=[]),h.push(O,r)),r=j;else O==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,_=_?_.__html:void 0,j!=null&&_!==j&&(h=h||[]).push(O,j)):O==="children"?typeof j!="string"&&typeof j!="number"||(h=h||[]).push(O,""+j):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(l.hasOwnProperty(O)?(j!=null&&O==="onScroll"&&Ke("scroll",e),h||_===j||(h=[])):(h=h||[]).push(O,j))}r&&(h=h||[]).push("style",r);var O=h;(t.updateQueue=O)&&(t.flags|=4)}},bd=function(e,t,r,i){r!==i&&(t.flags|=4)};function Bi(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,i|=d.subtreeFlags&14680064,i|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function wp(e,t,r){var i=t.pendingProps;switch(Ko(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Mt(t.type)&&Sa(),Ct(t),null;case 3:return i=t.stateNode,Us(),Je(Ut),Je(St),ol(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dr!==null&&(Ul(dr),dr=null))),Nl(e,t),Ct(t),null;case 5:il(t);var d=Gn(Ui.current);if(r=t.type,e!==null&&t.stateNode!=null)_d(e,t,r,i,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return Ct(t),null}if(e=Gn(Cr.current),Pa(t)){i=t.stateNode,r=t.type;var h=t.memoizedProps;switch(i[Nr]=t,i[Ri]=h,e=(t.mode&1)!==0,r){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(d=0;d<Ti.length;d++)Ke(Ti[d],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":De(i,h),Ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!h.multiple},Ke("invalid",i);break;case"textarea":Zt(i,h),Ke("invalid",i)}Ne(r,h),d=null;for(var m in h)if(h.hasOwnProperty(m)){var _=h[m];m==="children"?typeof _=="string"?i.textContent!==_&&(h.suppressHydrationWarning!==!0&&ba(i.textContent,_,e),d=["children",_]):typeof _=="number"&&i.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&ba(i.textContent,_,e),d=["children",""+_]):l.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Ke("scroll",i)}switch(r){case"input":V(i),bt(i,h,!0);break;case"textarea":V(i),xr(i);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(i.onclick=ka)}i=d,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ls(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[Nr]=t,e[Ri]=i,wd(e,t,!1,!1),t.stateNode=e;e:{switch(m=Te(r,i),r){case"dialog":Ke("cancel",e),Ke("close",e),d=i;break;case"iframe":case"object":case"embed":Ke("load",e),d=i;break;case"video":case"audio":for(d=0;d<Ti.length;d++)Ke(Ti[d],e);d=i;break;case"source":Ke("error",e),d=i;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),d=i;break;case"details":Ke("toggle",e),d=i;break;case"input":De(e,i),d=je(e,i),Ke("invalid",e);break;case"option":d=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},d=R({},i,{value:void 0}),Ke("invalid",e);break;case"textarea":Zt(e,i),d=qt(e,i),Ke("invalid",e);break;default:d=i}Ne(r,d),_=d;for(h in _)if(_.hasOwnProperty(h)){var j=_[h];h==="style"?Q(e,j):h==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&us(e,j)):h==="children"?typeof j=="string"?(r!=="textarea"||j!=="")&&or(e,j):typeof j=="number"&&or(e,""+j):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(l.hasOwnProperty(h)?j!=null&&h==="onScroll"&&Ke("scroll",e):j!=null&&F(e,h,j,m))}switch(r){case"input":V(e),bt(e,i,!1);break;case"textarea":V(e),xr(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ge(i.value));break;case"select":e.multiple=!!i.multiple,h=i.value,h!=null?At(e,!!i.multiple,h,!1):i.defaultValue!=null&&At(e,!!i.multiple,i.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=ka)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ct(t),null;case 6:if(e&&t.stateNode!=null)bd(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(r=Gn(Ui.current),Gn(Cr.current),Pa(t)){if(i=t.stateNode,r=t.memoizedProps,i[Nr]=t,(h=i.nodeValue!==r)&&(e=Jt,e!==null))switch(e.tag){case 3:ba(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(i.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Nr]=t,t.stateNode=i}return Ct(t),null;case 13:if(Je(nt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&Qt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Sc(),Ls(),t.flags|=98560,h=!1;else if(h=Pa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Nr]=t}else Ls(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ct(t),h=!1}else dr!==null&&(Ul(dr),dr=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(nt.current&1)!==0?ht===0&&(ht=3):zl())),t.updateQueue!==null&&(t.flags|=4),Ct(t),null);case 4:return Us(),Nl(e,t),e===null&&Pi(t.stateNode.containerInfo),Ct(t),null;case 10:return el(t.type._context),Ct(t),null;case 17:return Mt(t.type)&&Sa(),Ct(t),null;case 19:if(Je(nt),h=t.memoizedState,h===null)return Ct(t),null;if(i=(t.flags&128)!==0,m=h.rendering,m===null)if(i)Bi(h,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Ia(e),m!==null){for(t.flags|=128,Bi(h,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)h=r,e=i,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(nt,nt.current&1|2),t.child}e=e.sibling}h.tail!==null&&tt()>Fs&&(t.flags|=128,i=!0,Bi(h,!1),t.lanes=4194304)}else{if(!i)if(e=Ia(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Bi(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Ze)return Ct(t),null}else 2*tt()-h.renderingStartTime>Fs&&r!==1073741824&&(t.flags|=128,i=!0,Bi(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(r=h.last,r!==null?r.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=tt(),t.sibling=null,r=nt.current,He(nt,i?r&1|2:r&1),t):(Ct(t),null);case 22:case 23:return Dl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Yt&1073741824)!==0&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function _p(e,t){switch(Ko(t),t.tag){case 1:return Mt(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Us(),Je(Ut),Je(St),ol(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return il(t),null;case 13:if(Je(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(nt),null;case 4:return Us(),null;case 10:return el(t.type._context),null;case 22:case 23:return Dl(),null;case 24:return null;default:return null}}var Va=!1,Et=!1,bp=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ds(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){at(e,t,i)}else r.current=null}function Cl(e,t,r){try{r()}catch(i){at(e,t,i)}}var kd=!1;function kp(e,t){if(Do=fe,e=tc(),Oo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var d=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var m=0,_=-1,j=-1,O=0,W=0,H=e,B=null;t:for(;;){for(var te;H!==r||d!==0&&H.nodeType!==3||(_=m+d),H!==h||i!==0&&H.nodeType!==3||(j=m+i),H.nodeType===3&&(m+=H.nodeValue.length),(te=H.firstChild)!==null;)B=H,H=te;for(;;){if(H===e)break t;if(B===r&&++O===d&&(_=m),B===h&&++W===i&&(j=m),(te=H.nextSibling)!==null)break;H=B,B=H.parentNode}H=te}r=_===-1||j===-1?null:{start:_,end:j}}else r=null}r=r||{start:0,end:0}}else r=null;for(zo={focusedElem:e,selectionRange:r},fe=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var oe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ue=oe.memoizedProps,lt=oe.memoizedState,E=t.stateNode,S=E.getSnapshotBeforeUpdate(t.elementType===t.type?ue:fr(t.type,ue),lt);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(K){at(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return oe=kd,kd=!1,oe}function qi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var d=i=i.next;do{if((d.tag&e)===e){var h=d.destroy;d.destroy=void 0,h!==void 0&&Cl(t,r,h)}d=d.next}while(d!==i)}}function Ha(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function El(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nr],delete t[Ri],delete t[Wo],delete t[ip],delete t[ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sd(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ka));else if(i!==4&&(e=e.child,e!==null))for(Tl(e,t,r),e=e.sibling;e!==null;)Tl(e,t,r),e=e.sibling}function Pl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Pl(e,t,r),e=e.sibling;e!==null;)Pl(e,t,r),e=e.sibling}var wt=null,hr=!1;function gn(e,t,r){for(r=r.child;r!==null;)Cd(e,t,r),r=r.sibling}function Cd(e,t,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(ms,r)}catch{}switch(r.tag){case 5:Et||Ds(r,t);case 6:var i=wt,d=hr;wt=null,gn(e,t,r),wt=i,hr=d,wt!==null&&(hr?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(hr?(e=wt,r=r.stateNode,e.nodeType===8?qo(e.parentNode,r):e.nodeType===1&&qo(e,r),D(e)):qo(wt,r.stateNode));break;case 4:i=wt,d=hr,wt=r.stateNode.containerInfo,hr=!0,gn(e,t,r),wt=i,hr=d;break;case 0:case 11:case 14:case 15:if(!Et&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){d=i=i.next;do{var h=d,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&Cl(r,t,m),d=d.next}while(d!==i)}gn(e,t,r);break;case 1:if(!Et&&(Ds(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(_){at(r,t,_)}gn(e,t,r);break;case 21:gn(e,t,r);break;case 22:r.mode&1?(Et=(i=Et)||r.memoizedState!==null,gn(e,t,r),Et=i):gn(e,t,r);break;default:gn(e,t,r)}}function Ed(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bp),t.forEach(function(i){var d=Rp.bind(null,e,i);r.has(i)||(r.add(i),i.then(d,d))})}}function pr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var d=r[i];try{var h=e,m=t,_=m;e:for(;_!==null;){switch(_.tag){case 5:wt=_.stateNode,hr=!1;break e;case 3:wt=_.stateNode.containerInfo,hr=!0;break e;case 4:wt=_.stateNode.containerInfo,hr=!0;break e}_=_.return}if(wt===null)throw Error(s(160));Cd(h,m,d),wt=null,hr=!1;var j=d.alternate;j!==null&&(j.return=null),d.return=null}catch(O){at(d,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pr(t,e),Tr(e),i&4){try{qi(3,e,e.return),Ha(3,e)}catch(ue){at(e,e.return,ue)}try{qi(5,e,e.return)}catch(ue){at(e,e.return,ue)}}break;case 1:pr(t,e),Tr(e),i&512&&r!==null&&Ds(r,r.return);break;case 5:if(pr(t,e),Tr(e),i&512&&r!==null&&Ds(r,r.return),e.flags&32){var d=e.stateNode;try{or(d,"")}catch(ue){at(e,e.return,ue)}}if(i&4&&(d=e.stateNode,d!=null)){var h=e.memoizedProps,m=r!==null?r.memoizedProps:h,_=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&Ue(d,h),Te(_,m);var O=Te(_,h);for(m=0;m<j.length;m+=2){var W=j[m],H=j[m+1];W==="style"?Q(d,H):W==="dangerouslySetInnerHTML"?us(d,H):W==="children"?or(d,H):F(d,W,H,O)}switch(_){case"input":Qe(d,h);break;case"textarea":Rr(d,h);break;case"select":var B=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var te=h.value;te!=null?At(d,!!h.multiple,te,!1):B!==!!h.multiple&&(h.defaultValue!=null?At(d,!!h.multiple,h.defaultValue,!0):At(d,!!h.multiple,h.multiple?[]:"",!1))}d[Ri]=h}catch(ue){at(e,e.return,ue)}}break;case 6:if(pr(t,e),Tr(e),i&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,h=e.memoizedProps;try{d.nodeValue=h}catch(ue){at(e,e.return,ue)}}break;case 3:if(pr(t,e),Tr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{D(t.containerInfo)}catch(ue){at(e,e.return,ue)}break;case 4:pr(t,e),Tr(e);break;case 13:pr(t,e),Tr(e),d=e.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(Ll=tt())),i&4&&Ed(e);break;case 22:if(W=r!==null&&r.memoizedState!==null,e.mode&1?(Et=(O=Et)||W,pr(t,e),Et=O):pr(t,e),Tr(e),i&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!W&&(e.mode&1)!==0)for(ie=e,W=e.child;W!==null;){for(H=ie=W;ie!==null;){switch(B=ie,te=B.child,B.tag){case 0:case 11:case 14:case 15:qi(4,B,B.return);break;case 1:Ds(B,B.return);var oe=B.stateNode;if(typeof oe.componentWillUnmount=="function"){i=B,r=B.return;try{t=i,oe.props=t.memoizedProps,oe.state=t.memoizedState,oe.componentWillUnmount()}catch(ue){at(i,r,ue)}}break;case 5:Ds(B,B.return);break;case 22:if(B.memoizedState!==null){Rd(H);continue}}te!==null?(te.return=B,ie=te):Rd(H)}W=W.sibling}e:for(W=null,H=e;;){if(H.tag===5){if(W===null){W=H;try{d=H.stateNode,O?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=H.stateNode,j=H.memoizedProps.style,m=j!=null&&j.hasOwnProperty("display")?j.display:null,_.style.display=$t("display",m))}catch(ue){at(e,e.return,ue)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(ue){at(e,e.return,ue)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:pr(t,e),Tr(e),i&4&&Ed(e);break;case 21:break;default:pr(t,e),Tr(e)}}function Tr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Sd(r)){var i=r;break e}r=r.return}throw Error(s(160))}switch(i.tag){case 5:var d=i.stateNode;i.flags&32&&(or(d,""),i.flags&=-33);var h=Nd(e);Pl(e,h,d);break;case 3:case 4:var m=i.stateNode.containerInfo,_=Nd(e);Tl(e,_,m);break;default:throw Error(s(161))}}catch(j){at(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jp(e,t,r){ie=e,Pd(e)}function Pd(e,t,r){for(var i=(e.mode&1)!==0;ie!==null;){var d=ie,h=d.child;if(d.tag===22&&i){var m=d.memoizedState!==null||Va;if(!m){var _=d.alternate,j=_!==null&&_.memoizedState!==null||Et;_=Va;var O=Et;if(Va=m,(Et=j)&&!O)for(ie=d;ie!==null;)m=ie,j=m.child,m.tag===22&&m.memoizedState!==null?Ld(d):j!==null?(j.return=m,ie=j):Ld(d);for(;h!==null;)ie=h,Pd(h),h=h.sibling;ie=d,Va=_,Et=O}Od(e)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,ie=h):Od(e)}}function Od(e){for(;ie!==null;){var t=ie;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Et||Ha(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Et)if(r===null)i.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:fr(t.type,r.memoizedProps);i.componentDidUpdate(d,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Rc(t,h,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Rc(t,m,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var j=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&r.focus();break;case"img":j.src&&(r.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var W=O.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&D(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Et||t.flags&512&&El(t)}catch(B){at(t,t.return,B)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Rd(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Ld(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ha(4,t)}catch(j){at(t,r,j)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var d=t.return;try{i.componentDidMount()}catch(j){at(t,d,j)}}var h=t.return;try{El(t)}catch(j){at(t,h,j)}break;case 5:var m=t.return;try{El(t)}catch(j){at(t,m,j)}}}catch(j){at(t,t.return,j)}if(t===e){ie=null;break}var _=t.sibling;if(_!==null){_.return=t.return,ie=_;break}ie=t.return}}var Sp=Math.ceil,Ga=Y.ReactCurrentDispatcher,Ol=Y.ReactCurrentOwner,ir=Y.ReactCurrentBatchConfig,Ie=0,vt=null,dt=null,_t=0,Yt=0,zs=dn(0),ht=0,Wi=null,Jn=0,Ka=0,Rl=0,Vi=null,zt=null,Ll=0,Fs=1/0,Gr=null,Ja=!1,Al=null,vn=null,Qa=!1,yn=null,Ya=0,Hi=0,$l=null,Xa=-1,Za=0;function Ot(){return(Ie&6)!==0?tt():Xa!==-1?Xa:Xa=tt()}function xn(e){return(e.mode&1)===0?1:(Ie&2)!==0&&_t!==0?_t&-_t:lp.transition!==null?(Za===0&&(Za=la()),Za):(e=Le,e!==0||(e=window.event,e=e===void 0?16:ga(e.type)),e)}function mr(e,t,r,i){if(50<Hi)throw Hi=0,$l=null,Error(s(185));an(e,r,i),((Ie&2)===0||e!==vt)&&(e===vt&&((Ie&2)===0&&(Ka|=r),ht===4&&wn(e,_t)),Ft(e,i),r===1&&Ie===0&&(t.mode&1)===0&&(Fs=tt()+500,Ca&&hn()))}function Ft(e,t){var r=e.callbackNode;Ln(e,t);var i=nn(e,e===vt?_t:0);if(i===0)r!==null&&sa(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&sa(r),t===1)e.tag===0?op($d.bind(null,e)):wc($d.bind(null,e)),np(function(){(Ie&6)===0&&hn()}),r=null;else{switch(ca(i)){case 1:r=hi;break;case 4:r=hs;break;case 16:r=ps;break;case 536870912:r=aa;break;default:r=ps}r=qd(r,Ad.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ad(e,t){if(Xa=-1,Za=0,(Ie&6)!==0)throw Error(s(327));var r=e.callbackNode;if(Bs()&&e.callbackNode!==r)return null;var i=nn(e,e===vt?_t:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=eo(e,i);else{t=i;var d=Ie;Ie|=2;var h=Ud();(vt!==e||_t!==t)&&(Gr=null,Fs=tt()+500,Yn(e,t));do try{Ep();break}catch(_){Id(e,_)}while(!0);Zo(),Ga.current=h,Ie=d,dt!==null?t=0:(vt=null,_t=0,t=ht)}if(t!==0){if(t===2&&(d=sn(e),d!==0&&(i=d,t=Il(e,d))),t===1)throw r=Wi,Yn(e,0),wn(e,i),Ft(e,tt()),r;if(t===6)wn(e,i);else{if(d=e.current.alternate,(i&30)===0&&!Np(d)&&(t=eo(e,i),t===2&&(h=sn(e),h!==0&&(i=h,t=Il(e,h))),t===1))throw r=Wi,Yn(e,0),wn(e,i),Ft(e,tt()),r;switch(e.finishedWork=d,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:Xn(e,zt,Gr);break;case 3:if(wn(e,i),(i&130023424)===i&&(t=Ll+500-tt(),10<t)){if(nn(e,0)!==0)break;if(d=e.suspendedLanes,(d&i)!==i){Ot(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Bo(Xn.bind(null,e,zt,Gr),t);break}Xn(e,zt,Gr);break;case 4:if(wn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,d=-1;0<i;){var m=31-It(i);h=1<<m,m=t[m],m>d&&(d=m),i&=~h}if(i=d,i=tt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sp(i/1960))-i,10<i){e.timeoutHandle=Bo(Xn.bind(null,e,zt,Gr),i);break}Xn(e,zt,Gr);break;case 5:Xn(e,zt,Gr);break;default:throw Error(s(329))}}}return Ft(e,tt()),e.callbackNode===r?Ad.bind(null,e):null}function Il(e,t){var r=Vi;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=eo(e,t),e!==2&&(t=zt,zt=r,t!==null&&Ul(t)),e}function Ul(e){zt===null?zt=e:zt.push.apply(zt,e)}function Np(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var d=r[i],h=d.getSnapshot;d=d.value;try{if(!cr(h(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~Rl,t&=~Ka,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-It(t),i=1<<r;e[r]=-1,t&=~i}}function $d(e){if((Ie&6)!==0)throw Error(s(327));Bs();var t=nn(e,0);if((t&1)===0)return Ft(e,tt()),null;var r=eo(e,t);if(e.tag!==0&&r===2){var i=sn(e);i!==0&&(t=i,r=Il(e,i))}if(r===1)throw r=Wi,Yn(e,0),wn(e,t),Ft(e,tt()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,zt,Gr),Ft(e,tt()),null}function Ml(e,t){var r=Ie;Ie|=1;try{return e(t)}finally{Ie=r,Ie===0&&(Fs=tt()+500,Ca&&hn())}}function Qn(e){yn!==null&&yn.tag===0&&(Ie&6)===0&&Bs();var t=Ie;Ie|=1;var r=ir.transition,i=Le;try{if(ir.transition=null,Le=1,e)return e()}finally{Le=i,ir.transition=r,Ie=t,(Ie&6)===0&&hn()}}function Dl(){Yt=zs.current,Je(zs)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rp(r)),dt!==null)for(r=dt.return;r!==null;){var i=r;switch(Ko(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sa();break;case 3:Us(),Je(Ut),Je(St),ol();break;case 5:il(i);break;case 4:Us();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:el(i.type._context);break;case 22:case 23:Dl()}r=r.return}if(vt=e,dt=e=_n(e.current,null),_t=Yt=t,ht=0,Wi=null,Rl=Ka=Jn=0,zt=Vi=null,Hn!==null){for(t=0;t<Hn.length;t++)if(r=Hn[t],i=r.interleaved,i!==null){r.interleaved=null;var d=i.next,h=r.pending;if(h!==null){var m=h.next;h.next=d,i.next=m}r.pending=i}Hn=null}return e}function Id(e,t){do{var r=dt;try{if(Zo(),Ua.current=Fa,Ma){for(var i=st.memoizedState;i!==null;){var d=i.queue;d!==null&&(d.pending=null),i=i.next}Ma=!1}if(Kn=0,gt=ft=st=null,Mi=!1,Di=0,Ol.current=null,r===null||r.return===null){ht=1,Wi=t,dt=null;break}e:{var h=e,m=r.return,_=r,j=t;if(t=_t,_.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var O=j,W=_,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var te=od(m);if(te!==null){te.flags&=-257,ld(te,m,_,h,t),te.mode&1&&ad(h,O,t),t=te,j=O;var oe=t.updateQueue;if(oe===null){var ue=new Set;ue.add(j),t.updateQueue=ue}else oe.add(j);break e}else{if((t&1)===0){ad(h,O,t),zl();break e}j=Error(s(426))}}else if(Ze&&_.mode&1){var lt=od(m);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),ld(lt,m,_,h,t),Yo(Ms(j,_));break e}}h=j=Ms(j,_),ht!==4&&(ht=2),Vi===null?Vi=[h]:Vi.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var E=sd(h,j,t);Oc(h,E);break e;case 1:_=j;var S=h.type,P=h.stateNode;if((h.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(vn===null||!vn.has(P)))){h.flags|=65536,t&=-t,h.lanes|=t;var K=id(h,_,t);Oc(h,K);break e}}h=h.return}while(h!==null)}Dd(r)}catch(de){t=de,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function Ud(){var e=Ga.current;return Ga.current=Fa,e===null?Fa:e}function zl(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||(Jn&268435455)===0&&(Ka&268435455)===0||wn(vt,_t)}function eo(e,t){var r=Ie;Ie|=2;var i=Ud();(vt!==e||_t!==t)&&(Gr=null,Yn(e,t));do try{Cp();break}catch(d){Id(e,d)}while(!0);if(Zo(),Ie=r,Ga.current=i,dt!==null)throw Error(s(261));return vt=null,_t=0,ht}function Cp(){for(;dt!==null;)Md(dt)}function Ep(){for(;dt!==null&&!ia();)Md(dt)}function Md(e){var t=Bd(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Dd(e):dt=t,Ol.current=null}function Dd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=wp(r,t,Yt),r!==null){dt=r;return}}else{if(r=_p(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ht=6,dt=null;return}}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);ht===0&&(ht=5)}function Xn(e,t,r){var i=Le,d=ir.transition;try{ir.transition=null,Le=1,Tp(e,t,r,i)}finally{ir.transition=d,Le=i}return null}function Tp(e,t,r,i){do Bs();while(yn!==null);if((Ie&6)!==0)throw Error(s(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(ua(e,h),e===vt&&(dt=vt=null,_t=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Qa||(Qa=!0,qd(ps,function(){return Bs(),null})),h=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||h){h=ir.transition,ir.transition=null;var m=Le;Le=1;var _=Ie;Ie|=4,Ol.current=null,kp(e,r),Td(r,e),Jh(zo),fe=!!Do,zo=Do=null,e.current=r,jp(r),Tt(),Ie=_,Le=m,ir.transition=h}else e.current=r;if(Qa&&(Qa=!1,yn=e,Ya=d),h=e.pendingLanes,h===0&&(vn=null),oa(r.stateNode),Ft(e,tt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],i(d.value,{componentStack:d.stack,digest:d.digest});if(Ja)throw Ja=!1,e=Al,Al=null,e;return(Ya&1)!==0&&e.tag!==0&&Bs(),h=e.pendingLanes,(h&1)!==0?e===$l?Hi++:(Hi=0,$l=e):Hi=0,hn(),null}function Bs(){if(yn!==null){var e=ca(Ya),t=ir.transition,r=Le;try{if(ir.transition=null,Le=16>e?16:e,yn===null)var i=!1;else{if(e=yn,yn=null,Ya=0,(Ie&6)!==0)throw Error(s(331));var d=Ie;for(Ie|=4,ie=e.current;ie!==null;){var h=ie,m=h.child;if((ie.flags&16)!==0){var _=h.deletions;if(_!==null){for(var j=0;j<_.length;j++){var O=_[j];for(ie=O;ie!==null;){var W=ie;switch(W.tag){case 0:case 11:case 15:qi(8,W,h)}var H=W.child;if(H!==null)H.return=W,ie=H;else for(;ie!==null;){W=ie;var B=W.sibling,te=W.return;if(jd(W),W===O){ie=null;break}if(B!==null){B.return=te,ie=B;break}ie=te}}}var oe=h.alternate;if(oe!==null){var ue=oe.child;if(ue!==null){oe.child=null;do{var lt=ue.sibling;ue.sibling=null,ue=lt}while(ue!==null)}}ie=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,ie=m;else e:for(;ie!==null;){if(h=ie,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:qi(9,h,h.return)}var E=h.sibling;if(E!==null){E.return=h.return,ie=E;break e}ie=h.return}}var S=e.current;for(ie=S;ie!==null;){m=ie;var P=m.child;if((m.subtreeFlags&2064)!==0&&P!==null)P.return=m,ie=P;else e:for(m=S;ie!==null;){if(_=ie,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Ha(9,_)}}catch(de){at(_,_.return,de)}if(_===m){ie=null;break e}var K=_.sibling;if(K!==null){K.return=_.return,ie=K;break e}ie=_.return}}if(Ie=d,hn(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(ms,e)}catch{}i=!0}return i}finally{Le=r,ir.transition=t}}return!1}function zd(e,t,r){t=Ms(r,t),t=sd(e,t,1),e=mn(e,t,1),t=Ot(),e!==null&&(an(e,1,t),Ft(e,t))}function at(e,t,r){if(e.tag===3)zd(e,e,r);else for(;t!==null;){if(t.tag===3){zd(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vn===null||!vn.has(i))){e=Ms(r,e),e=id(t,e,1),t=mn(t,e,1),e=Ot(),t!==null&&(an(t,1,e),Ft(t,e));break}}t=t.return}}function Pp(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(_t&r)===r&&(ht===4||ht===3&&(_t&130023424)===_t&&500>tt()-Ll?Yn(e,0):Rl|=r),Ft(e,t)}function Fd(e,t){t===0&&((e.mode&1)===0?t=1:(t=vs,vs<<=1,(vs&130023424)===0&&(vs=4194304)));var r=Ot();e=Wr(e,t),e!==null&&(an(e,t,r),Ft(e,r))}function Op(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fd(e,r)}function Rp(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),Fd(e,r)}var Bd;Bd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Dt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Dt=!1,xp(e,t,r);Dt=(e.flags&131072)!==0}else Dt=!1,Ze&&(t.flags&1048576)!==0&&_c(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var d=Ps(t,St.current);Is(t,r),d=cl(null,t,i,e,d,r);var h=dl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(i)?(h=!0,Na(t)):h=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,nl(t),d.updater=Ba,t.stateNode=d,d._reactInternals=t,vl(t,i,e,r),t=_l(null,t,i,!0,h,r)):(t.tag=0,Ze&&h&&Go(t),Pt(null,t,d,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,d=i._init,i=d(i._payload),t.type=i,d=t.tag=Ap(i),e=fr(i,e),d){case 0:t=wl(null,t,i,e,r);break e;case 1:t=pd(null,t,i,e,r);break e;case 11:t=ud(null,t,i,e,r);break e;case 14:t=cd(null,t,i,fr(i.type,e),r);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),wl(e,t,i,d,r);case 1:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),pd(e,t,i,d,r);case 3:e:{if(md(t),e===null)throw Error(s(387));i=t.pendingProps,h=t.memoizedState,d=h.element,Pc(e,t),$a(t,i,null,r);var m=t.memoizedState;if(i=m.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){d=Ms(Error(s(423)),t),t=gd(e,t,i,r,d);break e}else if(i!==d){d=Ms(Error(s(424)),t),t=gd(e,t,i,r,d);break e}else for(Qt=cn(t.stateNode.containerInfo.firstChild),Jt=t,Ze=!0,dr=null,r=Ec(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ls(),i===d){t=Hr(e,t,r);break e}Pt(e,t,i,r)}t=t.child}return t;case 5:return Lc(t),e===null&&Qo(t),i=t.type,d=t.pendingProps,h=e!==null?e.memoizedProps:null,m=d.children,Fo(i,d)?m=null:h!==null&&Fo(i,h)&&(t.flags|=32),hd(e,t),Pt(e,t,m,r),t.child;case 6:return e===null&&Qo(t),null;case 13:return vd(e,t,r);case 4:return sl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=As(t,null,i,r):Pt(e,t,i,r),t.child;case 11:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),ud(e,t,i,d,r);case 7:return Pt(e,t,t.pendingProps,r),t.child;case 8:return Pt(e,t,t.pendingProps.children,r),t.child;case 12:return Pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,d=t.pendingProps,h=t.memoizedProps,m=d.value,He(Ra,i._currentValue),i._currentValue=m,h!==null)if(cr(h.value,m)){if(h.children===d.children&&!Ut.current){t=Hr(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var _=h.dependencies;if(_!==null){m=h.child;for(var j=_.firstContext;j!==null;){if(j.context===i){if(h.tag===1){j=Vr(-1,r&-r),j.tag=2;var O=h.updateQueue;if(O!==null){O=O.shared;var W=O.pending;W===null?j.next=j:(j.next=W.next,W.next=j),O.pending=j}}h.lanes|=r,j=h.alternate,j!==null&&(j.lanes|=r),tl(h.return,r,t),_.lanes|=r;break}j=j.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(s(341));m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),tl(m,r,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Pt(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,i=t.pendingProps.children,Is(t,r),d=nr(d),i=i(d),t.flags|=1,Pt(e,t,i,r),t.child;case 14:return i=t.type,d=fr(i,t.pendingProps),d=fr(i.type,d),cd(e,t,i,d,r);case 15:return dd(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),Wa(e,t),t.tag=1,Mt(i)?(e=!0,Na(t)):e=!1,Is(t,r),rd(t,i,d),vl(t,i,d,r),_l(null,t,i,!0,e,r);case 19:return xd(e,t,r);case 22:return fd(e,t,r)}throw Error(s(156,t.tag))};function qd(e,t){return fi(e,t)}function Lp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(e,t,r,i){return new Lp(e,t,r,i)}function Fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ap(e){if(typeof e=="function")return Fl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===We)return 11;if(e===he)return 14}return 2}function _n(e,t){var r=e.alternate;return r===null?(r=ar(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function to(e,t,r,i,d,h){var m=2;if(i=e,typeof e=="function")Fl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case we:return Zn(r.children,d,h,t);case Ee:m=8,d|=8;break;case et:return e=ar(12,r,t,d|2),e.elementType=et,e.lanes=h,e;case Be:return e=ar(13,r,t,d),e.elementType=Be,e.lanes=h,e;case G:return e=ar(19,r,t,d),e.elementType=G,e.lanes=h,e;case re:return ro(r,d,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Fe:m=10;break e;case qe:m=9;break e;case We:m=11;break e;case he:m=14;break e;case pe:m=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=ar(m,r,t,d),t.elementType=e,t.type=i,t.lanes=h,t}function Zn(e,t,r,i){return e=ar(7,e,i,t),e.lanes=r,e}function ro(e,t,r,i){return e=ar(22,e,i,t),e.elementType=re,e.lanes=r,e.stateNode={isHidden:!1},e}function Bl(e,t,r){return e=ar(6,e,null,t),e.lanes=r,e}function ql(e,t,r){return t=ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,r,i,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ys(0),this.expirationTimes=ys(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ys(0),this.identifierPrefix=i,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Wl(e,t,r,i,d,h,m,_,j){return e=new $p(e,t,r,_,j),t===1?(t=1,h===!0&&(t|=8)):t=0,h=ar(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nl(h),e}function Ip(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Wd(e){if(!e)return fn;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(Mt(r))return yc(e,r,t)}return t}function Vd(e,t,r,i,d,h,m,_,j){return e=Wl(r,i,!0,e,d,h,m,_,j),e.context=Wd(null),r=e.current,i=Ot(),d=xn(r),h=Vr(i,d),h.callback=t??null,mn(r,h,d),e.current.lanes=d,an(e,d,i),Ft(e,i),e}function no(e,t,r,i){var d=t.current,h=Ot(),m=xn(d);return r=Wd(r),t.context===null?t.context=r:t.pendingContext=r,t=Vr(h,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=mn(d,t,m),e!==null&&(mr(e,d,m,h),Aa(e,d,m)),m}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Vl(e,t){Hd(e,t),(e=e.alternate)&&Hd(e,t)}function Up(){return null}var Gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hl(e){this._internalRoot=e}io.prototype.render=Hl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));no(e,t,null,null)},io.prototype.unmount=Hl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){no(null,e,null,null)}),t[zr]=null}};function io(e){this._internalRoot=e}io.prototype.unstable_scheduleHydration=function(e){if(e){var t=xs();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kt.length&&t!==0&&t<Kt[r].priority;r++);Kt.splice(r,0,e),r===0&&ha(e)}};function Gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function Mp(e,t,r,i,d){if(d){if(typeof i=="function"){var h=i;i=function(){var O=so(m);h.call(O)}}var m=Vd(t,i,e,0,null,!1,!1,"",Kd);return e._reactRootContainer=m,e[zr]=m.current,Pi(e.nodeType===8?e.parentNode:e),Qn(),m}for(;d=e.lastChild;)e.removeChild(d);if(typeof i=="function"){var _=i;i=function(){var O=so(j);_.call(O)}}var j=Wl(e,0,!1,null,null,!1,!1,"",Kd);return e._reactRootContainer=j,e[zr]=j.current,Pi(e.nodeType===8?e.parentNode:e),Qn(function(){no(t,j,r,i)}),j}function oo(e,t,r,i,d){var h=r._reactRootContainer;if(h){var m=h;if(typeof d=="function"){var _=d;d=function(){var j=so(m);_.call(j)}}no(t,m,e,d)}else m=Mp(r,t,e,d,i);return so(m)}da=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=rn(t.pendingLanes);r!==0&&(gi(t,r|1),Ft(t,tt()),(Ie&6)===0&&(Fs=tt()+500,hn()))}break;case 13:Qn(function(){var i=Wr(e,1);if(i!==null){var d=Ot();mr(i,e,1,d)}}),Vl(e,1)}},An=function(e){if(e.tag===13){var t=Wr(e,134217728);if(t!==null){var r=Ot();mr(t,e,134217728,r)}Vl(e,134217728)}},$n=function(e){if(e.tag===13){var t=xn(e),r=Wr(e,t);if(r!==null){var i=Ot();mr(r,e,t,i)}Vl(e,t)}},xs=function(){return Le},fa=function(e,t){var r=Le;try{return Le=e,t()}finally{Le=r}},Ye=function(e,t,r){switch(t){case"input":if(Qe(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var d=ja(i);if(!d)throw Error(s(90));se(i),Qe(i,d)}}}break;case"textarea":Rr(e,r);break;case"select":t=r.value,t!=null&&At(e,!!r.multiple,t,!1)}},Xr=Ml,cs=Qn;var Dp={usingClientEntryPoint:!1,Events:[Li,Es,ja,Lr,ai,Ml]},Gi={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=di(e),e===null?null:e.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||Up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lo.isDisabled&&lo.supportsFiber)try{ms=lo.inject(zp),Vt=lo}catch{}}return Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dp,Bt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gl(t))throw Error(s(200));return Ip(e,t,null,r)},Bt.createRoot=function(e,t){if(!Gl(e))throw Error(s(299));var r=!1,i="",d=Gd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Wl(e,1,!1,null,null,r,!1,i,d),e[zr]=t.current,Pi(e.nodeType===8?e.parentNode:e),new Hl(t)},Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=di(t),e=e===null?null:e.stateNode,e},Bt.flushSync=function(e){return Qn(e)},Bt.hydrate=function(e,t,r){if(!ao(t))throw Error(s(200));return oo(null,e,t,!0,r)},Bt.hydrateRoot=function(e,t,r){if(!Gl(e))throw Error(s(405));var i=r!=null&&r.hydratedSources||null,d=!1,h="",m=Gd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Vd(t,null,e,1,r??null,d,!1,h,m),e[zr]=t.current,Pi(e),i)for(e=0;e<i.length;e++)r=i[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new io(t)},Bt.render=function(e,t,r){if(!ao(t))throw Error(s(200));return oo(null,e,t,!1,r)},Bt.unmountComponentAtNode=function(e){if(!ao(e))throw Error(s(40));return e._reactRootContainer?(Qn(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1},Bt.unstable_batchedUpdates=Ml,Bt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!ao(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return oo(e,t,r,!1,i)},Bt.version="18.3.1-next-f1338f8080-20240426",Bt}var rf;function zf(){if(rf)return Ql.exports;rf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Ql.exports=Qp(),Ql.exports}var nf;function Yp(){if(nf)return uo;nf=1;var o=zf();return uo.createRoot=o.createRoot,uo.hydrateRoot=o.hydrateRoot,uo}var Xp=Yp(),Zp=zf();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},ea.apply(this,arguments)}var Nn;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Nn||(Nn={}));const sf="popstate";function em(o){o===void 0&&(o={});function n(l,u){let{pathname:f="/",search:p="",hash:g=""}=ss(l.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),uu("",{pathname:f,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(l,u){let f=l.document.querySelector("base"),p="";if(f&&f.getAttribute("href")){let g=l.location.href,v=g.indexOf("#");p=v===-1?g:g.slice(0,v)}return p+"#"+(typeof u=="string"?u:go(u))}function a(l,u){Cu(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(u)+")")}return rm(n,s,a,o)}function ut(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function Cu(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function tm(){return Math.random().toString(36).substr(2,8)}function af(o,n){return{usr:o.state,key:o.key,idx:n}}function uu(o,n,s,a){return s===void 0&&(s=null),ea({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof n=="string"?ss(n):n,{state:s,key:n&&n.key||a||tm()})}function go(o){let{pathname:n="/",search:s="",hash:a=""}=o;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function ss(o){let n={};if(o){let s=o.indexOf("#");s>=0&&(n.hash=o.substr(s),o=o.substr(0,s));let a=o.indexOf("?");a>=0&&(n.search=o.substr(a),o=o.substr(0,a)),o&&(n.pathname=o)}return n}function rm(o,n,s,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:u=!1}=a,f=l.history,p=Nn.Pop,g=null,v=x();v==null&&(v=0,f.replaceState(ea({},f.state,{idx:v}),""));function x(){return(f.state||{idx:null}).idx}function b(){p=Nn.Pop;let N=x(),J=N==null?null:N-v;v=N,g&&g({action:p,location:I.location,delta:J})}function C(N,J){p=Nn.Push;let Z=uu(I.location,N,J);s&&s(Z,N),v=x()+1;let F=af(Z,v),Y=I.createHref(Z);try{f.pushState(F,"",Y)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;l.location.assign(Y)}u&&g&&g({action:p,location:I.location,delta:1})}function L(N,J){p=Nn.Replace;let Z=uu(I.location,N,J);s&&s(Z,N),v=x();let F=af(Z,v),Y=I.createHref(Z);f.replaceState(F,"",Y),u&&g&&g({action:p,location:I.location,delta:0})}function M(N){let J=l.location.origin!=="null"?l.location.origin:l.location.href,Z=typeof N=="string"?N:go(N);return Z=Z.replace(/ $/,"%20"),ut(J,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,J)}let I={get action(){return p},get location(){return o(l,f)},listen(N){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(sf,b),g=N,()=>{l.removeEventListener(sf,b),g=null}},createHref(N){return n(l,N)},createURL:M,encodeLocation(N){let J=M(N);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:C,replace:L,go(N){return f.go(N)}};return I}var of;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(of||(of={}));function nm(o,n,s){return s===void 0&&(s="/"),sm(o,n,s)}function sm(o,n,s,a){let l=typeof n=="string"?ss(n):n,u=Eu(l.pathname||"/",s);if(u==null)return null;let f=Ff(o);im(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let v=vm(u);p=pm(f[g],v)}return p}function Ff(o,n,s,a){n===void 0&&(n=[]),s===void 0&&(s=[]),a===void 0&&(a="");let l=(u,f,p)=>{let g={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};g.relativePath.startsWith("/")&&(ut(g.relativePath.startsWith(a),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(a.length));let v=Cn([a,g.relativePath]),x=s.concat(g);u.children&&u.children.length>0&&(ut(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Ff(u.children,n,x,v)),!(u.path==null&&!u.index)&&n.push({path:v,score:fm(v,u.index),routesMeta:x})};return o.forEach((u,f)=>{var p;if(u.path===""||!((p=u.path)!=null&&p.includes("?")))l(u,f);else for(let g of Bf(u.path))l(u,f,g)}),n}function Bf(o){let n=o.split("/");if(n.length===0)return[];let[s,...a]=n,l=s.endsWith("?"),u=s.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let f=Bf(a.join("/")),p=[];return p.push(...f.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...f),p.map(g=>o.startsWith("/")&&g===""?"/":g)}function im(o){o.sort((n,s)=>n.score!==s.score?s.score-n.score:hm(n.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const am=/^:[\w-]+$/,om=3,lm=2,um=1,cm=10,dm=-2,lf=o=>o==="*";function fm(o,n){let s=o.split("/"),a=s.length;return s.some(lf)&&(a+=dm),n&&(a+=lm),s.filter(l=>!lf(l)).reduce((l,u)=>l+(am.test(u)?om:u===""?um:cm),a)}function hm(o,n){return o.length===n.length&&o.slice(0,-1).every((a,l)=>a===n[l])?o[o.length-1]-n[n.length-1]:0}function pm(o,n,s){let{routesMeta:a}=o,l={},u="/",f=[];for(let p=0;p<a.length;++p){let g=a[p],v=p===a.length-1,x=u==="/"?n:n.slice(u.length)||"/",b=mm({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},x),C=g.route;if(!b)return null;Object.assign(l,b.params),f.push({params:l,pathname:Cn([u,b.pathname]),pathnameBase:_m(Cn([u,b.pathnameBase])),route:C}),b.pathnameBase!=="/"&&(u=Cn([u,b.pathnameBase]))}return f}function mm(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[s,a]=gm(o.path,o.caseSensitive,o.end),l=n.match(s);if(!l)return null;let u=l[0],f=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:a.reduce((v,x,b)=>{let{paramName:C,isOptional:L}=x;if(C==="*"){let I=p[b]||"";f=u.slice(0,u.length-I.length).replace(/(.)\/+$/,"$1")}const M=p[b];return L&&!M?v[C]=void 0:v[C]=(M||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:f,pattern:o}}function gm(o,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Cu(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let a=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),a]}function vm(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Cu(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),o}}function Eu(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,a=o.charAt(s);return a&&a!=="/"?null:o.slice(s)||"/"}function ym(o,n){n===void 0&&(n="/");let{pathname:s,search:a="",hash:l=""}=typeof o=="string"?ss(o):o;return{pathname:s?s.startsWith("/")?s:xm(s,n):n,search:bm(a),hash:km(l)}}function xm(o,n){let s=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function Zl(o,n,s,a){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wm(o){return o.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Tu(o,n){let s=wm(o);return n?s.map((a,l)=>l===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Pu(o,n,s,a){a===void 0&&(a=!1);let l;typeof o=="string"?l=ss(o):(l=ea({},o),ut(!l.pathname||!l.pathname.includes("?"),Zl("?","pathname","search",l)),ut(!l.pathname||!l.pathname.includes("#"),Zl("#","pathname","hash",l)),ut(!l.search||!l.search.includes("#"),Zl("#","search","hash",l)));let u=o===""||l.pathname==="",f=u?"/":l.pathname,p;if(f==null)p=s;else{let b=n.length-1;if(!a&&f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),b-=1;l.pathname=C.join("/")}p=b>=0?n[b]:"/"}let g=ym(l,p),v=f&&f!=="/"&&f.endsWith("/"),x=(u||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(v||x)&&(g.pathname+="/"),g}const Cn=o=>o.join("/").replace(/\/\/+/g,"/"),_m=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),bm=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,km=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function jm(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const qf=["post","put","patch","delete"];new Set(qf);const Sm=["get",...qf];new Set(Sm);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},ta.apply(this,arguments)}const Ou=y.createContext(null),Nm=y.createContext(null),En=y.createContext(null),xo=y.createContext(null),Or=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Wf=y.createContext(null);function Cm(o,n){let{relative:s}=n===void 0?{}:n;ni()||ut(!1);let{basename:a,navigator:l}=y.useContext(En),{hash:u,pathname:f,search:p}=Hf(o,{relative:s}),g=f;return a!=="/"&&(g=f==="/"?a:Cn([a,f])),l.createHref({pathname:g,search:p,hash:u})}function ni(){return y.useContext(xo)!=null}function yr(){return ni()||ut(!1),y.useContext(xo).location}function Vf(o){y.useContext(En).static||y.useLayoutEffect(o)}function is(){let{isDataRoute:o}=y.useContext(Or);return o?Bm():Em()}function Em(){ni()||ut(!1);let o=y.useContext(Ou),{basename:n,future:s,navigator:a}=y.useContext(En),{matches:l}=y.useContext(Or),{pathname:u}=yr(),f=JSON.stringify(Tu(l,s.v7_relativeSplatPath)),p=y.useRef(!1);return Vf(()=>{p.current=!0}),y.useCallback(function(v,x){if(x===void 0&&(x={}),!p.current)return;if(typeof v=="number"){a.go(v);return}let b=Pu(v,JSON.parse(f),u,x.relative==="path");o==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:Cn([n,b.pathname])),(x.replace?a.replace:a.push)(b,x.state,x)},[n,a,f,u,o])}const Tm=y.createContext(null);function Pm(o){let n=y.useContext(Or).outlet;return n&&y.createElement(Tm.Provider,{value:o},n)}function wo(){let{matches:o}=y.useContext(Or),n=o[o.length-1];return n?n.params:{}}function Hf(o,n){let{relative:s}=n===void 0?{}:n,{future:a}=y.useContext(En),{matches:l}=y.useContext(Or),{pathname:u}=yr(),f=JSON.stringify(Tu(l,a.v7_relativeSplatPath));return y.useMemo(()=>Pu(o,JSON.parse(f),u,s==="path"),[o,f,u,s])}function Om(o,n){return Rm(o,n)}function Rm(o,n,s,a){ni()||ut(!1);let{navigator:l}=y.useContext(En),{matches:u}=y.useContext(Or),f=u[u.length-1],p=f?f.params:{};f&&f.pathname;let g=f?f.pathnameBase:"/";f&&f.route;let v=yr(),x;if(n){var b;let N=typeof n=="string"?ss(n):n;g==="/"||(b=N.pathname)!=null&&b.startsWith(g)||ut(!1),x=N}else x=v;let C=x.pathname||"/",L=C;if(g!=="/"){let N=g.replace(/^\//,"").split("/");L="/"+C.replace(/^\//,"").split("/").slice(N.length).join("/")}let M=nm(o,{pathname:L}),I=Um(M&&M.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:Cn([g,l.encodeLocation?l.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?g:Cn([g,l.encodeLocation?l.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,s,a);return n&&I?y.createElement(xo.Provider,{value:{location:ta({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Nn.Pop}},I):I}function Lm(){let o=Fm(),n=jm(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),s=o instanceof Error?o.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},n),s?y.createElement("pre",{style:l},s):null,null)}const Am=y.createElement(Lm,null);class $m extends y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?y.createElement(Or.Provider,{value:this.props.routeContext},y.createElement(Wf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Im(o){let{routeContext:n,match:s,children:a}=o,l=y.useContext(Ou);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),y.createElement(Or.Provider,{value:n},a)}function Um(o,n,s,a){var l;if(n===void 0&&(n=[]),s===void 0&&(s=null),a===void 0&&(a=null),o==null){var u;if(!s)return null;if(s.errors)o=s.matches;else if((u=a)!=null&&u.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)o=s.matches;else return null}let f=o,p=(l=s)==null?void 0:l.errors;if(p!=null){let x=f.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);x>=0||ut(!1),f=f.slice(0,Math.min(f.length,x+1))}let g=!1,v=-1;if(s&&a&&a.v7_partialHydration)for(let x=0;x<f.length;x++){let b=f[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=x),b.route.id){let{loaderData:C,errors:L}=s,M=b.route.loader&&C[b.route.id]===void 0&&(!L||L[b.route.id]===void 0);if(b.route.lazy||M){g=!0,v>=0?f=f.slice(0,v+1):f=[f[0]];break}}}return f.reduceRight((x,b,C)=>{let L,M=!1,I=null,N=null;s&&(L=p&&b.route.id?p[b.route.id]:void 0,I=b.route.errorElement||Am,g&&(v<0&&C===0?(qm("route-fallback"),M=!0,N=null):v===C&&(M=!0,N=b.route.hydrateFallbackElement||null)));let J=n.concat(f.slice(0,C+1)),Z=()=>{let F;return L?F=I:M?F=N:b.route.Component?F=y.createElement(b.route.Component,null):b.route.element?F=b.route.element:F=x,y.createElement(Im,{match:b,routeContext:{outlet:x,matches:J,isDataRoute:s!=null},children:F})};return s&&(b.route.ErrorBoundary||b.route.errorElement||C===0)?y.createElement($m,{location:s.location,revalidation:s.revalidation,component:I,error:L,children:Z(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):Z()},null)}var Gf=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(Gf||{}),Kf=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(Kf||{});function Mm(o){let n=y.useContext(Ou);return n||ut(!1),n}function Dm(o){let n=y.useContext(Nm);return n||ut(!1),n}function zm(o){let n=y.useContext(Or);return n||ut(!1),n}function Jf(o){let n=zm(),s=n.matches[n.matches.length-1];return s.route.id||ut(!1),s.route.id}function Fm(){var o;let n=y.useContext(Wf),s=Dm(),a=Jf();return n!==void 0?n:(o=s.errors)==null?void 0:o[a]}function Bm(){let{router:o}=Mm(Gf.UseNavigateStable),n=Jf(Kf.UseNavigateStable),s=y.useRef(!1);return Vf(()=>{s.current=!0}),y.useCallback(function(l,u){u===void 0&&(u={}),s.current&&(typeof l=="number"?o.navigate(l):o.navigate(l,ta({fromRouteId:n},u)))},[o,n])}const uf={};function qm(o,n,s){uf[o]||(uf[o]=!0)}function Wm(o,n){o?.v7_startTransition,o?.v7_relativeSplatPath}function _o(o){let{to:n,replace:s,state:a,relative:l}=o;ni()||ut(!1);let{future:u,static:f}=y.useContext(En),{matches:p}=y.useContext(Or),{pathname:g}=yr(),v=is(),x=Pu(n,Tu(p,u.v7_relativeSplatPath),g,l==="path"),b=JSON.stringify(x);return y.useEffect(()=>v(JSON.parse(b),{replace:s,state:a,relative:l}),[v,b,l,s,a]),null}function Vm(o){return Pm(o.context)}function Lt(o){ut(!1)}function Hm(o){let{basename:n="/",children:s=null,location:a,navigationType:l=Nn.Pop,navigator:u,static:f=!1,future:p}=o;ni()&&ut(!1);let g=n.replace(/^\/*/,"/"),v=y.useMemo(()=>({basename:g,navigator:u,static:f,future:ta({v7_relativeSplatPath:!1},p)}),[g,p,u,f]);typeof a=="string"&&(a=ss(a));let{pathname:x="/",search:b="",hash:C="",state:L=null,key:M="default"}=a,I=y.useMemo(()=>{let N=Eu(x,g);return N==null?null:{location:{pathname:N,search:b,hash:C,state:L,key:M},navigationType:l}},[g,x,b,C,L,M,l]);return I==null?null:y.createElement(En.Provider,{value:v},y.createElement(xo.Provider,{children:s,value:I}))}function Gm(o){let{children:n,location:s}=o;return Om(cu(n),s)}new Promise(()=>{});function cu(o,n){n===void 0&&(n=[]);let s=[];return y.Children.forEach(o,(a,l)=>{if(!y.isValidElement(a))return;let u=[...n,l];if(a.type===y.Fragment){s.push.apply(s,cu(a.props.children,u));return}a.type!==Lt&&ut(!1),!a.props.index||!a.props.children||ut(!1);let f={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=cu(a.props.children,u)),s.push(f)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},du.apply(this,arguments)}function Km(o,n){if(o==null)return{};var s={},a=Object.keys(o),l,u;for(u=0;u<a.length;u++)l=a[u],!(n.indexOf(l)>=0)&&(s[l]=o[l]);return s}function Jm(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Qm(o,n){return o.button===0&&(!n||n==="_self")&&!Jm(o)}function fu(o){return o===void 0&&(o=""),new URLSearchParams(typeof o=="string"||Array.isArray(o)||o instanceof URLSearchParams?o:Object.keys(o).reduce((n,s)=>{let a=o[s];return n.concat(Array.isArray(a)?a.map(l=>[s,l]):[[s,a]])},[]))}function Ym(o,n){let s=fu(o);return n&&n.forEach((a,l)=>{s.has(l)||n.getAll(l).forEach(u=>{s.append(l,u)})}),s}const Xm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zm="6";try{window.__reactRouterVersion=Zm}catch{}const eg="startTransition",cf=Gp[eg];function tg(o){let{basename:n,children:s,future:a,window:l}=o,u=y.useRef();u.current==null&&(u.current=em({window:l,v5Compat:!0}));let f=u.current,[p,g]=y.useState({action:f.action,location:f.location}),{v7_startTransition:v}=a||{},x=y.useCallback(b=>{v&&cf?cf(()=>g(b)):g(b)},[g,v]);return y.useLayoutEffect(()=>f.listen(x),[f,x]),y.useEffect(()=>Wm(a),[a]),y.createElement(Hm,{basename:n,children:s,location:p.location,navigationType:p.action,navigator:f,future:a})}const rg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ng=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=y.forwardRef(function(n,s){let{onClick:a,relative:l,reloadDocument:u,replace:f,state:p,target:g,to:v,preventScrollReset:x,viewTransition:b}=n,C=Km(n,Xm),{basename:L}=y.useContext(En),M,I=!1;if(typeof v=="string"&&ng.test(v)&&(M=v,rg))try{let F=new URL(window.location.href),Y=v.startsWith("//")?new URL(F.protocol+v):new URL(v),ne=Eu(Y.pathname,L);Y.origin===F.origin&&ne!=null?v=ne+Y.search+Y.hash:I=!0}catch{}let N=Cm(v,{relative:l}),J=sg(v,{replace:f,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:b});function Z(F){a&&a(F),F.defaultPrevented||J(F)}return y.createElement("a",du({},C,{href:M||N,onClick:I||u?a:Z,ref:s,target:g}))});var df;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(df||(df={}));var ff;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(ff||(ff={}));function sg(o,n){let{target:s,replace:a,state:l,preventScrollReset:u,relative:f,viewTransition:p}=n===void 0?{}:n,g=is(),v=yr(),x=Hf(o,{relative:f});return y.useCallback(b=>{if(Qm(b,s)){b.preventDefault();let C=a!==void 0?a:go(v)===go(x);g(o,{replace:C,state:l,preventScrollReset:u,relative:f,viewTransition:p})}},[v,g,x,a,l,s,o,u,f,p])}function ig(o){let n=y.useRef(fu(o)),s=y.useRef(!1),a=yr(),l=y.useMemo(()=>Ym(a.search,s.current?null:n.current),[a.search]),u=is(),f=y.useCallback((p,g)=>{const v=fu(typeof p=="function"?p(l):p);s.current=!0,u("?"+v,g)},[u,l]);return[l,f]}const ag="modulepreload",og=function(o){return"/Circles/"+o},hf={},as=function(n,s,a){let l=Promise.resolve();if(s&&s.length>0){let g=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");l=g(s.map(v=>{if(v=og(v),v in hf)return;hf[v]=!0;const x=v.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":ag,x||(C.as="script"),C.crossOrigin="",C.href=v,p&&C.setAttribute("nonce",p),document.head.appendChild(C),x)return new Promise((L,M)=>{C.addEventListener("load",L),C.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return l.then(f=>{for(const p of f||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},lg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>as(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)};class Ru extends Error{constructor(n,s="FunctionsError",a){super(n),this.name=s,this.context=a}}class ug extends Ru{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class pf extends Ru{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class mf extends Ru{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hu;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(hu||(hu={}));var cg=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class dg{constructor(n,{headers:s={},customFetch:a,region:l=hu.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=lg(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var a;return cg(this,void 0,void 0,function*(){try{const{headers:l,method:u,body:f}=s;let p={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(p["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(p["Content-Type"]="application/json",x=JSON.stringify(f)));const b=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:x}).catch(I=>{throw new ug(I)}),C=b.headers.get("x-relay-error");if(C&&C==="true")throw new pf(b);if(!b.ok)throw new mf(b);let L=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),M;return L==="application/json"?M=yield b.json():L==="application/octet-stream"?M=yield b.blob():L==="text/event-stream"?M=b:L==="multipart/form-data"?M=yield b.formData():M=yield b.text(),{data:M,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof mf||l instanceof pf?l.context:void 0}}})}}var xt={},qs={},Ws={},Vs={},Hs={},Gs={},fg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ri=fg();const hg=ri.fetch,Qf=ri.fetch.bind(ri),Yf=ri.Headers,pg=ri.Request,mg=ri.Response,si=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yf,Request:pg,Response:mg,default:Qf,fetch:hg},Symbol.toStringTag,{value:"Module"})),gg=qp(si);var co={},gf;function Xf(){if(gf)return co;gf=1,Object.defineProperty(co,"__esModule",{value:!0});class o extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return co.default=o,co}var vf;function Zf(){if(vf)return Gs;vf=1;var o=Gs&&Gs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Gs,"__esModule",{value:!0});const n=o(gg),s=o(Xf());class a{constructor(u){var f,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(f=u.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=new Headers(this.headers),this.headers.set(u,f),this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var x,b,C,L;let M=null,I=null,N=null,J=v.status,Z=v.statusText;if(v.ok){if(this.method!=="HEAD"){const ae=await v.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?I=ae:I=JSON.parse(ae))}const Y=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ne=(C=v.headers.get("content-range"))===null||C===void 0?void 0:C.split("/");Y&&ne&&ne.length>1&&(N=parseInt(ne[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(M={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,N=null,J=406,Z="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const Y=await v.text();try{M=JSON.parse(Y),Array.isArray(M)&&v.status===404&&(I=[],M=null,J=200,Z="OK")}catch{v.status===404&&Y===""?(J=204,Z="No Content"):M={message:Y}}if(M&&this.isMaybeSingle&&(!((L=M?.details)===null||L===void 0)&&L.includes("0 rows"))&&(M=null,J=200,Z="OK"),M&&this.shouldThrowOnError)throw new s.default(M)}return{error:M,data:I,count:N,status:J,statusText:Z}});return this.shouldThrowOnError||(g=g.catch(v=>{var x,b,C;return{error:{message:`${(x=v?.name)!==null&&x!==void 0?x:"FetchError"}: ${v?.message}`,details:`${(b=v?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(C=v?.code)!==null&&C!==void 0?C:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,f)}returns(){return this}overrideTypes(){return this}}return Gs.default=a,Gs}var yf;function eh(){if(yf)return Hs;yf=1;var o=Hs&&Hs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Hs,"__esModule",{value:!0});const n=o(Zf());class s extends n.default{select(l){let u=!1;const f=(l??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",x=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${x?`${x},`:""}${l}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,u,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(v,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var x;const b=[l?"analyze":null,u?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),C=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${C}"; options=${b};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Hs.default=s,Hs}var xf;function Lu(){if(xf)return Vs;xf=1;var o=Vs&&Vs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Vs,"__esModule",{value:!0});const n=o(eh());class s extends n.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}in(l,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${g}fts${v}.${u}`),this}match(l){return Object.entries(l).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(l,u,f){return this.url.searchParams.append(l,`not.${u}.${f}`),this}or(l,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,u,f){return this.url.searchParams.append(l,`${u}.${f}`),this}}return Vs.default=s,Vs}var wf;function th(){if(wf)return Ws;wf=1;var o=Ws&&Ws.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ws,"__esModule",{value:!0});const n=o(Lu());class s{constructor(l,{headers:u={},schema:f,fetch:p}){this.url=l,this.headers=new Headers(u),this.schema=f,this.fetch=p}select(l,{head:u=!1,count:f}={}){const p=u?"HEAD":"GET";let g=!1;const v=(l??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:f=!0}={}){var p;const g="POST";if(u&&this.headers.append("Prefer",`count=${u}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){var v;const x="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((C,L)=>C.concat(Object.keys(L)),[]);if(b.length>0){const C=[...new Set(b)].map(L=>`"${L}"`);this.url.searchParams.set("columns",C.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(l,{count:u}={}){var f;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:l}={}){var u;const f="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Ws.default=s,Ws}var _f;function vg(){if(_f)return qs;_f=1;var o=qs&&qs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(qs,"__esModule",{value:!0});const n=o(th()),s=o(Lu());class a{constructor(u,{headers:f={},schema:p,fetch:g}={}){this.url=u,this.headers=new Headers(f),this.schemaName=p,this.fetch=g}from(u){const f=new URL(`${this.url}/${u}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,f={},{head:p=!1,get:g=!1,count:v}={}){var x;let b;const C=new URL(`${this.url}/rpc/${u}`);let L;p||g?(b=p?"HEAD":"GET",Object.entries(f).filter(([I,N])=>N!==void 0).map(([I,N])=>[I,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([I,N])=>{C.searchParams.append(I,N)})):(b="POST",L=f);const M=new Headers(this.headers);return v&&M.set("Prefer",`count=${v}`),new s.default({method:b,url:C,headers:M,schema:this.schemaName,body:L,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return qs.default=a,qs}var bf;function yg(){if(bf)return xt;bf=1;var o=xt&&xt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const n=o(vg());xt.PostgrestClient=n.default;const s=o(th());xt.PostgrestQueryBuilder=s.default;const a=o(Lu());xt.PostgrestFilterBuilder=a.default;const l=o(eh());xt.PostgrestTransformBuilder=l.default;const u=o(Zf());xt.PostgrestBuilder=u.default;const f=o(Xf());return xt.PostgrestError=f.default,xt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:f.default},xt}var xg=yg();const wg=Df(xg),{PostgrestClient:_g,PostgrestQueryBuilder:U0,PostgrestFilterBuilder:M0,PostgrestTransformBuilder:D0,PostgrestBuilder:z0,PostgrestError:F0}=wg;class bg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const a=this.getWebSocketConstructor();return new a(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const kg="2.15.5",jg=`realtime-js/${kg}`,Sg="1.0.0",pu=1e4,Ng=1e3,Cg=100;var Yi;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Yi||(Yi={}));var pt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(pt||(pt={}));var vr;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(vr||(vr={}));var mu;(function(o){o.websocket="websocket"})(mu||(mu={}));var ns;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(ns||(ns={}));class Eg{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),a=new TextDecoder;return this._decodeBroadcast(n,s,a)}_decodeBroadcast(n,s,a){const l=s.getUint8(1),u=s.getUint8(2);let f=this.HEADER_LENGTH+2;const p=a.decode(n.slice(f,f+l));f=f+l;const g=a.decode(n.slice(f,f+u));f=f+u;const v=JSON.parse(a.decode(n.slice(f,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class rh{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ge||(Ge={}));const kf=(o,n,s={})=>{var a;const l=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(n).reduce((u,f)=>(u[f]=Tg(f,o,n,l),u),{})},Tg=(o,n,s,a)=>{const l=n.find(p=>p.name===o),u=l?.type,f=s[o];return u&&!a.includes(u)?nh(u,f):gu(f)},nh=(o,n)=>{if(o.charAt(0)==="_"){const s=o.slice(1,o.length);return Lg(n,s)}switch(o){case Ge.bool:return Pg(n);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Og(n);case Ge.json:case Ge.jsonb:return Rg(n);case Ge.timestamp:return Ag(n);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return gu(n);default:return gu(n)}},gu=o=>o,Pg=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Og=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Rg=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Lg=(o,n)=>{if(typeof o!="string")return o;const s=o.length-1,a=o[s];if(o[0]==="{"&&a==="}"){let u;const f=o.slice(1,s);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(p=>nh(n,p))}return o},Ag=o=>typeof o=="string"?o.replace(" ","T"):o,sh=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class eu{constructor(n,s,a={},l=pu){this.channel=n,this.event=s,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var a;return this._hasReceived(n)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var jf;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(jf||(jf={}));class Xi{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xi.syncState(this.state,l,u,f),this.pendingDiffs.forEach(g=>{this.state=Xi.syncDiff(this.state,g,u,f)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},l=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Xi.syncDiff(this.state,l,u,f),p())}),this.onJoin((l,u,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:f})}),this.onLeave((l,u,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,a,l){const u=this.cloneDeep(n),f=this.transformState(s),p={},g={};return this.map(u,(v,x)=>{f[v]||(g[v]=x)}),this.map(f,(v,x)=>{const b=u[v];if(b){const C=x.map(N=>N.presence_ref),L=b.map(N=>N.presence_ref),M=x.filter(N=>L.indexOf(N.presence_ref)<0),I=b.filter(N=>C.indexOf(N.presence_ref)<0);M.length>0&&(p[v]=M),I.length>0&&(g[v]=I)}else p[v]=x}),this.syncDiff(u,{joins:p,leaves:g},a,l)}static syncDiff(n,s,a,l){const{joins:u,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(u,(p,g)=>{var v;const x=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),x.length>0){const b=n[p].map(L=>L.presence_ref),C=x.filter(L=>b.indexOf(L.presence_ref)<0);n[p].unshift(...C)}a(p,x,g)}),this.map(f,(p,g)=>{let v=n[p];if(!v)return;const x=g.map(b=>b.presence_ref);v=v.filter(b=>x.indexOf(b.presence_ref)<0),n[p]=v,l(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(a=>s(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,a)=>{const l=n[a];return"metas"in l?s[a]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[a]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sf;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Sf||(Sf={}));var Zi;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Zi||(Zi={}));var Jr;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Jr||(Jr={}));class Au{constructor(n,s={config:{}},a){this.topic=n,this.params=s,this.socket=a,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new eu(this,vr.join,this.params,this.timeout),this.rejoinTimer=new rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Xi(this),this.broadcastEndpointURL=sh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var a,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,v=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(L=>L.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[Zi.PRESENCE]&&this.bindings[Zi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},C={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(L=>n?.(Jr.CHANNEL_ERROR,L)),this._onClose(()=>n?.(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:C},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:L})=>{var M;if(this.socket.setAuth(),L===void 0){n?.(Jr.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,N=(M=I?.length)!==null&&M!==void 0?M:0,J=[];for(let Z=0;Z<N;Z++){const F=I[Z],{filter:{event:Y,schema:ne,table:ae,filter:we}}=F,Ee=L&&L[Z];if(Ee&&Ee.event===Y&&Ee.schema===ne&&Ee.table===ae&&Ee.filter===we)J.push(Object.assign(Object.assign({},F),{id:Ee.id}));else{this.unsubscribe(),this.state=pt.errored,n?.(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,n&&n(Jr.SUBSCRIBED);return}}).receive("error",L=>{this.state=pt.errored,n?.(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(L).join(", ")||"error")))}).receive("timeout",()=>{n?.(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,a){return this.state===pt.joined&&n===Zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,a)}async send(n,s={}){var a,l;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:f}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new eu(this,vr.leave,{},n),a.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(n,s,a){const l=new AbortController,u=setTimeout(()=>l.abort(),a),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(u),f}_push(n,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new eu(this,n,s,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Cg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,a){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,a){var l,u;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:x}=vr;if(a&&[p,g,v,x].indexOf(f)>=0&&a!==this._joinRef())return;let C=this._onMessage(f,s,a);if(s&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(L=>{var M,I,N;return((M=L.filter)===null||M===void 0?void 0:M.event)==="*"||((N=(I=L.filter)===null||I===void 0?void 0:I.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===f}).map(L=>L.callback(C,a)):(u=this.bindings[f])===null||u===void 0||u.filter(L=>{var M,I,N,J,Z,F;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in L){const Y=L.id,ne=(M=L.filter)===null||M===void 0?void 0:M.event;return Y&&((I=s.ids)===null||I===void 0?void 0:I.includes(Y))&&(ne==="*"||ne?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const Y=(Z=(J=L?.filter)===null||J===void 0?void 0:J.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase();return Y==="*"||Y===((F=s?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return L.type.toLocaleLowerCase()===f}).map(L=>{if(typeof C=="object"&&"ids"in C){const M=C.data,{schema:I,table:N,commit_timestamp:J,type:Z,errors:F}=M;C=Object.assign(Object.assign({},{schema:I,table:N,commit_timestamp:J,eventType:Z,new:{},old:{},errors:F}),this._getPayloadRecords(M))}L.callback(C,a)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,a){const l=n.toLocaleLowerCase(),u={type:l,filter:s,callback:a};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(n,s){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===a&&Au.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const a in n)if(n[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(vr.close,{},n)}_onError(n){this._on(vr.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=kf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=kf(n.columns,n.old_record)),s}}const tu=()=>{},fo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$g=[1e3,2e3,5e3,1e4],Ig=1e4,Ug=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Mg{constructor(n,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pu,this.transport=null,this.heartbeatIntervalMs=fo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tu,this.ref=0,this.reconnectTimer=null,this.logger=tu,this.conn=null,this.sendBuffer=[],this.serializer=new Eg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let u;return l?u=l:typeof fetch>"u"?u=(...f)=>as(async()=>{const{default:p}=await Promise.resolve().then(()=>si);return{default:p}},void 0).then(({default:p})=>p(...f)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${mu.websocket}`,this.httpEndpoint=sh(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sg}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,a){this.logger(n,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Yi.connecting:return ns.Connecting;case Yi.open:return ns.Open;case Yi.closing:return ns.Closing;default:return ns.Closed}}isConnected(){return this.connectionState()===ns.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const a=`realtime:${n}`,l=this.getChannels().find(u=>u.topic===a);if(l)return l;{const u=new Au(`realtime:${n}`,s,this);return this.channels.push(u),u}}push(n){const{topic:s,event:a,payload:l,ref:u}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${a} (${u})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Ng,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},fo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:u,ref:f}=s,p=f?`(${f})`:"",g=u.status||"";this.log("receive",`${g} ${a} ${l} ${p}`.trim(),u),this.channels.filter(v=>v._isMember(a)).forEach(v=>v._trigger(l,u,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(vr.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const a=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${a}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const a=new Blob([Ug],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const l={access_token:s,version:jg};s&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(vr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new rh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,a,l,u,f,p,g,v,x;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:pu,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:fo.HEARTBEAT_INTERVAL,this.worker=(u=n?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:tu,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>$g[b-1]||Ig),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((b,C)=>C(JSON.stringify(b))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class $u extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function mt(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class Dg extends $u{constructor(n,s,a){super(n),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vu extends $u{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var zg=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const ih=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>as(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},Fg=()=>zg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield as(()=>Promise.resolve().then(()=>si),void 0)).Response:Response}),yu=o=>{if(Array.isArray(o))return o.map(s=>yu(s));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([s,a])=>{const l=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[l]=yu(a)}),n},Bg=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var os=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const ru=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),qg=(o,n,s)=>os(void 0,void 0,void 0,function*(){const a=yield Fg();o instanceof a&&!s?.noResolveJson?o.json().then(l=>{const u=o.status||500,f=l?.statusCode||u+"";n(new Dg(ru(l),u,f))}).catch(l=>{n(new vu(ru(l),l))}):n(new vu(ru(o),o))}),Wg=(o,n,s,a)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"||!a?l:(Bg(a)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(a)):l.body=a,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function na(o,n,s,a,l,u){return os(this,void 0,void 0,function*(){return new Promise((f,p)=>{o(s,Wg(n,a,l,u)).then(g=>{if(!g.ok)throw g;return a?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>qg(g,p,a))})})}function vo(o,n,s,a){return os(this,void 0,void 0,function*(){return na(o,"GET",n,s,a)})}function Pr(o,n,s,a,l){return os(this,void 0,void 0,function*(){return na(o,"POST",n,a,l,s)})}function xu(o,n,s,a,l){return os(this,void 0,void 0,function*(){return na(o,"PUT",n,a,l,s)})}function Vg(o,n,s,a){return os(this,void 0,void 0,function*(){return na(o,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function ah(o,n,s,a,l){return os(this,void 0,void 0,function*(){return na(o,"DELETE",n,a,l,s)})}var Rt=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const Hg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gg{constructor(n,s={},a,l){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=a,this.fetch=ih(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,a,l){return Rt(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},Nf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",a)):typeof FormData<"u"&&a instanceof FormData?(u=a,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=a,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const v=this._removeEmptyFolders(s),x=this._getFinalPath(v),b=yield(n=="PUT"?xu:Pr)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(mt(u))return{data:null,error:u};throw u}})}upload(n,s,a){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,a)})}uploadToSignedUrl(n,s,a,l){return Rt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:Nf.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",v.cacheControl)):(g=a,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType);const b=yield xu(this.fetch,p.toString(),g,{headers:x});return{data:{path:u,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(mt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return Rt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const u=yield Pr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),f=new URL(this.url+u.url),p=f.searchParams.get("token");if(!p)throw new $u("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:p},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}update(n,s,a){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,a)})}move(n,s,a){return Rt(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}copy(n,s,a){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,a){return Rt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),u=yield Pr(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const f=a?.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,a){return Rt(this,void 0,void 0,function*(){try{const l=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}download(n,s){return Rt(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(s?.transform||{}),f=u?`?${u}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield vo(this.fetch,`${this.url}/${l}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(mt(p))return{data:null,error:p};throw p}})}info(n){return Rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const a=yield vo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:yu(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}exists(n){return Rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Vg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a)&&a instanceof vu){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(n,s){const a=this._getFinalPath(n),l=[],u=s?.download?`download=${s.download===!0?"":s.download}`:"";u!==""&&l.push(u);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&l.push(g);let v=l.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${v}`)}}}remove(n){return Rt(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}list(n,s,a){return Rt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Hg),s),{prefix:n||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}listV2(n,s){return Rt(this,void 0,void 0,function*(){try{const a=Object.assign({},n);return{data:yield Pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Kg="2.12.1",Jg={"X-Client-Info":`storage-js/${Kg}`};var Ks=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class Qg{constructor(n,s={},a,l){this.shouldThrowOnError=!1;const u=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},Jg),s),this.fetch=ih(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ks(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}getBucket(n){return Ks(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Ks(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}updateBucket(n,s){return Ks(this,void 0,void 0,function*(){try{return{data:yield xu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}emptyBucket(n){return Ks(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Ks(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}}class Yg extends Qg{constructor(n,s={},a,l){super(n,s,a,l)}from(n){return new Gg(this.url,this.headers,n,this.fetch)}}const Xg="2.57.4";let Qi="";typeof Deno<"u"?Qi="deno":typeof document<"u"?Qi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qi="react-native":Qi="node";const Zg={"X-Client-Info":`supabase-js-${Qi}/${Xg}`},ev={headers:Zg},tv={schema:"public"},rv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nv={};var sv=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const iv=o=>{let n;return o?n=o:typeof fetch>"u"?n=Qf:n=fetch,(...s)=>n(...s)},av=()=>typeof Headers>"u"?Yf:Headers,ov=(o,n,s)=>{const a=iv(s),l=av();return(u,f)=>sv(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:o;let v=new l(f?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),a(u,Object.assign(Object.assign({},f),{headers:v}))})};var lv=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};function uv(o){return o.endsWith("/")?o:o+"/"}function cv(o,n){var s,a;const{db:l,auth:u,realtime:f,global:p}=o,{db:g,auth:v,realtime:x,global:b}=n,C={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},v),u),realtime:Object.assign(Object.assign({},x),f),storage:{},global:Object.assign(Object.assign(Object.assign({},b),p),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>lv(this,void 0,void 0,function*(){return""})};return o.accessToken?C.accessToken=o.accessToken:delete C.accessToken,C}function dv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(uv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oh="2.71.1",ei=30*1e3,wu=3,nu=wu*ei,fv="http://localhost:9999",hv="supabase.auth.token",pv={"X-Client-Info":`gotrue-js/${oh}`},_u="X-Supabase-Api-Version",lh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gv=600*1e3;class Iu extends Error{constructor(n,s,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function Ce(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class vv extends Iu{constructor(n,s,a){super(n,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function yv(o){return Ce(o)&&o.name==="AuthApiError"}class uh extends Iu{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Tn extends Iu{constructor(n,s,a,l){super(n,a,l),this.name=s,this.status=a}}class jn extends Tn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xv(o){return Ce(o)&&o.name==="AuthSessionMissingError"}class ho extends Tn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class po extends Tn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class mo extends Tn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wv(o){return Ce(o)&&o.name==="AuthImplicitGrantRedirectError"}class Cf extends Tn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bu extends Tn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function su(o){return Ce(o)&&o.name==="AuthRetryableFetchError"}class Ef extends Tn{constructor(n,s,a){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class ku extends Tn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tf=` 	
\r=`.split(""),_v=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<Tf.length;n+=1)o[Tf[n].charCodeAt(0)]=-2;for(let n=0;n<yo.length;n+=1)o[yo[n].charCodeAt(0)]=n;return o})();function Pf(o,n,s){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(yo[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(yo[a]),n.queuedBits-=6}}function ch(o,n,s){const a=_v[o];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Of(o){const n=[],s=f=>{n.push(String.fromCodePoint(f))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=f=>{jv(f,a,s)};for(let f=0;f<o.length;f+=1)ch(o.charCodeAt(f),l,u);return n.join("")}function bv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function kv(o,n){for(let s=0;s<o.length;s+=1){let a=o.charCodeAt(s);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(o.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}bv(a,n)}}function jv(o,n,s){if(n.utf8seq===0){if(o<=127){s(o);return}for(let a=1;a<6;a+=1)if((o>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Sv(o){const n=[],s={queue:0,queuedBits:0},a=l=>{n.push(l)};for(let l=0;l<o.length;l+=1)ch(o.charCodeAt(l),s,a);return new Uint8Array(n)}function Nv(o){const n=[];return kv(o,s=>n.push(s)),new Uint8Array(n)}function Cv(o){const n=[],s={queue:0,queuedBits:0},a=l=>{n.push(l)};return o.forEach(l=>Pf(l,s,a)),Pf(null,s,a),n.join("")}function Ev(o){return Math.round(Date.now()/1e3)+o}function Tv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const gr=()=>typeof window<"u"&&typeof document<"u",es={tested:!1,writable:!1},dh=()=>{if(!gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(es.tested)return es.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),es.tested=!0,es.writable=!0}catch{es.tested=!0,es.writable=!1}return es.writable};function Pv(o){const n={},s=new URL(o);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,u)=>{n[u]=l})}catch{}return s.searchParams.forEach((a,l)=>{n[l]=a}),n}const fh=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>as(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},Ov=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",ti=async(o,n,s)=>{await o.setItem(n,JSON.stringify(s))},ts=async(o,n)=>{const s=await o.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},kn=async(o,n)=>{await o.removeItem(n)};class bo{constructor(){this.promise=new bo.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}bo.promiseConstructor=Promise;function iu(o){const n=o.split(".");if(n.length!==3)throw new ku("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!mv.test(n[a]))throw new ku("JWT not in base64url format");return{header:JSON.parse(Of(n[0])),payload:JSON.parse(Of(n[1])),signature:Sv(n[2]),raw:{header:n[0],payload:n[1]}}}async function Rv(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Lv(o,n){return new Promise((a,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await o(u);if(!n(u,null,f)){a(f);return}}catch(f){if(!n(u,f)){l(f);return}}})()})}function Av(o){return("0"+o.toString(16)).substr(-2)}function $v(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let l="";for(let u=0;u<56;u++)l+=s.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(n),Array.from(n,Av).join("")}async function Iv(o){const s=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(a);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function Uv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const s=await Iv(o);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(o,n,s=!1){const a=$v();let l=a;s&&(l+="/PASSWORD_RECOVERY"),await ti(o,`${n}-code-verifier`,l);const u=await Uv(a);return[u,a===u?"plain":"s256"]}const Mv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dv(o){const n=o.headers.get(_u);if(!n||!n.match(Mv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function zv(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function Fv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qs(o){if(!Bv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function au(){const o={};return new Proxy(o,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rf(o){return JSON.parse(JSON.stringify(o))}var qv=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(s[a[l]]=o[a[l]]);return s};const rs=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Wv=[502,503,504];async function Lf(o){var n;if(!Ov(o))throw new bu(rs(o),0);if(Wv.includes(o.status))throw new bu(rs(o),o.status);let s;try{s=await o.json()}catch(u){throw new uh(rs(u),u)}let a;const l=Dv(o);if(l&&l.getTime()>=lh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Ef(rs(s),o.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new jn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new Ef(rs(s),o.status,s.weak_password.reasons);throw new vv(rs(s),o.status||500,a)}const Vv=(o,n,s,a)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),s))};async function Re(o,n,s,a){var l;const u=Object.assign({},a?.headers);u[_u]||(u[_u]=lh["2024-01-01"].name),a?.jwt&&(u.Authorization=`Bearer ${a.jwt}`);const f=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(f.redirect_to=a.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Hv(o,n,s+p,{headers:u,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(g):{data:Object.assign({},g),error:null}}async function Hv(o,n,s,a,l,u){const f=Vv(n,a,l,u);let p;try{p=await o(s,Object.assign({},f))}catch(g){throw console.error(g),new bu(rs(g),0)}if(p.ok||await Lf(p),a?.noResolveJson)return p;try{return await p.json()}catch(g){await Lf(g)}}function Kr(o){var n;let s=null;Qv(o)&&(s=Object.assign({},o),o.expires_at||(s.expires_at=Ev(o.expires_in)));const a=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:s,user:a},error:null}}function Af(o){const n=Kr(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Sn(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function Gv(o){return{data:o,error:null}}function Kv(o){const{action_link:n,email_otp:s,hashed_token:a,redirect_to:l,verification_type:u}=o,f=qv(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:a,redirect_to:l,verification_type:u},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Jv(o){return o}function Qv(o){return o.access_token&&o.refresh_token&&o.expires_in}const ou=["global","local","others"];var Yv=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(s[a[l]]=o[a[l]]);return s};class Xv{constructor({url:n="",headers:s={},fetch:a}){this.url=n,this.headers=s,this.fetch=fh(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=ou[0]){if(ou.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ou.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,s={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:s}=n,a=Yv(n,["options"]),l=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Kv,redirectTo:s?.redirectTo})}catch(s){if(Ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Sn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,a,l,u,f,p,g;try{const v={nextPage:null,lastPage:0,total:0},x=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(u=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Jv});if(x.error)throw x.error;const b=await x.json(),C=(f=x.headers.get("x-total-count"))!==null&&f!==void 0?f:0,L=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return L.length>0&&(L.forEach(M=>{const I=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(M.split(";")[1].split("=")[1]);v[`${N}Page`]=I}),v.total=parseInt(C)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(Ce(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Qs(n);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Sn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Qs(n);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,s=!1){Qs(n);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Qs(n.userId);try{const{data:s,error:a}=await Re(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:a}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Qs(n.userId),Qs(n.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}}function $f(o={}){return{getItem:n=>o[n]||null,setItem:(n,s)=>{o[n]=s},removeItem:n=>{delete o[n]}}}function Zv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ys={debug:!!(globalThis&&dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class e0 extends hh{}async function t0(o,n,s){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,l.name);try{return await s()}finally{Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,l.name)}}else{if(n===0)throw Ys.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new e0(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Ys.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Zv();const r0={url:fv,storageKey:hv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function If(o,n,s){return await s()}const Xs={};class ra{constructor(n){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ra.nextInstanceID,ra.nextInstanceID+=1,this.instanceID>0&&gr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},r0),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Xv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=fh(l.fetch),this.lock=l.lock||If,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:gr()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=t0:this.lock=If,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:dh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$f(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=$f(this.memoryStorage)),gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Xs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Xs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oh}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=Pv(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),gr()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:u}=await this._getSessionFromURL(s,a);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),wv(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ce(s)?{error:s}:{error:new uh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,a,l;try{const u=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Kr}),{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(Ce(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var s,a,l;try{let u;if("email"in n){const{email:x,password:b,options:C}=n;let L=null,M=null;this.flowType==="pkce"&&([L,M]=await Js(this.storage,this.storageKey)),u=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C?.emailRedirectTo,body:{email:x,password:b,data:(s=C?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:L,code_challenge_method:M},xform:Kr})}else if("phone"in n){const{phone:x,password:b,options:C}=n;u=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(a=C?.data)!==null&&a!==void 0?a:{},channel:(l=C?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:C?.captchaToken}},xform:Kr})}else throw new po("You must provide either an email or phone number and a password");const{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,v=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(u){if(Ce(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let s;if("email"in n){const{email:u,password:f,options:p}=n;s=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Af})}else if("phone"in n){const{phone:u,password:f,options:p}=n;s=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Af})}else throw new po("You must provide either an email or phone number and a password");const{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new ho}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,a,l,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,a,l,u,f,p,g,v,x,b,C,L;let M,I;if("message"in n)M=n.message,I=n.signature;else{const{chain:N,wallet:J,statement:Z,options:F}=n;let Y;if(gr())if(typeof J=="object")Y=J;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))Y=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=J}const ne=new URL((s=F?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Y&&Y.signIn){const ae=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F?.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),Z?{statement:Z}:null));let we;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")we=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)we=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in we&&"signature"in we&&(typeof we.signedMessage=="string"||we.signedMessage instanceof Uint8Array)&&we.signature instanceof Uint8Array)M=typeof we.signedMessage=="string"?we.signedMessage:new TextDecoder().decode(we.signedMessage),I=we.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${ne.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...Z?["",Z,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(l=(a=F?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=F?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((f=F?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((p=F?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((g=F?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((v=F?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((b=(x=F?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...F.signInWithSolana.resources.map(we=>`- ${we}`)]:[]].join(`
`);const ae=await Y.signMessage(new TextEncoder().encode(M),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=ae}}try{const{data:N,error:J}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:Cv(I)},!((C=n.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(L=n.options)===null||L===void 0?void 0:L.captchaToken}}:null),xform:Kr});if(J)throw J;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new ho}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:J})}catch(N){if(Ce(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(n){const s=await ts(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(s??"").split("/");try{const{data:u,error:f}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:Kr});if(await kn(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new ho}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:f})}catch(u){if(Ce(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:s,provider:a,token:l,access_token:u,nonce:f}=n,p=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Kr}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new ho}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,a,l,u,f;try{if("email"in n){const{email:p,options:g}=n;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Js(this.storage,this.storageKey));const{error:b}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(a=g?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:x}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(u=g?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:x}}throw new po("You must provide either an email or phone number.")}catch(p){if(Ce(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,a;try{let l,u;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,u=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:f,error:p}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:Kr});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,v=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,a,l;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await Js(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Gv})}catch(u){if(Ce(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)throw a;if(!s)throw new jn;const{error:l}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:a,type:l,options:u}=n,{error:f}=await Re(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:a,type:l,options:u}=n,{data:f,error:p}=await Re(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new po("You must provide either an email or phone number and a type")}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<nu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const f=await ts(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=au()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,v,x)=>(!f&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,v,x))})}return{data:{session:n},error:null}}const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Sn}):await this._useSession(async s=>{var a,l,u;const{data:f,error:p}=s;if(p)throw p;return!(!((a=f.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Sn})})}catch(s){if(Ce(s))return xv(s)&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async a=>{const{data:l,error:u}=a;if(u)throw u;if(!l.session)throw new jn;const f=l.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Js(this.storage,this.storageKey));const{data:v,error:x}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:Sn});if(x)throw x;return f.user=v.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new jn;const s=Date.now()/1e3;let a=s,l=!0,u=null;const{payload:f}=iu(n.access_token);if(f.exp&&(a=f.exp,l=a<=s),l){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(s){if(Ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var a;if(!n){const{data:f,error:p}=s;if(p)throw p;n=(a=f.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new jn;const{session:l,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!gr())throw new mo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new mo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Cf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Cf("No code detected.");const{data:Z,error:F}=await this._exchangeCodeForSession(n.code);if(F)throw F;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:Z.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:u,refresh_token:f,expires_in:p,expires_at:g,token_type:v}=n;if(!u||!p||!f||!v)throw new mo("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(p);let C=x+b;g&&(C=parseInt(g));const L=C-x;L*1e3<=ei&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${L}s, should have been closer to ${b}s`);const M=C-b;x-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,C,x):x-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,C,x);const{data:I,error:N}=await this._getUser(u);if(N)throw N;const J={provider_token:a,provider_refresh_token:l,access_token:u,expires_in:b,expires_at:C,refresh_token:f,token_type:v,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:J,redirectType:n.type},error:null}}catch(a){if(Ce(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await ts(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:l,error:u}=s;if(u)return{error:u};const f=(a=l.session)===null||a===void 0?void 0:a.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(yv(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=Tv(),a={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async s=>{var a,l;try{const{data:{session:u},error:f}=s;if(f)throw f;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,s={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Js(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(Ce(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:a,error:l}=await this._useSession(async u=>{var f,p,g,v,x;const{data:b,error:C}=u;if(C)throw C;const L=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",L,{headers:this.headers,jwt:(x=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return gr()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:n.provider,url:a?.url},error:null}}catch(a){if(Ce(a))return{data:{provider:n.provider,url:null},error:a};throw a}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var a,l;const{data:u,error:f}=s;if(f)throw f;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Lv(async l=>(l>0&&await Rv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Kr})),(l,u)=>{const f=200*Math.pow(2,l);return u&&su(u)&&Date.now()+f-a<ei})}catch(a){if(this._debug(s,"error",a),Ce(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",a),gr()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await ts(this.storage,this.storageKey);if(l&&this.userStorage){let f=await ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await ti(this.userStorage,this.storageKey+"-user",f)),l.user=(n=f?.user)!==null&&n!==void 0?n:au()}else if(l&&!l.user&&!l.user){const f=await ts(this.storage,this.storageKey+"-user");f&&f?.user?(l.user=f.user,await kn(this.storage,this.storageKey+"-user"),await ti(this.storage,this.storageKey,l)):l.user=au()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const u=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<nu;if(this._debug(a,`session has${u?"":" not"} expired with margin of ${nu}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),su(f)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(l.access_token);!p&&f?.user?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(a,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var s,a;if(!n)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new bo;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new jn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),Ce(u)){const f={session:null,error:u};return su(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,a=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:s});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){u.push(g)}});if(await Promise.all(f),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await ti(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const u=Rf(l);await ti(this.storage,this.storageKey,u)}else{const l=Rf(s);await ti(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await kn(this.storage,this.storageKey),await kn(this.storage,this.storageKey+"-code-verifier"),await kn(this.storage,this.storageKey+"-user"),this.userStorage&&await kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ei);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-n)/ei);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${ei}ms, refresh threshold is ${wu} ticks`),l<=wu&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof hh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,a){const l=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[u,f]=await Js(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(p.toString())}if(a?.queryParams){const u=new URLSearchParams(a.queryParams);l.push(u.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var a;const{data:l,error:u}=s;return u?{data:null,error:u}:await Re(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var a,l;const{data:u,error:f}=s;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:v}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:u}=s;if(u)return{data:null,error:u};const{data:f,error:p}=await Re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:u}=s;return u?{data:null,error:u}:await Re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:a}=await this._challenge({factorId:n.factorId});return a?{data:null,error:a}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=n?.factors||[],l=a.filter(f=>f.factor_type==="totp"&&f.status==="verified"),u=a.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:a,totp:l,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,a;const{data:{session:l},error:u}=n;if(u)return{data:null,error:u};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=iu(l.access_token);let p=null;f.aal&&(p=f.aal);let g=p;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const x=f.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,s={keys:[]}){let a=s.keys.find(p=>p.kid===n);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+gv>l)return a;const{data:u,error:f}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,a=u.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,s={}){try{let a=n;if(!a){const{data:L,error:M}=await this.getSession();if(M||!L.session)return{data:null,error:M};a=L.session.access_token}const{header:l,payload:u,signature:f,raw:{header:p,payload:g}}=iu(a);s?.allowExpired||zv(u.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:L}=await this.getUser(a);if(L)throw L;return{data:{claims:u,header:l,signature:f},error:null}}const x=Fv(l.alg),b=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,f,Nv(`${p}.${g}`)))throw new ku("Invalid JWT signature");return{data:{claims:u,header:l,signature:f},error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}}ra.nextInstanceID=0;const n0=ra;class s0 extends n0{constructor(n){super(n)}}var i0=function(o,n,s,a){function l(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function p(x){try{v(a.next(x))}catch(b){f(b)}}function g(x){try{v(a.throw(x))}catch(b){f(b)}}function v(x){x.done?u(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class a0{constructor(n,s,a){var l,u,f;this.supabaseUrl=n,this.supabaseKey=s;const p=dv(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:tv,realtime:nv,auth:Object.assign(Object.assign({},rv),{storageKey:g}),global:ev},x=cv(a??{},v);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=x.auth)!==null&&f!==void 0?f:{},this.headers,x.global.fetch),this.fetch=ov(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new _g(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Yg(this.storageUrl.href,this.headers,this.fetch,a?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new dg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},a={}){return this.rest.rpc(n,s,a)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return i0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:l,userStorage:u,storageKey:f,flowType:p,lock:g,debug:v},x,b){const C={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s0({url:this.authUrl.href,headers:Object.assign(Object.assign({},C),x),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:l,userStorage:u,flowType:p,lock:g,debug:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(L=>L.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Mg(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(n,s,a){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const o0=(o,n,s)=>new a0(o,n,s);function l0(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}l0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const A=o0("https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY"),ph=y.createContext(null);function u0(){const o=y.useContext(ph);if(!o)throw new Error("useToast must be used within <ToastProvider>");return o}function c0({children:o}){const[n,s]=y.useState([]),a=y.useCallback(f=>{const p=Date.now()+Math.random(),g={id:p,timeout:3e3,...f};s(v=>[...v,g]),window.setTimeout(()=>s(v=>v.filter(x=>x.id!==p)),g.timeout)},[]),l=y.useMemo(()=>({push:a,success:(f,p)=>a({kind:"success",text:f,timeout:p}),error:(f,p)=>a({kind:"error",text:f,timeout:p}),info:(f,p)=>a({kind:"info",text:f,timeout:p})}),[a]),u=c.jsx("div",{className:"pointer-events-none fixed inset-0 z-[9999] flex items-start justify-end p-4",children:c.jsx("div",{className:"mt-10 w-full max-w-sm space-y-2",children:n.map(f=>c.jsx("div",{className:["pointer-events-auto rounded-md border px-3 py-2 text-sm shadow",f.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":f.kind==="error"?"border-red-200 bg-red-50 text-red-700":"border-neutral-200 bg-white text-neutral-800"].join(" "),children:f.text},f.id))})});return c.jsxs(ph.Provider,{value:l,children:[o,Zp.createPortal(u,document.body)]})}const d0=["All","Games","Study","Outdoors"],ju=[{id:"hokm",name:"Hokm",blurb:"Classic Persian card game",tag:"Games",online:120,groups:8,image:"🎴"},{id:"takhtenard",name:"Takhte Nard",blurb:"Traditional backgammon",tag:"Games",online:95,groups:6,image:"🎲"},{id:"mafia",name:"Mafia",blurb:"Social deduction party game",tag:"Games",online:210,groups:12,image:"🕵️"},{id:"mono",name:"Monopoly",blurb:"Buy, sell, and trade properties",tag:"Games",online:180,groups:10,image:"💰"},{id:"uno",name:"Uno",blurb:"Colorful card matching fun",tag:"Games",online:250,groups:15,image:"🃏"},{id:"chess",name:"Chess",blurb:"Classic strategy board game",tag:"Games",online:130,groups:9,image:"♟️"},{id:"mathematics",name:"Mathematics",blurb:"Study numbers and problem solving",tag:"Study",online:75,groups:5,image:"📐"},{id:"biology",name:"Biology",blurb:"Explore life sciences",tag:"Study",online:60,groups:4,image:"🧬"},{id:"chemistry",name:"Chemistry",blurb:"Learn about chemicals and reactions",tag:"Study",online:50,groups:3,image:"⚗️"},{id:"history",name:"History",blurb:"Discover past events and cultures",tag:"Study",online:45,groups:3,image:"📜"},{id:"dreisam",name:"Mountain Dreisam Hike",blurb:"Join a hike up Dreisam mountain",tag:"Outdoors",online:40,groups:3,image:"⛰️"},{id:"visit",name:"Visiting",blurb:"Cultural and city visits",tag:"Outdoors",online:55,groups:4,image:"🏛️"},{id:"camp",name:"Camping",blurb:"Overnight outdoor camping trips",tag:"Outdoors",online:35,groups:2,image:"🏕️"},{id:"kayak",name:"Kayaking",blurb:"Water adventures on rivers and lakes",tag:"Outdoors",online:30,groups:2,image:"🛶"}];Object.fromEntries(ju.map(o=>[o.id.toLowerCase(),o]));function f0(){const[o,n]=ig(),s=o.get("id"),a=o.get("code"),[l,u]=y.useState(o.get("q")??""),[f,p]=y.useState(o.get("category")??"All"),[g,v]=y.useState([]),[x,b]=y.useState(!1),C=y.useMemo(()=>{const z=(l||"").trim();return/^[A-Za-z0-9]{6,12}$/.test(z)?z.toUpperCase():null},[l]),L=12,[M,I]=y.useState(0),[N,J]=y.useState(!1),[Z,F]=y.useState(!1),[Y,ne]=y.useState(null),[ae,we]=y.useState({}),[Ee,et]=y.useState({}),[Fe,qe]=y.useState(0),[We,Be]=y.useState({}),[G,he]=y.useState(!1),[pe,re]=y.useState(""),[U,$]=y.useState(""),[R,w]=y.useState(!1),[T,q]=y.useState(null);y.useEffect(()=>{const z=new URLSearchParams(o);f&&f!=="All"?z.set("category",f):z.delete("category"),l?z.set("q",l):z.delete("q"),s?z.set("id",s):z.delete("id"),a?z.set("code",a):z.delete("code"),!a&&C?z.set("code",C):C||z.delete("code"),z.toString()!==o.toString()&&n(z,{replace:!0})},[l,f,s,a,C]),y.useEffect(()=>{let z=!0;async function ge(_e){try{if(a||C){const Ue=a||C,{data:Qe,error:bt}=await A.from("groups").select("id, title, description, city, category, game, created_at, code").ilike("code",Ue).single();if(bt)throw bt;if(!z)return;v(Qe?[Qe]:[]),J(!1),ne(null);return}if(s){const{data:Ue,error:Qe}=await A.from("groups").select("id, title, description, city, category, game, created_at, code").eq("id",s).single();if(Qe)throw Qe;if(!z)return;v(Ue?[Ue]:[]),J(!1),ne(null);return}_e&&(b(!0),v([]),I(0),J(!1),ne(null));let Se=A.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(f&&f!=="All"){const Ue=f.toLowerCase(),Qe=We[Ue]??[];if(Qe.length){const bt=Qe.map(Xt=>`"${Xt}"`).join(",");Se=Se.or(`game.in.(${bt}),category.eq.${Ue}`)}else Se=Se.eq("category",Ue)}if(l.trim()){const Ue=l.trim();Se=Se.or(`title.ilike.%${Ue}%,game.ilike.%${Ue}%`)}const V=0,se=L-1,{data:ce,error:je}=await Se.range(V,se);if(je)throw je;if(!z)return;const De=ce??[];v(De),J(De.length===L),ne(null)}catch(Se){if(!z)return;ne(Se?.message??"Failed to load groups")}finally{if(!z)return;b(!1),F(!1)}}return ge(!0),()=>{z=!1}},[f,l,We,s,a,C]);async function X(){if(!(Z||x||!N)&&!s&&!a&&!C){F(!0);try{let z=A.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(f&&f!=="All"){const ce=f.toLowerCase(),je=We[ce]??[];if(je.length){const De=je.map(Ue=>`"${Ue}"`).join(",");z=z.or(`game.in.(${De}),category.eq.${ce}`)}else z=z.eq("category",ce)}if(l.trim()){const ce=l.trim();z=z.or(`title.ilike.%${ce}%,game.ilike.%${ce}%`)}const ge=(M+1)*L,_e=ge+L-1,{data:Se,error:V}=await z.range(ge,_e);if(V)throw V;const se=Se??[];v(ce=>[...ce,...se]),I(ce=>ce+1),J(se.length===L)}catch(z){ne(z?.message??"Failed to load groups")}finally{F(!1)}}}y.useEffect(()=>{let z=!0;return(async()=>{const{data:ge,error:_e}=await A.from("allowed_games").select("id, category").eq("is_active",!0);if(!z)return;if(_e){Be({});return}const Se={};(ge??[]).forEach(V=>{const se=String(V.category||"").toLowerCase(),ce=String(V.id||"").toLowerCase();!se||!ce||(Se[se]||(Se[se]=[]),Se[se].push(ce))}),Be(Se)})(),()=>{z=!1}},[]),y.useEffect(()=>{let z=!0;return(async()=>{const{data:ge}=await A.from("groups").select("id, game");if(!z)return;const _e={};(ge??[]).forEach(je=>{const De=(je.game||"").toLowerCase();De&&(_e[De]=(_e[De]||0)+1)}),we(_e);const{data:Se}=await A.from("group_members").select("user_id, groups(game)");if(!z)return;const V={},se=new Set;(Se??[]).forEach(je=>{const De=je?.groups?.game?String(je.groups.game).toLowerCase():"",Ue=je?.user_id?String(je.user_id):"";!De||!Ue||(se.add(Ue),V[De]||(V[De]=new Set),V[De].add(Ue))});const ce={};Object.entries(V).forEach(([je,De])=>{ce[je]=De.size}),et(ce),qe(se.size)})(),()=>{z=!1}},[]);const le=y.useMemo(()=>{const z=f==="All"?ju:ju.filter(_e=>_e.tag===f);return l.trim()?z.filter(_e=>_e.name.toLowerCase().includes(l.toLowerCase())):z},[l,f]),me=Fe;return c.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:[c.jsxs("div",{className:"mb-8 flex items-start justify-between gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-neutral-900",children:"Browse Games"}),c.jsx("p",{className:"mt-2 text-neutral-600",children:"Discover games and find players to join"}),c.jsxs("div",{className:"mt-5 flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{value:l,onChange:z=>u(z.target.value),placeholder:"Search games…",className:"w-[420px] max-w-full rounded-xl border px-3 py-2 pl-9 text-sm outline-none ring-0 focus:border-emerald-500"}),c.jsx("span",{className:"pointer-events-none absolute left-3 top-2.5 text-neutral-400",children:"🔎"})]}),c.jsx(Ve,{to:"/groups",className:"rounded-md border border-black/10 bg-white px-4 py-2 text-sm hover:bg-black/[0.04]",children:"My Groups"})]}),c.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:d0.map(z=>c.jsx("button",{onClick:()=>p(z),className:`rounded-lg border px-3 py-1.5 text-sm ${z===f?"bg-emerald-600 text-white border-emerald-600":"bg-white text-neutral-700 hover:bg-neutral-50"}`,children:z},z))})]}),c.jsxs("div",{className:"shrink-0 text-right",children:[c.jsx("div",{className:"text-3xl font-semibold text-emerald-700",children:me.toLocaleString()}),c.jsx("div",{className:"text-sm text-neutral-500",children:"Players Online"}),c.jsx("button",{onClick:()=>{he(!0),q(null)},className:"mt-3 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Request Category"})]})]}),c.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:le.map(z=>c.jsx(h0,{game:z,groupCount:ae[z.id]??0,memberCount:Ee[z.id]??0},z.id))}),c.jsxs("div",{className:"mt-10",children:[c.jsxs("div",{className:"flex items-baseline justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold",children:a||C?"Group by Code":s?"Group by ID":f!=="All"?`Groups in ${f}`:l?`Groups matching “${l}”`:"Latest Groups"}),(a||C||s?!1:f!=="All"||l)&&c.jsx("button",{onClick:()=>{p("All"),u("")},className:"text-sm text-neutral-600 hover:text-neutral-800",children:"Clear filter"})]}),c.jsx("div",{className:"mt-4 rounded-xl border border-black/10 bg-white",children:Y?c.jsx("div",{className:"p-6 text-red-700",children:Y}):x&&g.length===0?c.jsx("div",{className:"p-6 text-neutral-500",children:"Loading…"}):g.length===0?c.jsx("div",{className:"p-6 text-neutral-500",children:"No groups found."}):c.jsxs(c.Fragment,{children:[c.jsx("ul",{children:g.map(z=>{const ge=z?.id??z?.group_id??z?.group?.id??z?.groups?.id;return ge?c.jsx("li",{className:"border-t border-black/5 px-6 py-4 first:border-none",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-neutral-900",children:z.title}),c.jsx("div",{className:"text-sm text-neutral-600",children:z.description}),c.jsxs("div",{className:"text-xs text-neutral-400",children:[z.city&&c.jsxs("span",{children:[z.city," · "]}),z.category&&c.jsx("span",{children:z.category}),z.code&&c.jsxs("span",{className:"ml-2 rounded-full bg-neutral-100 px-1.5 py-0.5 text-[10px] font-medium text-neutral-600",children:["Code: ",String(z.code).toUpperCase()]})]})]}),c.jsx(Ve,{to:`/group/${ge}`,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"View"})]})},ge):null})}),N&&c.jsx("div",{className:"border-t border-black/5 p-4 text-center",children:c.jsx("button",{onClick:X,className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] disabled:opacity-60",disabled:Z,children:Z?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):c.jsx(c.Fragment,{children:"Load more"})})})]})})]}),G&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-xl",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Request new category"}),c.jsx("button",{onClick:()=>he(!1),className:"rounded-md px-2 py-1 text-sm text-neutral-600 hover:bg-neutral-100",children:"✕"})]}),c.jsxs("form",{className:"mt-4 space-y-3",onSubmit:async z=>{z.preventDefault(),w(!0),q(null);const{data:ge,error:_e}=await A.auth.getUser();if(_e||!ge?.user){q("Sign in required."),w(!1);return}const Se={name:pe.trim().toLowerCase(),note:U.trim()||null,requested_by:ge.user.id},{error:V}=await A.from("category_requests").insert(Se);V?q(V.message):(q("Request sent."),re(""),$("")),w(!1)},children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Category name"}),c.jsx("input",{value:pe,onChange:z=>re(z.target.value),placeholder:"e.g., Tournaments",required:!0,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Note (optional)"}),c.jsx("textarea",{value:U,onChange:z=>$(z.target.value),placeholder:"Why should this category be added?",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",rows:3})]}),T&&c.jsx("div",{className:"text-sm text-neutral-600",children:T}),c.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[c.jsx("button",{type:"button",onClick:()=>he(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:R||!pe.trim(),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-60",children:R?"Sending…":"Send request"})]})]})]})})]})}function h0({game:o,groupCount:n,memberCount:s}){return c.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-neutral-100 text-neutral-400 text-2xl",children:o.image}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-semibold text-neutral-900",children:o.name}),c.jsx("span",{className:"rounded-md bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-700",children:"Trending"})]}),c.jsx("p",{className:"text-sm text-neutral-600",children:o.blurb})]})]}),c.jsx("span",{className:"rounded-md border px-2 py-0.5 text-[11px] text-neutral-600",children:o.tag})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-neutral-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-emerald-600",children:"👥"}),c.jsxs("span",{children:[c.jsx("span",{className:"font-medium text-neutral-900",children:s.toLocaleString()})," online"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:"👤"}),c.jsxs("span",{children:[c.jsx("span",{className:"font-medium text-neutral-900",children:n})," active groups"]})]})]}),c.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[c.jsx(Ve,{to:`/groups/game/${encodeURIComponent(o.id)}`,className:"inline-flex flex-1 items-center justify-center rounded-lg bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700",children:"Find Groups"}),c.jsx("button",{className:"rounded-lg border px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50",onClick:()=>alert("Quick Match coming soon"),children:"Quick Match"})]})]})}function p0(){const o=is(),n="Games",s="",[a,l]=y.useState([]),[u,f]=y.useState([]),[p,g]=y.useState(!0),[v,x]=y.useState(""),[b,C]=y.useState([]),[L,M]=y.useState(!0),[I,N]=y.useState([]),[J,Z]=y.useState("");y.useMemo(()=>new Set(b.map(V=>V.id)),[b]);const F=y.useMemo(()=>{const V=J.trim().toLowerCase();return V?b.filter(se=>(se.display_name||"").toLowerCase().includes(V)||(se.id||"").toLowerCase().includes(V)):b},[b,J]);async function Y(V){M(!0);try{const[se,ce]=await Promise.all([A.from("friends").select("friend_id").eq("user_id",V).eq("status","accepted"),A.from("friends").select("user_id").eq("friend_id",V).eq("status","accepted")]),je=[];!se.error&&Array.isArray(se.data)&&je.push(...se.data.map(ze=>ze.friend_id).filter(Boolean)),!ce.error&&Array.isArray(ce.data)&&je.push(...ce.data.map(ze=>ze.user_id).filter(Boolean));const De=Array.from(new Set(je));if(De.length===0){const At=await A.from("profiles").select("id, user_id, display_name, name, avatar_url").neq("id",V).neq("user_id",V).limit(12),qt=(!At.error&&Array.isArray(At.data)?At.data:[]).map(Zt=>({id:Zt.id||Zt.user_id,display_name:(Zt.display_name||Zt.name)??null,avatar_url:Zt.avatar_url??null}));C(qt);return}const Ue="id, user_id, display_name, name, avatar_url";let Qe=[];const bt=await A.from("profiles").select(Ue).in("id",De);if(!bt.error&&bt.data?.length)Qe=bt.data;else{const ze=await A.from("profiles").select(Ue).in("user_id",De);!ze.error&&ze.data?.length&&(Qe=ze.data)}const Xt=(Qe||[]).map(ze=>({id:ze.id||ze.user_id,display_name:(ze.display_name||ze.name)??null,avatar_url:ze.avatar_url??null})).filter(ze=>De.includes(ze.id));C(Xt)}finally{M(!1)}}y.useEffect(()=>{let V=!0;return(async()=>{const{data:se,error:ce}=await A.auth.getUser();if(!V)return;const je=ce?void 0:se?.user?.id;je&&(x(je),await Y(je))})(),()=>{V=!1}},[]),y.useEffect(()=>{let V=!0;return(async()=>{g(!0);const{data:se}=await A.from("allowed_categories").select("name").eq("is_active",!0),{data:ce}=await A.from("allowed_games").select("id,name,category").eq("is_active",!0);V&&(l(se??[]),f((ce??[]).map(je=>({id:je.id,label:je.name,category:je.category}))),g(!1))})(),()=>{V=!1}},[]);const[ne,ae]=y.useState(""),[we,Ee]=y.useState(""),[et,Fe]=y.useState(""),[qe,We]=y.useState(3),[Be,G]=y.useState(!1),[he,pe]=y.useState(""),[re,U]=y.useState("");y.useEffect(()=>{if(!a.length)return;const V=String(n),se=a.find(ce=>ce.name.toLowerCase()===V.toLowerCase());U((se?.name||a[0].name).toLowerCase())},[a,n]);const[$,R]=y.useState(!1),[w,T]=y.useState(""),[q,X]=y.useState("");y.useEffect(()=>{if(!u.length||!re)return;const V="".toLowerCase().replace(/\s+/g,""),se=u.find(ce=>ce.id===V||ce.label.toLowerCase().replace(/\s+/g,"")===V);se&&X(se.id)},[u,s,re]);const le=y.useMemo(()=>{const V=he.trim().toLowerCase(),se=a.map(ce=>ce.name);return V?se.filter(ce=>ce.toLowerCase().includes(V)):se},[he,a]),me=y.useMemo(()=>{const V=u.filter(ce=>ce.category.toLowerCase()===(re||"").toLowerCase()),se=w.trim().toLowerCase();return se?V.filter(ce=>ce.label.toLowerCase().includes(se)||ce.id.includes(se)):V},[re,w,u]),z=!p&&ne.trim().length>0&&re&&q&&qe>=3&&qe<=12;function ge(V){N(se=>se.includes(V)?se.filter(ce=>ce!==V):[...se,V])}async function _e(V,se){if(I.length){try{const ce=I.map(je=>({group_id:V,inviter_id:se,recipient_id:je,status:"pending"}));await A.from("group_invitations").insert(ce)}catch{}try{const ce=I.map(je=>({user_id:je,kind:"group_invite",payload:{group_id:V,inviter_id:se},is_read:!1}));await A.from("notifications").insert(ce)}catch{}}}async function Se(){if(!z)return;const{data:V,error:se}=await A.auth.getUser();if(se||!V?.user?.id){alert(se?.message||"Sign in required");return}const ce=V.user.id,je=Math.max(3,Math.min(12,qe)),De={title:ne.trim(),purpose:we.trim()||null,category:(re||"").toLowerCase(),game:q,capacity:je,visibility:"public",host_id:ce},{data:Ue,error:Qe}=await A.from("groups").insert(De).select("id").single();if(Qe){alert(Qe.message);return}_e(Ue.id,ce),o(`/group/${Ue.id}`)}return c.jsxs("div",{className:"mx-auto max-w-3xl px-4 pb-12 pt-8",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create a new group"}),c.jsx(Ve,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Back"})]}),c.jsxs("div",{className:"grid gap-6",children:[c.jsxs("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:[c.jsx("h2",{className:"mb-4 text-base font-medium",children:"Basics"}),p&&c.jsx("div",{className:"text-sm text-neutral-500",children:"Loading categories…"}),c.jsxs("div",{className:"grid gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Title"}),c.jsx("input",{value:ne,onChange:V=>ae(V.target.value),placeholder:"e.g., Friday Night Hokm",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Category"}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{value:Be?he:re||"",onChange:V=>{G(!0),pe(V.target.value)},onFocus:()=>G(!0),placeholder:"Search or choose category…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p}),Be&&c.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[le.length===0&&c.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),le.map(V=>c.jsx("button",{type:"button",onClick:()=>{U(V.toLowerCase()),G(!1),pe(""),u.some(se=>se.category===V&&se.id===q)||X("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:V},V))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Game / Activity"}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{value:$?w:u.find(V=>V.category.toLowerCase()===(re||"").toLowerCase()&&V.id===q)?.label||"",onChange:V=>{R(!0),T(V.target.value)},onFocus:()=>R(!0),placeholder:"Search or choose game/activity…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p||!(re&&re.trim().length>0)}),$&&c.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[me.length===0&&c.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),me.map(V=>c.jsx("button",{type:"button",onClick:()=>{X(V.id),R(!1),T("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:V.label},V.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"City (optional)"}),c.jsx("input",{value:et,onChange:V=>Fe(V.target.value),placeholder:"e.g., Freiburg",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Capacity"}),c.jsx("input",{type:"number",min:3,max:12,value:qe,onChange:V=>We(Math.max(3,Math.min(12,Number(V.target.value||3)))),className:"mt-1 w-32 rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"}),c.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Must be between 3 and 12."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Description"}),c.jsx("textarea",{value:we,onChange:V=>Ee(V.target.value),placeholder:"Tell people what this group is about…",rows:4,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]})]})]}),c.jsxs("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:[c.jsx("h2",{className:"mb-4 text-base font-medium",children:"Invite friends (optional)"}),c.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Filters your friends. If you have none yet, we show suggested people so you can test invites."}),c.jsx("div",{className:"mb-3",children:c.jsx("input",{value:J,onChange:V=>Z(V.target.value),placeholder:"Search people by name…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"mb-2 text-xs font-medium text-neutral-700",children:["Your friends ",c.jsxs("span",{className:"font-normal text-neutral-500",children:["(",F.length,")"]})]}),L&&c.jsx("div",{className:"text-sm text-neutral-500",children:"Loading friends…"}),!L&&F.length===0&&c.jsx("div",{className:"text-sm text-neutral-500",children:"No friends match your search."}),!L&&F.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"mb-2 text-xs text-neutral-500",children:["Selected: ",I.length]}),c.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:F.map(V=>c.jsxs("button",{type:"button",onClick:()=>ge(V.id),className:["flex items-center gap-2 rounded-lg border px-3 py-2 text-left text-sm hover:bg-neutral-50",I.includes(V.id)?"border-emerald-400 ring-2 ring-emerald-200":"border-neutral-200"].join(" "),children:[c.jsx("div",{className:"h-6 w-6 shrink-0 rounded-full bg-neutral-200",style:{backgroundImage:V.avatar_url?`url(${V.avatar_url})`:void 0,backgroundSize:"cover",backgroundPosition:"center"}}),c.jsx("span",{className:"truncate",children:V.display_name||V.id.slice(0,8)})]},V.id))})]})]}),I.length>0&&c.jsx("p",{className:"mt-3 text-xs text-emerald-700",children:"Invitees receive a notification and must accept."})]}),c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx(Ve,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),c.jsx("button",{disabled:!z,onClick:Se,className:"rounded-md bg-emerald-700 px-4 py-2 text-white disabled:opacity-60",children:"Create Group"})]})]})]})}console.log("[SUPABASE]","https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY".slice(0,8));function m0(){const{id:o=""}=wo();console.debug("[GroupDetail] route id =",o);const n=is(),[s,a]=y.useState(null),[l,u]=y.useState(!0),[f,p]=y.useState(null),[g,v]=y.useState(null),[x,b]=y.useState(!1),[C,L]=y.useState(!1),[M,I]=y.useState(!1),N=!!(g&&s&&(g===s.host_id||(s?.creator_id??null)===g)),[J,Z]=y.useState(!1),[F,Y]=y.useState(!1),[ne,ae]=y.useState(null),[we,Ee]=y.useState([]),[et,Fe]=y.useState({}),[qe,We]=y.useState(0),[Be,G]=y.useState(0),[he,pe]=y.useState(null),[re,U]=y.useState([]),[$,R]=y.useState(!1),[w,T]=y.useState({}),[q,X]=y.useState(!1),[le,me]=y.useState(null),[z,ge]=y.useState(""),[_e,Se]=y.useState(null),[V,se]=y.useState(!1),[ce,je]=y.useState(!1),[De,Ue]=y.useState("Schedule"),[Qe,bt]=y.useState("");async function Xt(){if(s?.code)try{await navigator.clipboard.writeText(String(s.code)),b(!0),setTimeout(()=>b(!1),1500)}catch(Q){console.warn("Clipboard failed",Q)}}async function ze(){if(s?.id)try{L(!0);const{data:Q}=await A.auth.getUser();if(!Q?.user){localStorage.setItem("postLoginRedirect",window.location.pathname),window.location.href=`${window.location.origin}/onboarding`;return}const{data:xe,error:Ne}=await A.rpc("make_group_invite",{p_group_id:s.id,p_hours:168,p_max_uses:null});if(Ne){p(Ne.message);return}const Te=`${window.location.origin}/invite/${xe}`;try{await navigator.clipboard.writeText(Te),I(!0),setTimeout(()=>I(!1),1500)}catch{}}finally{L(!1)}}y.useEffect(()=>{let Q=!1;return(async()=>{u(!0);const{data:xe}=await A.auth.getUser();Q||v(xe.user?.id??null);let Ne=null,Te=null;const Ae=await A.from("groups").select("*").eq("id",o).maybeSingle();if(Ae.error&&(Te=Ae.error),Ne=Ae.data,Te&&(console.warn("[GroupDetail] fetch error",Te),Q||p(`${Te.code||"err"}:${Te.message}`)),Q||a(Ne??null),Ne?.id){const{count:be,error:Ye}=await A.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",Ne.id).eq("status","active");Q||We(be??0),Ye&&console.warn("[GroupDetail] member count error",Ye)}u(!1)})(),()=>{Q=!0}},[o]),y.useEffect(()=>{let Q=!1;return(async()=>{if(!s?.id){U([]);return}let xe=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),Ne=xe.data||[];xe.error&&(Ne=(await A.from("group_members").select("user_id, role, created_at").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0})).data||[]);const Te=(Ne??[]).map(be=>({user_id:be.user_id,role:be.role??null,created_at:be.created_at,name:be.profiles?.name??null}));if(Q)return;U(Te);const Ae=(await A.auth.getUser()).data.user?.id||null;Ae&&R(Te.some(be=>be.user_id===Ae)),Ae&&await xr(Te.map(be=>be.user_id))})(),()=>{Q=!0}},[s?.id]),y.useEffect(()=>{let Q=!1;return(async()=>{if(!q||!le){Se(null);return}se(!0);const[xe,Ne,Te]=await Promise.all([A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",le).eq("status","active"),A.from("friendships").select("*",{count:"exact",head:!0}).eq("status","accepted").or(`user_id_a.eq.${le},user_id_b.eq.${le}`),A.from("groups").select("*",{count:"exact",head:!0}).eq("host_id",le)]);Q||(Se({games:xe.count??0,friends:Ne.count??0,created:Te.count??0}),se(!1))})(),()=>{Q=!0}},[q,le]);async function At(){if(!s)return;const{data:Q}=await A.auth.getUser(),xe=Q?.user?.id;if(!xe){p("Please sign in.");return}if(xe===s.host_id){p("Host cannot leave their own group.");return}p(null);const{error:Ne}=await A.from("group_members").delete().match({group_id:s.id,user_id:xe});if(Ne){p(Ne.message);return}const{data:Te}=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),Ae=(Te??[]).map(be=>({user_id:be.user_id,role:be.role??null,created_at:be.created_at,name:be.profiles?.name??null}));U(Ae),R(!1),p("You left the group.")}async function qt(Q){if(!s)return;const{data:xe}=await A.auth.getUser();if(!xe?.user?.id){p("Please sign in.");return}if(!N){p("Only the host can remove members.");return}if(Q===s.host_id){p("Host cannot remove themselves.");return}if(!window.confirm("Remove this member from the group?"))return;p(null);const{error:Ae}=await A.from("group_members").delete().match({group_id:s.id,user_id:Q});if(Ae){p(Ae.message);return}U(be=>be.filter(Ye=>Ye.user_id!==Q)),We(be=>Math.max(0,(be||1)-1))}y.useEffect(()=>{let Q=!1;return(async()=>{if(!s?.id){ae(null),Ee([]),Fe({}),G(0);return}const{data:xe,error:Ne}=await A.from("group_polls").select("*").eq("group_id",s.id).eq("status","open").order("created_at",{ascending:!1}).limit(1);if(Q)return;if(Ne){p(Ne.message);return}const Te=xe&&xe[0];if(ae(Te||null),!Te){Ee([]),Fe({}),G(0);return}const{data:Ae}=await A.from("group_poll_options").select("*").eq("poll_id",Te.id).order("created_at");if(Q)return;Ee(Ae||[]);const{data:be}=await A.from("group_votes").select("option_id,user_id").eq("poll_id",Te.id);if(Q)return;const Ye={},Xe=new Set;be?.forEach(Wt=>{Ye[Wt.option_id]=(Ye[Wt.option_id]||0)+1,Xe.add(Wt.user_id)}),Fe(Ye),G(Xe.size)})(),()=>{Q=!0}},[s?.id]);async function Zt(){p(null);const{data:Q}=await A.auth.getUser();if(!Q.user){p("Please sign in.");return}if(!o){p("Invalid group id");return}const{error:xe}=await A.from("group_members").insert({group_id:o,user_id:Q.user.id});if(xe&&xe.code!=="23505"){p(xe.message);return}R(!0);const{data:Ne}=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",o).eq("status","active").order("created_at",{ascending:!0}),Te=(Ne??[]).map(Ae=>({user_id:Ae.user_id,role:Ae.role??null,created_at:Ae.created_at,name:Ae.profiles?.name??null}));U(Te),We(Te.length)}function Rr(Q,xe){return Q?Q.status==="accepted"?"accepted":Q.status==="blocked"?"blocked":Q.status==="pending"?Q.requested_by===xe?"pending_out":"pending_in":"none":"none"}async function xr(Q){const xe=(await A.auth.getUser()).data.user;if(!xe)return;const Ne=Q.filter(be=>be!==xe.id);if(Ne.length===0){T({});return}const{data:Te}=await A.from("friendships").select("user_id_a,user_id_b,status,requested_by").or(Ne.map(be=>`and(user_id_a.eq.${xe.id},user_id_b.eq.${be}),and(user_id_a.eq.${be},user_id_b.eq.${xe.id})`).join(",")),Ae={};Ne.forEach(be=>{const Ye=(Te??[]).find(Xe=>Xe.user_id_a===xe.id&&Xe.user_id_b===be||Xe.user_id_b===xe.id&&Xe.user_id_a===be);Ae[be]=Rr(Ye,xe.id)}),T(Ae)}async function ls(Q){await A.rpc("request_friend",{target_id:Q}),await xr([Q])}async function Pn(Q){await A.rpc("accept_friend",{from_id:Q}),await xr([Q])}async function Qr(Q){await A.rpc("remove_friend",{other_id:Q}),await xr([Q])}function us(Q,xe){me(Q),ge(xe),X(!0)}async function or(){if(!s||!g||!window.confirm("Delete this group? This cannot be undone."))return;p(null);const{error:xe}=await A.from("groups").delete().match({id:s.id,host_id:g});if(xe){p(xe.message);return}n("/browse")}async function wr(){if(!s)return;const{data:Q}=await A.auth.getUser();if(!Q?.user){p("Please sign in."),n("/login");return}if(!N){p("Only the host can create a vote.");return}Ue("Schedule"),bt(""),je(!0)}async function Yr(){if(!s)return;const{data:Q}=await A.auth.getUser();if(!Q?.user){p("Please sign in."),n("/login");return}if(!N){p("Only the host can create a vote.");return}const{data:xe,error:Ne}=await A.from("group_polls").insert({group_id:s.id,title:(De||"Schedule").trim(),created_by:Q.user.id}).select("id").single();if(Ne||!xe?.id){p(Ne?.message||"Failed to create poll");return}const Te=(Qe||"").split(/\r?\n/).map(be=>be.trim()).filter(Boolean).slice(0,20);if(Te.length){const be=Te.map(Xe=>({poll_id:xe.id,label:Xe})),{error:Ye}=await A.from("group_poll_options").insert(be);if(Ye){p(Ye.message);return}}je(!1),p("Voting created"),window.location.hash="polls",ae({id:xe.id,group_id:s.id,title:(De||"Schedule").trim(),status:"open",closes_at:null,created_by:Q.user.id});const{data:Ae}=await A.from("group_poll_options").select("*").eq("poll_id",xe.id).order("created_at");Ee(Ae||[]),Fe({}),setTimeout(()=>document.getElementById("polls")?.scrollIntoView({behavior:"smooth"}),0)}async function $t(Q){if(!ne)return;pe(Q);const{data:xe}=await A.auth.getUser(),Ne=xe?.user?.id;if(!Ne){p("Please sign in."),n("/login"),pe(null);return}await A.from("group_members").upsert({group_id:ne.group_id,user_id:Ne,role:g===s?.host_id?"host":"member"},{onConflict:"group_id,user_id"});const{error:Te}=await A.from("group_votes").upsert({poll_id:ne.id,option_id:Q,user_id:Ne},{onConflict:"poll_id,user_id"});if(Te){p(Te.message),pe(null);return}const{data:Ae}=await A.from("group_votes").select("option_id,user_id").eq("poll_id",ne.id),be={},Ye=new Set;Ae?.forEach(Xe=>{be[Xe.option_id]=(be[Xe.option_id]||0)+1,Ye.add(Xe.user_id)}),Fe(be),G(Ye.size),pe(null)}return l?c.jsx("div",{className:"p-8 grid place-items-center",children:c.jsxs("div",{className:"flex items-center gap-3 text-neutral-600",children:[c.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),c.jsx("span",{children:"Loading…"})]})}):f&&!s&&!l?c.jsxs("div",{className:"p-6 space-y-2",children:[c.jsx("div",{className:"text-red-700 text-sm font-semibold",children:"Error loading group"}),c.jsx("div",{className:"text-xs break-words text-red-800",children:f}),c.jsxs("div",{className:"text-[10px] text-neutral-500",children:["id=",o]})]}):s?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"transition-all duration-300 "+(J&&!F?"mr-[min(92vw,520px)]":""),children:c.jsx("div",{className:"mx-auto max-w-5xl px-4 py-6",children:c.jsxs("div",{className:"grid gap-4 lg:grid-cols-[220px_1fr]",children:[c.jsxs("aside",{className:"order-2 lg:order-1 rounded-2xl border border-black/10 bg-white p-4 h-max shadow",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"Members"}),c.jsx("span",{className:"text-xs text-neutral-600",children:qe})]}),c.jsxs("ul",{className:"mt-3 space-y-2",children:[re.map(Q=>{const xe=Q.user_id===s.host_id,Ne=Q.name??Q.user_id.slice(0,6);return c.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-2.5 py-1.5 text-sm bg-neutral-50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-6 w-6 grid place-items-center rounded-full ring-1 ring-black/10 dark:ring-white/10 bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-800 dark:to-neutral-700 text-[11px] font-medium",children:Ne.slice(0,2).toUpperCase()}),c.jsx("button",{onClick:()=>us(Q.user_id,Ne),className:"text-neutral-900 underline-offset-2 hover:underline",children:Ne}),N&&Q.user_id!==s.host_id&&c.jsx("button",{onClick:()=>qt(Q.user_id),className:"ml-1 text-[11px] rounded border border-black/10 px-2 py-0.5 hover:bg-black/5",title:"Remove from group",children:"Remove"})]}),c.jsx("div",{className:"flex items-center gap-2",children:xe&&c.jsx("span",{className:"text-[10px] rounded-full bg-amber-500/15 text-amber-700 px-2 py-0.5",children:"HOST"})})]},Q.user_id)}),re.length===0&&c.jsx("li",{className:"text-xs text-neutral-600",children:"No members yet."})]})]}),c.jsxs("div",{className:"order-1 lg:order-2",children:[c.jsxs("div",{className:"rounded-2xl border border-black/10 bg-white p-5 shadow",children:[c.jsxs("div",{className:"mb-3 flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"mb-1 flex flex-wrap items-center gap-2",children:[c.jsx(Ve,{to:"/browse",className:"text-xs text-neutral-500 hover:underline",children:"Browse"}),c.jsx("span",{className:"text-neutral-300",children:"/"}),c.jsx("span",{className:"text-xs text-neutral-700",children:"Group"}),c.jsx("span",{className:"hidden sm:inline text-neutral-300",children:"·"}),c.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:s.category||"Uncategorized"})]}),c.jsx("h1",{className:"truncate text-3xl font-bold tracking-tight text-neutral-900",children:s.title}),c.jsxs("div",{className:"mt-1 text-xs text-neutral-500",children:["Created ",new Date(s.created_at).toLocaleDateString()," • Host: ",re.find(Q=>Q.user_id===s.host_id)?.name||s.host_id.slice(0,6)]}),s.code&&c.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs",children:[c.jsxs("span",{className:"rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:["Code: ",String(s.code).toUpperCase()]}),c.jsx("button",{onClick:Xt,className:"rounded border border-black/10 bg-white px-2 py-0.5 hover:bg-black/[0.04]",title:"Copy group code",children:x?"Copied!":"Copy"}),c.jsx(Ve,{to:`/browse?code=${s.code}`,className:"text-emerald-700 hover:underline",title:"Open this group in Browse by code",children:"Open in Browse"})]})]}),c.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[!$&&c.jsx("button",{onClick:Zt,className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"Join"}),$&&g!==s.host_id&&c.jsx("button",{onClick:At,className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Leave"}),c.jsx("button",{onClick:()=>Z(!0),className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Open Chat"}),N&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:ze,disabled:C,className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04] disabled:opacity-60",title:"Create an invite link and copy it",children:C?"Creating…":M?"Copied!":"Share invite"}),c.jsx("button",{onClick:wr,className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700",children:"Create Voting"}),c.jsx("button",{onClick:or,className:"rounded-lg bg-red-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-red-700",children:"Delete"})]})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"About"}),c.jsx("p",{className:"mt-1 text-sm text-neutral-700 whitespace-pre-wrap",children:s.purpose||"No description yet."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-neutral-700",children:[c.jsxs("div",{children:["Capacity: ",c.jsx("span",{className:"font-medium text-neutral-900",children:s.capacity})]}),c.jsxs("div",{children:["Visibility: ",c.jsx("span",{className:"font-medium text-neutral-900",children:s.visibility||"private"})]}),c.jsxs("div",{children:["Format: ",c.jsx("span",{className:"font-medium text-neutral-900",children:s.is_online?"Online":"In person"})]}),s.is_online&&s.online_link&&c.jsxs("div",{className:"col-span-2 truncate",children:["Link: ",c.jsx("a",{className:"text-emerald-600 hover:underline",href:s.online_link??"#",target:"_blank",rel:"noreferrer",children:s.online_link})]}),!s.is_online&&s.location&&c.jsxs("div",{className:"col-span-2",children:["Location: ",c.jsx("span",{className:"font-medium text-neutral-900",children:s.location})]})]})]})]}),c.jsxs("section",{id:"polls",className:"mt-6 rounded-2xl border border-black/10 bg-white p-5 shadow",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Voting"}),N&&ne&&c.jsx("span",{className:"text-xs text-neutral-600",children:"Open"})]}),!ne&&c.jsx("div",{className:"mt-2 text-sm text-neutral-600",children:"No active voting."}),ne&&c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"text-sm text-neutral-700",children:ne.title}),c.jsxs("ul",{className:"mt-3 space-y-2",children:[we.map(Q=>c.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-3 py-2 bg-neutral-50",children:[c.jsx("div",{children:c.jsx("div",{className:"font-medium text-neutral-900",children:Q.label})}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-xs text-neutral-600",children:[et[Q.id]??0," votes"]}),c.jsxs("button",{onClick:()=>$t(Q.id),disabled:!!he,className:"inline-flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm hover:bg-black/5 disabled:opacity-60 disabled:cursor-not-allowed",children:[he===Q.id?c.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,"Vote"]})]})]},Q.id)),we.length===0&&c.jsx("li",{className:"text-sm text-neutral-600",children:"No options yet."})]}),c.jsxs("div",{className:"mt-3 text-xs text-neutral-600",children:["Voters: ",Be," / Members: ",qe]})]})]})]})]})})}),ce&&c.jsxs("div",{className:"fixed inset-0 z-50",children:[c.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>je(!1)}),c.jsxs("div",{className:"absolute left-1/2 top-1/2 w-[min(92vw,600px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl bg-white p-5 shadow-xl dark:bg-neutral-900",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Create Voting"}),c.jsx("label",{className:"mt-3 block text-sm",children:"Title"}),c.jsx("input",{value:De,onChange:Q=>Ue(Q.target.value),className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),c.jsx("label",{className:"mt-3 block text-sm",children:"Options (one per line)"}),c.jsx("textarea",{value:Qe,onChange:Q=>bt(Q.target.value),rows:6,placeholder:`Sat 19:00 @ Tacheles
Sun 18:00 @ Niko Club`,className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),c.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:()=>je(!1),className:"rounded-md border px-3 py-1.5 text-sm",children:"Cancel"}),c.jsx("button",{type:"button",onClick:Yr,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Create"})]})]})]}),J&&c.jsx(g0,{groupId:s.id,onClose:()=>{Z(!1),Y(!1)},full:F,setFull:Y}),q&&le&&c.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:c.jsxs("div",{className:"w-[420px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[c.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-semibold",children:z}),c.jsx("button",{onClick:()=>X(!1),className:"rounded-md border px-2 py-1 text-sm",children:"Close"})]}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[c.jsx("div",{className:"text-[11px] text-neutral-600",children:"Games Played"}),c.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.games??(V?"…":0)})]}),c.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[c.jsx("div",{className:"text-[11px] text-neutral-600",children:"Friends"}),c.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.friends??(V?"…":0)})]}),c.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[c.jsx("div",{className:"text-[11px] text-neutral-600",children:"Groups Created"}),c.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.created??(V?"…":0)})]})]}),w[le]==="accepted"&&c.jsx("button",{onClick:()=>Qr(le),className:"w-full rounded-md border px-3 py-2",children:"Unfriend"}),w[le]==="none"&&c.jsx("button",{onClick:()=>ls(le),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Add friend"}),w[le]==="pending_out"&&c.jsx("div",{children:"Request sent."}),w[le]==="pending_in"&&c.jsx("button",{onClick:()=>Pn(le),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Accept request"})]})]})})]}):c.jsxs("div",{className:"p-6",children:["Group not found. ",c.jsxs("span",{className:"text-xs text-neutral-500",children:["id=",o]})]})}function g0({groupId:o,onClose:n,full:s,setFull:a}){const[l,u]=y.useState([]),[f,p]=y.useState(""),[g,v]=y.useState(!1),[x,b]=y.useState(null),C=y.useRef(null),[L,M]=y.useState({}),[I,N]=y.useState(null),[J,Z]=y.useState(""),[F,Y]=y.useState(!0),[ne,ae]=y.useState({}),we=y.useRef(null),[Ee,et]=y.useState(null),[Fe,qe]=y.useState(null),[We,Be]=y.useState(!0),[G,he]=y.useState(!1),pe=50;y.useEffect(()=>{(async()=>{const{data:$}=await A.auth.getUser(),R=$.user?.id??null;if(N(R),R){const{data:w}=await A.from("profiles").select("name").eq("user_id",R).maybeSingle();Z(w?.name||R.slice(0,6))}})()},[]),y.useEffect(()=>{let $=!1;return Y(!0),(async()=>{const{data:R,error:w}=await A.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",o).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(pe);if(w){$||(b(w.message),Y(!1));return}if($){Y(!1);return}const T=(R??[]).map(me=>({id:me.id,group_id:me.group_id,user_id:me.user_id,content:me.content??"",created_at:me.created_at})),q=T[T.length-1]||null;et(q?q.created_at:null),qe(q?q.id:null),Be(T.length===pe);const X=[...T].reverse();u(X);const le=Array.from(new Set(X.map(me=>me.user_id)));if(le.length){const{data:me}=await A.from("profiles").select("user_id, name").in("user_id",le),z={};(me??[]).forEach(ge=>{z[ge.user_id]=ge.name??null}),$||M(z)}Y(!1)})(),()=>{$=!0}},[o]);async function re(){if(!We||G||!Ee||!Fe)return;he(!0),b(null);const{data:$,error:R}=await A.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",o).or(`created_at.lt.${Ee},and(created_at.eq.${Ee},id.lt.${Fe})`).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(pe);if(R){b(R.message),he(!1);return}const w=($??[]).map(X=>({id:X.id,group_id:X.group_id,user_id:X.user_id,content:X.content??"",created_at:X.created_at})),T=w[w.length-1]||null;et(T?T.created_at:Ee),qe(T?T.id:Fe),Be(w.length===pe);const q=[...w].reverse();u(X=>[...q,...X]),he(!1)}y.useEffect(()=>{const $=A.channel(`grp-msgs-${o}`).on("postgres_changes",{event:"*",schema:"public",table:"group_messages",filter:`group_id=eq.${o}`},R=>{if(R.eventType==="INSERT"){const w=R.new;u(T=>[...T,{id:w.id,group_id:w.group_id,user_id:w.user_id,content:w.content??"",created_at:w.created_at}]),L[w.user_id]||A.from("profiles").select("user_id, name").eq("user_id",w.user_id).maybeSingle().then(({data:T})=>{T&&M(q=>({...q,[T.user_id]:T.name??null}))})}if(R.eventType==="DELETE"){const w=R.old;u(T=>T.filter(q=>q.id!==w.id))}if(R.eventType==="UPDATE"){const w=R.new;u(T=>T.map(q=>q.id===w.id?{...q,content:w.content??""}:q))}}).on("broadcast",{event:"typing"},({payload:R})=>{const{user_id:w,name:T}=R;!w||w===I||(ae(q=>({...q,[w]:{name:T,ts:Date.now()}})),setTimeout(()=>{ae(q=>{const X={...q};return X[w]&&Date.now()-X[w].ts>2500&&delete X[w],X})},3e3))}).subscribe();return()=>{A.removeChannel($)}},[o,I,L]),y.useEffect(()=>{G||C.current?.scrollTo({top:C.current.scrollHeight,behavior:"smooth"})},[l.length,G]);async function U($){$.preventDefault();const R=f.trim();if(!R)return;v(!0),b(null);const w=(await A.auth.getUser()).data.user;if(!w){b("Please sign in"),v(!1);return}const{error:T}=await A.from("group_messages").insert({group_id:o,user_id:w.id,content:R});T?b(T.message):p(""),v(!1)}return c.jsxs(c.Fragment,{children:[s&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:n}),c.jsx("div",{className:"fixed right-0 top-0 z-50 h-full transform transition-transform duration-300 "+(s?"w-screen translate-x-0":"w-[min(92vw,520px)] translate-x-0"),children:c.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-none border-l border-black/10 bg-white shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-white px-3 py-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:n,className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-neutral-900",children:"Group Chat"}),c.jsx("div",{className:"text-[11px] text-neutral-500",children:"Visible to all members"})]})]}),c.jsx("button",{onClick:()=>a(!s),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:s?"Exit Fullscreen":"Fullscreen"})]}),c.jsxs("div",{ref:C,className:"flex-1 overflow-y-auto bg-neutral-50 px-3 py-3",children:[We&&!F&&c.jsx("div",{className:"mb-2 flex justify-center",children:c.jsx("button",{onClick:re,disabled:G,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs hover:bg-black/5 disabled:opacity-60",children:G?"Loading…":"Load older"})}),l.map($=>{const R=I&&$.user_id===I,w=L[$.user_id]??$.user_id.slice(0,6);return c.jsx("div",{className:`mb-2 flex ${R?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm ${R?"bg-emerald-600 text-white":"bg-white border border-black/10"}`,children:[!R&&c.jsx("div",{className:"mb-0.5 text-[11px] font-medium text-neutral-600",children:w}),c.jsx("div",{className:"whitespace-pre-wrap break-words",children:$.content}),c.jsx("div",{className:`mt-1 text-[10px] ${R?"text-emerald-50/80":"text-neutral-500"}`,children:new Date($.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)}),l.length===0&&!F&&c.jsx("div",{className:"text-center text-sm text-neutral-500",children:"No messages yet."}),F&&c.jsx("div",{className:"flex justify-center py-6 text-neutral-400",children:c.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})})]}),Object.keys(ne).length>0&&c.jsxs("div",{className:"px-3 py-1 text-[11px] text-neutral-500",children:[Object.values(ne).map($=>$.name).join(", ")," typing…"]}),c.jsxs("form",{onSubmit:U,className:"border-t border-black/10 bg-white px-3 py-2",children:[c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{value:f,onChange:$=>p($.target.value),onInput:()=>{if(!I)return;const $=Date.now();we.current&&$-we.current<800||(we.current=$,A.channel(`grp-msgs-${o}`).send({type:"broadcast",event:"typing",payload:{user_id:I,name:J}}))},placeholder:"Type a message…",rows:1,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),$.currentTarget.form?.requestSubmit())},className:"min-h-[40px] max-h-40 flex-1 resize-none rounded-lg border border-black/10 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-500"}),c.jsx("button",{type:"submit",disabled:!f.trim()||g||F,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50",children:g||F?c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a 8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Sending…"]}):"Send"})]}),x&&c.jsx("div",{className:"mt-1 text-xs text-red-600",children:x})]})]})})]})}function v0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function y0(){const o=yr();return y.useMemo(()=>new URLSearchParams(o.search),[o.search])}function x0(){is();const o=y0(),n=o.get("category")||"",s=o.get("q")||"",a=o.get("joined")==="1",l=o.get("created")==="1",[u,f]=y.useState(null),[p,g]=y.useState([]),[v,x]=y.useState(!1),[b,C]=y.useState(null),L=12,[M,I]=y.useState(0),[N,J]=y.useState(!1),[Z,F]=y.useState(!1),[Y,ne]=y.useState({}),[ae,we]=y.useState({}),[Ee,et]=y.useState({});y.useEffect(()=>{let G=!0;return(async()=>{const{data:he,error:pe}=await A.from("allowed_games").select("id, category").eq("is_active",!0);if(!G)return;if(pe){et({});return}const re={};(he??[]).forEach(U=>{const $=String(U.category||"").toLowerCase(),R=String(U.id||"").toLowerCase();!$||!R||(re[$]||(re[$]=[]),re[$].push(R))}),et(re)})(),()=>{G=!1}},[]),y.useEffect(()=>{(async()=>{const{data:G}=await A.auth.getUser();f(G.user?.id??null)})()},[]),y.useEffect(()=>{if(!u)return;const G=A.channel(`reads:${u}`).on("postgres_changes",{event:"*",schema:"public",table:"group_reads",filter:`user_id=eq.${u}`},async he=>{const pe=he.new?.group_id||he.old?.group_id;pe&&await Fe([pe])}).subscribe();return()=>{A.removeChannel(G)}},[u]),y.useEffect(()=>{if(!u)return;const G=()=>{const re=p.map(U=>U.id);re.length&&Fe(re)};window.addEventListener("focus",G);const he=()=>{document.visibilityState==="visible"&&G()};document.addEventListener("visibilitychange",he);const pe=window.setInterval(G,2e4);return()=>{window.removeEventListener("focus",G),document.removeEventListener("visibilitychange",he),window.clearInterval(pe)}},[u,p]),y.useEffect(()=>{let G=!0;const he=re=>{let U=re;const $=n?n.toLowerCase():"",R=new Set(["games","study","outdoors"]);if($)if(R.has($)){const w=Ee[$]??[];if(w.length>0){const T=w.map(q=>`"${q}"`).join(",");U=U.or(`game.in.(${T}),category.eq.${$}`)}else U=U.eq("category",$)}else{const w=$.replace(/[^a-z0-9]+/g,"");U=U.or(`game.eq.${w},game.ilike.%${$}%,title.ilike.%${$}%`)}if(s.trim()){const w=s.trim();U=U.or(`title.ilike.%${w}%,game.ilike.%${w}%`)}return U};async function pe(re){try{if(re&&(x(!0),g([]),I(0),J(!1)),C(null),(a||l)&&!u){g([]),C("Please sign in to view your groups."),x(!1),F(!1);return}let U=[];const $=(re?0:(M+1)*L)+0,R=$+L-1;if(l&&u){let w=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",u).order("created_at",{ascending:!1}).range($,R);const{data:T,error:q}=await he(w);if(q)throw q;U=T??[]}else if(a&&u){const{data:w,error:T}=await A.from("group_members").select("group_id").eq("user_id",u);if(T)throw T;const q=(w??[]).map(X=>X.group_id);if(q.length>0){let X=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",q).order("created_at",{ascending:!1}).range($,R);const{data:le,error:me}=await he(X);if(me)throw me;U=le??[]}else U=[]}else{let w=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range($,R);const{data:T,error:q}=await he(w);if(q)throw q;U=T??[]}if(!G)return;if(re&&g(U),J(U.length===L),(U??[]).length>0){const w=U.map(X=>X.id);u&&w.length>0&&await Fe(w);const{data:T}=await A.from("group_polls").select("group_id").in("group_id",w).eq("status","open"),q={};(T??[]).forEach(X=>{q[X.group_id]=!0}),ne(X=>({...X,...q}))}}catch(U){if(!G)return;C(U?.message??"Failed to load groups")}finally{if(!G)return;x(!1),F(!1)}}return pe(!0),()=>{G=!1}},[n,s,a,l,u,Ee]);async function Fe(G){try{if(!u||!G.length)return;const{data:he,error:pe}=await A.from("group_reads").select("group_id,last_read_at").eq("user_id",u).in("group_id",G);if(pe)throw pe;const re={};(he??[]).forEach(w=>{re[w.group_id]=w.last_read_at??null});const U=G.map(async w=>{const T=re[w]??"1970-01-01T00:00:00Z",{count:q,error:X}=await A.from("group_messages").select("id",{count:"exact",head:!0}).eq("group_id",w).gt("created_at",T);return X?[w,0]:[w,q??0]}),$=await Promise.all(U),R={};$.forEach(([w,T])=>{R[w]=T}),we(w=>({...w,...R}))}catch{}}async function qe(G){if(u)try{await A.rpc("mark_group_read",{p_group_id:G}),we(he=>({...he,[G]:0})),await A.from("notifications").update({is_read:!0}).eq("user_id",u).eq("payload->>group_id",G).eq("is_read",!1)}catch(he){console.warn("[markGroupRead]",he)}}async function We(){try{F(!0);const G=(M+1)*L,he=G+L-1;let pe=[];const re=$=>{let R=$;const w=n?n.toLowerCase():"",T=new Set(["games","study","outdoors"]);if(w)if(T.has(w)){const q=Ee[w]??[];if(q.length>0){const X=q.map(le=>`"${le}"`).join(",");R=R.or(`game.in.(${X}),category.eq.${w}`)}else R=R.eq("category",w)}else{const q=w.replace(/[^a-z0-9]+/g,"");R=R.or(`game.eq.${q},game.ilike.%${w}%,title.ilike.%${w}%`)}if(s.trim()){const q=s.trim();R=R.or(`title.ilike.%${q}%,game.ilike.%${q}%`)}return R};if(l&&u){let $=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",u).order("created_at",{ascending:!1}).range(G,he);const{data:R,error:w}=await re($);if(w)throw w;pe=R??[]}else if(a&&u){const{data:$,error:R}=await A.from("group_members").select("group_id").eq("user_id",u);if(R)throw R;const w=($??[]).map(T=>T.group_id);if(w.length>0){let T=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",w).order("created_at",{ascending:!1}).range(G,he);const{data:q,error:X}=await re(T);if(X)throw X;pe=q??[]}else pe=[]}else{let $=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range(G,he);const{data:R,error:w}=await re($);if(w)throw w;pe=R??[]}g($=>[...$,...pe]),I($=>$+1),J(pe.length===L);const U=pe.map($=>$.id);if(U.length){const{data:$}=await A.from("group_polls").select("group_id").in("group_id",U).eq("status","open"),R={};($??[]).forEach(w=>{R[w.group_id]=!0}),ne(w=>({...w,...R}))}}catch{}finally{F(!1)}}const Be=l?"My Groups – Created":a?"My Groups – Joined":n?`Groups • ${n}`:"All Groups";return c.jsxs("main",{className:"mx-auto max-w-5xl px-4 py-8",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold",children:Be}),s&&c.jsxs("p",{className:"text-sm text-neutral-600",children:["Filtered by: “",s,"”"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ve,{to:"/browse",className:"text-sm underline",children:"Back"}),c.jsx(Ve,{to:"/create",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"New Group"})]})]}),c.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/90 p-5 shadow-sm backdrop-blur",children:v?c.jsx("ul",{className:"divide-y divide-black/5",children:Array.from({length:6}).map((G,he)=>c.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[c.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},he))}):b?c.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:b}):p.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 p-10 text-center text-neutral-600",children:[c.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[c.jsx("path",{d:"M8 21h8"}),c.jsx("path",{d:"M12 17v4"}),c.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),c.jsx("div",{className:"text-lg font-medium",children:"No groups found"}),c.jsx("div",{className:"text-sm",children:"Try a different filter or create a new one."}),c.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[c.jsx(Ve,{to:"/browse",className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Back"}),c.jsx(Ve,{to:"/create",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"New Group"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"divide-y divide-black/5",children:p.map(G=>c.jsx("li",{className:"group py-1 first:pt-0 last:pb-0",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ve,{to:`/group/${G.id}`,onClick:()=>we(he=>({...he,[G.id]:0})),className:"block flex-1 rounded-lg px-2 py-2 hover:bg-black/[0.03] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"flex h-9 w-9 select-none items-center justify-center rounded-full border border-black/10 bg-neutral-100 text-sm font-semibold text-neutral-700",children:(G.title||G.game||"G").slice(0,1).toUpperCase()}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"truncate text-base font-medium text-neutral-900",children:G.title??"Untitled group"}),G.host_id===u&&c.jsx("span",{className:"shrink-0 rounded-full border border-amber-300 bg-amber-50 px-2 py-0.5 text-[11px] text-amber-800",children:"Host"}),Y[G.id]&&c.jsx("span",{className:"shrink-0 rounded-full border border-emerald-300 bg-emerald-50 px-2 py-0.5 text-[11px] text-emerald-700",children:"Voting"})]}),c.jsx("div",{className:"mt-0.5 line-clamp-1 text-xs text-neutral-600",children:G.description??"No description"}),c.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1 text-[11px] text-neutral-700",children:[G.category&&c.jsxs("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:["#",G.category]}),G.game&&c.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:G.game}),G.city&&c.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:G.city}),G.capacity&&c.jsxs("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:[G.capacity," slots"]}),G.created_at&&c.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:v0(G.created_at)})]})]}),typeof ae[G.id]=="number"&&ae[G.id]>0&&c.jsx("span",{className:"ml-1 inline-flex h-6 min-w-[1.5rem] items-center justify-center rounded-full bg-emerald-600 px-1 text-xs font-semibold text-white",children:ae[G.id]>99?"99+":ae[G.id]})]})}),typeof ae[G.id]=="number"&&ae[G.id]>0&&c.jsx("button",{onClick:he=>{he.preventDefault(),he.stopPropagation(),qe(G.id)},className:"ml-2 shrink-0 rounded-md border border-black/10 bg-white px-2.5 py-1 text-xs hover:bg-black/[0.04]",title:"Mark as read",children:"Read"})]})},G.id))}),N&&c.jsx("div",{className:"mt-5 border-t border-black/5 p-4 text-center",children:c.jsx("button",{onClick:We,className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",disabled:Z,children:Z?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):c.jsx(c.Fragment,{children:"Load more"})})})]})})]})}function mh(o){const n=new Date(o),s=Math.floor((Date.now()-n.getTime())/1e3);if(s<60)return`${s}s`;const a=Math.floor(s/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}function Uf(){const o=is(),n=yr(),{success:s,error:a}=u0(),{userId:l}=wo();y.useLayoutEffect(()=>{n.hash==="#chat"&&Zr(!0)},[n.key,n.hash]),y.useEffect(()=>{const k=()=>Zr(!0);return window.addEventListener("open-chat",k),()=>window.removeEventListener("open-chat",k)},[]);const[u,f]=y.useState(null),p=!!l&&l!==u,[g,v]=y.useState(null),[x,b]=y.useState(""),[C,L]=y.useState(null),[M,I]=y.useState("system"),[N,J]=y.useState(!1),[Z,F]=y.useState(!1),[Y,ne]=y.useState(!0),[ae,we]=y.useState(0),[Ee,et]=y.useState(0),[Fe,qe]=y.useState(!1),[We,Be]=y.useState(""),[G,he]=y.useState(""),[pe,re]=y.useState("UTC"),[U,$]=y.useState(""),[R,w]=y.useState(null),[T,q]=y.useState(!1),[X,le]=y.useState(!1),[me,z]=y.useState(0),[ge,_e]=y.useState(0),[Se,V]=y.useState([]),[se,ce]=y.useState("created"),[je,De]=y.useState(0),[Ue,Qe]=y.useState([]),[bt,Xt]=y.useState(!1),[ze,At]=y.useState([]),[qt,Zt]=y.useState([]),[Rr,xr]=y.useState([]),ls=y.useMemo(()=>{if(se==="created")return ze;if(se==="joined")return Se;const k=new Map;for(const D of ze)D?.id&&k.set(D.id,D);for(const D of Se)D?.id&&!k.has(D.id)&&k.set(D.id,D);return Array.from(k.values())},[se,ze,Se]),Pn=y.useMemo(()=>{if(se==="created")return me;if(se==="joined")return ge;const k=new Set;return ze.forEach(D=>D?.id&&k.add(D.id)),Se.forEach(D=>D?.id&&k.add(D.id)),k.size},[se,me,ge,ze,Se]),Qr=y.useMemo(()=>(x||g||"?").slice(0,2).toUpperCase(),[x,g]),[us,or]=y.useState(!0),[wr,Yr]=y.useState(null),[$t,Q]=y.useState(null),[xe,Ne]=y.useState(!1),[Te,Ae]=y.useState(null),[be,Ye]=y.useState([]),[Xe,Wt]=y.useState(""),ii=y.useRef(null),[Lr,ai]=y.useState([]),[Xr,cs]=y.useState(""),[oi,On]=y.useState(!1),[_r,Zr]=y.useState(!1),Ar=y.useRef(null),[li,$r]=y.useState(!1),en=y.useRef(null),[br,ui]=y.useState([]),[Ir,ko]=y.useState([]),[Mu,Ur]=y.useState([]),[lr,ci]=y.useState(new Map),tn=y.useMemo(()=>{const k=new Map;if(Lr.forEach(fe=>k.set(fe.other_id,fe)),!u)return Lr;const D=[...Lr];return br.map(fe=>fe.user_id_a===u?fe.user_id_b:fe.user_id_a).forEach(fe=>{if(k.has(fe))return;const $e=lr.get(fe);D.push({other_id:fe,name:$e?.name&&$e.name.trim()?$e.name:fe.slice(0,6),avatar_url:$e?.avatar_url??null,last_body:"",last_at:new Date(0).toISOString(),last_from_me:!1,unread:!1})}),D.sort((fe,$e)=>$e.last_at>fe.last_at?1:$e.last_at<fe.last_at?-1:0),D},[Lr,br,lr,u]),di=y.useMemo(()=>Lr.filter(k=>!k.last_from_me),[Lr]),ds=y.useMemo(()=>Ir.length+qt.length+Rr.length,[Ir,qt,Rr]),fi=y.useMemo(()=>u?br.map(D=>D.user_id_a===u?D.user_id_b:D.user_id_a).map(D=>({id:D,name:lr.get(D)?.name||D.slice(0,6),avatar_url:lr.get(D)?.avatar_url??null})):[],[br,lr,u]),[sa,ia]=y.useState(!1),[Tt,tt]=y.useState(null),[fs,hi]=y.useState(""),[hs,ps]=y.useState(null),[kt,aa]=y.useState(!0),[ms,Vt]=y.useState(0),[oa,It]=y.useState(0),[gs,pi]=y.useState(0),[Ht,Rn]=y.useState(!1),[vs,rn]=y.useState(null),[nn,mi]=y.useState(null),[Ln,sn]=y.useState("none"),la=p?fs||(l?l.slice(0,6):""):x||g||"",ys=p?hs:C,an=p?ms:ae,ua=p?oa:Ee;function gi(k){const D=Math.floor(k/86400),ee=Math.floor(k%86400/3600),fe=Math.floor(k%3600/60);return D>0?`${D}d ${ee}h`:ee>0?`${ee}h ${fe}m`:`${fe}m`}const Le=y.useMemo(()=>{if(!nn)return 0;const k=new Date(nn).getTime(),D=Math.floor((Date.now()-k)/1e3),ee=168*3600;return Math.max(0,ee-D)},[nn]),ca=y.useMemo(()=>kt&&!Ht&&Le===0,[kt,Ht,Le]),da=(p?fs||l||"?":x||g||"?")?.slice(0,2).toUpperCase()??"?";y.useEffect(()=>{l&&u&&l!==u&&jr(l)},[l,u]),y.useEffect(()=>{ii.current?.scrollIntoView({behavior:"smooth"})},[be.length]),y.useEffect(()=>{function k(D){const ee=D.target;li&&en.current&&!en.current.contains(ee)&&$r(!1),_r&&Ar.current&&!Ar.current.contains(ee)&&Zr(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[li,_r]);async function An(k){if(!u)return;On(!1),Ae(null),Ne(!0),Ye([]),Q(k),ai(ee=>ee.map(fe=>fe.other_id===k?{...fe,unread:!1,last_from_me:!0}:fe));const{data:D}=await A.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`and(from_id.eq.${u},to_id.eq.${k}),and(from_id.eq.${k},to_id.eq.${u})`).order("created_at",{ascending:!0}).limit(200);Ye(D??[]),Ne(!1)}async function $n(k){const{data:D}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${k},user_id_b.eq.${k}`).eq("status","accepted");ui(D??[]);const{data:ee}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${k},user_id_b.eq.${k}`).eq("status","pending").neq("requested_by",k);ko(ee??[]);const{data:fe}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").eq("requested_by",k).eq("status","pending");Ur(fe??[])}async function xs(k){const{data:D}=await A.from("group_members").select("group_id, role, status, created_at, groups(title)").eq("user_id",k).in("status",["pending","invited"]).order("created_at",{ascending:!1}).limit(50),ee=(D??[]).map(it=>({group_id:it.group_id,group_title:it.groups?.title??null,role:it.role??null,status:it.status??"pending",invited_at:it.created_at}));Zt(ee);const{data:fe}=await A.from("group_members").select("group_id").eq("user_id",k).eq("status","active"),$e=(fe??[]).map(it=>it.group_id);let er=[];if($e.length){const{data:it}=await A.from("group_messages").select("group_id, content:body, created_at, groups(title), user_id").in("group_id",$e).neq("user_id",k).order("created_at",{ascending:!1}).limit(20);er=(it??[]).map(ur=>({group_id:ur.group_id,group_title:ur.groups?.title??null,preview:String(ur.content||"").slice(0,120),created_at:ur.created_at}))}xr(er)}async function fa(k){await A.rpc("request_friend",{target_id:k}),u&&await $n(u),sn("pending_out")}async function In(k){await A.rpc("accept_friend",{from_id:k}),u&&await $n(u),Tt===k&&sn("accepted")}async function on(k){await A.rpc("remove_friend",{other_id:k}),u&&await $n(u),Tt===k&&sn("none")}async function Gt(k){if(!u||!Tt||Ht||Le>0)return;const D=Math.max(0,Math.min(6,Math.round(k)));Rn(!0);const ee=gs;pi(D);try{if(D===0)await A.from("ratings").delete().eq("rater_id",u).eq("ratee_id",Tt),mi(null);else{const{error:$e}=await A.from("ratings").upsert({rater_id:u,ratee_id:Tt,stars:D},{onConflict:"rater_id,ratee_id"});if($e)throw $e;mi(new Date().toISOString())}const{data:fe}=await A.from("profiles").select("rating_avg,rating_count").eq("user_id",Tt).maybeSingle();fe&&(Vt(Number(fe.rating_avg??0)),It(Number(fe.rating_count??0)))}catch(fe){pi(ee);const $e=String(fe?.message||"");/(7\\s*days|week|rate_weekly_limit)/i.test($e)?Yr("You can rate this user once every 7 days."):Yr($e||"Rating failed.")}finally{Rn(!1)}}async function kr(k){if(!u)return;const{error:D}=await A.from("group_members").update({status:"active"}).eq("group_id",k).eq("user_id",u);if(D)try{await A.from("group_members").delete().eq("group_id",k).eq("user_id",u),await A.from("group_members").insert({group_id:k,user_id:u,status:"active",role:"member"})}catch{}await xs(u)}async function jr(k){if(!u)return;tt(k);const{data:D}=await A.from("profiles").select("user_id,name,avatar_url,allow_ratings,rating_avg,rating_count").eq("user_id",k).maybeSingle();hi(D?.name??k.slice(0,6)),ps(D?.avatar_url??null),aa(!!(D?.allow_ratings??!0)),Vt(Number(D?.rating_avg??0)),It(Number(D?.rating_count??0));try{const{data:$e}=await A.from("ratings").select("stars,updated_at").eq("rater_id",u).eq("ratee_id",k).maybeSingle();pi(Number($e?.stars??0)),mi($e?.updated_at??null)}catch{}const{data:ee}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`and(user_id_a.eq.${u},user_id_b.eq.${k}),and(user_id_a.eq.${k},user_id_b.eq.${u})`).limit(1).maybeSingle();let fe="none";ee&&(ee.status==="accepted"?fe="accepted":ee.status==="blocked"?fe="blocked":ee.status==="pending"&&(fe=ee.requested_by===u?"pending_out":"pending_in")),sn(fe),ia(!1)}async function Un(k){u&&(await A.from("group_members").delete().eq("group_id",k).eq("user_id",u),await xs(u))}function Mn(k){xr(D=>D.filter(ee=>ee.group_id!==k)),$r(!1),o(`/group/${k}`)}const Kt=y.useMemo(()=>{if(!$t)return{name:"",avatar:null};const k=tn.find(ee=>ee.other_id===$t);if(k)return{name:k.name,avatar:k.avatar_url};const D=lr.get($t);return{name:D?.name||$t.slice(0,6),avatar:D?.avatar_url??null}},[$t,tn,lr]);async function jo(){if(!u)return;w(null);const{data:k,error:D}=await A.from("profiles").select("name, city, timezone, interests, avatar_url, allow_ratings, rating_avg, rating_count").eq("user_id",u).maybeSingle();if(D){w(D.message),qe(!0);return}Be(k?.name??""),he(k?.city??""),re(k?.timezone??"UTC");const ee=Array.isArray(k?.interests)?k.interests:[];$(ee.join(", ")),L(k?.avatar_url??null),ne(k?.allow_ratings??!0),we(Number(k?.rating_avg??0)),et(Number(k?.rating_count??0)),qe(!0)}function vi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch{return"UTC"}}async function Dn(k){if(k&&k.preventDefault(),!!u){w(null),q(!0);try{const D=We.trim(),ee=G.trim(),fe=pe.trim()||"UTC",$e=U.split(",").map(it=>it.trim()).filter(Boolean),{error:er}=await A.from("profiles").update({name:D,city:ee,timezone:fe,interests:$e}).eq("user_id",u);if(er)throw er;b(D),w("Saved."),s("Profile saved"),localStorage.setItem("theme",M),localStorage.setItem("emailNotifs",N?"1":"0"),localStorage.setItem("pushNotifs",Z?"1":"0"),So(M),qe(!1)}catch(D){const ee=D?.message||"Failed to save";w(ee),a(ee)}finally{q(!1)}}}function So(k){const D=document.documentElement;D.classList.remove("light","dark"),k==="light"?D.classList.add("light"):k==="dark"&&D.classList.add("dark")}async function ha(k){if(ne(k),!!u)try{await A.from("profiles").update({allow_ratings:k}).eq("user_id",u)}catch{}}async function ws(k){const D=k.target.files?.[0];if(!(!u||!D))try{le(!0);const ee=D.name.split(".").pop()||"jpg",fe=`${u}/${Date.now()}.${ee}`,{error:$e}=await A.storage.from("avatars").upload(fe,D,{upsert:!0});if($e)throw $e;const{data:er}=A.storage.from("avatars").getPublicUrl(fe),it=er?.publicUrl||null;it&&(await A.from("profiles").update({avatar_url:it}).eq("user_id",u),L(it))}catch(ee){console.error(ee),w("Avatar upload failed")}finally{le(!1)}}async function pa(){try{await A.auth.signOut(),localStorage.removeItem("onboardingSeen"),window.location.href=`${window.location.origin}/onboarding`}catch(k){console.error("Logout failed:",k),window.location.href=`${window.location.origin}/onboarding`}}y.useEffect(()=>{(async()=>{if(!u){ci(new Map);return}const{data:k}=await A.from("friendships").select("user_id_a,user_id_b,status").or(`user_id_a.eq.${u},user_id_b.eq.${u}`).eq("status","accepted"),D=new Set;(k??[]).forEach(fe=>D.add(fe.user_id_a===u?fe.user_id_b:fe.user_id_a));let ee=new Map;if(D.size){const{data:fe}=await A.from("profiles").select("user_id,name,avatar_url").in("user_id",[...D]);(fe??[]).forEach($e=>ee.set($e.user_id,{name:$e.name??"",avatar_url:$e.avatar_url??null}))}ci(ee)})()},[u,br.length]),y.useEffect(()=>{let k=!1;return(async()=>{or(!0),Yr(null);const{data:D}=await A.auth.getUser(),ee=D?.user?.id||null,fe=D?.user?.email||null,$e=localStorage.getItem("theme");$e&&I($e);const er=localStorage.getItem("emailNotifs");er&&J(er==="1");const it=localStorage.getItem("pushNotifs");if(it&&F(it==="1"),!ee){or(!1),Yr("Please sign in.");return}if(k)return;f(ee),v(fe);const[ur,yi,ga]=await Promise.all([A.from("profiles").select("name, city, timezone, interests, avatar_url, allow_ratings, rating_avg, rating_count").eq("user_id",ee).maybeSingle(),A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",ee).eq("status","active").in("role",["owner","host"]),A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",ee).eq("status","active")]);if(!k){const ot=ur.data||{};b(ot?.name??""),he(ot?.city??""),re(ot?.timezone??"UTC"),ot?.timezone||re(vi());const ln=Array.isArray(ot?.interests)?ot.interests:[];$(ln.join(", ")),L(ot?.avatar_url??null),ne(ot?.allow_ratings??!0),we(Number(ot?.rating_avg??0)),et(Number(ot?.rating_count??0)),z(yi.count??0),_e(ga.count??0),or(!1)}(async()=>{const{data:ot,error:ln}=await A.from("group_members").select("group_id, created_at").eq("user_id",ee).eq("status","active").in("role",["owner","host"]).order("created_at",{ascending:!1}).limit(20);!k&&ln&&console.warn("createdMemberships error",ln);const zn=Array.from(new Set((ot??[]).map(Oe=>Oe.group_id))).filter(Boolean);let xi=[];if(zn.length){const{data:Oe}=await A.from("groups").select("id,title,game,category,created_at").in("id",zn).order("created_at",{ascending:!1}).limit(20);xi=Oe??[]}if(!k){const Oe=new Set,rt=xi.filter(ct=>ct?.id&&!Oe.has(ct.id)&&Oe.add(ct.id)).slice(0,5);At(rt)}const{data:_s,error:Fn}=await A.from("group_members").select("group_id, created_at").eq("user_id",ee).eq("status","active").order("created_at",{ascending:!1}).limit(20);!k&&Fn&&console.warn("joinedMemberships error",Fn);const wi=Array.from(new Set((_s??[]).map(Oe=>Oe.group_id))).filter(Boolean);let jt=[];if(wi.length){const{data:Oe}=await A.from("groups").select("id,title,game,category,created_at").in("id",wi).order("created_at",{ascending:!1}).limit(20);jt=Oe??[]}if(!k){const Oe=new Set,rt=jt.filter(ct=>ct?.id&&!Oe.has(ct.id)&&Oe.add(ct.id)).slice(0,5);V(rt)}const{data:Mr}=await A.from("group_members").select("group_id, groups(game)").eq("user_id",ee);if(!k){const Oe=new Map;(Mr??[]).forEach(ct=>{const Dr=ct?.groups?.game||"Unknown";Oe.set(Dr,(Oe.get(Dr)||0)+1)});const rt=Array.from(Oe.entries()).map(([ct,Dr])=>({game:ct,count:Dr}));rt.sort((ct,Dr)=>Dr.count-ct.count||ct.game.localeCompare(Dr.game)),Qe(rt),De((Mr??[]).length)}const{data:_i}=await A.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`from_id.eq.${ee},to_id.eq.${ee}`).order("created_at",{ascending:!1}).limit(100),Sr=new Map;(_i??[]).forEach(Oe=>{const rt=Oe.from_id===ee?Oe.to_id:Oe.from_id;Sr.has(rt)||Sr.set(rt,{last_body:Oe.body,last_at:Oe.created_at,last_from_me:Oe.from_id===ee})});const bi=Array.from(Sr.keys());let bs=new Map;if(bi.length){const{data:Oe}=await A.from("profiles").select("user_id,name,avatar_url").in("user_id",bi);(Oe??[]).forEach(rt=>{bs.set(rt.user_id,{name:rt.name??"",avatar_url:rt.avatar_url??null})})}const ki=bi.map(Oe=>{const rt=Sr.get(Oe),ct=bs.get(Oe)||{name:"",avatar_url:null};return{other_id:Oe,name:ct.name||Oe.slice(0,6),avatar_url:ct.avatar_url??null,last_body:rt.last_body,last_at:rt.last_at,last_from_me:rt.last_from_me,unread:!rt.last_from_me}});k||ai(ki),k||await $n(ee),k||await xs(ee)})()})(),()=>{k=!0}},[]);async function ma(){if(!u||!$t||!Xe.trim())return;const k=Xe.trim();Wt("");const{data:D,error:ee}=await A.from("direct_messages").insert({from_id:u,to_id:$t,body:k}).select("id,from_id,to_id,body,created_at").single();if(ee){Ae(ee.message);return}Ye(fe=>[...fe,D])}return us?c.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-neutral-600",children:"Loading…"}):wr?c.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-red-600",children:wr}):c.jsxs("div",{className:"mx-auto max-w-6xl px-4 pt-16 md:pt-20 pb-0",children:[c.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_360px]",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[c.jsx("div",{className:"grid h-16 w-16 place-content-center rounded-full bg-emerald-100 text-emerald-800 ring-1 ring-emerald-300/60 overflow-hidden",children:ys?c.jsx("img",{src:ys,alt:"",className:"h-16 w-16 object-cover"}):c.jsx("span",{className:"text-2xl font-semibold tracking-wide",children:da})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:la}),!p&&c.jsx("div",{className:"text-sm text-neutral-600",children:g}),c.jsxs("div",{className:"mt-1 flex items-center gap-3 text-sm text-neutral-700",children:[c.jsxs("span",{title:`${an.toFixed(1)} / 6 from ${ua} ratings`,className:"inline-flex items-center gap-1",children:[Array.from({length:6}).map((k,D)=>c.jsx("span",{children:D<Math.round(an||0)?"★":"☆"},D)),c.jsxs("span",{className:"ml-1 text-xs text-neutral-500",children:["(",ua||0,")"]})]}),p&&c.jsxs("div",{className:"ml-2 inline-flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-neutral-500",children:"Rate:"}),Array.from({length:6}).map((k,D)=>{const ee=D+1,fe=(vs??gs)>=ee;return c.jsx("button",{type:"button",disabled:!kt||Ht,onMouseEnter:()=>rn(ee),onMouseLeave:()=>rn(null),onClick:()=>Gt(ee),className:`text-lg leading-none ${!kt||Ht?"opacity-40 cursor-not-allowed":"hover:scale-110 transition-transform"} ${fe?"text-emerald-600":"text-neutral-400"}`,"aria-label":`Give ${ee} star${ee>1?"s":""}`,title:kt?`${ee} / 6`:"Ratings disabled",children:fe?"★":"☆"},ee)}),c.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(0),className:`ml-1 rounded border border-black/10 px-2 py-0.5 text-[11px] ${!kt||Ht?"opacity-40 cursor-not-allowed":"hover:bg-black/[0.04]"}`,title:kt?"Clear my rating":"Ratings disabled",children:"Clear"}),!ca&&c.jsxs("span",{className:"ml-1 text-[11px] text-neutral-500",children:["Next in ",gi(Le)]})]})]}),!p&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsxs("div",{ref:en,className:"relative",children:[c.jsxs("button",{onClick:()=>$r(k=>!k),className:"ml-2 inline-flex items-center gap-2 rounded-full border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",title:"Notifications","aria-label":"Notifications",children:[c.jsx("span",{className:"text-base",children:"🔔"}),ds>0&&c.jsx("span",{className:"rounded-full bg-emerald-600 px-2 py-0.5 text-white text-xs leading-none",children:ds})]}),li&&c.jsxs("div",{className:"absolute right-0 z-50 mt-1 w-96 max-w-[92vw] overflow-hidden rounded-xl border border-black/10 bg-white shadow-xl",children:[c.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-neutral-50 px-3 py-2",children:[c.jsx("div",{className:"text-sm font-medium text-neutral-800",children:"Notifications"}),c.jsx("span",{className:"rounded-full bg-neutral-200 px-2 py-0.5 text-[11px] text-neutral-800",children:ds})]}),c.jsxs("div",{className:"max-h-80 overflow-y-auto p-2",children:[c.jsxs("div",{className:"mb-2",children:[c.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Friend requests"}),Ir.length===0?c.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new requests"}):c.jsx("ul",{className:"space-y-1",children:Ir.slice(0,5).map(k=>{const D=k.user_id_a===u?k.user_id_b:k.user_id_a,ee=lr.get(D)?.name||D.slice(0,6);return c.jsxs("li",{className:"flex items-center justify-between rounded-md border border-black/10 px-2 py-1.5",children:[c.jsx("span",{className:"truncate text-sm text-neutral-800",children:ee}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>In(D),className:"rounded-md bg-emerald-600 px-2 py-0.5 text-xs text-white",children:"Accept"}),c.jsx("button",{onClick:()=>on(D),className:"rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Decline"})]})]},k.id)})})]}),c.jsxs("div",{className:"mb-2",children:[c.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Group messages"}),Rr.length===0?c.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new messages"}):c.jsx("ul",{className:"divide-y",children:Rr.slice(0,5).map(k=>c.jsxs("li",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"min-w-0 pr-2",children:[c.jsx("div",{className:"truncate text-sm font-medium text-neutral-900",children:k.group_title||k.group_id.slice(0,6)}),c.jsx("div",{className:"truncate text-xs text-neutral-600",children:k.preview})]}),c.jsx("button",{onClick:()=>Mn(k.group_id),className:"shrink-0 rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Open"})]},`${k.group_id}-${k.created_at}`))})]})]})]})]}),c.jsx("button",{onClick:jo,className:"ml-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Settings"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[c.jsx(Mf,{label:"Groups Created",value:me,to:"/browse?created=1"}),c.jsx(Mf,{label:"Games Played",value:je,onClick:()=>Xt(!0)})]}),Ir.length>0&&c.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[c.jsx("h3",{className:"text-base font-medium text-neutral-900",children:"Friend Requests"}),c.jsx("span",{className:"text-xs text-neutral-600",children:Ir.length})]}),c.jsx("ul",{className:"divide-y",children:Ir.map(k=>{const D=k.user_id_a===u?k.user_id_b:k.user_id_a;return c.jsxs("li",{className:"flex items-center justify-between py-2",children:[c.jsx("div",{className:"text-sm text-neutral-800",children:D}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>In(D),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"}),c.jsx("button",{onClick:()=>on(D),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Decline"})]})]},k.id)})})]}),c.jsxs("section",{className:"mt-8 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-neutral-600",children:"Show:"}),c.jsxs("div",{className:"inline-flex rounded-lg border border-black/10 bg-white p-0.5",children:[c.jsx("button",{onClick:()=>ce("created"),className:`px-3 py-1.5 text-sm rounded-md ${se==="created"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Created"}),c.jsx("button",{onClick:()=>ce("joined"),className:`px-3 py-1.5 text-sm rounded-md ${se==="joined"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Joined"}),c.jsx("button",{onClick:()=>ce("all"),className:`px-3 py-1.5 text-sm rounded-md ${se==="all"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"All"})]})]}),c.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[c.jsx(lu,{title:se==="created"?"Created by me":se==="joined"?"Joined":"All my groups",count:Pn,empty:"No groups yet.",children:ls.map(k=>{const D=k?.id??k?.group_id??k?.group?.id??k?.groups?.id;return D?c.jsx(w0,{id:D,title:k.title,meta:[k.category||"–",k.game||""].filter(Boolean).join(" · ")},D):null})}),c.jsx(lu,{title:"Friends",count:tn.length,empty:"No friends yet.",children:tn.map(k=>c.jsx(_0,{_otherId:k.other_id,name:k.name,avatarUrl:k.avatar_url,lastBody:k.last_body,lastAt:k.last_at,unread:k.unread,onOpen:()=>An(k.other_id)},k.other_id))})]})]}),qt.length>0&&c.jsx("section",{className:"mt-6",children:c.jsx(lu,{title:"Group Invitations",count:qt.length,empty:"No invitations",children:qt.map(k=>c.jsxs("li",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-neutral-900",children:k.group_title||k.group_id.slice(0,6)}),c.jsxs("div",{className:"text-xs text-neutral-600",children:["Role: ",k.role||"member"," · Status: ",k.status]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>kr(k.group_id),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs text-white",children:"Accept"}),c.jsx("button",{onClick:()=>Un(k.group_id),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs",children:"Decline"})]})]},k.group_id))})})]}),!p&&_r&&c.jsxs("aside",{ref:Ar,className:"rounded-2xl border border-black/10 bg-white p-4 shadow-sm h-max sticky top-4 transition-all duration-300",children:[!$t&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-3 relative",children:[c.jsx("input",{value:Xr,onChange:k=>{cs(k.target.value),On(!0)},onFocus:()=>On(!0),onBlur:()=>setTimeout(()=>On(!1),120),placeholder:"Search friends…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),oi&&Xr.trim().length>0&&c.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-md border border-black/10 bg-white shadow",children:c.jsxs("ul",{children:[fi.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).slice(0,8).map(k=>c.jsxs("li",{className:"flex items-center justify-between gap-2 px-2 py-2 hover:bg-black/[0.03]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-8 w-8 rounded-full bg-neutral-200 grid place-items-center text-[11px] font-medium overflow-hidden",children:k.avatar_url?c.jsx("img",{src:k.avatar_url,alt:"",className:"h-8 w-8 rounded-full object-cover"}):k.name.slice(0,2).toUpperCase()}),c.jsx("div",{className:"text-sm text-neutral-900",children:k.name})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onMouseDown:D=>D.preventDefault(),onClick:()=>{cs(""),An(k.id)},className:"rounded-md border border-black/10 bg-white px-2 py-1 text-xs hover:bg-black/[0.04]",children:"Chat"}),c.jsx("button",{onMouseDown:D=>D.preventDefault(),onClick:()=>{cs(""),o(`/profile/${k.id}`)},className:"rounded-md bg-emerald-600 px-2 py-1 text-xs text-white hover:bg-emerald-700",children:"View"})]})]},k.id)),fi.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).length===0&&c.jsx("li",{className:"px-2 py-2 text-xs text-neutral-600",children:"No matches"})]})})]}),c.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:c.jsxs("ul",{children:[tn.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).map(k=>c.jsxs("li",{className:"flex items-center justify-between gap-2 px-1 py-2 hover:bg-black/[0.03] rounded cursor-pointer",onClick:()=>An(k.other_id),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center text-sm font-medium overflow-hidden",children:k.avatar_url?c.jsx("img",{src:k.avatar_url,alt:"",className:"h-10 w-10 rounded-full object-cover"}):k.name.slice(0,2).toUpperCase()}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-neutral-900",children:k.name}),c.jsxs("div",{className:"text-xs text-neutral-600 truncate max-w-[180px]",children:[k.last_from_me?"You: ":"",k.last_body]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[10px] text-neutral-500",children:mh(k.last_at)}),k.unread&&c.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"})]})]},k.other_id)),tn.length===0&&c.jsx("li",{className:"px-1 py-2 text-xs text-neutral-600",children:"No conversations yet."})]})})]}),$t&&c.jsxs("div",{className:"flex h-[70vh] flex-col",children:[c.jsxs("div",{className:"mb-2 flex items-center gap-3 border-b border-black/10 pb-2",children:[c.jsx("button",{onClick:()=>Q(null),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Back"}),c.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:Kt.avatar?c.jsx("img",{src:Kt.avatar,alt:"",className:"h-9 w-9 rounded-full object-cover"}):Kt.name.slice(0,2).toUpperCase()}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-neutral-900",children:Kt.name}),c.jsx("div",{className:"text-[11px] text-neutral-500",children:"Direct message"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto rounded-md border border-black/10 p-3 text-sm",children:[xe&&c.jsx("div",{className:"text-neutral-600",children:"Loading…"}),Te&&c.jsx("div",{className:"mb-2 rounded border border-red-200 bg-red-50 px-2 py-1 text-red-700",children:Te}),!xe&&be.length===0&&c.jsx("div",{className:"text-neutral-600",children:"Say hi 👋"}),!xe&&be.map(k=>c.jsx("div",{className:`mb-2 flex ${k.from_id===u?"justify-end":"justify-start"}`,children:c.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-1.5 ${k.from_id===u?"bg-emerald-600 text-white":"bg-neutral-100"}`,children:k.body})},k.id)),c.jsx("div",{ref:ii})]}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx("input",{value:Xe,onChange:k=>Wt(k.target.value),onKeyDown:k=>{k.key==="Enter"&&ma()},placeholder:"Type a message…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),c.jsx("button",{onClick:ma,className:"rounded-md bg-emerald-600 px-3 py-2 text-sm text-white",children:"Send"})]})]})]}),!p&&!_r&&c.jsxs("button",{onClick:()=>{Zr(!0)},className:"fixed bottom-4 right-4 z-40 h-12 w-12 rounded-full bg-emerald-600 text-white shadow-lg flex items-center justify-center hover:bg-emerald-700 transition relative",title:"Open chat","aria-label":"Open chat",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6",children:c.jsx("path",{d:"M3.25 6.75A2.75 2.75 0 0 1 6 4h12a2.75 2.75 0 0 1 2.75 2.75v6.5A2.75 2.75 0 0 1 18 16H9.414a1.75 1.75 0 0 0-1.238.512l-2.476 2.476A.75.75 0 0 1 4 18.75V6.75z"})}),di.length>0&&c.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-emerald-400 text-[10px] font-medium text-white animate-pulse",children:di.length})]})]}),bt&&c.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:c.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Games Played"}),c.jsx("button",{type:"button",onClick:()=>Xt(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),c.jsxs("div",{className:"mb-2 text-sm text-neutral-700",children:["Total sessions joined: ",c.jsx("span",{className:"font-medium text-neutral-900",children:je})]}),c.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:Ue.length===0?c.jsx("div",{className:"text-sm text-neutral-600",children:"No games yet."}):c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-left text-neutral-500",children:[c.jsx("th",{className:"py-1 pr-2",children:"Game"}),c.jsx("th",{className:"py-1 pr-2",children:"Times"}),c.jsx("th",{className:"py-1 pr-2",children:"Share"})]})}),c.jsx("tbody",{children:Ue.map(k=>{const D=je>0?Math.round(k.count/je*100):0;return c.jsxs("tr",{className:"border-t border-black/5",children:[c.jsx("td",{className:"py-1 pr-2 text-neutral-900",children:k.game}),c.jsx("td",{className:"py-1 pr-2",children:k.count}),c.jsxs("td",{className:"py-1 pr-2 text-neutral-600",children:[D,"%"]})]},k.game)})})]})})]})}),Fe&&c.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:c.jsxs("form",{onSubmit:Dn,className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Edit Profile"}),c.jsx("button",{type:"button",onClick:()=>qe(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Name"}),c.jsx("input",{value:We,onChange:k=>Be(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"Your name",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Avatar"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:C?c.jsx("img",{src:C,alt:"",className:"h-10 w-10 object-cover"}):c.jsx("span",{className:"text-xs",children:Qr})}),c.jsx("input",{type:"file",accept:"image/*",onChange:ws,className:"text-sm"}),X&&c.jsx("span",{className:"text-xs text-neutral-600",children:"Uploading…"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"City"}),c.jsx("input",{value:G,onChange:k=>he(k.target.value),onBlur:()=>{(!pe||pe==="UTC")&&re(vi())},className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"City"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Timezone"}),c.jsx("input",{value:pe,onChange:k=>re(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"e.g., Europe/Berlin"}),c.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Auto-fills from your device when you set City. You can still override manually."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Interests"}),c.jsx("input",{value:U,onChange:k=>$(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"comma, separated, tags"}),c.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Saved as tags in your profile."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Theme"}),c.jsxs("select",{value:M,onChange:k=>I(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",children:[c.jsx("option",{value:"system",children:"System"}),c.jsx("option",{value:"light",children:"Light"}),c.jsx("option",{value:"dark",children:"Dark"})]}),c.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Light/Dark applies after save."})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:"emailNotifs",type:"checkbox",checked:N,onChange:k=>J(k.target.checked),className:"h-4 w-4 rounded border-black/20"}),c.jsx("label",{htmlFor:"emailNotifs",className:"text-sm text-neutral-800",children:"Email notifications"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{id:"pushNotifs",type:"checkbox",checked:Z,onChange:k=>F(k.target.checked),className:"h-4 w-4 rounded border-black/20"}),c.jsx("label",{htmlFor:"pushNotifs",className:"text-sm text-neutral-800",children:"Push notifications"})]}),c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-neutral-800",children:"Allow profile ratings"}),c.jsx("div",{className:"text-[11px] text-neutral-500",children:"Others can rate you when enabled."})]}),c.jsx("button",{type:"button",onClick:()=>ha(!Y),className:`h-7 w-12 rounded-full ${Y?"bg-emerald-600":"bg-neutral-300"} relative`,"aria-pressed":Y,children:c.jsx("span",{className:`absolute top-0.5 h-6 w-6 rounded-full bg-white transition ${Y?"right-0.5":"left-0.5"}`})})]}),R&&c.jsx("div",{className:"mt-3 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:R}),c.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[c.jsx("button",{type:"button",onClick:pa,className:"rounded-md border border-red-200 bg-red-50 px-3 py-1.5 text-sm text-red-700",children:"Log out"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>qe(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:T,className:`rounded-md px-3 py-1.5 text-sm text-white ${T?"bg-neutral-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:T?"Saving…":"Save"})]})]})]})}),sa&&c.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:c.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:hs?c.jsx("img",{src:hs,alt:"",className:"h-12 w-12 rounded-full object-cover"}):c.jsx("span",{className:"text-sm font-medium",children:(fs||"").slice(0,2).toUpperCase()})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"text-base font-semibold text-neutral-900",children:fs}),c.jsx("div",{className:"flex items-center text-neutral-800",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(5),className:`text-lg ${!kt||Ht?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"} ${gs===5?"text-green-600":"text-neutral-400"}`,title:kt?"Thumbs up":"Ratings disabled",children:"👍"}),c.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(1),className:`text-lg ${!kt||Ht?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"} ${gs===1?"text-red-600":"text-neutral-400"}`,title:kt?"Thumbs down":"Ratings disabled",children:"👎"}),c.jsxs("span",{className:"ml-1 text-[11px] text-neutral-500",children:["(",oa,")"]})]})})]}),c.jsx("div",{className:"text-xs text-neutral-600",children:Tt})]})]}),c.jsx("button",{onClick:()=>ia(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"rounded-md border border-black/10 p-3 text-sm",children:[c.jsx("div",{className:"mb-2 font-medium text-neutral-800",children:"Friend status"}),Ln==="accepted"&&c.jsx("div",{className:"text-emerald-700",children:"Friends"}),Ln==="pending_in"&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-neutral-700",children:"Requested you"}),c.jsx("button",{onClick:()=>Tt&&In(Tt),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"})]}),Ln==="pending_out"&&c.jsx("div",{className:"text-neutral-700",children:"Request sent"}),Ln==="none"&&Tt&&c.jsx("button",{onClick:()=>fa(Tt),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Add Friend"}),Ln==="accepted"&&Tt&&c.jsx("button",{onClick:()=>on(Tt),className:"ml-2 rounded-md border border-black/10 px-3 py-1.5 text-sm",children:"Remove"})]})})]})})]})}function Mf({label:o,value:n,to:s,onClick:a}){const l=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-sm text-neutral-600",children:o}),c.jsx("div",{className:"mt-1 text-2xl font-semibold text-neutral-900",children:n})]});return s?c.jsx(Ve,{to:s,className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm hover:shadow",children:l}):c.jsx("button",{onClick:a,className:"w-full rounded-xl border border-black/10 bg-white p-4 text-left shadow-sm hover:shadow",children:l})}function lu({title:o,count:n,empty:s,children:a}){return c.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[c.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[c.jsx("h3",{className:"text-base font-medium text-neutral-900",children:o}),c.jsx("span",{className:"text-xs text-neutral-600",children:n})]}),Nu.Children.count(a)===0?c.jsx("p",{className:"text-sm text-neutral-600",children:s}):c.jsx("ul",{className:"divide-y",children:a})]})}function w0({id:o,title:n,meta:s}){const a=String(o).slice(0,8).toUpperCase();return c.jsxs("li",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{children:[c.jsx(Ve,{to:`/group/${o}`,className:"font-medium text-neutral-900 hover:underline",children:n}),c.jsx("div",{className:"text-xs text-neutral-600",children:s}),c.jsxs("div",{className:"text-[11px] text-neutral-500 tracking-wider",children:["Code: ",a]})]}),c.jsx(Ve,{to:`/group/${o}`,className:"text-sm text-emerald-700 hover:underline",children:"Open"})]})}function _0({_otherId:o,name:n,avatarUrl:s,lastBody:a,lastAt:l,unread:u,onOpen:f}){return c.jsxs("li",{className:"flex items-center justify-between py-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:s?c.jsx("img",{src:s,alt:"",className:"h-9 w-9 rounded-full object-cover"}):n.slice(0,2).toUpperCase()}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-neutral-900",children:n}),c.jsx("div",{className:"text-xs text-neutral-600 truncate max-w-[220px]",children:a})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] text-neutral-500",children:mh(l)}),u&&c.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),c.jsx(Ve,{to:`/profile/${o}`,className:"text-sm text-neutral-700 hover:underline",children:"View"}),c.jsx("button",{onClick:f,className:"text-sm text-emerald-700 hover:underline",children:"Chat"})]})]})}function b0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function Ji(o,n){return c.jsx("span",{className:`rounded-full border px-2 py-0.5 text-xs ${o}`,children:n})}function k0({text:o}){const n=(o||"").trim().slice(0,1).toUpperCase()||"G";return c.jsx("div",{className:"flex h-9 w-9 select-none items-center justify-center rounded-full border border-black/10 bg-neutral-100 text-sm font-semibold text-neutral-700",children:n})}function j0(){const{game:o=""}=wo(),n=(o||"").toLowerCase().replace(/[^a-z0-9]+/g,"").trim(),s=(o||"").replace(/-/g," ").trim(),[a,l]=y.useState([]),[u,f]=y.useState(null),[p,g]=y.useState(!0),[v,x]=y.useState(null),[b,C]=y.useState(new Set),[L,M]=y.useState(null);y.useEffect(()=>{let N=!0;return(async()=>{g(!0);const{data:J,error:Z}=await A.from("groups").select("*").eq("game",n).order("created_at",{ascending:!1}).limit(100);N&&(Z?f(Z.message):l(J??[]),g(!1))})(),()=>{N=!1}},[n]),y.useEffect(()=>{let N=!0;return(async()=>{const{data:J}=await A.auth.getUser(),Z=J?.user?.id??null;if(!N)return;if(x(Z),!Z){C(new Set);return}const{data:F,error:Y}=await A.from("group_members").select("group_id").eq("user_id",Z);if(N){if(Y){C(new Set);return}C(new Set((F??[]).map(ne=>ne.group_id)))}})(),()=>{N=!1}},[]);async function I(N){if(!v){f("Sign in required");return}M(N);const{error:J}=await A.from("group_members").insert({group_id:N,user_id:v,role:"member"});if(J)f(J.message);else{const Z=new Set(b);Z.add(N),C(Z)}M(null)}return c.jsxs("main",{className:"mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[c.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:mb-8 sm:flex-row sm:items-center",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-neutral-900 sm:text-3xl",children:["Groups · ",s]}),c.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Join an existing room or create your own."}),c.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:[a.length," group",a.length===1?"":"s"]})]}),c.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[c.jsx(Ve,{to:"/browse",className:"flex-1 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] sm:flex-none",children:"Back"}),c.jsx(Ve,{to:"/create",className:"flex-1 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 sm:flex-none",children:"New Group"})]})]}),p&&c.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/80 p-4 shadow-sm backdrop-blur",children:c.jsx("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((N,J)=>c.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[c.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},J))})}),u&&c.jsx("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:u}),!p&&!u&&a.length===0&&c.jsx("div",{className:"mt-6 rounded-2xl border border-dashed border-black/10 bg-white/80 p-10 text-center shadow-sm backdrop-blur",children:c.jsxs("div",{className:"mx-auto flex max-w-sm flex-col items-center justify-center gap-3 text-neutral-600",children:[c.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[c.jsx("path",{d:"M8 21h8"}),c.jsx("path",{d:"M12 17v4"}),c.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),c.jsxs("div",{className:"text-lg font-medium",children:["No groups for “",s,"”"]}),c.jsx("div",{className:"text-sm",children:"Be the first to create one."}),c.jsx(Ve,{to:"/create",className:"mt-2 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110",children:"New Group"})]})}),c.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/80 p-4 shadow-sm backdrop-blur",children:c.jsx("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(N=>c.jsx("li",{className:"group rounded-xl border border-black/10 bg-white p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md focus-within:ring-emerald-500 focus-within:ring-2 focus-within:ring-offset-2",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[c.jsx(k0,{text:N.game||N.name||N.city||""}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"truncate text-base font-semibold text-neutral-900",children:N.name||N.title||N.group_name||"Untitled group"}),Ji("border-emerald-300 bg-emerald-50 text-emerald-700",N.is_online?"Online":"In-person")]}),N.description&&c.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-neutral-600",children:N.description}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 text-xs text-neutral-700",children:[Ji("border-black/10 bg-neutral-50",N.category?`#${N.category}`:"#general"),N.game&&Ji("border-black/10 bg-neutral-50",N.game),N.city&&Ji("border-black/10 bg-neutral-50",N.city),N.created_at&&Ji("border-black/10 bg-neutral-50",b0(N.created_at))]}),N.is_online&&N.online_link&&c.jsx("a",{className:"mt-3 inline-block text-sm underline",href:N.online_link,target:"_blank",rel:"noreferrer",children:"Join link"})]})]}),c.jsx("div",{className:"flex shrink-0 flex-col items-stretch gap-2 sm:flex-row sm:items-center",children:b.has(N.id)?c.jsx(Ve,{to:`/group/${N.id}`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:"View"}):c.jsx("button",{onClick:()=>I(N.id),disabled:L===N.id,className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:L===N.id?"Joining…":"Join"})})]})},N.id))})})]})}function S0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function Zs({children:o,className:n=""}){return c.jsx("span",{className:`rounded-full border px-2 py-0.5 text-xs ${n}`,children:o})}function N0(){const[o,n]=y.useState([]),[s,a]=y.useState(!0),[l,u]=y.useState(null);return y.useEffect(()=>{let f=!0;return(async()=>{try{a(!0),u(null);const{data:{session:p}}=await A.auth.getSession(),g=p?.user?.id;if(!g){n([]);return}const{data:v,error:x}=await A.from("group_members").select("group_id").eq("user_id",g);if(x)throw x;const b=(v??[]).map(M=>M.group_id).filter(Boolean);if(b.length===0){n([]);return}const{data:C,error:L}=await A.from("groups").select("id, title, name, description, category, game, city, capacity, is_online, created_at").in("id",b).order("created_at",{ascending:!1});if(L)throw L;if(!f)return;n(C??[])}catch(p){if(!f)return;u(p?.message??"Failed to load your groups"),n([])}finally{f&&a(!1)}})(),()=>{f=!1}},[]),c.jsxs("main",{className:"mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[c.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:mb-8 sm:flex-row sm:items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-neutral-900 sm:text-3xl",children:"My Groups"}),c.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Groups you’ve joined or been added to."})]}),c.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[c.jsx(Ve,{to:"/browse",className:"flex-1 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] sm:flex-none",children:"Back"}),c.jsx(Ve,{to:"/create",className:"flex-1 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 sm:flex-none",children:"New Group"})]})]}),s&&c.jsx("ul",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((f,p)=>c.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[c.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),c.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},p))}),!!l&&c.jsx("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:l}),!s&&!l&&o.length===0&&c.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center gap-3 rounded-xl border border-dashed border-black/10 bg-white/70 p-10 text-center text-neutral-600",children:[c.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[c.jsx("path",{d:"M8 21h8"}),c.jsx("path",{d:"M12 17v4"}),c.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),c.jsxs("div",{className:"text-lg font-medium",children:["No groups for “","","”"]}),c.jsx("div",{className:"text-sm",children:"Be the first to create one."}),c.jsx(Ve,{to:"/create",className:"mt-2 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110",children:"New Group"})]}),c.jsx("ul",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(f=>c.jsx("li",{className:"group rounded-xl border border-black/10 bg-white p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"truncate text-base font-semibold text-neutral-900",children:f.title||f.name||f.group_name||"Untitled group"}),c.jsx(Zs,{className:f.is_online?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-black/10 bg-neutral-50 text-neutral-700",children:f.is_online?"Online":"In-person"})]}),f.description&&c.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-neutral-600",children:f.description}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 text-xs text-neutral-700",children:[c.jsx(Zs,{className:"border-black/10 bg-neutral-50",children:f.category?`#${f.category}`:"#general"}),f.game&&c.jsx(Zs,{className:"border-black/10 bg-neutral-50",children:f.game}),f.city&&c.jsx(Zs,{className:"border-black/10 bg-neutral-50",children:f.city}),f.capacity&&c.jsxs(Zs,{className:"border-black/10 bg-neutral-50",children:[f.capacity," slots"]}),f.created_at&&c.jsx(Zs,{className:"border-black/10 bg-neutral-50",children:S0(f.created_at)})]})]}),c.jsx("div",{className:"flex shrink-0 items-center gap-2",children:c.jsx(Ve,{to:`/group/${f.id}`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"View"})})]})},f.id))})]})}const C0=y.lazy(()=>as(()=>import("./Onboarding-B-aOOYAi.js"),[])),E0=y.lazy(()=>as(()=>import("./JoinByCode-Bf-BP3-Z.js"),[])),gh=y.createContext({user:null,loading:!0});function Uu(){return y.useContext(gh)}function T0({children:o}){const[n,s]=y.useState(null),[a,l]=y.useState(!0);y.useEffect(()=>{let f=!0;(async()=>{const{data:g}=await A.auth.getUser();f&&(s(g.user??null),l(!1))})();const{data:{subscription:p}}=A.auth.onAuthStateChange((g,v)=>{s(v?.user??null)});return()=>{p.unsubscribe(),f=!1}},[]);const u=y.useMemo(()=>({user:n,loading:a}),[n,a]);return c.jsx(gh.Provider,{value:u,children:o})}function P0({children:o}){const{user:n,loading:s}=Uu(),a=yr();return s?null:n?c.jsx(c.Fragment,{children:o}):c.jsx(_o,{to:"/onboarding",replace:!0,state:{from:a.pathname}})}function O0(){return c.jsx("div",{className:"fixed fab-offset-top left-4 z-50",children:c.jsx(Ve,{to:"/onboarding",className:"flex items-center justify-center h-10 w-10 rounded-full border border-black/10 bg-white/90 text-xl shadow-md hover:bg-black/[0.04]","aria-label":"Onboarding",title:"Onboarding",children:"🎯"})})}function R0(){const{user:o}=Uu(),s=yr().pathname.startsWith("/onboarding");return!o||s?null:c.jsx("div",{className:"fixed inset-x-0 bottom-4 z-[60] flex items-center justify-center pointer-events-none",children:c.jsxs("nav",{className:"pointer-events-auto flex items-center gap-4 rounded-full border border-black/10 bg-white/90 backdrop-blur px-4 py-2 shadow-lg",children:[c.jsx(Ve,{to:"/browse",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Browse",title:"Browse",children:c.jsx("span",{className:"text-2xl",children:"🔍"})}),c.jsx(Ve,{to:"/profile",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Home",title:"Home",children:c.jsx("span",{className:"text-2xl",children:"🏠"})}),c.jsx(Ve,{to:"/create",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Create group",title:"Create group",children:c.jsx("span",{className:"text-2xl",children:"➕"})})]})})}class L0 extends Nu.Component{constructor(n){super(n),this.state={error:null}}static getDerivedStateFromError(n){return{error:n}}render(){return this.state.error?c.jsx("div",{className:"grid min-h-screen place-items-center p-6",children:c.jsxs("div",{className:"max-w-md text-center",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Something broke"}),c.jsx("p",{className:"text-sm text-neutral-600 break-words mt-2",children:String(this.state.error?.message??this.state.error)}),c.jsx("button",{className:"mt-4 rounded-md border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/[0.04]",onClick:()=>location.reload(),children:"Reload"})]})}):this.props.children}}function A0(){const{user:o,loading:n}=Uu();return n?null:c.jsx(_o,{to:o?"/profile":"/onboarding",replace:!0})}function $0(){const{id:o}=wo();return c.jsx(_o,{to:`/group/${o}`,replace:!0})}function I0(){y.useEffect(()=>{window.scrollTo(0,0)},[]),y.useEffect(()=>{try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}},[]);const o=yr();return y.useEffect(()=>{window.scrollTo(0,0)},[o.pathname,o.search]),c.jsx("div",{id:"page-root",className:"min-h-dvh flow-root flex flex-col",children:c.jsx(T0,{children:c.jsxs(c0,{children:[c.jsx(O0,{}),c.jsx(R0,{}),c.jsx(L0,{children:c.jsx(y.Suspense,{fallback:c.jsx("div",{className:"grid min-h-dvh place-items-center text-sm text-neutral-600",children:"Loading…"}),children:c.jsxs(Gm,{children:[c.jsx(Lt,{path:"/",element:c.jsx(A0,{})}),c.jsx(Lt,{path:"/onboarding",element:c.jsx(C0,{})}),c.jsx(Lt,{path:"/browse",element:c.jsx(f0,{})}),c.jsx(Lt,{path:"/groups",element:c.jsx(x0,{})}),c.jsx(Lt,{path:"/invite/:code",element:c.jsx(E0,{})}),c.jsxs(Lt,{element:c.jsx(P0,{children:c.jsx(Vm,{})}),children:[c.jsx(Lt,{path:"/profile",element:c.jsx(Uf,{})}),c.jsx(Lt,{path:"/profile/:userId",element:c.jsx(Uf,{})}),c.jsx(Lt,{path:"/create",element:c.jsx(p0,{})}),c.jsx(Lt,{path:"/group/:id",element:c.jsx(m0,{})}),c.jsx(Lt,{path:"/groups/game/:game",element:c.jsx(j0,{})}),c.jsx(Lt,{path:"/groups/mine",element:c.jsx(N0,{})})]}),c.jsx(Lt,{path:"/groups/:id",element:c.jsx($0,{})}),c.jsx(Lt,{path:"*",element:c.jsx(_o,{to:"/",replace:!0})})]})})})]})})})}Xp.createRoot(document.getElementById("root")).render(c.jsx(y.StrictMode,{children:c.jsx(tg,{children:c.jsx(I0,{})})}));export{yr as a,wo as b,c as j,y as r,A as s,is as u};
