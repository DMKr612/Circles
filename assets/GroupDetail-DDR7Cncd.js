const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatPanel-BJ2XJk2h.js","assets/index-D00RcDj2.js","assets/react-Dymf0t1b.js","assets/supabase-BesQZUkt.js","assets/index-DbuJxWDp.css","assets/useGroupPresence-CL2wzqAA.js","assets/x-BBpUlMKf.js","assets/map-pin-ioSrITvn.js","assets/send-BrvYNge2.js"])))=>i.map(i=>d[i]);
import{c as b,s as i,j as e,U as Me,_ as Ee}from"./index-D00RcDj2.js";import{f as Pe,i as Oe,u as Ve,c as a,L as $e}from"./react-Dymf0t1b.js";import{u as ze}from"./useGroupPresence-CL2wzqAA.js";import{M as Le}from"./map-pin-ioSrITvn.js";import{M as qe}from"./message-circle-B7JnKCEv.js";import{C as Te,X as Y}from"./x-BBpUlMKf.js";import{C as Fe}from"./clock-D9oEd5Np.js";import{P as Z}from"./plus-e5AM4hO1.js";import"./supabase-BesQZUkt.js";const Ie=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ee=b("check",Ie);const Ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ue=b("chevron-left",Ge);const Be=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],He=b("log-out",Be);const Re=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ae=b("pen",Re);const We=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Je=b("share-2",We);const Xe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ke=b("trash-2",Xe),Qe=a.lazy(()=>Ee(()=>import("./ChatPanel-BJ2XJk2h.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function ot(){const{id:g=""}=Pe(),q=Oe(),T=Ve(),[s,F]=a.useState(null),[te,I]=a.useState(!0),[Ye,u]=a.useState(null),[m,se]=a.useState(null),{isTogether:ae}=ze(g,m??void 0),[le,G]=a.useState(!1),x=!!(m&&s&&(m===s.host_id||(s?.creator_id??null)===m)),[U,v]=a.useState(!1),[re,ne]=a.useState(!1),[ie,p]=a.useState(!1),[oe,_]=a.useState(!1),[B,k]=a.useState(!1),[C,H]=a.useState(""),[R,A]=a.useState(!1),[de,W]=a.useState(!1),[ce,J]=a.useState(!1),[c,j]=a.useState(null),[ue,S]=a.useState([]),[xe,w]=a.useState({}),[h,D]=a.useState(0),[me,M]=a.useState(0),[X,N]=a.useState(null),[E,K]=a.useState([]),[P,O]=a.useState(!1),[V,fe]=a.useState("Schedule"),[Q,he]=a.useState(""),[y,pe]=a.useState("24h"),[$,be]=a.useState(""),z=a.useMemo(()=>c?.closes_at?new Date(c.closes_at)<new Date:!1,[c]);function ge(t,r){if(t==="closed")return"Voting Closed";if(!r)return"Open";const l=new Date(r).getTime()-Date.now();if(l<=0)return"Time Expired";const o=Math.floor(l/(1e3*60*60*24)),d=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(l%(1e3*60*60)/(1e3*60));return o>0?`${o}d ${d}h left`:d>0?`${d}h ${n}m left`:`${n}m left`}a.useEffect(()=>{T.hash==="#chat"&&v(!0)},[T.hash]),a.useEffect(()=>{let t=!1;return(async()=>{I(!0);const{data:r}=await i.auth.getUser();t||se(r.user?.id??null);const l=await i.from("groups").select("*").eq("id",g).maybeSingle();if(t||F(l.data??null),l.data&&H(l.data.purpose||""),l.data?.id){const{count:o}=await i.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",l.data.id).eq("status","active");t||D(o??0)}I(!1)})(),()=>{t=!0}},[g]),a.useEffect(()=>{let t=!1;return(async()=>{if(!s?.id){K([]);return}const{data:r}=await i.from("group_members").select("user_id, role, created_at, status, group_id, profiles(name, avatar_url)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),l=(r??[]).map(d=>({user_id:d.user_id,role:d.role,created_at:d.created_at,group_id:s.id,status:"active",name:d.profiles?.name??"User",avatar_url:d.profiles?.avatar_url??null}));if(t)return;K(l);const o=(await i.auth.getUser()).data.user?.id||null;o&&O(l.some(d=>d.user_id===o))})(),()=>{t=!0}},[s?.id]),a.useEffect(()=>{let t=!1;return(async()=>{if(!s?.id)return;const{data:r}=await i.from("group_polls").select("*").eq("group_id",s.id).order("created_at",{ascending:!1}).limit(1);if(t)return;const l=r&&r[0];if(j(l||null),!l){S([]),w({}),M(0);return}const{data:o}=await i.from("group_poll_options").select("*").eq("poll_id",l.id).order("created_at");if(t)return;S(o||[]);const{data:d}=await i.from("group_votes").select("option_id,user_id").eq("poll_id",l.id);if(t)return;const n={},f=new Set;d?.forEach(L=>{n[L.option_id]=(n[L.option_id]||0)+1,f.add(L.user_id)}),w(n),M(f.size)})(),()=>{t=!0}},[s?.id]);async function ve(){const{data:t}=await i.auth.getUser();if(!t.user){u("Please sign in.");return}await i.from("group_members").insert({group_id:g,user_id:t.user.id}),O(!0),D(r=>r+1)}async function je(){if(!(!s||!m)){if(m===s.host_id){u("Host cannot leave their own group.");return}await i.from("group_members").delete().match({group_id:s.id,user_id:m}),O(!1),D(t=>Math.max(0,t-1))}}async function we(){s?.code&&(navigator.clipboard.writeText(s.code),G(!0),setTimeout(()=>G(!1),1500))}async function Ne(){if(s?.id){W(!0);try{const{data:t,error:r}=await i.rpc("make_group_invite",{p_group_id:s.id,p_hours:168,p_max_uses:null});if(r)throw r;const l=`${window.location.origin}/invite/${t}`;await navigator.clipboard.writeText(l),J(!0),setTimeout(()=>J(!1),1500)}catch(t){u(t.message)}finally{W(!1)}}}async function ye(){!s||!m||window.confirm("Delete this group?")&&(await i.from("groups").delete().match({id:s.id,host_id:m}),q("/browse"))}async function _e(){if(!(!s||!x)){A(!0);try{const{error:t}=await i.from("groups").update({purpose:C}).eq("id",s.id);if(t)throw t;F(r=>r?{...r,purpose:C}:null),k(!1)}catch(t){u(t.message||"Failed to save description")}finally{A(!1)}}}async function ke(){if(!s||!x)return;const{data:t}=await i.auth.getUser();if(!t?.user)return;let r=null;if(y==="custom")$&&(r=new Date($).toISOString());else{const n=new Date,f=parseInt(y);n.setTime(n.getTime()+f*60*60*1e3),r=n.toISOString()}const l=(Q||"").split(/\r?\n/).map(n=>n.trim()).filter(Boolean).slice(0,20);l.some(n=>n.toLowerCase()==="not coming")||l.push("Not Coming");const{data:o,error:d}=await i.from("group_polls").insert({group_id:s.id,title:(V||"Schedule").trim(),created_by:t.user.id,closes_at:r}).select("id").single();if(d||!o?.id){console.error(d),u("Failed to create poll. Check permissions.");return}if(l.length){const n=l.map(f=>({poll_id:o.id,label:f}));await i.from("group_poll_options").insert(n)}p(!1),u("Voting created"),j({id:o.id,group_id:s.id,title:V,status:"open",closes_at:r,created_by:t.user.id}),S(l.map((n,f)=>({id:`temp-${f}`,poll_id:o.id,label:n,starts_at:null,place:null}))),w({})}async function Ce(){if(!(!c||!x)&&window.confirm("End voting? Everyone who hasn't voted will be marked as 'Not Coming'.")){N("closing");try{await i.rpc("resolve_poll",{p_poll_id:c.id}),j(t=>t&&{...t,status:"closed"}),u("Poll finalized.")}catch(t){u(t.message)}finally{N(null)}}}async function Se(){if(!c||!window.confirm("Delete this voting?"))return;const{error:t}=await i.from("group_polls").delete().eq("id",c.id);t?(u("Could not delete. Check database permissions."),console.error(t)):(j(null),u("Poll deleted."))}async function De(t){if(!c||z||c.status==="closed")return;N(t);const{data:r}=await i.auth.getUser();if(!r?.user){q("/login");return}await i.from("group_votes").upsert({poll_id:c.id,option_id:t,user_id:r.user.id},{onConflict:"poll_id,user_id"});const{data:l}=await i.from("group_votes").select("option_id,user_id").eq("poll_id",c.id),o={},d=new Set;l?.forEach(n=>{o[n.option_id]=(o[n.option_id]||0)+1,d.add(n.user_id)}),w(o),M(d.size),N(null)}return te?e.jsx("div",{className:"p-20 flex justify-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-neutral-300 border-t-black rounded-full"})}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"transition-all duration-300 min-h-screen bg-[#FDFBF7] pb-24 "+(U&&!re?"lg:mr-[min(92vw,520px)]":""),children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 pt-8 pb-6 px-4 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-full blur-3xl -z-10 opacity-60"}),e.jsxs("div",{className:"mx-auto max-w-5xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-neutral-500",children:[e.jsxs($e,{to:"/browse",className:"flex items-center gap-1 hover:text-black transition-colors",children:[e.jsx(Ue,{className:"h-4 w-4"})," Browse"]}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium text-neutral-800",children:"Group Detail"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-neutral-900 tracking-tight leading-tight mb-3",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide",children:s.category||"General"}),s.game&&e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold",children:s.game}),s.city&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(Le,{className:"h-3 w-3"})," ",s.city]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(Me,{className:"h-3 w-3"})," ",h," / ",s.capacity]})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:P?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>v(!0),className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(qe,{className:"h-4 w-4"})," Chat"]}),x&&e.jsxs("button",{onClick:Ne,className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(Je,{className:"h-4 w-4"})," ",de?"...":ce?"Copied":"Invite"]})]}):e.jsx("button",{onClick:ve,className:"h-10 px-6 rounded-full bg-emerald-600 text-white text-sm font-bold shadow-md hover:bg-emerald-700 hover:shadow-lg active:scale-95 transition-all",children:"Join Group"})})]})]})]}),e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8 grid gap-8 lg:grid-cols-[2fr_1fr]",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-2xl p-6 shadow-sm border border-neutral-200/60 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-neutral-900 flex items-center gap-2",children:"About this Circle"}),x&&!B&&e.jsx("button",{onClick:()=>k(!0),className:"p-1.5 rounded-full text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 transition-colors",children:e.jsx(Ae,{className:"h-4 w-4"})})]}),B?e.jsxs("div",{className:"animate-in fade-in duration-200",children:[e.jsx("textarea",{value:C,onChange:t=>H(t.target.value),className:"w-full min-h-[120px] p-3 rounded-xl border border-neutral-300 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none resize-y mb-3",placeholder:"What's the plan?"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-3 py-1.5 rounded-lg border border-neutral-200 text-xs font-bold hover:bg-neutral-50 text-neutral-600",children:"Cancel"}),e.jsx("button",{onClick:_e,disabled:R,className:"px-3 py-1.5 rounded-lg bg-black text-white text-xs font-bold hover:bg-neutral-800 disabled:opacity-50",children:R?"Saving...":"Save Changes"})]})]}):e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed whitespace-pre-wrap",children:s.purpose||e.jsx("span",{className:"italic text-neutral-400",children:"No description provided."})}),s.code&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-neutral-100 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-wider",children:"Invite Code"}),e.jsx("code",{className:"text-sm font-mono bg-neutral-100 px-2 py-1 rounded text-neutral-700 border border-neutral-200",children:String(s.code).toUpperCase()}),e.jsx("button",{onClick:we,className:"text-xs font-medium text-emerald-600 hover:underline",children:le?"Copied":"Copy"})]})]}),e.jsxs("section",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(Te,{className:"h-3 w-3"})," Created"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(Fe,{className:"h-3 w-3"})," Format"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:s.is_online?s.online_link?"Online (Link set)":"Online":"In Person"})]})]}),P&&x&&e.jsxs("button",{onClick:ye,className:"flex items-center gap-2 text-red-600 text-sm font-medium hover:text-red-700 transition-colors px-2",children:[e.jsx(Ke,{className:"h-4 w-4"})," Delete this group"]}),P&&!x&&e.jsxs("button",{onClick:je,className:"flex items-center gap-2 text-neutral-500 text-sm font-medium hover:text-neutral-800 transition-colors px-2",children:[e.jsx(He,{className:"h-4 w-4"})," Leave group"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-neutral-900 flex items-center gap-2",children:"Polls & Events"}),x&&e.jsx("button",{onClick:()=>p(!0),className:"p-1.5 bg-neutral-50 rounded-full text-neutral-600 shadow-sm hover:scale-105 active:scale-95 transition-all border border-neutral-200 hover:bg-white hover:border-neutral-300",children:e.jsx(Z,{className:"h-4 w-4"})})]}),c?e.jsxs("div",{className:"animate-in slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-bold text-neutral-900",children:c.title}),e.jsx("div",{className:`text-[10px] font-bold px-2 py-1 rounded-full border ${c.status==="closed"?"bg-neutral-200 text-neutral-600 border-neutral-300":z?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:ge(c.status,c.closes_at)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:ue.map(t=>{const r=xe[t.id]??0,o=t.label==="Not Coming"?r+(h-me):r,d=h>0?Math.round(o/h*100):0;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-neutral-100 rounded-lg transition-all duration-500",style:{width:`${d}%`}}),e.jsxs("div",{className:"relative flex items-center justify-between p-2.5 rounded-lg border border-neutral-100 hover:border-neutral-200 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-800 z-10",children:t.label}),e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-600",children:o}),c.status==="open"&&!z&&e.jsx("button",{onClick:()=>De(t.id),className:`h-6 w-6 rounded-full flex items-center justify-center border transition-all hover:scale-110 active:scale-95 ${X===t.id?"bg-black border-black text-white":"bg-white border-neutral-200 text-neutral-600"}`,children:X===t.id?e.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"}):e.jsx(ee,{className:"h-3 w-3"})})]})]})]},t.id)})}),x&&e.jsxs("div",{className:"flex flex-col gap-2 pt-3 border-t border-neutral-100",children:[c.status==="open"&&e.jsxs("button",{onClick:Ce,className:"w-full bg-black text-white text-xs font-bold py-3 rounded-xl hover:bg-neutral-800 shadow-sm flex items-center justify-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"})," End & Count Games"]}),c.status==="closed"&&e.jsxs("button",{onClick:()=>p(!0),className:"w-full bg-neutral-100 text-neutral-700 text-xs font-bold py-3 rounded-xl hover:bg-neutral-200 flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"})," Create New Vote"]}),e.jsx("button",{onClick:Se,className:"w-full text-red-600 text-xs font-bold py-2 hover:bg-red-50 rounded-xl",children:"Delete Poll"})]})]}):e.jsxs("div",{className:"text-center py-8 px-4 bg-neutral-50 rounded-xl border border-dashed border-neutral-200",children:[e.jsx("p",{className:"text-sm text-neutral-400 mb-2 font-medium",children:"No active polls"}),x&&e.jsx("button",{onClick:()=>p(!0),className:"text-xs text-black font-bold hover:underline",children:"Create one"})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-bold text-neutral-900",children:["Members (",h,")"]}),e.jsx("button",{onClick:()=>_(!0),className:"text-xs font-medium text-emerald-600 hover:underline",children:"View All"})]}),e.jsxs("div",{className:"flex -space-x-2 overflow-hidden cursor-pointer",onClick:()=>_(!0),children:[E.slice(0,5).map(t=>e.jsx("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-100 flex items-center justify-center text-[10px] font-bold text-neutral-500",title:t.name||"User",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"",className:"h-full w-full object-cover rounded-full"}):(t.name||"?").slice(0,1)},t.user_id)),h>5&&e.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-50 flex items-center justify-center text-[10px] font-bold text-neutral-400",children:["+",h-5]})]})]})]})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl p-6 shadow-2xl ring-1 ring-black/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"New Vote"}),e.jsx("button",{onClick:()=>p(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Topic"}),e.jsx("input",{value:V,onChange:t=>fe(t.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"e.g. When to play?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Duration"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:y,onChange:t=>pe(t.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-4 py-3 text-sm font-medium flex-1 outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"1",children:"1 Hour"}),e.jsx("option",{value:"24",children:"24 Hours"}),e.jsx("option",{value:"48",children:"2 Days"}),e.jsx("option",{value:"custom",children:"Custom..."})]}),y==="custom"&&e.jsx("input",{type:"datetime-local",value:$,onChange:t=>be(t.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-3 py-3 text-sm font-medium flex-[1.5] outline-none focus:ring-2 focus:ring-black"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Options (one per line)"}),e.jsx("textarea",{value:Q,onChange:t=>he(t.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none min-h-[100px]",placeholder:`Saturday 20:00
Sunday 14:00`}),e.jsx("p",{className:"text-[10px] text-neutral-400 mt-1 italic text-right",children:'"Not Coming" added automatically.'})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-5 py-2.5 text-sm font-bold text-neutral-500 hover:bg-neutral-50 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ke,className:"px-6 py-2.5 text-sm font-bold bg-black text-white rounded-xl shadow-lg hover:bg-neutral-800 active:scale-95 transition-all",children:"Create Vote"})]})]})]})}),oe&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-3xl p-6 shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-neutral-900",children:["Members (",E.length,")"]}),e.jsx("button",{onClick:()=>_(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:E.map(t=>e.jsx("div",{className:"flex items-center justify-between p-2 rounded-xl hover:bg-neutral-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 flex items-center justify-center overflow-hidden",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-sm font-bold text-neutral-500",children:(t.name||"?").slice(0,1)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-neutral-900",children:t.name||"User"}),ae(t.user_id)?e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 animate-in fade-in slide-in-from-left-1",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:"Here with you"})]}):e.jsxs(e.Fragment,{children:[t.role==="host"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Host"}),t.role==="owner"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Owner"}),t.role!=="host"&&t.role!=="owner"&&e.jsx("div",{className:"text-xs text-neutral-500 capitalize",children:t.role})]})]})]})},t.user_id))})]})}),U&&s&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>v(!1)}),e.jsx("div",{className:"relative w-full max-w-2xl h-[85vh] bg-white rounded-3xl shadow-2xl overflow-hidden ring-1 ring-black/10",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading..."}),children:e.jsx(Qe,{groupId:s.id,onClose:()=>{v(!1),ne(!1)},full:!0,setFull:()=>{}})})})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Group not found."})}export{ot as default};
