function Bp(o,n){for(var s=0;s<n.length;s++){const a=n[s];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in o)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(o,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}})();function Nu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function qp(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var s=function a(){var l=!1;try{l=this instanceof a}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var l=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:function(){return o[a]}})}),s}var Jl={exports:{}},Ki={},Ql={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function Wp(){if(Jd)return Pe;Jd=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.iterator;function N(w){return w===null||typeof w!="object"?null:(w=b&&w[b]||w["@@iterator"],typeof w=="function"?w:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function C(w,T,q){this.props=w,this.context=T,this.refs=I,this.updater=q||L}C.prototype.isReactComponent={},C.prototype.setState=function(w,T){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,T,"setState")},C.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function J(){}J.prototype=C.prototype;function ee(w,T,q){this.props=w,this.context=T,this.refs=I,this.updater=q||L}var F=ee.prototype=new J;F.constructor=ee,M(F,C.prototype),F.isPureReactComponent=!0;var Y=Array.isArray,ne=Object.prototype.hasOwnProperty,ae={current:null},we={key:!0,ref:!0,__self:!0,__source:!0};function Ee(w,T,q){var X,le={},me=null,z=null;if(T!=null)for(X in T.ref!==void 0&&(z=T.ref),T.key!==void 0&&(me=""+T.key),T)ne.call(T,X)&&!we.hasOwnProperty(X)&&(le[X]=T[X]);var ge=arguments.length-2;if(ge===1)le.children=q;else if(1<ge){for(var _e=Array(ge),Se=0;Se<ge;Se++)_e[Se]=arguments[Se+2];le.children=_e}if(w&&w.defaultProps)for(X in ge=w.defaultProps,ge)le[X]===void 0&&(le[X]=ge[X]);return{$$typeof:o,type:w,key:me,ref:z,props:le,_owner:ae.current}}function et(w,T){return{$$typeof:o,type:w.type,key:T,ref:w.ref,props:w.props,_owner:w._owner}}function Fe(w){return typeof w=="object"&&w!==null&&w.$$typeof===o}function qe(w){var T={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(q){return T[q]})}var We=/\/+/g;function Be(w,T){return typeof w=="object"&&w!==null&&w.key!=null?qe(""+w.key):T.toString(36)}function G(w,T,q,X,le){var me=typeof w;(me==="undefined"||me==="boolean")&&(w=null);var z=!1;if(w===null)z=!0;else switch(me){case"string":case"number":z=!0;break;case"object":switch(w.$$typeof){case o:case n:z=!0}}if(z)return z=w,le=le(z),w=X===""?"."+Be(z,0):X,Y(le)?(q="",w!=null&&(q=w.replace(We,"$&/")+"/"),G(le,T,q,"",function(Se){return Se})):le!=null&&(Fe(le)&&(le=et(le,q+(!le.key||z&&z.key===le.key?"":(""+le.key).replace(We,"$&/")+"/")+w)),T.push(le)),1;if(z=0,X=X===""?".":X+":",Y(w))for(var ge=0;ge<w.length;ge++){me=w[ge];var _e=X+Be(me,ge);z+=G(me,T,q,_e,le)}else if(_e=N(w),typeof _e=="function")for(w=_e.call(w),ge=0;!(me=w.next()).done;)me=me.value,_e=X+Be(me,ge++),z+=G(me,T,q,_e,le);else if(me==="object")throw T=String(w),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return z}function he(w,T,q){if(w==null)return w;var X=[],le=0;return G(w,X,"","",function(me){return T.call(q,me,le++)}),X}function pe(w){if(w._status===-1){var T=w._result;T=T(),T.then(function(q){(w._status===0||w._status===-1)&&(w._status=1,w._result=q)},function(q){(w._status===0||w._status===-1)&&(w._status=2,w._result=q)}),w._status===-1&&(w._status=0,w._result=T)}if(w._status===1)return w._result.default;throw w._result}var re={current:null},U={transition:null},$={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:U,ReactCurrentOwner:ae};function R(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:he,forEach:function(w,T,q){he(w,function(){T.apply(this,arguments)},q)},count:function(w){var T=0;return he(w,function(){T++}),T},toArray:function(w){return he(w,function(T){return T})||[]},only:function(w){if(!Fe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Pe.Component=C,Pe.Fragment=s,Pe.Profiler=l,Pe.PureComponent=ee,Pe.StrictMode=a,Pe.Suspense=g,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Pe.act=R,Pe.cloneElement=function(w,T,q){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var X=M({},w.props),le=w.key,me=w.ref,z=w._owner;if(T!=null){if(T.ref!==void 0&&(me=T.ref,z=ae.current),T.key!==void 0&&(le=""+T.key),w.type&&w.type.defaultProps)var ge=w.type.defaultProps;for(_e in T)ne.call(T,_e)&&!we.hasOwnProperty(_e)&&(X[_e]=T[_e]===void 0&&ge!==void 0?ge[_e]:T[_e])}var _e=arguments.length-2;if(_e===1)X.children=q;else if(1<_e){ge=Array(_e);for(var Se=0;Se<_e;Se++)ge[Se]=arguments[Se+2];X.children=ge}return{$$typeof:o,type:w.type,key:le,ref:me,props:X,_owner:z}},Pe.createContext=function(w){return w={$$typeof:h,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:c,_context:w},w.Consumer=w},Pe.createElement=Ee,Pe.createFactory=function(w){var T=Ee.bind(null,w);return T.type=w,T},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(w){return{$$typeof:p,render:w}},Pe.isValidElement=Fe,Pe.lazy=function(w){return{$$typeof:x,_payload:{_status:-1,_result:w},_init:pe}},Pe.memo=function(w,T){return{$$typeof:v,type:w,compare:T===void 0?null:T}},Pe.startTransition=function(w){var T=U.transition;U.transition={};try{w()}finally{U.transition=T}},Pe.unstable_act=R,Pe.useCallback=function(w,T){return re.current.useCallback(w,T)},Pe.useContext=function(w){return re.current.useContext(w)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(w){return re.current.useDeferredValue(w)},Pe.useEffect=function(w,T){return re.current.useEffect(w,T)},Pe.useId=function(){return re.current.useId()},Pe.useImperativeHandle=function(w,T,q){return re.current.useImperativeHandle(w,T,q)},Pe.useInsertionEffect=function(w,T){return re.current.useInsertionEffect(w,T)},Pe.useLayoutEffect=function(w,T){return re.current.useLayoutEffect(w,T)},Pe.useMemo=function(w,T){return re.current.useMemo(w,T)},Pe.useReducer=function(w,T,q){return re.current.useReducer(w,T,q)},Pe.useRef=function(w){return re.current.useRef(w)},Pe.useState=function(w){return re.current.useState(w)},Pe.useSyncExternalStore=function(w,T,q){return re.current.useSyncExternalStore(w,T,q)},Pe.useTransition=function(){return re.current.useTransition()},Pe.version="18.3.1",Pe}var Qd;function Cu(){return Qd||(Qd=1,Ql.exports=Wp()),Ql.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function Vp(){if(Yd)return Ki;Yd=1;var o=Cu(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,g,v){var x,b={},N=null,L=null;v!==void 0&&(N=""+v),g.key!==void 0&&(N=""+g.key),g.ref!==void 0&&(L=g.ref);for(x in g)a.call(g,x)&&!c.hasOwnProperty(x)&&(b[x]=g[x]);if(p&&p.defaultProps)for(x in g=p.defaultProps,g)b[x]===void 0&&(b[x]=g[x]);return{$$typeof:n,type:p,key:N,ref:L,props:b,_owner:l.current}}return Ki.Fragment=s,Ki.jsx=h,Ki.jsxs=h,Ki}var Xd;function Hp(){return Xd||(Xd=1,Jl.exports=Vp()),Jl.exports}var u=Hp(),y=Cu();const xo=Nu(y),Gp=Bp({__proto__:null,default:xo},[y]);var uo={},Yl={exports:{}},Bt={},Xl={exports:{}},Zl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd;function Kp(){return Zd||(Zd=1,(function(o){function n(U,$){var R=U.length;U.push($);e:for(;0<R;){var w=R-1>>>1,T=U[w];if(0<l(T,$))U[w]=$,U[R]=T,R=w;else break e}}function s(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var $=U[0],R=U.pop();if(R!==$){U[0]=R;e:for(var w=0,T=U.length,q=T>>>1;w<q;){var X=2*(w+1)-1,le=U[X],me=X+1,z=U[me];if(0>l(le,R))me<T&&0>l(z,le)?(U[w]=z,U[me]=R,w=me):(U[w]=le,U[X]=R,w=X);else if(me<T&&0>l(z,R))U[w]=z,U[me]=R,w=me;else break e}}return $}function l(U,$){var R=U.sortIndex-$.sortIndex;return R!==0?R:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;o.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();o.unstable_now=function(){return h.now()-p}}var g=[],v=[],x=1,b=null,N=3,L=!1,M=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(U){for(var $=s(v);$!==null;){if($.callback===null)a(v);else if($.startTime<=U)a(v),$.sortIndex=$.expirationTime,n(g,$);else break;$=s(v)}}function Y(U){if(I=!1,F(U),!M)if(s(g)!==null)M=!0,pe(ne);else{var $=s(v);$!==null&&re(Y,$.startTime-U)}}function ne(U,$){M=!1,I&&(I=!1,J(Ee),Ee=-1),L=!0;var R=N;try{for(F($),b=s(g);b!==null&&(!(b.expirationTime>$)||U&&!qe());){var w=b.callback;if(typeof w=="function"){b.callback=null,N=b.priorityLevel;var T=w(b.expirationTime<=$);$=o.unstable_now(),typeof T=="function"?b.callback=T:b===s(g)&&a(g),F($)}else a(g);b=s(g)}if(b!==null)var q=!0;else{var X=s(v);X!==null&&re(Y,X.startTime-$),q=!1}return q}finally{b=null,N=R,L=!1}}var ae=!1,we=null,Ee=-1,et=5,Fe=-1;function qe(){return!(o.unstable_now()-Fe<et)}function We(){if(we!==null){var U=o.unstable_now();Fe=U;var $=!0;try{$=we(!0,U)}finally{$?Be():(ae=!1,we=null)}}else ae=!1}var Be;if(typeof ee=="function")Be=function(){ee(We)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,he=G.port2;G.port1.onmessage=We,Be=function(){he.postMessage(null)}}else Be=function(){C(We,0)};function pe(U){we=U,ae||(ae=!0,Be())}function re(U,$){Ee=C(function(){U(o.unstable_now())},$)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_continueExecution=function(){M||L||(M=!0,pe(ne))},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return N},o.unstable_getFirstCallbackNode=function(){return s(g)},o.unstable_next=function(U){switch(N){case 1:case 2:case 3:var $=3;break;default:$=N}var R=N;N=$;try{return U()}finally{N=R}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var R=N;N=U;try{return $()}finally{N=R}},o.unstable_scheduleCallback=function(U,$,R){var w=o.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?w+R:w):R=w,U){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=R+T,U={id:x++,callback:$,priorityLevel:U,startTime:R,expirationTime:T,sortIndex:-1},R>w?(U.sortIndex=R,n(v,U),s(g)===null&&U===s(v)&&(I?(J(Ee),Ee=-1):I=!0,re(Y,R-w))):(U.sortIndex=T,n(g,U),M||L||(M=!0,pe(ne))),U},o.unstable_shouldYield=qe,o.unstable_wrapCallback=function(U){var $=N;return function(){var R=N;N=$;try{return U.apply(this,arguments)}finally{N=R}}}})(Zl)),Zl}var ef;function Jp(){return ef||(ef=1,Xl.exports=Kp()),Xl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function Qp(){if(tf)return Bt;tf=1;var o=Cu(),n=Jp();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,l={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},b={};function N(e){return g.call(b,e)?!0:g.call(x,e)?!1:v.test(e)?b[e]=!0:(x[e]=!0,!1)}function L(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M(e,t,r,i){if(t===null||typeof t>"u"||L(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function I(e,t,r,i,d,f,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=m}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new I(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];C[t]=new I(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new I(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new I(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new I(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new I(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new I(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new I(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new I(e,5,!1,e.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function ee(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(J,ee);C[t]=new I(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(J,ee);C[t]=new I(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(J,ee);C[t]=new I(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new I(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new I(e,1,!1,e.toLowerCase(),null,!0,!0)});function F(e,t,r,i){var d=C.hasOwnProperty(t)?C[t]:null;(d!==null?d.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M(t,r,d,i)&&(r=null),i||d===null?N(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,i=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Y=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ae=Symbol.for("react.portal"),we=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),et=Symbol.for("react.profiler"),Fe=Symbol.for("react.provider"),qe=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),U=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var R=Object.assign,w;function T(e){if(w===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var q=!1;function X(e,t){if(!e||q)return"";q=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var i=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){i=O}e.call(t.prototype)}else{try{throw Error()}catch(O){i=O}e()}}catch(O){if(O&&i&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),f=i.stack.split(`
`),m=d.length-1,_=f.length-1;1<=m&&0<=_&&d[m]!==f[_];)_--;for(;1<=m&&0<=_;m--,_--)if(d[m]!==f[_]){if(m!==1||_!==1)do if(m--,_--,0>_||d[m]!==f[_]){var j=`
`+d[m].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=m&&0<=_);break}}}finally{q=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?T(e):""}function le(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=X(e.type,!1),e;case 11:return e=X(e.type.render,!1),e;case 1:return e=X(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case we:return"Fragment";case ae:return"Portal";case et:return"Profiler";case Ee:return"StrictMode";case Be:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qe:return(e.displayName||"Context")+".Consumer";case Fe:return(e._context.displayName||"Context")+".Provider";case We:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case he:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case pe:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===Ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ge(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Se(e){var t=_e(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(m){i=""+m,f.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function V(e){e._valueTracker||(e._valueTracker=Se(e))}function se(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=_e(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function je(e,t){var r=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function De(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ge(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ue(e,t){t=t.checked,t!=null&&F(e,"checked",t,!1)}function Qe(e,t){Ue(e,t);var r=ge(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xt(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xt(e,t.type,ge(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xt(e,t,r){(t!=="number"||ce(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ze=Array.isArray;function At(e,t,r,i){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ge(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function qt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(ze(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ge(r)}}function Rr(e,t){var r=ge(t.value),i=ge(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function xr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function os(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?os(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qr,ls=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function or(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yr=["Webkit","ms","Moz","O"];Object.keys(wr).forEach(function(e){Yr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wr[t]=wr[e]})});function $t(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wr.hasOwnProperty(e)&&wr[e]?(""+t).trim():t+"px"}function Q(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,d=$t(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,d):e[r]=d}}var xe=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ne(e,t){if(t){if(xe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function Te(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function be(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ye=null,Xe=null,Wt=null;function ii(e){if(e=Li(e)){if(typeof Ye!="function")throw Error(s(280));var t=e.stateNode;t&&(t=ja(t),Ye(e.stateNode,e.type,t))}}function Lr(e){Xe?Wt?Wt.push(e):Wt=[e]:Xe=e}function ai(){if(Xe){var e=Xe,t=Wt;if(Wt=Xe=null,ii(e),t)for(e=0;e<t.length;e++)ii(t[e])}}function Xr(e,t){return e(t)}function us(){}var oi=!1;function On(e,t,r){if(oi)return e(t,r);oi=!0;try{return Xr(e,t,r)}finally{oi=!1,(Xe!==null||Wt!==null)&&(us(),ai())}}function _r(e,t){var r=e.stateNode;if(r===null)return null;var i=ja(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Zr=!1;if(p)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Zr=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Zr=!1}function li(e,t,r,i,d,f,m,_,j){var O=Array.prototype.slice.call(arguments,3);try{t.apply(r,O)}catch(W){this.onError(W)}}var $r=!1,en=null,br=!1,ui=null,Ir={onError:function(e){$r=!0,en=e}};function jo(e,t,r,i,d,f,m,_,j){$r=!1,en=null,li.apply(Ir,arguments)}function Mu(e,t,r,i,d,f,m,_,j){if(jo.apply(this,arguments),$r){if($r){var O=en;$r=!1,en=null}else throw Error(s(198));br||(br=!0,ui=O)}}function Ur(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function lr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ci(e){if(Ur(e)!==e)throw Error(s(188))}function tn(e){var t=e.alternate;if(!t){if(t=Ur(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(i=d.return,i!==null){r=i;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return ci(d),e;if(f===i)return ci(d),t;f=f.sibling}throw Error(s(188))}if(r.return!==i.return)r=d,i=f;else{for(var m=!1,_=d.child;_;){if(_===r){m=!0,r=d,i=f;break}if(_===i){m=!0,i=d,r=f;break}_=_.sibling}if(!m){for(_=f.child;_;){if(_===r){m=!0,r=f,i=d;break}if(_===i){m=!0,i=f,r=d;break}_=_.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function di(e){return e=tn(e),e!==null?cs(e):null}function cs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cs(e);if(t!==null)return t;e=e.sibling}return null}var fi=n.unstable_scheduleCallback,sa=n.unstable_cancelCallback,ia=n.unstable_shouldYield,Tt=n.unstable_requestPaint,tt=n.unstable_now,ds=n.unstable_getCurrentPriorityLevel,hi=n.unstable_ImmediatePriority,fs=n.unstable_UserBlockingPriority,hs=n.unstable_NormalPriority,kt=n.unstable_LowPriority,aa=n.unstable_IdlePriority,ps=null,Vt=null;function oa(e){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(ps,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Ht,ms=Math.log,pi=Math.LN2;function Ht(e){return e>>>=0,e===0?32:31-(ms(e)/pi|0)|0}var Rn=64,gs=4194304;function rn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nn(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,d=e.suspendedLanes,f=e.pingedLanes,m=r&268435455;if(m!==0){var _=m&~d;_!==0?i=rn(_):(f&=m,f!==0&&(i=rn(f)))}else m=r&~d,m!==0?i=rn(m):f!==0&&(i=rn(f));if(i===0)return 0;if(t!==0&&t!==i&&(t&d)===0&&(d=i&-i,f=t&-t,d>=f||d===16&&(f&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-It(t),d=1<<r,i|=e[r],t&=~d;return i}function mi(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes;0<f;){var m=31-It(f),_=1<<m,j=d[m];j===-1?((_&r)===0||(_&i)!==0)&&(d[m]=mi(_,t)):j<=t&&(e.expiredLanes|=_),f&=~_}}function sn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function la(){var e=Rn;return Rn<<=1,(Rn&4194240)===0&&(Rn=64),e}function vs(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function an(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=r}function ua(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-It(r),f=1<<d;t[d]=0,i[d]=-1,e[d]=-1,r&=~f}}function gi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-It(r),d=1<<i;d&t|e[i]&t&&(e[i]|=t),r&=~d}}var Le=0;function ca(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var da,An,$n,ys,fa,In=!1,on=[],Gt=null,kr=null,jr=null,Un=new Map,Mn=new Map,Kt=[],So="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vi(e,t){switch(e){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(t.pointerId)}}function Dn(e,t,r,i,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Li(t),t!==null&&An(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function No(e,t,r,i,d){switch(t){case"focusin":return Gt=Dn(Gt,e,t,r,i,d),!0;case"dragenter":return kr=Dn(kr,e,t,r,i,d),!0;case"mouseover":return jr=Dn(jr,e,t,r,i,d),!0;case"pointerover":var f=d.pointerId;return Un.set(f,Dn(Un.get(f)||null,e,t,r,i,d)),!0;case"gotpointercapture":return f=d.pointerId,Mn.set(f,Dn(Mn.get(f)||null,e,t,r,i,d)),!0}return!1}function ha(e){var t=Bn(e.target);if(t!==null){var r=Ur(t);if(r!==null){if(t=r.tag,t===13){if(t=lr(r),t!==null){e.blockedOn=t,fa(e.priority,function(){$n(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ae=i,r.target.dispatchEvent(i),Ae=null}else return t=Li(r),t!==null&&An(t),e.blockedOn=r,!1;t.shift()}return!0}function pa(e,t,r){xs(e)&&r.delete(t)}function ma(){In=!1,Gt!==null&&xs(Gt)&&(Gt=null),kr!==null&&xs(kr)&&(kr=null),jr!==null&&xs(jr)&&(jr=null),Un.forEach(pa),Mn.forEach(pa)}function k(e,t){e.blockedOn===t&&(e.blockedOn=null,In||(In=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ma)))}function D(e){function t(d){return k(d,e)}if(0<on.length){k(on[0],e);for(var r=1;r<on.length;r++){var i=on[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Gt!==null&&k(Gt,e),kr!==null&&k(kr,e),jr!==null&&k(jr,e),Un.forEach(t),Mn.forEach(t),r=0;r<Kt.length;r++)i=Kt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Kt.length&&(r=Kt[0],r.blockedOn===null);)ha(r),r.blockedOn===null&&Kt.shift()}var Z=Y.ReactCurrentBatchConfig,fe=!0;function $e(e,t,r,i){var d=Le,f=Z.transition;Z.transition=null;try{Le=1,it(e,t,r,i)}finally{Le=d,Z.transition=f}}function er(e,t,r,i){var d=Le,f=Z.transition;Z.transition=null;try{Le=4,it(e,t,r,i)}finally{Le=d,Z.transition=f}}function it(e,t,r,i){if(fe){var d=yi(e,t,r,i);if(d===null)Do(e,t,i,ur,r),vi(e,i);else if(No(d,e,t,r,i))i.stopPropagation();else if(vi(e,i),t&4&&-1<So.indexOf(e)){for(;d!==null;){var f=Li(d);if(f!==null&&da(f),f=yi(e,t,r,i),f===null&&Do(e,t,i,ur,r),f===d)break;d=f}d!==null&&i.stopPropagation()}else Do(e,t,i,null,r)}}var ur=null;function yi(e,t,r,i){if(ur=null,e=be(i),e=Bn(e),e!==null)if(t=Ur(e),t===null)e=null;else if(r=t.tag,r===13){if(e=lr(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ur=e,null}function ga(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ds()){case hi:return 1;case fs:return 4;case hs:case kt:return 16;case aa:return 536870912;default:return 16}default:return 16}}var ot=null,ln=null,zn=null;function xi(){if(zn)return zn;var e,t=ln,r=t.length,i,d="value"in ot?ot.value:ot.textContent,f=d.length;for(e=0;e<r&&t[e]===d[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===d[f-i];i++);return zn=d.slice(e,1<i?1-i:void 0)}function ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fn(){return!0}function wi(){return!1}function jt(e){function t(r,i,d,f,m){this._reactName=r,this._targetInst=d,this.type=i,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fn:wi,this.isPropagationStopped=wi,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=jt(Mr),Sr=R({},Mr,{view:0,detail:0}),bi=jt(Sr),_s,ki,Oe,rt=R({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oe&&(Oe&&e.type==="mousemove"?(_s=e.screenX-Oe.screenX,ki=e.screenY-Oe.screenY):ki=_s=0,Oe=e),_s)},movementY:function(e){return"movementY"in e?e.movementY:ki}}),ct=jt(rt),Dr=R({},rt,{dataTransfer:0}),vh=jt(Dr),yh=R({},Sr,{relatedTarget:0}),Co=jt(yh),xh=R({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=jt(xh),_h=R({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bh=jt(_h),kh=R({},Mr,{data:0}),Du=jt(kh),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ch(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nh[e])?!!t[e]:!1}function Eo(){return Ch}var Eh=R({},Sr,{key:function(e){if(e.key){var t=jh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eo,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Th=jt(Eh),Ph=R({},rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=jt(Ph),Oh=R({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eo}),Rh=jt(Oh),Lh=R({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ah=jt(Lh),$h=R({},rt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ih=jt($h),Uh=[9,13,27,32],To=p&&"CompositionEvent"in window,ji=null;p&&"documentMode"in document&&(ji=document.documentMode);var Mh=p&&"TextEvent"in window&&!ji,Fu=p&&(!To||ji&&8<ji&&11>=ji),Bu=" ",qu=!1;function Wu(e,t){switch(e){case"keyup":return Uh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function Dh(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(qu=!0,Bu);case"textInput":return e=t.data,e===Bu&&qu?null:e;default:return null}}function zh(e,t){if(bs)return e==="compositionend"||!To&&Wu(e,t)?(e=xi(),zn=ln=ot=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fu&&t.locale!=="ko"?null:t.data;default:return null}}var Fh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fh[e.type]:t==="textarea"}function Gu(e,t,r,i){Lr(i),t=_a(t,"onChange"),0<t.length&&(r=new _i("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Si=null,Ni=null;function Bh(e){dc(e,0)}function va(e){var t=Cs(e);if(se(t))return e}function qh(e,t){if(e==="change")return t}var Ku=!1;if(p){var Po;if(p){var Oo="oninput"in document;if(!Oo){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Oo=typeof Ju.oninput=="function"}Po=Oo}else Po=!1;Ku=Po&&(!document.documentMode||9<document.documentMode)}function Qu(){Si&&(Si.detachEvent("onpropertychange",Yu),Ni=Si=null)}function Yu(e){if(e.propertyName==="value"&&va(Ni)){var t=[];Gu(t,Ni,e,be(e)),On(Bh,t)}}function Wh(e,t,r){e==="focusin"?(Qu(),Si=t,Ni=r,Si.attachEvent("onpropertychange",Yu)):e==="focusout"&&Qu()}function Vh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return va(Ni)}function Hh(e,t){if(e==="click")return va(t)}function Gh(e,t){if(e==="input"||e==="change")return va(t)}function Kh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cr=typeof Object.is=="function"?Object.is:Kh;function Ci(e,t){if(cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var d=r[i];if(!g.call(t,d)||!cr(e[d],t[d]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var r=Xu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xu(r)}}function ec(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ec(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tc(){for(var e=window,t=ce();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ce(e.document)}return t}function Ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jh(e){var t=tc(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ec(r.ownerDocument.documentElement,r)){if(i!==null&&Ro(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,f=Math.min(i.start,d);i=i.end===void 0?f:Math.min(i.end,d),!e.extend&&f>i&&(d=i,i=f,f=d),d=Zu(r,f);var m=Zu(r,i);d&&m&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qh=p&&"documentMode"in document&&11>=document.documentMode,ks=null,Lo=null,Ei=null,Ao=!1;function rc(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ao||ks==null||ks!==ce(i)||(i=ks,"selectionStart"in i&&Ro(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ei&&Ci(Ei,i)||(Ei=i,i=_a(Lo,"onSelect"),0<i.length&&(t=new _i("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=ks)))}function ya(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var js={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},$o={},nc={};p&&(nc=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function xa(e){if($o[e])return $o[e];if(!js[e])return e;var t=js[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nc)return $o[e]=t[r];return e}var sc=xa("animationend"),ic=xa("animationiteration"),ac=xa("animationstart"),oc=xa("transitionend"),lc=new Map,uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){lc.set(e,t),c(t,[e])}for(var Io=0;Io<uc.length;Io++){var Uo=uc[Io],Yh=Uo.toLowerCase(),Xh=Uo[0].toUpperCase()+Uo.slice(1);un(Yh,"on"+Xh)}un(sc,"onAnimationEnd"),un(ic,"onAnimationIteration"),un(ac,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(oc,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function cc(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Mu(i,t,void 0,e),e.currentTarget=null}function dc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],d=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var m=i.length-1;0<=m;m--){var _=i[m],j=_.instance,O=_.currentTarget;if(_=_.listener,j!==f&&d.isPropagationStopped())break e;cc(d,_,O),f=j}else for(m=0;m<i.length;m++){if(_=i[m],j=_.instance,O=_.currentTarget,_=_.listener,j!==f&&d.isPropagationStopped())break e;cc(d,_,O),f=j}}}if(br)throw e=ui,br=!1,ui=null,e}function Ke(e,t){var r=t[Vo];r===void 0&&(r=t[Vo]=new Set);var i=e+"__bubble";r.has(i)||(fc(t,e,2,!1),r.add(i))}function Mo(e,t,r){var i=0;t&&(i|=4),fc(r,e,i,t)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Pi(e){if(!e[wa]){e[wa]=!0,a.forEach(function(r){r!=="selectionchange"&&(Zh.has(r)||Mo(r,!1,e),Mo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wa]||(t[wa]=!0,Mo("selectionchange",!1,t))}}function fc(e,t,r,i){switch(ga(t)){case 1:var d=$e;break;case 4:d=er;break;default:d=it}r=d.bind(null,t,r,e),d=void 0,!Zr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function Do(e,t,r,i,d){var f=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var _=i.stateNode.containerInfo;if(_===d||_.nodeType===8&&_.parentNode===d)break;if(m===4)for(m=i.return;m!==null;){var j=m.tag;if((j===3||j===4)&&(j=m.stateNode.containerInfo,j===d||j.nodeType===8&&j.parentNode===d))return;m=m.return}for(;_!==null;){if(m=Bn(_),m===null)return;if(j=m.tag,j===5||j===6){i=f=m;continue e}_=_.parentNode}}i=i.return}On(function(){var O=f,W=be(r),H=[];e:{var B=lc.get(e);if(B!==void 0){var te=_i,oe=e;switch(e){case"keypress":if(ws(r)===0)break e;case"keydown":case"keyup":te=Th;break;case"focusin":oe="focus",te=Co;break;case"focusout":oe="blur",te=Co;break;case"beforeblur":case"afterblur":te=Co;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Rh;break;case sc:case ic:case ac:te=wh;break;case oc:te=Ah;break;case"scroll":te=bi;break;case"wheel":te=Ih;break;case"copy":case"cut":case"paste":te=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=zu}var ue=(t&4)!==0,lt=!ue&&e==="scroll",E=ue?B!==null?B+"Capture":null:B;ue=[];for(var S=O,P;S!==null;){P=S;var K=P.stateNode;if(P.tag===5&&K!==null&&(P=K,E!==null&&(K=_r(S,E),K!=null&&ue.push(Oi(S,K,P)))),lt)break;S=S.return}0<ue.length&&(B=new te(B,oe,null,r,W),H.push({event:B,listeners:ue}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",B&&r!==Ae&&(oe=r.relatedTarget||r.fromElement)&&(Bn(oe)||oe[zr]))break e;if((te||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,te?(oe=r.relatedTarget||r.toElement,te=O,oe=oe?Bn(oe):null,oe!==null&&(lt=Ur(oe),oe!==lt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(te=null,oe=O),te!==oe)){if(ue=ct,K="onMouseLeave",E="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ue=zu,K="onPointerLeave",E="onPointerEnter",S="pointer"),lt=te==null?B:Cs(te),P=oe==null?B:Cs(oe),B=new ue(K,S+"leave",te,r,W),B.target=lt,B.relatedTarget=P,K=null,Bn(W)===O&&(ue=new ue(E,S+"enter",oe,r,W),ue.target=P,ue.relatedTarget=lt,K=ue),lt=K,te&&oe)t:{for(ue=te,E=oe,S=0,P=ue;P;P=Ss(P))S++;for(P=0,K=E;K;K=Ss(K))P++;for(;0<S-P;)ue=Ss(ue),S--;for(;0<P-S;)E=Ss(E),P--;for(;S--;){if(ue===E||E!==null&&ue===E.alternate)break t;ue=Ss(ue),E=Ss(E)}ue=null}else ue=null;te!==null&&hc(H,B,te,ue,!1),oe!==null&&lt!==null&&hc(H,lt,oe,ue,!0)}}e:{if(B=O?Cs(O):window,te=B.nodeName&&B.nodeName.toLowerCase(),te==="select"||te==="input"&&B.type==="file")var de=qh;else if(Hu(B))if(Ku)de=Gh;else{de=Vh;var ve=Wh}else(te=B.nodeName)&&te.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(de=Hh);if(de&&(de=de(e,O))){Gu(H,de,r,W);break e}ve&&ve(e,B,O),e==="focusout"&&(ve=B._wrapperState)&&ve.controlled&&B.type==="number"&&Xt(B,"number",B.value)}switch(ve=O?Cs(O):window,e){case"focusin":(Hu(ve)||ve.contentEditable==="true")&&(ks=ve,Lo=O,Ei=null);break;case"focusout":Ei=Lo=ks=null;break;case"mousedown":Ao=!0;break;case"contextmenu":case"mouseup":case"dragend":Ao=!1,rc(H,r,W);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":rc(H,r,W)}var ye;if(To)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else bs?Wu(e,r)&&(ke="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ke="onCompositionStart");ke&&(Fu&&r.locale!=="ko"&&(bs||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&bs&&(ye=xi()):(ot=W,ln="value"in ot?ot.value:ot.textContent,bs=!0)),ve=_a(O,ke),0<ve.length&&(ke=new Du(ke,e,null,r,W),H.push({event:ke,listeners:ve}),ye?ke.data=ye:(ye=Vu(r),ye!==null&&(ke.data=ye)))),(ye=Mh?Dh(e,r):zh(e,r))&&(O=_a(O,"onBeforeInput"),0<O.length&&(W=new Du("onBeforeInput","beforeinput",null,r,W),H.push({event:W,listeners:O}),W.data=ye))}dc(H,t)})}function Oi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _a(e,t){for(var r=t+"Capture",i=[];e!==null;){var d=e,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=_r(e,r),f!=null&&i.unshift(Oi(e,f,d)),f=_r(e,t),f!=null&&i.push(Oi(e,f,d))),e=e.return}return i}function Ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hc(e,t,r,i,d){for(var f=t._reactName,m=[];r!==null&&r!==i;){var _=r,j=_.alternate,O=_.stateNode;if(j!==null&&j===i)break;_.tag===5&&O!==null&&(_=O,d?(j=_r(r,f),j!=null&&m.unshift(Oi(r,j,_))):d||(j=_r(r,f),j!=null&&m.push(Oi(r,j,_)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var ep=/\r\n?/g,tp=/\u0000|\uFFFD/g;function pc(e){return(typeof e=="string"?e:""+e).replace(ep,`
`).replace(tp,"")}function ba(e,t,r){if(t=pc(t),pc(e)!==t&&r)throw Error(s(425))}function ka(){}var zo=null,Fo=null;function Bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qo=typeof setTimeout=="function"?setTimeout:void 0,rp=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(e){return mc.resolve(null).then(e).catch(sp)}:qo;function sp(e){setTimeout(function(){throw e})}function Wo(e,t){var r=t,i=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(i===0){e.removeChild(d),D(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=d}while(r);D(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Ns,Ri="__reactProps$"+Ns,zr="__reactContainer$"+Ns,Vo="__reactEvents$"+Ns,ip="__reactListeners$"+Ns,ap="__reactHandles$"+Ns;function Bn(e){var t=e[Nr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zr]||r[Nr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=gc(e);e!==null;){if(r=e[Nr])return r;e=gc(e)}return t}e=r,r=e.parentNode}return null}function Li(e){return e=e[Nr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ja(e){return e[Ri]||null}var Ho=[],Es=-1;function dn(e){return{current:e}}function Je(e){0>Es||(e.current=Ho[Es],Ho[Es]=null,Es--)}function He(e,t){Es++,Ho[Es]=e.current,e.current=t}var fn={},St=dn(fn),Ut=dn(!1),qn=fn;function Ts(e,t){var r=e.type.contextTypes;if(!r)return fn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in r)d[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function Mt(e){return e=e.childContextTypes,e!=null}function Sa(){Je(Ut),Je(St)}function vc(e,t,r){if(St.current!==fn)throw Error(s(168));He(St,t),He(Ut,r)}function yc(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var d in i)if(!(d in t))throw Error(s(108,z(e)||"Unknown",d));return R({},r,i)}function Na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,qn=St.current,He(St,e),He(Ut,Ut.current),!0}function xc(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=yc(e,t,qn),i.__reactInternalMemoizedMergedChildContext=e,Je(Ut),Je(St),He(St,e)):Je(Ut),He(Ut,r)}var Fr=null,Ca=!1,Go=!1;function wc(e){Fr===null?Fr=[e]:Fr.push(e)}function op(e){Ca=!0,wc(e)}function hn(){if(!Go&&Fr!==null){Go=!0;var e=0,t=Le;try{var r=Fr;for(Le=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Fr=null,Ca=!1}catch(d){throw Fr!==null&&(Fr=Fr.slice(e+1)),fi(hi,hn),d}finally{Le=t,Go=!1}}return null}var Ps=[],Os=0,Ea=null,Ta=0,tr=[],rr=0,Wn=null,Br=1,qr="";function Vn(e,t){Ps[Os++]=Ta,Ps[Os++]=Ea,Ea=e,Ta=t}function _c(e,t,r){tr[rr++]=Br,tr[rr++]=qr,tr[rr++]=Wn,Wn=e;var i=Br;e=qr;var d=32-It(i)-1;i&=~(1<<d),r+=1;var f=32-It(t)+d;if(30<f){var m=d-d%5;f=(i&(1<<m)-1).toString(32),i>>=m,d-=m,Br=1<<32-It(t)+d|r<<d|i,qr=f+e}else Br=1<<f|r<<d|i,qr=e}function Ko(e){e.return!==null&&(Vn(e,1),_c(e,1,0))}function Jo(e){for(;e===Ea;)Ea=Ps[--Os],Ps[Os]=null,Ta=Ps[--Os],Ps[Os]=null;for(;e===Wn;)Wn=tr[--rr],tr[rr]=null,qr=tr[--rr],tr[rr]=null,Br=tr[--rr],tr[rr]=null}var Jt=null,Qt=null,Ze=!1,dr=null;function bc(e,t){var r=ar(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function kc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jt=e,Qt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jt=e,Qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Wn!==null?{id:Br,overflow:qr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ar(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jt=e,Qt=null,!0):!1;default:return!1}}function Qo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yo(e){if(Ze){var t=Qt;if(t){var r=t;if(!kc(e,t)){if(Qo(e))throw Error(s(418));t=cn(r.nextSibling);var i=Jt;t&&kc(e,t)?bc(i,r):(e.flags=e.flags&-4097|2,Ze=!1,Jt=e)}}else{if(Qo(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ze=!1,Jt=e}}}function jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jt=e}function Pa(e){if(e!==Jt)return!1;if(!Ze)return jc(e),Ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bo(e.type,e.memoizedProps)),t&&(t=Qt)){if(Qo(e))throw Sc(),Error(s(418));for(;t;)bc(e,t),t=cn(t.nextSibling)}if(jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qt=cn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qt=null}}else Qt=Jt?cn(e.stateNode.nextSibling):null;return!0}function Sc(){for(var e=Qt;e;)e=cn(e.nextSibling)}function Rs(){Qt=Jt=null,Ze=!1}function Xo(e){dr===null?dr=[e]:dr.push(e)}var lp=Y.ReactCurrentBatchConfig;function Ai(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var d=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(m){var _=d.refs;m===null?delete _[f]:_[f]=m},t._stringRef=f,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Oa(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nc(e){var t=e._init;return t(e._payload)}function Cc(e){function t(E,S){if(e){var P=E.deletions;P===null?(E.deletions=[S],E.flags|=16):P.push(S)}}function r(E,S){if(!e)return null;for(;S!==null;)t(E,S),S=S.sibling;return null}function i(E,S){for(E=new Map;S!==null;)S.key!==null?E.set(S.key,S):E.set(S.index,S),S=S.sibling;return E}function d(E,S){return E=_n(E,S),E.index=0,E.sibling=null,E}function f(E,S,P){return E.index=P,e?(P=E.alternate,P!==null?(P=P.index,P<S?(E.flags|=2,S):P):(E.flags|=2,S)):(E.flags|=1048576,S)}function m(E){return e&&E.alternate===null&&(E.flags|=2),E}function _(E,S,P,K){return S===null||S.tag!==6?(S=ql(P,E.mode,K),S.return=E,S):(S=d(S,P),S.return=E,S)}function j(E,S,P,K){var de=P.type;return de===we?W(E,S,P.props.children,K,P.key):S!==null&&(S.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===pe&&Nc(de)===S.type)?(K=d(S,P.props),K.ref=Ai(E,S,P),K.return=E,K):(K=to(P.type,P.key,P.props,null,E.mode,K),K.ref=Ai(E,S,P),K.return=E,K)}function O(E,S,P,K){return S===null||S.tag!==4||S.stateNode.containerInfo!==P.containerInfo||S.stateNode.implementation!==P.implementation?(S=Wl(P,E.mode,K),S.return=E,S):(S=d(S,P.children||[]),S.return=E,S)}function W(E,S,P,K,de){return S===null||S.tag!==7?(S=Zn(P,E.mode,K,de),S.return=E,S):(S=d(S,P),S.return=E,S)}function H(E,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return S=ql(""+S,E.mode,P),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ne:return P=to(S.type,S.key,S.props,null,E.mode,P),P.ref=Ai(E,null,S),P.return=E,P;case ae:return S=Wl(S,E.mode,P),S.return=E,S;case pe:var K=S._init;return H(E,K(S._payload),P)}if(ze(S)||$(S))return S=Zn(S,E.mode,P,null),S.return=E,S;Oa(E,S)}return null}function B(E,S,P,K){var de=S!==null?S.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return de!==null?null:_(E,S,""+P,K);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:return P.key===de?j(E,S,P,K):null;case ae:return P.key===de?O(E,S,P,K):null;case pe:return de=P._init,B(E,S,de(P._payload),K)}if(ze(P)||$(P))return de!==null?null:W(E,S,P,K,null);Oa(E,P)}return null}function te(E,S,P,K,de){if(typeof K=="string"&&K!==""||typeof K=="number")return E=E.get(P)||null,_(S,E,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ne:return E=E.get(K.key===null?P:K.key)||null,j(S,E,K,de);case ae:return E=E.get(K.key===null?P:K.key)||null,O(S,E,K,de);case pe:var ve=K._init;return te(E,S,P,ve(K._payload),de)}if(ze(K)||$(K))return E=E.get(P)||null,W(S,E,K,de,null);Oa(S,K)}return null}function oe(E,S,P,K){for(var de=null,ve=null,ye=S,ke=S=0,yt=null;ye!==null&&ke<P.length;ke++){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var Me=B(E,ye,P[ke],K);if(Me===null){ye===null&&(ye=yt);break}e&&ye&&Me.alternate===null&&t(E,ye),S=f(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me,ye=yt}if(ke===P.length)return r(E,ye),Ze&&Vn(E,ke),de;if(ye===null){for(;ke<P.length;ke++)ye=H(E,P[ke],K),ye!==null&&(S=f(ye,S,ke),ve===null?de=ye:ve.sibling=ye,ve=ye);return Ze&&Vn(E,ke),de}for(ye=i(E,ye);ke<P.length;ke++)yt=te(ye,E,ke,P[ke],K),yt!==null&&(e&&yt.alternate!==null&&ye.delete(yt.key===null?ke:yt.key),S=f(yt,S,ke),ve===null?de=yt:ve.sibling=yt,ve=yt);return e&&ye.forEach(function(bn){return t(E,bn)}),Ze&&Vn(E,ke),de}function ue(E,S,P,K){var de=$(P);if(typeof de!="function")throw Error(s(150));if(P=de.call(P),P==null)throw Error(s(151));for(var ve=de=null,ye=S,ke=S=0,yt=null,Me=P.next();ye!==null&&!Me.done;ke++,Me=P.next()){ye.index>ke?(yt=ye,ye=null):yt=ye.sibling;var bn=B(E,ye,Me.value,K);if(bn===null){ye===null&&(ye=yt);break}e&&ye&&bn.alternate===null&&t(E,ye),S=f(bn,S,ke),ve===null?de=bn:ve.sibling=bn,ve=bn,ye=yt}if(Me.done)return r(E,ye),Ze&&Vn(E,ke),de;if(ye===null){for(;!Me.done;ke++,Me=P.next())Me=H(E,Me.value,K),Me!==null&&(S=f(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me);return Ze&&Vn(E,ke),de}for(ye=i(E,ye);!Me.done;ke++,Me=P.next())Me=te(ye,E,ke,Me.value,K),Me!==null&&(e&&Me.alternate!==null&&ye.delete(Me.key===null?ke:Me.key),S=f(Me,S,ke),ve===null?de=Me:ve.sibling=Me,ve=Me);return e&&ye.forEach(function(Fp){return t(E,Fp)}),Ze&&Vn(E,ke),de}function lt(E,S,P,K){if(typeof P=="object"&&P!==null&&P.type===we&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ne:e:{for(var de=P.key,ve=S;ve!==null;){if(ve.key===de){if(de=P.type,de===we){if(ve.tag===7){r(E,ve.sibling),S=d(ve,P.props.children),S.return=E,E=S;break e}}else if(ve.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===pe&&Nc(de)===ve.type){r(E,ve.sibling),S=d(ve,P.props),S.ref=Ai(E,ve,P),S.return=E,E=S;break e}r(E,ve);break}else t(E,ve);ve=ve.sibling}P.type===we?(S=Zn(P.props.children,E.mode,K,P.key),S.return=E,E=S):(K=to(P.type,P.key,P.props,null,E.mode,K),K.ref=Ai(E,S,P),K.return=E,E=K)}return m(E);case ae:e:{for(ve=P.key;S!==null;){if(S.key===ve)if(S.tag===4&&S.stateNode.containerInfo===P.containerInfo&&S.stateNode.implementation===P.implementation){r(E,S.sibling),S=d(S,P.children||[]),S.return=E,E=S;break e}else{r(E,S);break}else t(E,S);S=S.sibling}S=Wl(P,E.mode,K),S.return=E,E=S}return m(E);case pe:return ve=P._init,lt(E,S,ve(P._payload),K)}if(ze(P))return oe(E,S,P,K);if($(P))return ue(E,S,P,K);Oa(E,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,S!==null&&S.tag===6?(r(E,S.sibling),S=d(S,P),S.return=E,E=S):(r(E,S),S=ql(P,E.mode,K),S.return=E,E=S),m(E)):r(E,S)}return lt}var Ls=Cc(!0),Ec=Cc(!1),Ra=dn(null),La=null,As=null,Zo=null;function el(){Zo=As=La=null}function tl(e){var t=Ra.current;Je(Ra),e._currentValue=t}function rl(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function $s(e,t){La=e,Zo=As=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Dt=!0),e.firstContext=null)}function nr(e){var t=e._currentValue;if(Zo!==e)if(e={context:e,memoizedValue:t,next:null},As===null){if(La===null)throw Error(s(308));As=e,La.dependencies={lanes:0,firstContext:e}}else As=As.next=e;return t}var Hn=null;function nl(e){Hn===null?Hn=[e]:Hn.push(e)}function Tc(e,t,r,i){var d=t.interleaved;return d===null?(r.next=r,nl(t)):(r.next=d.next,d.next=r),t.interleaved=r,Wr(e,i)}function Wr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pn=!1;function sl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ie&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,Wr(e,r)}return d=i.interleaved,d===null?(t.next=t,nl(i)):(t.next=d.next,d.next=t),i.interleaved=t,Wr(e,r)}function Aa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,gi(e,r)}}function Oc(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?d=f=m:f=f.next=m,r=r.next}while(r!==null);f===null?d=f=t:f=f.next=t}else d=f=t;r={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $a(e,t,r,i){var d=e.updateQueue;pn=!1;var f=d.firstBaseUpdate,m=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var j=_,O=j.next;j.next=null,m===null?f=O:m.next=O,m=j;var W=e.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==m&&(_===null?W.firstBaseUpdate=O:_.next=O,W.lastBaseUpdate=j))}if(f!==null){var H=d.baseState;m=0,W=O=j=null,_=f;do{var B=_.lane,te=_.eventTime;if((i&B)===B){W!==null&&(W=W.next={eventTime:te,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var oe=e,ue=_;switch(B=t,te=r,ue.tag){case 1:if(oe=ue.payload,typeof oe=="function"){H=oe.call(te,H,B);break e}H=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ue.payload,B=typeof oe=="function"?oe.call(te,H,B):oe,B==null)break e;H=R({},H,B);break e;case 2:pn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,B=d.effects,B===null?d.effects=[_]:B.push(_))}else te={eventTime:te,lane:B,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(O=W=te,j=H):W=W.next=te,m|=B;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;B=_,_=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);if(W===null&&(j=H),d.baseState=j,d.firstBaseUpdate=O,d.lastBaseUpdate=W,t=d.shared.interleaved,t!==null){d=t;do m|=d.lane,d=d.next;while(d!==t)}else f===null&&(d.shared.lanes=0);Jn|=m,e.lanes=m,e.memoizedState=H}}function Rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],d=i.callback;if(d!==null){if(i.callback=null,i=r,typeof d!="function")throw Error(s(191,d));d.call(i)}}}var $i={},Cr=dn($i),Ii=dn($i),Ui=dn($i);function Gn(e){if(e===$i)throw Error(s(174));return e}function il(e,t){switch(He(Ui,t),He(Ii,e),He(Cr,$i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pn(t,e)}Je(Cr),He(Cr,t)}function Is(){Je(Cr),Je(Ii),Je(Ui)}function Lc(e){Gn(Ui.current);var t=Gn(Cr.current),r=Pn(t,e.type);t!==r&&(He(Ii,e),He(Cr,r))}function al(e){Ii.current===e&&(Je(Cr),Je(Ii))}var nt=dn(0);function Ia(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ol=[];function ll(){for(var e=0;e<ol.length;e++)ol[e]._workInProgressVersionPrimary=null;ol.length=0}var Ua=Y.ReactCurrentDispatcher,ul=Y.ReactCurrentBatchConfig,Kn=0,st=null,ft=null,gt=null,Ma=!1,Mi=!1,Di=0,up=0;function Nt(){throw Error(s(321))}function cl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cr(e[r],t[r]))return!1;return!0}function dl(e,t,r,i,d,f){if(Kn=f,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ua.current=e===null||e.memoizedState===null?hp:pp,e=r(i,d),Mi){f=0;do{if(Mi=!1,Di=0,25<=f)throw Error(s(301));f+=1,gt=ft=null,t.updateQueue=null,Ua.current=mp,e=r(i,d)}while(Mi)}if(Ua.current=Fa,t=ft!==null&&ft.next!==null,Kn=0,gt=ft=st=null,Ma=!1,t)throw Error(s(300));return e}function fl(){var e=Di!==0;return Di=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?st.memoizedState=gt=e:gt=gt.next=e,gt}function sr(){if(ft===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=gt===null?st.memoizedState:gt.next;if(t!==null)gt=t,ft=e;else{if(e===null)throw Error(s(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},gt===null?st.memoizedState=gt=e:gt=gt.next=e}return gt}function zi(e,t){return typeof t=="function"?t(e):t}function hl(e){var t=sr(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=ft,d=i.baseQueue,f=r.pending;if(f!==null){if(d!==null){var m=d.next;d.next=f.next,f.next=m}i.baseQueue=d=f,r.pending=null}if(d!==null){f=d.next,i=i.baseState;var _=m=null,j=null,O=f;do{var W=O.lane;if((Kn&W)===W)j!==null&&(j=j.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),i=O.hasEagerState?O.eagerState:e(i,O.action);else{var H={lane:W,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};j===null?(_=j=H,m=i):j=j.next=H,st.lanes|=W,Jn|=W}O=O.next}while(O!==null&&O!==f);j===null?m=i:j.next=_,cr(i,t.memoizedState)||(Dt=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=j,r.lastRenderedState=i}if(e=r.interleaved,e!==null){d=e;do f=d.lane,st.lanes|=f,Jn|=f,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pl(e){var t=sr(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,d=r.pending,f=t.memoizedState;if(d!==null){r.pending=null;var m=d=d.next;do f=e(f,m.action),m=m.next;while(m!==d);cr(f,t.memoizedState)||(Dt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function Ac(){}function $c(e,t){var r=st,i=sr(),d=t(),f=!cr(i.memoizedState,d);if(f&&(i.memoizedState=d,Dt=!0),i=i.queue,ml(Mc.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Fi(9,Uc.bind(null,r,i,d,t),void 0,null),vt===null)throw Error(s(349));(Kn&30)!==0||Ic(r,t,d)}return d}function Ic(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Uc(e,t,r,i){t.value=r,t.getSnapshot=i,Dc(t)&&zc(e)}function Mc(e,t,r){return r(function(){Dc(t)&&zc(e)})}function Dc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cr(e,r)}catch{return!0}}function zc(e){var t=Wr(e,1);t!==null&&mr(t,e,1,-1)}function Fc(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t.queue=e,e=e.dispatch=fp.bind(null,st,e),[t.memoizedState,e]}function Fi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Bc(){return sr().memoizedState}function Da(e,t,r,i){var d=Er();st.flags|=e,d.memoizedState=Fi(1|t,r,void 0,i===void 0?null:i)}function za(e,t,r,i){var d=sr();i=i===void 0?null:i;var f=void 0;if(ft!==null){var m=ft.memoizedState;if(f=m.destroy,i!==null&&cl(i,m.deps)){d.memoizedState=Fi(t,r,f,i);return}}st.flags|=e,d.memoizedState=Fi(1|t,r,f,i)}function qc(e,t){return Da(8390656,8,e,t)}function ml(e,t){return za(2048,8,e,t)}function Wc(e,t){return za(4,2,e,t)}function Vc(e,t){return za(4,4,e,t)}function Hc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gc(e,t,r){return r=r!=null?r.concat([e]):null,za(4,4,Hc.bind(null,t,e),r)}function gl(){}function Kc(e,t){var r=sr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&cl(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Jc(e,t){var r=sr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&cl(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Qc(e,t,r){return(Kn&21)===0?(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=r):(cr(r,t)||(r=la(),st.lanes|=r,Jn|=r,e.baseState=!0),t)}function cp(e,t){var r=Le;Le=r!==0&&4>r?r:4,e(!0);var i=ul.transition;ul.transition={};try{e(!1),t()}finally{Le=r,ul.transition=i}}function Yc(){return sr().memoizedState}function dp(e,t,r){var i=xn(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Xc(e))Zc(t,r);else if(r=Tc(e,t,r,i),r!==null){var d=Ot();mr(r,e,i,d),ed(r,t,i)}}function fp(e,t,r){var i=xn(e),d={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xc(e))Zc(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var m=t.lastRenderedState,_=f(m,r);if(d.hasEagerState=!0,d.eagerState=_,cr(_,m)){var j=t.interleaved;j===null?(d.next=d,nl(t)):(d.next=j.next,j.next=d),t.interleaved=d;return}}catch{}finally{}r=Tc(e,t,d,i),r!==null&&(d=Ot(),mr(r,e,i,d),ed(r,t,i))}}function Xc(e){var t=e.alternate;return e===st||t!==null&&t===st}function Zc(e,t){Mi=Ma=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ed(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,gi(e,r)}}var Fa={readContext:nr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},hp={readContext:nr,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:nr,useEffect:qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Da(4194308,4,Hc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var r=Er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Er();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=dp.bind(null,st,e),[i.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:gl,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=cp.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=st,d=Er();if(Ze){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),vt===null)throw Error(s(349));(Kn&30)!==0||Ic(i,t,r)}d.memoizedState=r;var f={value:r,getSnapshot:t};return d.queue=f,qc(Mc.bind(null,i,f,e),[e]),i.flags|=2048,Fi(9,Uc.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=Er(),t=vt.identifierPrefix;if(Ze){var r=qr,i=Br;r=(i&~(1<<32-It(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Di++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=up++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pp={readContext:nr,useCallback:Kc,useContext:nr,useEffect:ml,useImperativeHandle:Gc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Jc,useReducer:hl,useRef:Bc,useState:function(){return hl(zi)},useDebugValue:gl,useDeferredValue:function(e){var t=sr();return Qc(t,ft.memoizedState,e)},useTransition:function(){var e=hl(zi)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ac,useSyncExternalStore:$c,useId:Yc,unstable_isNewReconciler:!1},mp={readContext:nr,useCallback:Kc,useContext:nr,useEffect:ml,useImperativeHandle:Gc,useInsertionEffect:Wc,useLayoutEffect:Vc,useMemo:Jc,useReducer:pl,useRef:Bc,useState:function(){return pl(zi)},useDebugValue:gl,useDeferredValue:function(e){var t=sr();return ft===null?t.memoizedState=e:Qc(t,ft.memoizedState,e)},useTransition:function(){var e=pl(zi)[0],t=sr().memoizedState;return[e,t]},useMutableSource:Ac,useSyncExternalStore:$c,useId:Yc,unstable_isNewReconciler:!1};function fr(e,t){if(e&&e.defaultProps){t=R({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function vl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:R({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ba={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Ot(),d=xn(e),f=Vr(i,d);f.payload=t,r!=null&&(f.callback=r),t=mn(e,f,d),t!==null&&(mr(t,e,d,i),Aa(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Ot(),d=xn(e),f=Vr(i,d);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=mn(e,f,d),t!==null&&(mr(t,e,d,i),Aa(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ot(),i=xn(e),d=Vr(r,i);d.tag=2,t!=null&&(d.callback=t),t=mn(e,d,i),t!==null&&(mr(t,e,i,r),Aa(t,e,i))}};function td(e,t,r,i,d,f,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,m):t.prototype&&t.prototype.isPureReactComponent?!Ci(r,i)||!Ci(d,f):!0}function rd(e,t,r){var i=!1,d=fn,f=t.contextType;return typeof f=="object"&&f!==null?f=nr(f):(d=Mt(t)?qn:St.current,i=t.contextTypes,f=(i=i!=null)?Ts(e,d):fn),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=f),t}function nd(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function yl(e,t,r,i){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},sl(e);var f=t.contextType;typeof f=="object"&&f!==null?d.context=nr(f):(f=Mt(t)?qn:St.current,d.context=Ts(e,f)),d.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(vl(e,t,f,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Ba.enqueueReplaceState(d,d.state,null),$a(e,r,d,i),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Us(e,t){try{var r="",i=t;do r+=le(i),i=i.return;while(i);var d=r}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:d,digest:null}}function xl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var gp=typeof WeakMap=="function"?WeakMap:Map;function sd(e,t,r){r=Vr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ja||(Ja=!0,$l=i),wl(e,t)},r}function id(e,t,r){r=Vr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var d=t.value;r.payload=function(){return i(d)},r.callback=function(){wl(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){wl(e,t),typeof i!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function ad(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new gp;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(r)||(d.add(r),e=Pp.bind(null,e,t,r),t.then(e,e))}function od(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ld(e,t,r,i,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vr(-1,1),t.tag=2,mn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var vp=Y.ReactCurrentOwner,Dt=!1;function Pt(e,t,r,i){t.child=e===null?Ec(t,null,r,i):Ls(t,e.child,r,i)}function ud(e,t,r,i,d){r=r.render;var f=t.ref;return $s(t,d),i=dl(e,t,r,i,f,d),r=fl(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Hr(e,t,d)):(Ze&&r&&Ko(t),t.flags|=1,Pt(e,t,i,d),t.child)}function cd(e,t,r,i,d){if(e===null){var f=r.type;return typeof f=="function"&&!Bl(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,dd(e,t,f,i,d)):(e=to(r.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&d)===0){var m=f.memoizedProps;if(r=r.compare,r=r!==null?r:Ci,r(m,i)&&e.ref===t.ref)return Hr(e,t,d)}return t.flags|=1,e=_n(f,i),e.ref=t.ref,e.return=t,t.child=e}function dd(e,t,r,i,d){if(e!==null){var f=e.memoizedProps;if(Ci(f,i)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=i=f,(e.lanes&d)!==0)(e.flags&131072)!==0&&(Dt=!0);else return t.lanes=e.lanes,Hr(e,t,d)}return _l(e,t,r,i,d)}function fd(e,t,r){var i=t.pendingProps,d=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ds,Yt),Yt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Ds,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,He(Ds,Yt),Yt|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,He(Ds,Yt),Yt|=i;return Pt(e,t,d,r),t.child}function hd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _l(e,t,r,i,d){var f=Mt(r)?qn:St.current;return f=Ts(t,f),$s(t,d),r=dl(e,t,r,i,f,d),i=fl(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Hr(e,t,d)):(Ze&&i&&Ko(t),t.flags|=1,Pt(e,t,r,d),t.child)}function pd(e,t,r,i,d){if(Mt(r)){var f=!0;Na(t)}else f=!1;if($s(t,d),t.stateNode===null)Wa(e,t),rd(t,r,i),yl(t,r,i,d),i=!0;else if(e===null){var m=t.stateNode,_=t.memoizedProps;m.props=_;var j=m.context,O=r.contextType;typeof O=="object"&&O!==null?O=nr(O):(O=Mt(r)?qn:St.current,O=Ts(t,O));var W=r.getDerivedStateFromProps,H=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function";H||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==i||j!==O)&&nd(t,m,i,O),pn=!1;var B=t.memoizedState;m.state=B,$a(t,i,m,d),j=t.memoizedState,_!==i||B!==j||Ut.current||pn?(typeof W=="function"&&(vl(t,r,W,i),j=t.memoizedState),(_=pn||td(t,r,_,i,B,j,O))?(H||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=j),m.props=i,m.state=j,m.context=O,i=_):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,Pc(e,t),_=t.memoizedProps,O=t.type===t.elementType?_:fr(t.type,_),m.props=O,H=t.pendingProps,B=m.context,j=r.contextType,typeof j=="object"&&j!==null?j=nr(j):(j=Mt(r)?qn:St.current,j=Ts(t,j));var te=r.getDerivedStateFromProps;(W=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==H||B!==j)&&nd(t,m,i,j),pn=!1,B=t.memoizedState,m.state=B,$a(t,i,m,d);var oe=t.memoizedState;_!==H||B!==oe||Ut.current||pn?(typeof te=="function"&&(vl(t,r,te,i),oe=t.memoizedState),(O=pn||td(t,r,O,i,B,oe,j)||!1)?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,oe,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,oe,j)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=oe),m.props=i,m.state=oe,m.context=j,i=O):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),i=!1)}return bl(e,t,r,i,f,d)}function bl(e,t,r,i,d,f){hd(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return d&&xc(t,r,!1),Hr(e,t,f);i=t.stateNode,vp.current=t;var _=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=Ls(t,e.child,null,f),t.child=Ls(t,null,_,f)):Pt(e,t,_,f),t.memoizedState=i.state,d&&xc(t,r,!0),t.child}function md(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),il(e,t.containerInfo)}function gd(e,t,r,i,d){return Rs(),Xo(d),t.flags|=256,Pt(e,t,r,i),t.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function vd(e,t,r){var i=t.pendingProps,d=nt.current,f=!1,m=(t.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(d&2)!==0),_?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),He(nt,d&1),e===null)return Yo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,f?(i=t.mode,f=t.child,m={mode:"hidden",children:m},(i&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=m):f=ro(m,i,0,null),e=Zn(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=jl(r),t.memoizedState=kl,e):Sl(t,m));if(d=e.memoizedState,d!==null&&(_=d.dehydrated,_!==null))return yp(e,t,m,i,_,d,r);if(f){f=i.fallback,m=t.mode,d=e.child,_=d.sibling;var j={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==d?(i=t.child,i.childLanes=0,i.pendingProps=j,t.deletions=null):(i=_n(d,j),i.subtreeFlags=d.subtreeFlags&14680064),_!==null?f=_n(_,f):(f=Zn(f,m,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,m=e.child.memoizedState,m=m===null?jl(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=e.childLanes&~r,t.memoizedState=kl,i}return f=e.child,e=f.sibling,i=_n(f,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Sl(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qa(e,t,r,i){return i!==null&&Xo(i),Ls(t,e.child,null,r),e=Sl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yp(e,t,r,i,d,f,m){if(r)return t.flags&256?(t.flags&=-257,i=xl(Error(s(422))),qa(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,d=t.mode,i=ro({mode:"visible",children:i.children},d,0,null),f=Zn(f,d,m,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,(t.mode&1)!==0&&Ls(t,e.child,null,m),t.child.memoizedState=jl(m),t.memoizedState=kl,f);if((t.mode&1)===0)return qa(e,t,m,null);if(d.data==="$!"){if(i=d.nextSibling&&d.nextSibling.dataset,i)var _=i.dgst;return i=_,f=Error(s(419)),i=xl(f,i,void 0),qa(e,t,m,i)}if(_=(m&e.childLanes)!==0,Dt||_){if(i=vt,i!==null){switch(m&-m){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(i.suspendedLanes|m))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Wr(e,d),mr(i,e,d,-1))}return Fl(),i=xl(Error(s(421))),qa(e,t,m,i)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=Op.bind(null,e),d._reactRetry=t,null):(e=f.treeContext,Qt=cn(d.nextSibling),Jt=t,Ze=!0,dr=null,e!==null&&(tr[rr++]=Br,tr[rr++]=qr,tr[rr++]=Wn,Br=e.id,qr=e.overflow,Wn=t),t=Sl(t,i.children),t.flags|=4096,t)}function yd(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),rl(e.return,t,r)}function Nl(e,t,r,i,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:d}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=d)}function xd(e,t,r){var i=t.pendingProps,d=i.revealOrder,f=i.tail;if(Pt(e,t,i.children,r),i=nt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yd(e,r,t);else if(e.tag===19)yd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(He(nt,i),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Ia(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Nl(t,!1,d,r,f);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ia(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Nl(t,!0,r,null,f);break;case"together":Nl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=_n(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_n(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function xp(e,t,r){switch(t.tag){case 3:md(t),Rs();break;case 5:Lc(t);break;case 1:Mt(t.type)&&Na(t);break;case 4:il(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,d=t.memoizedProps.value;He(Ra,i._currentValue),i._currentValue=d;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(He(nt,nt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?vd(e,t,r):(He(nt,nt.current&1),e=Hr(e,t,r),e!==null?e.sibling:null);He(nt,nt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return xd(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(nt,nt.current),i)break;return null;case 22:case 23:return t.lanes=0,fd(e,t,r)}return Hr(e,t,r)}var wd,Cl,_d,bd;wd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Cl=function(){},_d=function(e,t,r,i){var d=e.memoizedProps;if(d!==i){e=t.stateNode,Gn(Cr.current);var f=null;switch(r){case"input":d=je(e,d),i=je(e,i),f=[];break;case"select":d=R({},d,{value:void 0}),i=R({},i,{value:void 0}),f=[];break;case"textarea":d=qt(e,d),i=qt(e,i),f=[];break;default:typeof d.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ka)}Ne(r,i);var m;r=null;for(O in d)if(!i.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var _=d[O];for(m in _)_.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(l.hasOwnProperty(O)?f||(f=[]):(f=f||[]).push(O,null));for(O in i){var j=i[O];if(_=d?.[O],i.hasOwnProperty(O)&&j!==_&&(j!=null||_!=null))if(O==="style")if(_){for(m in _)!_.hasOwnProperty(m)||j&&j.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in j)j.hasOwnProperty(m)&&_[m]!==j[m]&&(r||(r={}),r[m]=j[m])}else r||(f||(f=[]),f.push(O,r)),r=j;else O==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,_=_?_.__html:void 0,j!=null&&_!==j&&(f=f||[]).push(O,j)):O==="children"?typeof j!="string"&&typeof j!="number"||(f=f||[]).push(O,""+j):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(l.hasOwnProperty(O)?(j!=null&&O==="onScroll"&&Ke("scroll",e),f||_===j||(f=[])):(f=f||[]).push(O,j))}r&&(f=f||[]).push("style",r);var O=f;(t.updateQueue=O)&&(t.flags|=4)}},bd=function(e,t,r,i){r!==i&&(t.flags|=4)};function Bi(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,i|=d.subtreeFlags&14680064,i|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function wp(e,t,r){var i=t.pendingProps;switch(Jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(t),null;case 1:return Mt(t.type)&&Sa(),Ct(t),null;case 3:return i=t.stateNode,Is(),Je(Ut),Je(St),ll(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dr!==null&&(Ml(dr),dr=null))),Cl(e,t),Ct(t),null;case 5:al(t);var d=Gn(Ui.current);if(r=t.type,e!==null&&t.stateNode!=null)_d(e,t,r,i,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return Ct(t),null}if(e=Gn(Cr.current),Pa(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[Nr]=t,i[Ri]=f,e=(t.mode&1)!==0,r){case"dialog":Ke("cancel",i),Ke("close",i);break;case"iframe":case"object":case"embed":Ke("load",i);break;case"video":case"audio":for(d=0;d<Ti.length;d++)Ke(Ti[d],i);break;case"source":Ke("error",i);break;case"img":case"image":case"link":Ke("error",i),Ke("load",i);break;case"details":Ke("toggle",i);break;case"input":De(i,f),Ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Ke("invalid",i);break;case"textarea":Zt(i,f),Ke("invalid",i)}Ne(r,f),d=null;for(var m in f)if(f.hasOwnProperty(m)){var _=f[m];m==="children"?typeof _=="string"?i.textContent!==_&&(f.suppressHydrationWarning!==!0&&ba(i.textContent,_,e),d=["children",_]):typeof _=="number"&&i.textContent!==""+_&&(f.suppressHydrationWarning!==!0&&ba(i.textContent,_,e),d=["children",""+_]):l.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Ke("scroll",i)}switch(r){case"input":V(i),bt(i,f,!0);break;case"textarea":V(i),xr(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=ka)}i=d,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=os(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[Nr]=t,e[Ri]=i,wd(e,t,!1,!1),t.stateNode=e;e:{switch(m=Te(r,i),r){case"dialog":Ke("cancel",e),Ke("close",e),d=i;break;case"iframe":case"object":case"embed":Ke("load",e),d=i;break;case"video":case"audio":for(d=0;d<Ti.length;d++)Ke(Ti[d],e);d=i;break;case"source":Ke("error",e),d=i;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),d=i;break;case"details":Ke("toggle",e),d=i;break;case"input":De(e,i),d=je(e,i),Ke("invalid",e);break;case"option":d=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},d=R({},i,{value:void 0}),Ke("invalid",e);break;case"textarea":Zt(e,i),d=qt(e,i),Ke("invalid",e);break;default:d=i}Ne(r,d),_=d;for(f in _)if(_.hasOwnProperty(f)){var j=_[f];f==="style"?Q(e,j):f==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&ls(e,j)):f==="children"?typeof j=="string"?(r!=="textarea"||j!=="")&&or(e,j):typeof j=="number"&&or(e,""+j):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?j!=null&&f==="onScroll"&&Ke("scroll",e):j!=null&&F(e,f,j,m))}switch(r){case"input":V(e),bt(e,i,!1);break;case"textarea":V(e),xr(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ge(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?At(e,!!i.multiple,f,!1):i.defaultValue!=null&&At(e,!!i.multiple,i.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=ka)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ct(t),null;case 6:if(e&&t.stateNode!=null)bd(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(r=Gn(Ui.current),Gn(Cr.current),Pa(t)){if(i=t.stateNode,r=t.memoizedProps,i[Nr]=t,(f=i.nodeValue!==r)&&(e=Jt,e!==null))switch(e.tag){case 3:ba(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Nr]=t,t.stateNode=i}return Ct(t),null;case 13:if(Je(nt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&Qt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Sc(),Rs(),t.flags|=98560,f=!1;else if(f=Pa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Nr]=t}else Rs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ct(t),f=!1}else dr!==null&&(Ml(dr),dr=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(nt.current&1)!==0?ht===0&&(ht=3):Fl())),t.updateQueue!==null&&(t.flags|=4),Ct(t),null);case 4:return Is(),Cl(e,t),e===null&&Pi(t.stateNode.containerInfo),Ct(t),null;case 10:return tl(t.type._context),Ct(t),null;case 17:return Mt(t.type)&&Sa(),Ct(t),null;case 19:if(Je(nt),f=t.memoizedState,f===null)return Ct(t),null;if(i=(t.flags&128)!==0,m=f.rendering,m===null)if(i)Bi(f,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Ia(e),m!==null){for(t.flags|=128,Bi(f,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,e=m.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(nt,nt.current&1|2),t.child}e=e.sibling}f.tail!==null&&tt()>zs&&(t.flags|=128,i=!0,Bi(f,!1),t.lanes=4194304)}else{if(!i)if(e=Ia(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Bi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ze)return Ct(t),null}else 2*tt()-f.renderingStartTime>zs&&r!==1073741824&&(t.flags|=128,i=!0,Bi(f,!1),t.lanes=4194304);f.isBackwards?(m.sibling=t.child,t.child=m):(r=f.last,r!==null?r.sibling=m:t.child=m,f.last=m)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=tt(),t.sibling=null,r=nt.current,He(nt,i?r&1|2:r&1),t):(Ct(t),null);case 22:case 23:return zl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Yt&1073741824)!==0&&(Ct(t),t.subtreeFlags&6&&(t.flags|=8192)):Ct(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function _p(e,t){switch(Jo(t),t.tag){case 1:return Mt(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Is(),Je(Ut),Je(St),ll(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return al(t),null;case 13:if(Je(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(nt),null;case 4:return Is(),null;case 10:return tl(t.type._context),null;case 22:case 23:return zl(),null;case 24:return null;default:return null}}var Va=!1,Et=!1,bp=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ms(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){at(e,t,i)}else r.current=null}function El(e,t,r){try{r()}catch(i){at(e,t,i)}}var kd=!1;function kp(e,t){if(zo=fe,e=tc(),Ro(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var d=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var m=0,_=-1,j=-1,O=0,W=0,H=e,B=null;t:for(;;){for(var te;H!==r||d!==0&&H.nodeType!==3||(_=m+d),H!==f||i!==0&&H.nodeType!==3||(j=m+i),H.nodeType===3&&(m+=H.nodeValue.length),(te=H.firstChild)!==null;)B=H,H=te;for(;;){if(H===e)break t;if(B===r&&++O===d&&(_=m),B===f&&++W===i&&(j=m),(te=H.nextSibling)!==null)break;H=B,B=H.parentNode}H=te}r=_===-1||j===-1?null:{start:_,end:j}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fo={focusedElem:e,selectionRange:r},fe=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var oe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ue=oe.memoizedProps,lt=oe.memoizedState,E=t.stateNode,S=E.getSnapshotBeforeUpdate(t.elementType===t.type?ue:fr(t.type,ue),lt);E.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(K){at(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return oe=kd,kd=!1,oe}function qi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var d=i=i.next;do{if((d.tag&e)===e){var f=d.destroy;d.destroy=void 0,f!==void 0&&El(t,r,f)}d=d.next}while(d!==i)}}function Ha(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Tl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nr],delete t[Ri],delete t[Vo],delete t[ip],delete t[ap])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sd(e){return e.tag===5||e.tag===3||e.tag===4}function Nd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ka));else if(i!==4&&(e=e.child,e!==null))for(Pl(e,t,r),e=e.sibling;e!==null;)Pl(e,t,r),e=e.sibling}function Ol(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ol(e,t,r),e=e.sibling;e!==null;)Ol(e,t,r),e=e.sibling}var wt=null,hr=!1;function gn(e,t,r){for(r=r.child;r!==null;)Cd(e,t,r),r=r.sibling}function Cd(e,t,r){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(ps,r)}catch{}switch(r.tag){case 5:Et||Ms(r,t);case 6:var i=wt,d=hr;wt=null,gn(e,t,r),wt=i,hr=d,wt!==null&&(hr?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(hr?(e=wt,r=r.stateNode,e.nodeType===8?Wo(e.parentNode,r):e.nodeType===1&&Wo(e,r),D(e)):Wo(wt,r.stateNode));break;case 4:i=wt,d=hr,wt=r.stateNode.containerInfo,hr=!0,gn(e,t,r),wt=i,hr=d;break;case 0:case 11:case 14:case 15:if(!Et&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){d=i=i.next;do{var f=d,m=f.destroy;f=f.tag,m!==void 0&&((f&2)!==0||(f&4)!==0)&&El(r,t,m),d=d.next}while(d!==i)}gn(e,t,r);break;case 1:if(!Et&&(Ms(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(_){at(r,t,_)}gn(e,t,r);break;case 21:gn(e,t,r);break;case 22:r.mode&1?(Et=(i=Et)||r.memoizedState!==null,gn(e,t,r),Et=i):gn(e,t,r);break;default:gn(e,t,r)}}function Ed(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bp),t.forEach(function(i){var d=Rp.bind(null,e,i);r.has(i)||(r.add(i),i.then(d,d))})}}function pr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var d=r[i];try{var f=e,m=t,_=m;e:for(;_!==null;){switch(_.tag){case 5:wt=_.stateNode,hr=!1;break e;case 3:wt=_.stateNode.containerInfo,hr=!0;break e;case 4:wt=_.stateNode.containerInfo,hr=!0;break e}_=_.return}if(wt===null)throw Error(s(160));Cd(f,m,d),wt=null,hr=!1;var j=d.alternate;j!==null&&(j.return=null),d.return=null}catch(O){at(d,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Td(t,e),t=t.sibling}function Td(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pr(t,e),Tr(e),i&4){try{qi(3,e,e.return),Ha(3,e)}catch(ue){at(e,e.return,ue)}try{qi(5,e,e.return)}catch(ue){at(e,e.return,ue)}}break;case 1:pr(t,e),Tr(e),i&512&&r!==null&&Ms(r,r.return);break;case 5:if(pr(t,e),Tr(e),i&512&&r!==null&&Ms(r,r.return),e.flags&32){var d=e.stateNode;try{or(d,"")}catch(ue){at(e,e.return,ue)}}if(i&4&&(d=e.stateNode,d!=null)){var f=e.memoizedProps,m=r!==null?r.memoizedProps:f,_=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{_==="input"&&f.type==="radio"&&f.name!=null&&Ue(d,f),Te(_,m);var O=Te(_,f);for(m=0;m<j.length;m+=2){var W=j[m],H=j[m+1];W==="style"?Q(d,H):W==="dangerouslySetInnerHTML"?ls(d,H):W==="children"?or(d,H):F(d,W,H,O)}switch(_){case"input":Qe(d,f);break;case"textarea":Rr(d,f);break;case"select":var B=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var te=f.value;te!=null?At(d,!!f.multiple,te,!1):B!==!!f.multiple&&(f.defaultValue!=null?At(d,!!f.multiple,f.defaultValue,!0):At(d,!!f.multiple,f.multiple?[]:"",!1))}d[Ri]=f}catch(ue){at(e,e.return,ue)}}break;case 6:if(pr(t,e),Tr(e),i&4){if(e.stateNode===null)throw Error(s(162));d=e.stateNode,f=e.memoizedProps;try{d.nodeValue=f}catch(ue){at(e,e.return,ue)}}break;case 3:if(pr(t,e),Tr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{D(t.containerInfo)}catch(ue){at(e,e.return,ue)}break;case 4:pr(t,e),Tr(e);break;case 13:pr(t,e),Tr(e),d=e.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Al=tt())),i&4&&Ed(e);break;case 22:if(W=r!==null&&r.memoizedState!==null,e.mode&1?(Et=(O=Et)||W,pr(t,e),Et=O):pr(t,e),Tr(e),i&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!W&&(e.mode&1)!==0)for(ie=e,W=e.child;W!==null;){for(H=ie=W;ie!==null;){switch(B=ie,te=B.child,B.tag){case 0:case 11:case 14:case 15:qi(4,B,B.return);break;case 1:Ms(B,B.return);var oe=B.stateNode;if(typeof oe.componentWillUnmount=="function"){i=B,r=B.return;try{t=i,oe.props=t.memoizedProps,oe.state=t.memoizedState,oe.componentWillUnmount()}catch(ue){at(i,r,ue)}}break;case 5:Ms(B,B.return);break;case 22:if(B.memoizedState!==null){Rd(H);continue}}te!==null?(te.return=B,ie=te):Rd(H)}W=W.sibling}e:for(W=null,H=e;;){if(H.tag===5){if(W===null){W=H;try{d=H.stateNode,O?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(_=H.stateNode,j=H.memoizedProps.style,m=j!=null&&j.hasOwnProperty("display")?j.display:null,_.style.display=$t("display",m))}catch(ue){at(e,e.return,ue)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(ue){at(e,e.return,ue)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:pr(t,e),Tr(e),i&4&&Ed(e);break;case 21:break;default:pr(t,e),Tr(e)}}function Tr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Sd(r)){var i=r;break e}r=r.return}throw Error(s(160))}switch(i.tag){case 5:var d=i.stateNode;i.flags&32&&(or(d,""),i.flags&=-33);var f=Nd(e);Ol(e,f,d);break;case 3:case 4:var m=i.stateNode.containerInfo,_=Nd(e);Pl(e,_,m);break;default:throw Error(s(161))}}catch(j){at(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jp(e,t,r){ie=e,Pd(e)}function Pd(e,t,r){for(var i=(e.mode&1)!==0;ie!==null;){var d=ie,f=d.child;if(d.tag===22&&i){var m=d.memoizedState!==null||Va;if(!m){var _=d.alternate,j=_!==null&&_.memoizedState!==null||Et;_=Va;var O=Et;if(Va=m,(Et=j)&&!O)for(ie=d;ie!==null;)m=ie,j=m.child,m.tag===22&&m.memoizedState!==null?Ld(d):j!==null?(j.return=m,ie=j):Ld(d);for(;f!==null;)ie=f,Pd(f),f=f.sibling;ie=d,Va=_,Et=O}Od(e)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ie=f):Od(e)}}function Od(e){for(;ie!==null;){var t=ie;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Et||Ha(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Et)if(r===null)i.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:fr(t.type,r.memoizedProps);i.componentDidUpdate(d,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Rc(t,f,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Rc(t,m,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var j=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&r.focus();break;case"img":j.src&&(r.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var W=O.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&D(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Et||t.flags&512&&Tl(t)}catch(B){at(t,t.return,B)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Rd(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Ld(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ha(4,t)}catch(j){at(t,r,j)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var d=t.return;try{i.componentDidMount()}catch(j){at(t,d,j)}}var f=t.return;try{Tl(t)}catch(j){at(t,f,j)}break;case 5:var m=t.return;try{Tl(t)}catch(j){at(t,m,j)}}}catch(j){at(t,t.return,j)}if(t===e){ie=null;break}var _=t.sibling;if(_!==null){_.return=t.return,ie=_;break}ie=t.return}}var Sp=Math.ceil,Ga=Y.ReactCurrentDispatcher,Rl=Y.ReactCurrentOwner,ir=Y.ReactCurrentBatchConfig,Ie=0,vt=null,dt=null,_t=0,Yt=0,Ds=dn(0),ht=0,Wi=null,Jn=0,Ka=0,Ll=0,Vi=null,zt=null,Al=0,zs=1/0,Gr=null,Ja=!1,$l=null,vn=null,Qa=!1,yn=null,Ya=0,Hi=0,Il=null,Xa=-1,Za=0;function Ot(){return(Ie&6)!==0?tt():Xa!==-1?Xa:Xa=tt()}function xn(e){return(e.mode&1)===0?1:(Ie&2)!==0&&_t!==0?_t&-_t:lp.transition!==null?(Za===0&&(Za=la()),Za):(e=Le,e!==0||(e=window.event,e=e===void 0?16:ga(e.type)),e)}function mr(e,t,r,i){if(50<Hi)throw Hi=0,Il=null,Error(s(185));an(e,r,i),((Ie&2)===0||e!==vt)&&(e===vt&&((Ie&2)===0&&(Ka|=r),ht===4&&wn(e,_t)),Ft(e,i),r===1&&Ie===0&&(t.mode&1)===0&&(zs=tt()+500,Ca&&hn()))}function Ft(e,t){var r=e.callbackNode;Ln(e,t);var i=nn(e,e===vt?_t:0);if(i===0)r!==null&&sa(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&sa(r),t===1)e.tag===0?op($d.bind(null,e)):wc($d.bind(null,e)),np(function(){(Ie&6)===0&&hn()}),r=null;else{switch(ca(i)){case 1:r=hi;break;case 4:r=fs;break;case 16:r=hs;break;case 536870912:r=aa;break;default:r=hs}r=qd(r,Ad.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ad(e,t){if(Xa=-1,Za=0,(Ie&6)!==0)throw Error(s(327));var r=e.callbackNode;if(Fs()&&e.callbackNode!==r)return null;var i=nn(e,e===vt?_t:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=eo(e,i);else{t=i;var d=Ie;Ie|=2;var f=Ud();(vt!==e||_t!==t)&&(Gr=null,zs=tt()+500,Yn(e,t));do try{Ep();break}catch(_){Id(e,_)}while(!0);el(),Ga.current=f,Ie=d,dt!==null?t=0:(vt=null,_t=0,t=ht)}if(t!==0){if(t===2&&(d=sn(e),d!==0&&(i=d,t=Ul(e,d))),t===1)throw r=Wi,Yn(e,0),wn(e,i),Ft(e,tt()),r;if(t===6)wn(e,i);else{if(d=e.current.alternate,(i&30)===0&&!Np(d)&&(t=eo(e,i),t===2&&(f=sn(e),f!==0&&(i=f,t=Ul(e,f))),t===1))throw r=Wi,Yn(e,0),wn(e,i),Ft(e,tt()),r;switch(e.finishedWork=d,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:Xn(e,zt,Gr);break;case 3:if(wn(e,i),(i&130023424)===i&&(t=Al+500-tt(),10<t)){if(nn(e,0)!==0)break;if(d=e.suspendedLanes,(d&i)!==i){Ot(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=qo(Xn.bind(null,e,zt,Gr),t);break}Xn(e,zt,Gr);break;case 4:if(wn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,d=-1;0<i;){var m=31-It(i);f=1<<m,m=t[m],m>d&&(d=m),i&=~f}if(i=d,i=tt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sp(i/1960))-i,10<i){e.timeoutHandle=qo(Xn.bind(null,e,zt,Gr),i);break}Xn(e,zt,Gr);break;case 5:Xn(e,zt,Gr);break;default:throw Error(s(329))}}}return Ft(e,tt()),e.callbackNode===r?Ad.bind(null,e):null}function Ul(e,t){var r=Vi;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=eo(e,t),e!==2&&(t=zt,zt=r,t!==null&&Ml(t)),e}function Ml(e){zt===null?zt=e:zt.push.apply(zt,e)}function Np(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var d=r[i],f=d.getSnapshot;d=d.value;try{if(!cr(f(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t){for(t&=~Ll,t&=~Ka,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-It(t),i=1<<r;e[r]=-1,t&=~i}}function $d(e){if((Ie&6)!==0)throw Error(s(327));Fs();var t=nn(e,0);if((t&1)===0)return Ft(e,tt()),null;var r=eo(e,t);if(e.tag!==0&&r===2){var i=sn(e);i!==0&&(t=i,r=Ul(e,i))}if(r===1)throw r=Wi,Yn(e,0),wn(e,t),Ft(e,tt()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,zt,Gr),Ft(e,tt()),null}function Dl(e,t){var r=Ie;Ie|=1;try{return e(t)}finally{Ie=r,Ie===0&&(zs=tt()+500,Ca&&hn())}}function Qn(e){yn!==null&&yn.tag===0&&(Ie&6)===0&&Fs();var t=Ie;Ie|=1;var r=ir.transition,i=Le;try{if(ir.transition=null,Le=1,e)return e()}finally{Le=i,ir.transition=r,Ie=t,(Ie&6)===0&&hn()}}function zl(){Yt=Ds.current,Je(Ds)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,rp(r)),dt!==null)for(r=dt.return;r!==null;){var i=r;switch(Jo(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sa();break;case 3:Is(),Je(Ut),Je(St),ll();break;case 5:al(i);break;case 4:Is();break;case 13:Je(nt);break;case 19:Je(nt);break;case 10:tl(i.type._context);break;case 22:case 23:zl()}r=r.return}if(vt=e,dt=e=_n(e.current,null),_t=Yt=t,ht=0,Wi=null,Ll=Ka=Jn=0,zt=Vi=null,Hn!==null){for(t=0;t<Hn.length;t++)if(r=Hn[t],i=r.interleaved,i!==null){r.interleaved=null;var d=i.next,f=r.pending;if(f!==null){var m=f.next;f.next=d,i.next=m}r.pending=i}Hn=null}return e}function Id(e,t){do{var r=dt;try{if(el(),Ua.current=Fa,Ma){for(var i=st.memoizedState;i!==null;){var d=i.queue;d!==null&&(d.pending=null),i=i.next}Ma=!1}if(Kn=0,gt=ft=st=null,Mi=!1,Di=0,Rl.current=null,r===null||r.return===null){ht=1,Wi=t,dt=null;break}e:{var f=e,m=r.return,_=r,j=t;if(t=_t,_.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var O=j,W=_,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var te=od(m);if(te!==null){te.flags&=-257,ld(te,m,_,f,t),te.mode&1&&ad(f,O,t),t=te,j=O;var oe=t.updateQueue;if(oe===null){var ue=new Set;ue.add(j),t.updateQueue=ue}else oe.add(j);break e}else{if((t&1)===0){ad(f,O,t),Fl();break e}j=Error(s(426))}}else if(Ze&&_.mode&1){var lt=od(m);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),ld(lt,m,_,f,t),Xo(Us(j,_));break e}}f=j=Us(j,_),ht!==4&&(ht=2),Vi===null?Vi=[f]:Vi.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var E=sd(f,j,t);Oc(f,E);break e;case 1:_=j;var S=f.type,P=f.stateNode;if((f.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(vn===null||!vn.has(P)))){f.flags|=65536,t&=-t,f.lanes|=t;var K=id(f,_,t);Oc(f,K);break e}}f=f.return}while(f!==null)}Dd(r)}catch(de){t=de,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function Ud(){var e=Ga.current;return Ga.current=Fa,e===null?Fa:e}function Fl(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||(Jn&268435455)===0&&(Ka&268435455)===0||wn(vt,_t)}function eo(e,t){var r=Ie;Ie|=2;var i=Ud();(vt!==e||_t!==t)&&(Gr=null,Yn(e,t));do try{Cp();break}catch(d){Id(e,d)}while(!0);if(el(),Ie=r,Ga.current=i,dt!==null)throw Error(s(261));return vt=null,_t=0,ht}function Cp(){for(;dt!==null;)Md(dt)}function Ep(){for(;dt!==null&&!ia();)Md(dt)}function Md(e){var t=Bd(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Dd(e):dt=t,Rl.current=null}function Dd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=wp(r,t,Yt),r!==null){dt=r;return}}else{if(r=_p(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ht=6,dt=null;return}}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);ht===0&&(ht=5)}function Xn(e,t,r){var i=Le,d=ir.transition;try{ir.transition=null,Le=1,Tp(e,t,r,i)}finally{ir.transition=d,Le=i}return null}function Tp(e,t,r,i){do Fs();while(yn!==null);if((Ie&6)!==0)throw Error(s(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(ua(e,f),e===vt&&(dt=vt=null,_t=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Qa||(Qa=!0,qd(hs,function(){return Fs(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=ir.transition,ir.transition=null;var m=Le;Le=1;var _=Ie;Ie|=4,Rl.current=null,kp(e,r),Td(r,e),Jh(Fo),fe=!!zo,Fo=zo=null,e.current=r,jp(r),Tt(),Ie=_,Le=m,ir.transition=f}else e.current=r;if(Qa&&(Qa=!1,yn=e,Ya=d),f=e.pendingLanes,f===0&&(vn=null),oa(r.stateNode),Ft(e,tt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],i(d.value,{componentStack:d.stack,digest:d.digest});if(Ja)throw Ja=!1,e=$l,$l=null,e;return(Ya&1)!==0&&e.tag!==0&&Fs(),f=e.pendingLanes,(f&1)!==0?e===Il?Hi++:(Hi=0,Il=e):Hi=0,hn(),null}function Fs(){if(yn!==null){var e=ca(Ya),t=ir.transition,r=Le;try{if(ir.transition=null,Le=16>e?16:e,yn===null)var i=!1;else{if(e=yn,yn=null,Ya=0,(Ie&6)!==0)throw Error(s(331));var d=Ie;for(Ie|=4,ie=e.current;ie!==null;){var f=ie,m=f.child;if((ie.flags&16)!==0){var _=f.deletions;if(_!==null){for(var j=0;j<_.length;j++){var O=_[j];for(ie=O;ie!==null;){var W=ie;switch(W.tag){case 0:case 11:case 15:qi(8,W,f)}var H=W.child;if(H!==null)H.return=W,ie=H;else for(;ie!==null;){W=ie;var B=W.sibling,te=W.return;if(jd(W),W===O){ie=null;break}if(B!==null){B.return=te,ie=B;break}ie=te}}}var oe=f.alternate;if(oe!==null){var ue=oe.child;if(ue!==null){oe.child=null;do{var lt=ue.sibling;ue.sibling=null,ue=lt}while(ue!==null)}}ie=f}}if((f.subtreeFlags&2064)!==0&&m!==null)m.return=f,ie=m;else e:for(;ie!==null;){if(f=ie,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:qi(9,f,f.return)}var E=f.sibling;if(E!==null){E.return=f.return,ie=E;break e}ie=f.return}}var S=e.current;for(ie=S;ie!==null;){m=ie;var P=m.child;if((m.subtreeFlags&2064)!==0&&P!==null)P.return=m,ie=P;else e:for(m=S;ie!==null;){if(_=ie,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:Ha(9,_)}}catch(de){at(_,_.return,de)}if(_===m){ie=null;break e}var K=_.sibling;if(K!==null){K.return=_.return,ie=K;break e}ie=_.return}}if(Ie=d,hn(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(ps,e)}catch{}i=!0}return i}finally{Le=r,ir.transition=t}}return!1}function zd(e,t,r){t=Us(r,t),t=sd(e,t,1),e=mn(e,t,1),t=Ot(),e!==null&&(an(e,1,t),Ft(e,t))}function at(e,t,r){if(e.tag===3)zd(e,e,r);else for(;t!==null;){if(t.tag===3){zd(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vn===null||!vn.has(i))){e=Us(r,e),e=id(t,e,1),t=mn(t,e,1),e=Ot(),t!==null&&(an(t,1,e),Ft(t,e));break}}t=t.return}}function Pp(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Ot(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(_t&r)===r&&(ht===4||ht===3&&(_t&130023424)===_t&&500>tt()-Al?Yn(e,0):Ll|=r),Ft(e,t)}function Fd(e,t){t===0&&((e.mode&1)===0?t=1:(t=gs,gs<<=1,(gs&130023424)===0&&(gs=4194304)));var r=Ot();e=Wr(e,t),e!==null&&(an(e,t,r),Ft(e,r))}function Op(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fd(e,r)}function Rp(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),Fd(e,r)}var Bd;Bd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Dt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Dt=!1,xp(e,t,r);Dt=(e.flags&131072)!==0}else Dt=!1,Ze&&(t.flags&1048576)!==0&&_c(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var d=Ts(t,St.current);$s(t,r),d=dl(null,t,i,e,d,r);var f=fl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(i)?(f=!0,Na(t)):f=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,sl(t),d.updater=Ba,t.stateNode=d,d._reactInternals=t,yl(t,i,e,r),t=bl(null,t,i,!0,f,r)):(t.tag=0,Ze&&f&&Ko(t),Pt(null,t,d,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,d=i._init,i=d(i._payload),t.type=i,d=t.tag=Ap(i),e=fr(i,e),d){case 0:t=_l(null,t,i,e,r);break e;case 1:t=pd(null,t,i,e,r);break e;case 11:t=ud(null,t,i,e,r);break e;case 14:t=cd(null,t,i,fr(i.type,e),r);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),_l(e,t,i,d,r);case 1:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),pd(e,t,i,d,r);case 3:e:{if(md(t),e===null)throw Error(s(387));i=t.pendingProps,f=t.memoizedState,d=f.element,Pc(e,t),$a(t,i,null,r);var m=t.memoizedState;if(i=m.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){d=Us(Error(s(423)),t),t=gd(e,t,i,r,d);break e}else if(i!==d){d=Us(Error(s(424)),t),t=gd(e,t,i,r,d);break e}else for(Qt=cn(t.stateNode.containerInfo.firstChild),Jt=t,Ze=!0,dr=null,r=Ec(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rs(),i===d){t=Hr(e,t,r);break e}Pt(e,t,i,r)}t=t.child}return t;case 5:return Lc(t),e===null&&Yo(t),i=t.type,d=t.pendingProps,f=e!==null?e.memoizedProps:null,m=d.children,Bo(i,d)?m=null:f!==null&&Bo(i,f)&&(t.flags|=32),hd(e,t),Pt(e,t,m,r),t.child;case 6:return e===null&&Yo(t),null;case 13:return vd(e,t,r);case 4:return il(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ls(t,null,i,r):Pt(e,t,i,r),t.child;case 11:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),ud(e,t,i,d,r);case 7:return Pt(e,t,t.pendingProps,r),t.child;case 8:return Pt(e,t,t.pendingProps.children,r),t.child;case 12:return Pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,d=t.pendingProps,f=t.memoizedProps,m=d.value,He(Ra,i._currentValue),i._currentValue=m,f!==null)if(cr(f.value,m)){if(f.children===d.children&&!Ut.current){t=Hr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var _=f.dependencies;if(_!==null){m=f.child;for(var j=_.firstContext;j!==null;){if(j.context===i){if(f.tag===1){j=Vr(-1,r&-r),j.tag=2;var O=f.updateQueue;if(O!==null){O=O.shared;var W=O.pending;W===null?j.next=j:(j.next=W.next,W.next=j),O.pending=j}}f.lanes|=r,j=f.alternate,j!==null&&(j.lanes|=r),rl(f.return,r,t),_.lanes|=r;break}j=j.next}}else if(f.tag===10)m=f.type===t.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(s(341));m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),rl(m,r,t),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===t){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}Pt(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,i=t.pendingProps.children,$s(t,r),d=nr(d),i=i(d),t.flags|=1,Pt(e,t,i,r),t.child;case 14:return i=t.type,d=fr(i,t.pendingProps),d=fr(i.type,d),cd(e,t,i,d,r);case 15:return dd(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:fr(i,d),Wa(e,t),t.tag=1,Mt(i)?(e=!0,Na(t)):e=!1,$s(t,r),rd(t,i,d),yl(t,i,d,r),bl(null,t,i,!0,e,r);case 19:return xd(e,t,r);case 22:return fd(e,t,r)}throw Error(s(156,t.tag))};function qd(e,t){return fi(e,t)}function Lp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(e,t,r,i){return new Lp(e,t,r,i)}function Bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ap(e){if(typeof e=="function")return Bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===We)return 11;if(e===he)return 14}return 2}function _n(e,t){var r=e.alternate;return r===null?(r=ar(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function to(e,t,r,i,d,f){var m=2;if(i=e,typeof e=="function")Bl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case we:return Zn(r.children,d,f,t);case Ee:m=8,d|=8;break;case et:return e=ar(12,r,t,d|2),e.elementType=et,e.lanes=f,e;case Be:return e=ar(13,r,t,d),e.elementType=Be,e.lanes=f,e;case G:return e=ar(19,r,t,d),e.elementType=G,e.lanes=f,e;case re:return ro(r,d,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Fe:m=10;break e;case qe:m=9;break e;case We:m=11;break e;case he:m=14;break e;case pe:m=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=ar(m,r,t,d),t.elementType=e,t.type=i,t.lanes=f,t}function Zn(e,t,r,i){return e=ar(7,e,i,t),e.lanes=r,e}function ro(e,t,r,i){return e=ar(22,e,i,t),e.elementType=re,e.lanes=r,e.stateNode={isHidden:!1},e}function ql(e,t,r){return e=ar(6,e,null,t),e.lanes=r,e}function Wl(e,t,r){return t=ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,r,i,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vs(0),this.expirationTimes=vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.identifierPrefix=i,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Vl(e,t,r,i,d,f,m,_,j){return e=new $p(e,t,r,_,j),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ar(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sl(f),e}function Ip(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Wd(e){if(!e)return fn;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(Mt(r))return yc(e,r,t)}return t}function Vd(e,t,r,i,d,f,m,_,j){return e=Vl(r,i,!0,e,d,f,m,_,j),e.context=Wd(null),r=e.current,i=Ot(),d=xn(r),f=Vr(i,d),f.callback=t??null,mn(r,f,d),e.current.lanes=d,an(e,d,i),Ft(e,i),e}function no(e,t,r,i){var d=t.current,f=Ot(),m=xn(d);return r=Wd(r),t.context===null?t.context=r:t.pendingContext=r,t=Vr(f,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=mn(d,t,m),e!==null&&(mr(e,d,m,f),Aa(e,d,m)),m}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Hl(e,t){Hd(e,t),(e=e.alternate)&&Hd(e,t)}function Up(){return null}var Gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gl(e){this._internalRoot=e}io.prototype.render=Gl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));no(e,t,null,null)},io.prototype.unmount=Gl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){no(null,e,null,null)}),t[zr]=null}};function io(e){this._internalRoot=e}io.prototype.unstable_scheduleHydration=function(e){if(e){var t=ys();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kt.length&&t!==0&&t<Kt[r].priority;r++);Kt.splice(r,0,e),r===0&&ha(e)}};function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function Mp(e,t,r,i,d){if(d){if(typeof i=="function"){var f=i;i=function(){var O=so(m);f.call(O)}}var m=Vd(t,i,e,0,null,!1,!1,"",Kd);return e._reactRootContainer=m,e[zr]=m.current,Pi(e.nodeType===8?e.parentNode:e),Qn(),m}for(;d=e.lastChild;)e.removeChild(d);if(typeof i=="function"){var _=i;i=function(){var O=so(j);_.call(O)}}var j=Vl(e,0,!1,null,null,!1,!1,"",Kd);return e._reactRootContainer=j,e[zr]=j.current,Pi(e.nodeType===8?e.parentNode:e),Qn(function(){no(t,j,r,i)}),j}function oo(e,t,r,i,d){var f=r._reactRootContainer;if(f){var m=f;if(typeof d=="function"){var _=d;d=function(){var j=so(m);_.call(j)}}no(t,m,e,d)}else m=Mp(r,t,e,d,i);return so(m)}da=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=rn(t.pendingLanes);r!==0&&(gi(t,r|1),Ft(t,tt()),(Ie&6)===0&&(zs=tt()+500,hn()))}break;case 13:Qn(function(){var i=Wr(e,1);if(i!==null){var d=Ot();mr(i,e,1,d)}}),Hl(e,1)}},An=function(e){if(e.tag===13){var t=Wr(e,134217728);if(t!==null){var r=Ot();mr(t,e,134217728,r)}Hl(e,134217728)}},$n=function(e){if(e.tag===13){var t=xn(e),r=Wr(e,t);if(r!==null){var i=Ot();mr(r,e,t,i)}Hl(e,t)}},ys=function(){return Le},fa=function(e,t){var r=Le;try{return Le=e,t()}finally{Le=r}},Ye=function(e,t,r){switch(t){case"input":if(Qe(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var d=ja(i);if(!d)throw Error(s(90));se(i),Qe(i,d)}}}break;case"textarea":Rr(e,r);break;case"select":t=r.value,t!=null&&At(e,!!r.multiple,t,!1)}},Xr=Dl,us=Qn;var Dp={usingClientEntryPoint:!1,Events:[Li,Cs,ja,Lr,ai,Dl]},Gi={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zp={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=di(e),e===null?null:e.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||Up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lo.isDisabled&&lo.supportsFiber)try{ps=lo.inject(zp),Vt=lo}catch{}}return Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dp,Bt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kl(t))throw Error(s(200));return Ip(e,t,null,r)},Bt.createRoot=function(e,t){if(!Kl(e))throw Error(s(299));var r=!1,i="",d=Gd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Vl(e,1,!1,null,null,r,!1,i,d),e[zr]=t.current,Pi(e.nodeType===8?e.parentNode:e),new Gl(t)},Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=di(t),e=e===null?null:e.stateNode,e},Bt.flushSync=function(e){return Qn(e)},Bt.hydrate=function(e,t,r){if(!ao(t))throw Error(s(200));return oo(null,e,t,!0,r)},Bt.hydrateRoot=function(e,t,r){if(!Kl(e))throw Error(s(405));var i=r!=null&&r.hydratedSources||null,d=!1,f="",m=Gd;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Vd(t,null,e,1,r??null,d,!1,f,m),e[zr]=t.current,Pi(e),i)for(e=0;e<i.length;e++)r=i[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new io(t)},Bt.render=function(e,t,r){if(!ao(t))throw Error(s(200));return oo(null,e,t,!1,r)},Bt.unmountComponentAtNode=function(e){if(!ao(e))throw Error(s(40));return e._reactRootContainer?(Qn(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1},Bt.unstable_batchedUpdates=Dl,Bt.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!ao(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return oo(e,t,r,!1,i)},Bt.version="18.3.1-next-f1338f8080-20240426",Bt}var rf;function Df(){if(rf)return Yl.exports;rf=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Yl.exports=Qp(),Yl.exports}var nf;function Yp(){if(nf)return uo;nf=1;var o=Df();return uo.createRoot=o.createRoot,uo.hydrateRoot=o.hydrateRoot,uo}var Xp=Yp();const Zp=Nu(Xp);var em=Df();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},ea.apply(this,arguments)}var Nn;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Nn||(Nn={}));const sf="popstate";function tm(o){o===void 0&&(o={});function n(a,l){let{pathname:c,search:h,hash:p}=a.location;return cu("",{pathname:c,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(a,l){return typeof l=="string"?l:go(l)}return nm(n,s,null,o)}function ut(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function zf(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function rm(){return Math.random().toString(36).substr(2,8)}function af(o,n){return{usr:o.state,key:o.key,idx:n}}function cu(o,n,s,a){return s===void 0&&(s=null),ea({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof n=="string"?ri(n):n,{state:s,key:n&&n.key||a||rm()})}function go(o){let{pathname:n="/",search:s="",hash:a=""}=o;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function ri(o){let n={};if(o){let s=o.indexOf("#");s>=0&&(n.hash=o.substr(s),o=o.substr(0,s));let a=o.indexOf("?");a>=0&&(n.search=o.substr(a),o=o.substr(0,a)),o&&(n.pathname=o)}return n}function nm(o,n,s,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:c=!1}=a,h=l.history,p=Nn.Pop,g=null,v=x();v==null&&(v=0,h.replaceState(ea({},h.state,{idx:v}),""));function x(){return(h.state||{idx:null}).idx}function b(){p=Nn.Pop;let C=x(),J=C==null?null:C-v;v=C,g&&g({action:p,location:I.location,delta:J})}function N(C,J){p=Nn.Push;let ee=cu(I.location,C,J);v=x()+1;let F=af(ee,v),Y=I.createHref(ee);try{h.pushState(F,"",Y)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;l.location.assign(Y)}c&&g&&g({action:p,location:I.location,delta:1})}function L(C,J){p=Nn.Replace;let ee=cu(I.location,C,J);v=x();let F=af(ee,v),Y=I.createHref(ee);h.replaceState(F,"",Y),c&&g&&g({action:p,location:I.location,delta:0})}function M(C){let J=l.location.origin!=="null"?l.location.origin:l.location.href,ee=typeof C=="string"?C:go(C);return ee=ee.replace(/ $/,"%20"),ut(J,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,J)}let I={get action(){return p},get location(){return o(l,h)},listen(C){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(sf,b),g=C,()=>{l.removeEventListener(sf,b),g=null}},createHref(C){return n(l,C)},createURL:M,encodeLocation(C){let J=M(C);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:N,replace:L,go(C){return h.go(C)}};return I}var of;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(of||(of={}));function sm(o,n,s){return s===void 0&&(s="/"),im(o,n,s)}function im(o,n,s,a){let l=typeof n=="string"?ri(n):n,c=Eu(l.pathname||"/",s);if(c==null)return null;let h=Ff(o);am(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let v=ym(c);p=mm(h[g],v)}return p}function Ff(o,n,s,a){n===void 0&&(n=[]),s===void 0&&(s=[]),a===void 0&&(a="");let l=(c,h,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};g.relativePath.startsWith("/")&&(ut(g.relativePath.startsWith(a),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(a.length));let v=Cn([a,g.relativePath]),x=s.concat(g);c.children&&c.children.length>0&&(ut(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),Ff(c.children,n,x,v)),!(c.path==null&&!c.index)&&n.push({path:v,score:hm(v,c.index),routesMeta:x})};return o.forEach((c,h)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,h);else for(let g of Bf(c.path))l(c,h,g)}),n}function Bf(o){let n=o.split("/");if(n.length===0)return[];let[s,...a]=n,l=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let h=Bf(a.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),l&&p.push(...h),p.map(g=>o.startsWith("/")&&g===""?"/":g)}function am(o){o.sort((n,s)=>n.score!==s.score?s.score-n.score:pm(n.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const om=/^:[\w-]+$/,lm=3,um=2,cm=1,dm=10,fm=-2,lf=o=>o==="*";function hm(o,n){let s=o.split("/"),a=s.length;return s.some(lf)&&(a+=fm),n&&(a+=um),s.filter(l=>!lf(l)).reduce((l,c)=>l+(om.test(c)?lm:c===""?cm:dm),a)}function pm(o,n){return o.length===n.length&&o.slice(0,-1).every((a,l)=>a===n[l])?o[o.length-1]-n[n.length-1]:0}function mm(o,n,s){let{routesMeta:a}=o,l={},c="/",h=[];for(let p=0;p<a.length;++p){let g=a[p],v=p===a.length-1,x=c==="/"?n:n.slice(c.length)||"/",b=gm({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},x),N=g.route;if(!b)return null;Object.assign(l,b.params),h.push({params:l,pathname:Cn([c,b.pathname]),pathnameBase:bm(Cn([c,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(c=Cn([c,b.pathnameBase]))}return h}function gm(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[s,a]=vm(o.path,o.caseSensitive,o.end),l=n.match(s);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:a.reduce((v,x,b)=>{let{paramName:N,isOptional:L}=x;if(N==="*"){let I=p[b]||"";h=c.slice(0,c.length-I.length).replace(/(.)\/+$/,"$1")}const M=p[b];return L&&!M?v[N]=void 0:v[N]=(M||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:o}}function vm(o,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),zf(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let a=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),a]}function ym(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return zf(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),o}}function Eu(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,a=o.charAt(s);return a&&a!=="/"?null:o.slice(s)||"/"}function xm(o,n){n===void 0&&(n="/");let{pathname:s,search:a="",hash:l=""}=typeof o=="string"?ri(o):o;return{pathname:s?s.startsWith("/")?s:wm(s,n):n,search:km(a),hash:jm(l)}}function wm(o,n){let s=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function eu(o,n,s,a){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _m(o){return o.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Tu(o,n){let s=_m(o);return n?s.map((a,l)=>l===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Pu(o,n,s,a){a===void 0&&(a=!1);let l;typeof o=="string"?l=ri(o):(l=ea({},o),ut(!l.pathname||!l.pathname.includes("?"),eu("?","pathname","search",l)),ut(!l.pathname||!l.pathname.includes("#"),eu("#","pathname","hash",l)),ut(!l.search||!l.search.includes("#"),eu("#","search","hash",l)));let c=o===""||l.pathname==="",h=c?"/":l.pathname,p;if(h==null)p=s;else{let b=n.length-1;if(!a&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),b-=1;l.pathname=N.join("/")}p=b>=0?n[b]:"/"}let g=xm(l,p),v=h&&h!=="/"&&h.endsWith("/"),x=(c||h===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(v||x)&&(g.pathname+="/"),g}const Cn=o=>o.join("/").replace(/\/\/+/g,"/"),bm=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),km=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,jm=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Sm(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const qf=["post","put","patch","delete"];new Set(qf);const Nm=["get",...qf];new Set(Nm);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},ta.apply(this,arguments)}const Ou=y.createContext(null),Cm=y.createContext(null),En=y.createContext(null),wo=y.createContext(null),Or=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Wf=y.createContext(null);function Em(o,n){let{relative:s}=n===void 0?{}:n;ni()||ut(!1);let{basename:a,navigator:l}=y.useContext(En),{hash:c,pathname:h,search:p}=Hf(o,{relative:s}),g=h;return a!=="/"&&(g=h==="/"?a:Cn([a,h])),l.createHref({pathname:g,search:p,hash:c})}function ni(){return y.useContext(wo)!=null}function yr(){return ni()||ut(!1),y.useContext(wo).location}function Vf(o){y.useContext(En).static||y.useLayoutEffect(o)}function ss(){let{isDataRoute:o}=y.useContext(Or);return o?qm():Tm()}function Tm(){ni()||ut(!1);let o=y.useContext(Ou),{basename:n,future:s,navigator:a}=y.useContext(En),{matches:l}=y.useContext(Or),{pathname:c}=yr(),h=JSON.stringify(Tu(l,s.v7_relativeSplatPath)),p=y.useRef(!1);return Vf(()=>{p.current=!0}),y.useCallback(function(v,x){if(x===void 0&&(x={}),!p.current)return;if(typeof v=="number"){a.go(v);return}let b=Pu(v,JSON.parse(h),c,x.relative==="path");o==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:Cn([n,b.pathname])),(x.replace?a.replace:a.push)(b,x.state,x)},[n,a,h,c,o])}const Pm=y.createContext(null);function Om(o){let n=y.useContext(Or).outlet;return n&&y.createElement(Pm.Provider,{value:o},n)}function _o(){let{matches:o}=y.useContext(Or),n=o[o.length-1];return n?n.params:{}}function Hf(o,n){let{relative:s}=n===void 0?{}:n,{future:a}=y.useContext(En),{matches:l}=y.useContext(Or),{pathname:c}=yr(),h=JSON.stringify(Tu(l,a.v7_relativeSplatPath));return y.useMemo(()=>Pu(o,JSON.parse(h),c,s==="path"),[o,h,c,s])}function Rm(o,n){return Lm(o,n)}function Lm(o,n,s,a){ni()||ut(!1);let{navigator:l}=y.useContext(En),{matches:c}=y.useContext(Or),h=c[c.length-1],p=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let v=yr(),x;if(n){var b;let C=typeof n=="string"?ri(n):n;g==="/"||(b=C.pathname)!=null&&b.startsWith(g)||ut(!1),x=C}else x=v;let N=x.pathname||"/",L=N;if(g!=="/"){let C=g.replace(/^\//,"").split("/");L="/"+N.replace(/^\//,"").split("/").slice(C.length).join("/")}let M=sm(o,{pathname:L}),I=Mm(M&&M.map(C=>Object.assign({},C,{params:Object.assign({},p,C.params),pathname:Cn([g,l.encodeLocation?l.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?g:Cn([g,l.encodeLocation?l.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),c,s,a);return n&&I?y.createElement(wo.Provider,{value:{location:ta({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Nn.Pop}},I):I}function Am(){let o=Bm(),n=Sm(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),s=o instanceof Error?o.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},n),s?y.createElement("pre",{style:l},s):null,null)}const $m=y.createElement(Am,null);class Im extends y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?y.createElement(Or.Provider,{value:this.props.routeContext},y.createElement(Wf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Um(o){let{routeContext:n,match:s,children:a}=o,l=y.useContext(Ou);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),y.createElement(Or.Provider,{value:n},a)}function Mm(o,n,s,a){var l;if(n===void 0&&(n=[]),s===void 0&&(s=null),a===void 0&&(a=null),o==null){var c;if(!s)return null;if(s.errors)o=s.matches;else if((c=a)!=null&&c.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)o=s.matches;else return null}let h=o,p=(l=s)==null?void 0:l.errors;if(p!=null){let x=h.findIndex(b=>b.route.id&&p?.[b.route.id]!==void 0);x>=0||ut(!1),h=h.slice(0,Math.min(h.length,x+1))}let g=!1,v=-1;if(s&&a&&a.v7_partialHydration)for(let x=0;x<h.length;x++){let b=h[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=x),b.route.id){let{loaderData:N,errors:L}=s,M=b.route.loader&&N[b.route.id]===void 0&&(!L||L[b.route.id]===void 0);if(b.route.lazy||M){g=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((x,b,N)=>{let L,M=!1,I=null,C=null;s&&(L=p&&b.route.id?p[b.route.id]:void 0,I=b.route.errorElement||$m,g&&(v<0&&N===0?(Wm("route-fallback"),M=!0,C=null):v===N&&(M=!0,C=b.route.hydrateFallbackElement||null)));let J=n.concat(h.slice(0,N+1)),ee=()=>{let F;return L?F=I:M?F=C:b.route.Component?F=y.createElement(b.route.Component,null):b.route.element?F=b.route.element:F=x,y.createElement(Um,{match:b,routeContext:{outlet:x,matches:J,isDataRoute:s!=null},children:F})};return s&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?y.createElement(Im,{location:s.location,revalidation:s.revalidation,component:I,error:L,children:ee(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):ee()},null)}var Gf=(function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o})(Gf||{}),Kf=(function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o})(Kf||{});function Dm(o){let n=y.useContext(Ou);return n||ut(!1),n}function zm(o){let n=y.useContext(Cm);return n||ut(!1),n}function Fm(o){let n=y.useContext(Or);return n||ut(!1),n}function Jf(o){let n=Fm(),s=n.matches[n.matches.length-1];return s.route.id||ut(!1),s.route.id}function Bm(){var o;let n=y.useContext(Wf),s=zm(),a=Jf();return n!==void 0?n:(o=s.errors)==null?void 0:o[a]}function qm(){let{router:o}=Dm(Gf.UseNavigateStable),n=Jf(Kf.UseNavigateStable),s=y.useRef(!1);return Vf(()=>{s.current=!0}),y.useCallback(function(l,c){c===void 0&&(c={}),s.current&&(typeof l=="number"?o.navigate(l):o.navigate(l,ta({fromRouteId:n},c)))},[o,n])}const uf={};function Wm(o,n,s){uf[o]||(uf[o]=!0)}function Vm(o,n){o?.v7_startTransition,o?.v7_relativeSplatPath}function bo(o){let{to:n,replace:s,state:a,relative:l}=o;ni()||ut(!1);let{future:c,static:h}=y.useContext(En),{matches:p}=y.useContext(Or),{pathname:g}=yr(),v=ss(),x=Pu(n,Tu(p,c.v7_relativeSplatPath),g,l==="path"),b=JSON.stringify(x);return y.useEffect(()=>v(JSON.parse(b),{replace:s,state:a,relative:l}),[v,b,l,s,a]),null}function Hm(o){return Om(o.context)}function Lt(o){ut(!1)}function Gm(o){let{basename:n="/",children:s=null,location:a,navigationType:l=Nn.Pop,navigator:c,static:h=!1,future:p}=o;ni()&&ut(!1);let g=n.replace(/^\/*/,"/"),v=y.useMemo(()=>({basename:g,navigator:c,static:h,future:ta({v7_relativeSplatPath:!1},p)}),[g,p,c,h]);typeof a=="string"&&(a=ri(a));let{pathname:x="/",search:b="",hash:N="",state:L=null,key:M="default"}=a,I=y.useMemo(()=>{let C=Eu(x,g);return C==null?null:{location:{pathname:C,search:b,hash:N,state:L,key:M},navigationType:l}},[g,x,b,N,L,M,l]);return I==null?null:y.createElement(En.Provider,{value:v},y.createElement(wo.Provider,{children:s,value:I}))}function Km(o){let{children:n,location:s}=o;return Rm(du(n),s)}new Promise(()=>{});function du(o,n){n===void 0&&(n=[]);let s=[];return y.Children.forEach(o,(a,l)=>{if(!y.isValidElement(a))return;let c=[...n,l];if(a.type===y.Fragment){s.push.apply(s,du(a.props.children,c));return}a.type!==Lt&&ut(!1),!a.props.index||!a.props.children||ut(!1);let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=du(a.props.children,c)),s.push(h)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},fu.apply(this,arguments)}function Jm(o,n){if(o==null)return{};var s={},a=Object.keys(o),l,c;for(c=0;c<a.length;c++)l=a[c],!(n.indexOf(l)>=0)&&(s[l]=o[l]);return s}function Qm(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Ym(o,n){return o.button===0&&(!n||n==="_self")&&!Qm(o)}function hu(o){return o===void 0&&(o=""),new URLSearchParams(typeof o=="string"||Array.isArray(o)||o instanceof URLSearchParams?o:Object.keys(o).reduce((n,s)=>{let a=o[s];return n.concat(Array.isArray(a)?a.map(l=>[s,l]):[[s,a]])},[]))}function Xm(o,n){let s=hu(o);return n&&n.forEach((a,l)=>{s.has(l)||n.getAll(l).forEach(c=>{s.append(l,c)})}),s}const Zm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eg="6";try{window.__reactRouterVersion=eg}catch{}const tg="startTransition",cf=Gp[tg];function rg(o){let{basename:n,children:s,future:a,window:l}=o,c=y.useRef();c.current==null&&(c.current=tm({window:l,v5Compat:!0}));let h=c.current,[p,g]=y.useState({action:h.action,location:h.location}),{v7_startTransition:v}=a||{},x=y.useCallback(b=>{v&&cf?cf(()=>g(b)):g(b)},[g,v]);return y.useLayoutEffect(()=>h.listen(x),[h,x]),y.useEffect(()=>Vm(a),[a]),y.createElement(Gm,{basename:n,children:s,location:p.location,navigationType:p.action,navigator:h,future:a})}const ng=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=y.forwardRef(function(n,s){let{onClick:a,relative:l,reloadDocument:c,replace:h,state:p,target:g,to:v,preventScrollReset:x,viewTransition:b}=n,N=Jm(n,Zm),{basename:L}=y.useContext(En),M,I=!1;if(typeof v=="string"&&sg.test(v)&&(M=v,ng))try{let F=new URL(window.location.href),Y=v.startsWith("//")?new URL(F.protocol+v):new URL(v),ne=Eu(Y.pathname,L);Y.origin===F.origin&&ne!=null?v=ne+Y.search+Y.hash:I=!0}catch{}let C=Em(v,{relative:l}),J=ig(v,{replace:h,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:b});function ee(F){a&&a(F),F.defaultPrevented||J(F)}return y.createElement("a",fu({},N,{href:M||C,onClick:I||c?a:ee,ref:s,target:g}))});var df;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(df||(df={}));var ff;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(ff||(ff={}));function ig(o,n){let{target:s,replace:a,state:l,preventScrollReset:c,relative:h,viewTransition:p}=n===void 0?{}:n,g=ss(),v=yr(),x=Hf(o,{relative:h});return y.useCallback(b=>{if(Ym(b,s)){b.preventDefault();let N=a!==void 0?a:go(v)===go(x);g(o,{replace:N,state:l,preventScrollReset:c,relative:h,viewTransition:p})}},[v,g,x,a,l,s,o,c,h,p])}function ag(o){let n=y.useRef(hu(o)),s=y.useRef(!1),a=yr(),l=y.useMemo(()=>Xm(a.search,s.current?null:n.current),[a.search]),c=ss(),h=y.useCallback((p,g)=>{const v=hu(typeof p=="function"?p(l):p);s.current=!0,c("?"+v,g)},[c,l]);return[l,h]}const og="modulepreload",lg=function(o){return"/Circles/"+o},hf={},is=function(n,s,a){let l=Promise.resolve();if(s&&s.length>0){let g=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(s.map(v=>{if(v=lg(v),v in hf)return;hf[v]=!0;const x=v.endsWith(".css"),b=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const N=document.createElement("link");if(N.rel=x?"stylesheet":og,x||(N.as="script"),N.crossOrigin="",N.href=v,p&&N.setAttribute("nonce",p),document.head.appendChild(N),x)return new Promise((L,M)=>{N.addEventListener("load",L),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})},ug=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>is(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)};class Ru extends Error{constructor(n,s="FunctionsError",a){super(n),this.name=s,this.context=a}}class cg extends Ru{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class pf extends Ru{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class mf extends Ru{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var pu;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(pu||(pu={}));var dg=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class fg{constructor(n,{headers:s={},customFetch:a,region:l=pu.Any}={}){this.url=n,this.headers=s,this.region=l,this.fetch=ug(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var a;return dg(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:h}=s;let p={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(p["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(p["Content-Type"]="application/json",x=JSON.stringify(h)));const b=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:x}).catch(I=>{throw new cg(I)}),N=b.headers.get("x-relay-error");if(N&&N==="true")throw new pf(b);if(!b.ok)throw new mf(b);let L=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),M;return L==="application/json"?M=yield b.json():L==="application/octet-stream"?M=yield b.blob():L==="text/event-stream"?M=b:L==="multipart/form-data"?M=yield b.formData():M=yield b.text(),{data:M,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof mf||l instanceof pf?l.context:void 0}}})}}var xt={},Bs={},qs={},Ws={},Vs={},Hs={},hg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ti=hg();const pg=ti.fetch,Qf=ti.fetch.bind(ti),Yf=ti.Headers,mg=ti.Request,gg=ti.Response,si=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yf,Request:mg,Response:gg,default:Qf,fetch:pg},Symbol.toStringTag,{value:"Module"})),vg=qp(si);var co={},gf;function Xf(){if(gf)return co;gf=1,Object.defineProperty(co,"__esModule",{value:!0});class o extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return co.default=o,co}var vf;function Zf(){if(vf)return Hs;vf=1;var o=Hs&&Hs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Hs,"__esModule",{value:!0});const n=o(vg),s=o(Xf());class a{constructor(c){var h,p;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(h=c.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=c.signal,this.isMaybeSingle=(p=c.isMaybeSingle)!==null&&p!==void 0?p:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,h){return this.headers=new Headers(this.headers),this.headers.set(c,h),this}then(c,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var x,b,N,L;let M=null,I=null,C=null,J=v.status,ee=v.statusText;if(v.ok){if(this.method!=="HEAD"){const ae=await v.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?I=ae:I=JSON.parse(ae))}const Y=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ne=(N=v.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");Y&&ne&&ne.length>1&&(C=parseInt(ne[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(M={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,C=null,J=406,ee="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const Y=await v.text();try{M=JSON.parse(Y),Array.isArray(M)&&v.status===404&&(I=[],M=null,J=200,ee="OK")}catch{v.status===404&&Y===""?(J=204,ee="No Content"):M={message:Y}}if(M&&this.isMaybeSingle&&(!((L=M?.details)===null||L===void 0)&&L.includes("0 rows"))&&(M=null,J=200,ee="OK"),M&&this.shouldThrowOnError)throw new s.default(M)}return{error:M,data:I,count:C,status:J,statusText:ee}});return this.shouldThrowOnError||(g=g.catch(v=>{var x,b,N;return{error:{message:`${(x=v?.name)!==null&&x!==void 0?x:"FetchError"}: ${v?.message}`,details:`${(b=v?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(N=v?.code)!==null&&N!==void 0?N:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,h)}returns(){return this}overrideTypes(){return this}}return Hs.default=a,Hs}var yf;function eh(){if(yf)return Vs;yf=1;var o=Vs&&Vs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Vs,"__esModule",{value:!0});const n=o(Zf());class s extends n.default{select(l){let c=!1;const h=(l??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:h,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",x=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${x?`${x},`:""}${l}.${c?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:h=c}={}){const p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${l}`),this}range(l,c,{foreignTable:h,referencedTable:p=h}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(v,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:h=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var x;const b=[l?"analyze":null,c?"verbose":null,h?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),N=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${N}"; options=${b};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return Vs.default=s,Vs}var xf;function Lu(){if(xf)return Ws;xf=1;var o=Ws&&Ws.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ws,"__esModule",{value:!0});const n=o(eh());class s extends n.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const h=Array.from(new Set(c)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(l,`in.(${h})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:h,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(l,`${g}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(l,c,h){return this.url.searchParams.append(l,`not.${c}.${h}`),this}or(l,{foreignTable:c,referencedTable:h=c}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${l})`),this}filter(l,c,h){return this.url.searchParams.append(l,`${c}.${h}`),this}}return Ws.default=s,Ws}var wf;function th(){if(wf)return qs;wf=1;var o=qs&&qs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(qs,"__esModule",{value:!0});const n=o(Lu());class s{constructor(l,{headers:c={},schema:h,fetch:p}){this.url=l,this.headers=new Headers(c),this.schema=h,this.fetch=p}select(l,{head:c=!1,count:h}={}){const p=c?"HEAD":"GET";let g=!1;const v=(l??"*").split("").map(x=>/\s/.test(x)&&!g?"":(x==='"'&&(g=!g),x)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:h=!0}={}){var p;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:h=!1,count:p,defaultToNull:g=!0}={}){var v;const x="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((N,L)=>N.concat(Object.keys(L)),[]);if(b.length>0){const N=[...new Set(b)].map(L=>`"${L}"`);this.url.searchParams.set("columns",N.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(l,{count:c}={}){var h;const p="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:l}={}){var c;const h="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return qs.default=s,qs}var _f;function yg(){if(_f)return Bs;_f=1;var o=Bs&&Bs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Bs,"__esModule",{value:!0});const n=o(th()),s=o(Lu());class a{constructor(c,{headers:h={},schema:p,fetch:g}={}){this.url=c,this.headers=new Headers(h),this.schemaName=p,this.fetch=g}from(c){const h=new URL(`${this.url}/${c}`);return new n.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new a(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,h={},{head:p=!1,get:g=!1,count:v}={}){var x;let b;const N=new URL(`${this.url}/rpc/${c}`);let L;p||g?(b=p?"HEAD":"GET",Object.entries(h).filter(([I,C])=>C!==void 0).map(([I,C])=>[I,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([I,C])=>{N.searchParams.append(I,C)})):(b="POST",L=h);const M=new Headers(this.headers);return v&&M.set("Prefer",`count=${v}`),new s.default({method:b,url:N,headers:M,schema:this.schemaName,body:L,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Bs.default=a,Bs}var bf;function xg(){if(bf)return xt;bf=1;var o=xt&&xt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const n=o(yg());xt.PostgrestClient=n.default;const s=o(th());xt.PostgrestQueryBuilder=s.default;const a=o(Lu());xt.PostgrestFilterBuilder=a.default;const l=o(eh());xt.PostgrestTransformBuilder=l.default;const c=o(Zf());xt.PostgrestBuilder=c.default;const h=o(Xf());return xt.PostgrestError=h.default,xt.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:h.default},xt}var wg=xg();const _g=Nu(wg),{PostgrestClient:bg,PostgrestQueryBuilder:M0,PostgrestFilterBuilder:D0,PostgrestTransformBuilder:z0,PostgrestBuilder:F0,PostgrestError:B0}=_g;class kg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const a=this.getWebSocketConstructor();return new a(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const jg="2.15.5",Sg=`realtime-js/${jg}`,Ng="1.0.0",mu=1e4,Cg=1e3,Eg=100;var Yi;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Yi||(Yi={}));var pt;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(pt||(pt={}));var vr;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(vr||(vr={}));var gu;(function(o){o.websocket="websocket"})(gu||(gu={}));var ns;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(ns||(ns={}));class Tg{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),a=new TextDecoder;return this._decodeBroadcast(n,s,a)}_decodeBroadcast(n,s,a){const l=s.getUint8(1),c=s.getUint8(2);let h=this.HEADER_LENGTH+2;const p=a.decode(n.slice(h,h+l));h=h+l;const g=a.decode(n.slice(h,h+c));h=h+c;const v=JSON.parse(a.decode(n.slice(h,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class rh{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Ge||(Ge={}));const kf=(o,n,s={})=>{var a;const l=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(n).reduce((c,h)=>(c[h]=Pg(h,o,n,l),c),{})},Pg=(o,n,s,a)=>{const l=n.find(p=>p.name===o),c=l?.type,h=s[o];return c&&!a.includes(c)?nh(c,h):vu(h)},nh=(o,n)=>{if(o.charAt(0)==="_"){const s=o.slice(1,o.length);return Ag(n,s)}switch(o){case Ge.bool:return Og(n);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Rg(n);case Ge.json:case Ge.jsonb:return Lg(n);case Ge.timestamp:return $g(n);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return vu(n);default:return vu(n)}},vu=o=>o,Og=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Rg=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Lg=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Ag=(o,n)=>{if(typeof o!="string")return o;const s=o.length-1,a=o[s];if(o[0]==="{"&&a==="}"){let c;const h=o.slice(1,s);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(p=>nh(n,p))}return o},$g=o=>typeof o=="string"?o.replace(" ","T"):o,sh=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class tu{constructor(n,s,a={},l=mu){this.channel=n,this.event=s,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var a;return this._hasReceived(n)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var jf;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(jf||(jf={}));class Xi{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xi.syncState(this.state,l,c,h),this.pendingDiffs.forEach(g=>{this.state=Xi.syncDiff(this.state,g,c,h)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Xi.syncDiff(this.state,l,c,h),p())}),this.onJoin((l,c,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:h})}),this.onLeave((l,c,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,a,l){const c=this.cloneDeep(n),h=this.transformState(s),p={},g={};return this.map(c,(v,x)=>{h[v]||(g[v]=x)}),this.map(h,(v,x)=>{const b=c[v];if(b){const N=x.map(C=>C.presence_ref),L=b.map(C=>C.presence_ref),M=x.filter(C=>L.indexOf(C.presence_ref)<0),I=b.filter(C=>N.indexOf(C.presence_ref)<0);M.length>0&&(p[v]=M),I.length>0&&(g[v]=I)}else p[v]=x}),this.syncDiff(c,{joins:p,leaves:g},a,l)}static syncDiff(n,s,a,l){const{joins:c,leaves:h}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(p,g)=>{var v;const x=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),x.length>0){const b=n[p].map(L=>L.presence_ref),N=x.filter(L=>b.indexOf(L.presence_ref)<0);n[p].unshift(...N)}a(p,x,g)}),this.map(h,(p,g)=>{let v=n[p];if(!v)return;const x=g.map(b=>b.presence_ref);v=v.filter(b=>x.indexOf(b.presence_ref)<0),n[p]=v,l(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(a=>s(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,a)=>{const l=n[a];return"metas"in l?s[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=l,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sf;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(Sf||(Sf={}));var Zi;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Zi||(Zi={}));var Jr;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Jr||(Jr={}));class Au{constructor(n,s={config:{}},a){this.topic=n,this.params=s,this.socket=a,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new tu(this,vr.join,this.params,this.timeout),this.rejoinTimer=new rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vr.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Xi(this),this.broadcastEndpointURL=sh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var a,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:h,presence:p,private:g}}=this.params,v=(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(L=>L.filter))!==null&&l!==void 0?l:[],x=!!this.bindings[Zi.PRESENCE]&&this.bindings[Zi.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},N={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(L=>n?.(Jr.CHANNEL_ERROR,L)),this._onClose(()=>n?.(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:N},b)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:L})=>{var M;if(this.socket.setAuth(),L===void 0){n?.(Jr.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,C=(M=I?.length)!==null&&M!==void 0?M:0,J=[];for(let ee=0;ee<C;ee++){const F=I[ee],{filter:{event:Y,schema:ne,table:ae,filter:we}}=F,Ee=L&&L[ee];if(Ee&&Ee.event===Y&&Ee.schema===ne&&Ee.table===ae&&Ee.filter===we)J.push(Object.assign(Object.assign({},F),{id:Ee.id}));else{this.unsubscribe(),this.state=pt.errored,n?.(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,n&&n(Jr.SUBSCRIBED);return}}).receive("error",L=>{this.state=pt.errored,n?.(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(L).join(", ")||"error")))}).receive("timeout",()=>{n?.(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,a){return this.state===pt.joined&&n===Zi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,a)}async send(n,s={}){var a,l;if(!this._canPush()&&n.type==="broadcast"){const{event:c,payload:h}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vr.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(l=>{a=new tu(this,vr.leave,{},n),a.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(n,s,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),h=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(c),h}_push(n,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new tu(this,n,s,a);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Eg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,a){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,a){var l,c;const h=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:x}=vr;if(a&&[p,g,v,x].indexOf(h)>=0&&a!==this._joinRef())return;let N=this._onMessage(h,s,a);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(L=>{var M,I,C;return((M=L.filter)===null||M===void 0?void 0:M.event)==="*"||((C=(I=L.filter)===null||I===void 0?void 0:I.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===h}).map(L=>L.callback(N,a)):(c=this.bindings[h])===null||c===void 0||c.filter(L=>{var M,I,C,J,ee,F;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in L){const Y=L.id,ne=(M=L.filter)===null||M===void 0?void 0:M.event;return Y&&((I=s.ids)===null||I===void 0?void 0:I.includes(Y))&&(ne==="*"||ne?.toLocaleLowerCase()===((C=s.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const Y=(ee=(J=L?.filter)===null||J===void 0?void 0:J.event)===null||ee===void 0?void 0:ee.toLocaleLowerCase();return Y==="*"||Y===((F=s?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return L.type.toLocaleLowerCase()===h}).map(L=>{if(typeof N=="object"&&"ids"in N){const M=N.data,{schema:I,table:C,commit_timestamp:J,type:ee,errors:F}=M;N=Object.assign(Object.assign({},{schema:I,table:C,commit_timestamp:J,eventType:ee,new:{},old:{},errors:F}),this._getPayloadRecords(M))}L.callback(N,a)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,a){const l=n.toLocaleLowerCase(),c={type:l,filter:s,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,s){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Au.isEqual(l.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const a in n)if(n[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(vr.close,{},n)}_onError(n){this._on(vr.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=kf(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=kf(n.columns,n.old_record)),s}}const ru=()=>{},fo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ig=[1e3,2e3,5e3,1e4],Ug=1e4,Mg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dg{constructor(n,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mu,this.transport=null,this.heartbeatIntervalMs=fo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ru,this.ref=0,this.reconnectTimer=null,this.logger=ru,this.conn=null,this.sendBuffer=[],this.serializer=new Tg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...h)=>is(async()=>{const{default:p}=await Promise.resolve().then(()=>si);return{default:p}},void 0).then(({default:p})=>p(...h)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...h)=>c(...h)},!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${gu.websocket}`,this.httpEndpoint=sh(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ng}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,a){this.logger(n,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Yi.connecting:return ns.Connecting;case Yi.open:return ns.Open;case Yi.closing:return ns.Closing;default:return ns.Closed}}isConnected(){return this.connectionState()===ns.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const a=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===a);if(l)return l;{const c=new Au(`realtime:${n}`,s,this);return this.channels.push(c),c}}push(n){const{topic:s,event:a,payload:l,ref:c}=n,h=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${a} (${c})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Cg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},fo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:l,payload:c,ref:h}=s,p=h?`(${h})`:"",g=c.status||"";this.log("receive",`${g} ${a} ${l} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(a)).forEach(v=>v._trigger(l,c,h)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(vr.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const a=n.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${n}${a}${l}`}_workerObjectUrl(n){let s;if(n)s=n;else{const a=new Blob([Mg],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const l={access_token:s,version:Sg};s&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(vr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(s)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new rh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,a,l,c,h,p,g,v,x;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:mu,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:fo.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ru,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(b=>Ig[b-1]||Ug),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((b,N)=>N(JSON.stringify(b))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class $u extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function mt(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class zg extends $u{constructor(n,s,a){super(n),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yu extends $u{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Fg=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const ih=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>is(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},Bg=()=>Fg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield is(()=>Promise.resolve().then(()=>si),void 0)).Response:Response}),xu=o=>{if(Array.isArray(o))return o.map(s=>xu(s));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([s,a])=>{const l=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=xu(a)}),n},qg=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var as=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const nu=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Wg=(o,n,s)=>as(void 0,void 0,void 0,function*(){const a=yield Bg();o instanceof a&&!s?.noResolveJson?o.json().then(l=>{const c=o.status||500,h=l?.statusCode||c+"";n(new zg(nu(l),c,h))}).catch(l=>{n(new yu(nu(l),l))}):n(new yu(nu(o),o))}),Vg=(o,n,s,a)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"||!a?l:(qg(a)?(l.headers=Object.assign({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(a)):l.body=a,n?.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),s))};function na(o,n,s,a,l,c){return as(this,void 0,void 0,function*(){return new Promise((h,p)=>{o(s,Vg(n,a,l,c)).then(g=>{if(!g.ok)throw g;return a?.noResolveJson?g:g.json()}).then(g=>h(g)).catch(g=>Wg(g,p,a))})})}function vo(o,n,s,a){return as(this,void 0,void 0,function*(){return na(o,"GET",n,s,a)})}function Pr(o,n,s,a,l){return as(this,void 0,void 0,function*(){return na(o,"POST",n,a,l,s)})}function wu(o,n,s,a,l){return as(this,void 0,void 0,function*(){return na(o,"PUT",n,a,l,s)})}function Hg(o,n,s,a){return as(this,void 0,void 0,function*(){return na(o,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function ah(o,n,s,a,l){return as(this,void 0,void 0,function*(){return na(o,"DELETE",n,a,l,s)})}var Rt=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const Gg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Nf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kg{constructor(n,s={},a,l){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=a,this.fetch=ih(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,a,l){return Rt(this,void 0,void 0,function*(){try{let c;const h=Object.assign(Object.assign({},Nf),l);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(h.upsert)});const g=h.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",h.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(p=Object.assign(Object.assign({},p),l.headers));const v=this._removeEmptyFolders(s),x=this._getFinalPath(v),b=yield(n=="PUT"?wu:Pr)(this.fetch,`${this.url}/object/${x}`,c,Object.assign({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}upload(n,s,a){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,a)})}uploadToSignedUrl(n,s,a,l){return Rt(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${h}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:Nf.upsert},l),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",v.cacheControl)):(g=a,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType);const b=yield wu(this.fetch,p.toString(),g,{headers:x});return{data:{path:c,fullPath:b.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(mt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return Rt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n);const l=Object.assign({},this.headers);s?.upsert&&(l["x-upsert"]="true");const c=yield Pr(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),h=new URL(this.url+c.url),p=h.searchParams.get("token");if(!p)throw new $u("No token returned by API");return{data:{signedUrl:h.toString(),path:n,token:p},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}update(n,s,a){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,a)})}move(n,s,a){return Rt(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}copy(n,s,a){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrl(n,s,a){return Rt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield Pr(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:s},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const h=a?.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${h}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}createSignedUrls(n,s,a){return Rt(this,void 0,void 0,function*(){try{const l=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}download(n,s){return Rt(this,void 0,void 0,function*(){const l=typeof s?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(s?.transform||{}),h=c?`?${c}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield vo(this.fetch,`${this.url}/${l}/${p}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(mt(p))return{data:null,error:p};throw p}})}info(n){return Rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const a=yield vo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:xu(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}exists(n){return Rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Hg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a)&&a instanceof yu){const l=a.originalError;if([400,404].includes(l?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(n,s){const a=this._getFinalPath(n),l=[],c=s?.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&l.push(c);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&l.push(g);let v=l.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${v}`)}}}remove(n){return Rt(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}list(n,s,a){return Rt(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Gg),s),{prefix:n||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(mt(l))return{data:null,error:l};throw l}})}listV2(n,s){return Rt(this,void 0,void 0,function*(){try{const a=Object.assign({},n);return{data:yield Pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const Jg="2.12.1",Qg={"X-Client-Info":`storage-js/${Jg}`};var Gs=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class Yg{constructor(n,s={},a,l){this.shouldThrowOnError=!1;const c=new URL(n);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},Qg),s),this.fetch=ih(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Gs(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}getBucket(n){return Gs(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return Gs(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}updateBucket(n,s){return Gs(this,void 0,void 0,function*(){try{return{data:yield wu(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}emptyBucket(n){return Gs(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}deleteBucket(n){return Gs(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}}class Xg extends Yg{constructor(n,s={},a,l){super(n,s,a,l)}from(n){return new Kg(this.url,this.headers,n,this.fetch)}}const Zg="2.57.4";let Qi="";typeof Deno<"u"?Qi="deno":typeof document<"u"?Qi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qi="react-native":Qi="node";const ev={"X-Client-Info":`supabase-js-${Qi}/${Zg}`},tv={headers:ev},rv={schema:"public"},nv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sv={};var iv=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};const av=o=>{let n;return o?n=o:typeof fetch>"u"?n=Qf:n=fetch,(...s)=>n(...s)},ov=()=>typeof Headers>"u"?Yf:Headers,lv=(o,n,s)=>{const a=av(s),l=ov();return(c,h)=>iv(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:o;let v=new l(h?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),a(c,Object.assign(Object.assign({},h),{headers:v}))})};var uv=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};function cv(o){return o.endsWith("/")?o:o+"/"}function dv(o,n){var s,a;const{db:l,auth:c,realtime:h,global:p}=o,{db:g,auth:v,realtime:x,global:b}=n,N={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},v),c),realtime:Object.assign(Object.assign({},x),h),storage:{},global:Object.assign(Object.assign(Object.assign({},b),p),{headers:Object.assign(Object.assign({},(s=b?.headers)!==null&&s!==void 0?s:{}),(a=p?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>uv(this,void 0,void 0,function*(){return""})};return o.accessToken?N.accessToken=o.accessToken:delete N.accessToken,N}function fv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oh="2.71.1",Zs=30*1e3,_u=3,su=_u*Zs,hv="http://localhost:9999",pv="supabase.auth.token",mv={"X-Client-Info":`gotrue-js/${oh}`},bu="X-Supabase-Api-Version",lh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vv=600*1e3;class Iu extends Error{constructor(n,s,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function Ce(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class yv extends Iu{constructor(n,s,a){super(n,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function xv(o){return Ce(o)&&o.name==="AuthApiError"}class uh extends Iu{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class Tn extends Iu{constructor(n,s,a,l){super(n,a,l),this.name=s,this.status=a}}class jn extends Tn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wv(o){return Ce(o)&&o.name==="AuthSessionMissingError"}class ho extends Tn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class po extends Tn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class mo extends Tn{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _v(o){return Ce(o)&&o.name==="AuthImplicitGrantRedirectError"}class Cf extends Tn{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ku extends Tn{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function iu(o){return Ce(o)&&o.name==="AuthRetryableFetchError"}class Ef extends Tn{constructor(n,s,a){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class ju extends Tn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tf=` 	
\r=`.split(""),bv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<Tf.length;n+=1)o[Tf[n].charCodeAt(0)]=-2;for(let n=0;n<yo.length;n+=1)o[yo[n].charCodeAt(0)]=n;return o})();function Pf(o,n,s){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(yo[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(yo[a]),n.queuedBits-=6}}function ch(o,n,s){const a=bv[o];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Of(o){const n=[],s=h=>{n.push(String.fromCodePoint(h))},a={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=h=>{Sv(h,a,s)};for(let h=0;h<o.length;h+=1)ch(o.charCodeAt(h),l,c);return n.join("")}function kv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function jv(o,n){for(let s=0;s<o.length;s+=1){let a=o.charCodeAt(s);if(a>55295&&a<=56319){const l=(a-55296)*1024&65535;a=(o.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}kv(a,n)}}function Sv(o,n,s){if(n.utf8seq===0){if(o<=127){s(o);return}for(let a=1;a<6;a+=1)if((o>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function Nv(o){const n=[],s={queue:0,queuedBits:0},a=l=>{n.push(l)};for(let l=0;l<o.length;l+=1)ch(o.charCodeAt(l),s,a);return new Uint8Array(n)}function Cv(o){const n=[];return jv(o,s=>n.push(s)),new Uint8Array(n)}function Ev(o){const n=[],s={queue:0,queuedBits:0},a=l=>{n.push(l)};return o.forEach(l=>Pf(l,s,a)),Pf(null,s,a),n.join("")}function Tv(o){return Math.round(Date.now()/1e3)+o}function Pv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const gr=()=>typeof window<"u"&&typeof document<"u",es={tested:!1,writable:!1},dh=()=>{if(!gr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(es.tested)return es.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),es.tested=!0,es.writable=!0}catch{es.tested=!0,es.writable=!1}return es.writable};function Ov(o){const n={},s=new URL(o);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return s.searchParams.forEach((a,l)=>{n[l]=a}),n}const fh=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>is(async()=>{const{default:a}=await Promise.resolve().then(()=>si);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},Rv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",ei=async(o,n,s)=>{await o.setItem(n,JSON.stringify(s))},ts=async(o,n)=>{const s=await o.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},kn=async(o,n)=>{await o.removeItem(n)};class ko{constructor(){this.promise=new ko.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}ko.promiseConstructor=Promise;function au(o){const n=o.split(".");if(n.length!==3)throw new ju("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!gv.test(n[a]))throw new ju("JWT not in base64url format");return{header:JSON.parse(Of(n[0])),payload:JSON.parse(Of(n[1])),signature:Nv(n[2]),raw:{header:n[0],payload:n[1]}}}async function Lv(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Av(o,n){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await o(c);if(!n(c,null,h)){a(h);return}}catch(h){if(!n(c,h)){l(h);return}}})()})}function $v(o){return("0"+o.toString(16)).substr(-2)}function Iv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let l="";for(let c=0;c<56;c++)l+=s.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(n),Array.from(n,$v).join("")}async function Uv(o){const s=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function Mv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const s=await Uv(o);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ks(o,n,s=!1){const a=Iv();let l=a;s&&(l+="/PASSWORD_RECOVERY"),await ei(o,`${n}-code-verifier`,l);const c=await Mv(a);return[c,a===c?"plain":"s256"]}const Dv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zv(o){const n=o.headers.get(bu);if(!n||!n.match(Dv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Fv(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function Bv(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Js(o){if(!qv.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ou(){const o={};return new Proxy(o,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rf(o){return JSON.parse(JSON.stringify(o))}var Wv=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(s[a[l]]=o[a[l]]);return s};const rs=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Vv=[502,503,504];async function Lf(o){var n;if(!Rv(o))throw new ku(rs(o),0);if(Vv.includes(o.status))throw new ku(rs(o),o.status);let s;try{s=await o.json()}catch(c){throw new uh(rs(c),c)}let a;const l=zv(o);if(l&&l.getTime()>=lh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Ef(rs(s),o.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new jn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new Ef(rs(s),o.status,s.weak_password.reasons);throw new yv(rs(s),o.status||500,a)}const Hv=(o,n,s,a)=>{const l={method:o,headers:n?.headers||{}};return o==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),s))};async function Re(o,n,s,a){var l;const c=Object.assign({},a?.headers);c[bu]||(c[bu]=lh["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const h=(l=a?.query)!==null&&l!==void 0?l:{};a?.redirectTo&&(h.redirect_to=a.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",g=await Gv(o,n,s+p,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(g):{data:Object.assign({},g),error:null}}async function Gv(o,n,s,a,l,c){const h=Hv(n,a,l,c);let p;try{p=await o(s,Object.assign({},h))}catch(g){throw console.error(g),new ku(rs(g),0)}if(p.ok||await Lf(p),a?.noResolveJson)return p;try{return await p.json()}catch(g){await Lf(g)}}function Kr(o){var n;let s=null;Yv(o)&&(s=Object.assign({},o),o.expires_at||(s.expires_at=Tv(o.expires_in)));const a=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:s,user:a},error:null}}function Af(o){const n=Kr(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(n.data.weak_password=o.weak_password),n}function Sn(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function Kv(o){return{data:o,error:null}}function Jv(o){const{action_link:n,email_otp:s,hashed_token:a,redirect_to:l,verification_type:c}=o,h=Wv(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:a,redirect_to:l,verification_type:c},g=Object.assign({},h);return{data:{properties:p,user:g},error:null}}function Qv(o){return o}function Yv(o){return o.access_token&&o.refresh_token&&o.expires_in}const lu=["global","local","others"];var Xv=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(s[a[l]]=o[a[l]]);return s};class Zv{constructor({url:n="",headers:s={},fetch:a}){this.url=n,this.headers=s,this.fetch=fh(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=lu[0]){if(lu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lu.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,s={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:s}=n,a=Xv(n,["options"]),l=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(l.new_email=a?.newEmail,delete l.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Jv,redirectTo:s?.redirectTo})}catch(s){if(Ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Sn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,a,l,c,h,p,g;try{const v={nextPage:null,lastPage:0,total:0},x=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Qv});if(x.error)throw x.error;const b=await x.json(),N=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,L=(g=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return L.length>0&&(L.forEach(M=>{const I=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(M.split(";")[1].split("=")[1]);v[`${C}Page`]=I}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(Ce(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Js(n);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Sn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){Js(n);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,s=!1){Js(n);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:Sn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Js(n.userId);try{const{data:s,error:a}=await Re(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:a}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteFactor(n){Js(n.userId),Js(n.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}}function $f(o={}){return{getItem:n=>o[n]||null,setItem:(n,s)=>{o[n]=s},removeItem:n=>{delete o[n]}}}function e0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qs={debug:!!(globalThis&&dh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class t0 extends hh{}async function r0(o,n,s){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,l.name);try{return await s()}finally{Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,l.name)}}else{if(n===0)throw Qs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new t0(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(Qs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}e0();const n0={url:hv,storageKey:pv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function If(o,n,s){return await s()}const Ys={};class ra{constructor(n){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ra.nextInstanceID,ra.nextInstanceID+=1,this.instanceID>0&&gr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},n0),n);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Zv({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=fh(l.fetch),this.lock=l.lock||If,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:gr()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=r0:this.lock=If,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:dh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$f(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=$f(this.memoryStorage)),gr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=Ys[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=Ys[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ys[this.storageKey]=Object.assign(Object.assign({},Ys[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oh}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=Ov(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),gr()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),_v(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:h,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ce(s)?{error:s}:{error:new uh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,a,l;try{const c=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:Kr}),{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Ce(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var s,a,l;try{let c;if("email"in n){const{email:x,password:b,options:N}=n;let L=null,M=null;this.flowType==="pkce"&&([L,M]=await Ks(this.storage,this.storageKey)),c=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N?.emailRedirectTo,body:{email:x,password:b,data:(s=N?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N?.captchaToken},code_challenge:L,code_challenge_method:M},xform:Kr})}else if("phone"in n){const{phone:x,password:b,options:N}=n;c=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:b,data:(a=N?.data)!==null&&a!==void 0?a:{},channel:(l=N?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:N?.captchaToken}},xform:Kr})}else throw new po("You must provide either an email or phone number and a password");const{data:h,error:p}=c;if(p||!h)return{data:{user:null,session:null},error:p};const g=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Ce(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let s;if("email"in n){const{email:c,password:h,options:p}=n;s=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Af})}else if("phone"in n){const{phone:c,password:h,options:p}=n;s=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Af})}else throw new po("You must provide either an email or phone number and a password");const{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new ho}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,a,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,a,l,c,h,p,g,v,x,b,N,L;let M,I;if("message"in n)M=n.message,I=n.signature;else{const{chain:C,wallet:J,statement:ee,options:F}=n;let Y;if(gr())if(typeof J=="object")Y=J;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))Y=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=J}const ne=new URL((s=F?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in Y&&Y.signIn){const ae=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F?.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),ee?{statement:ee}:null));let we;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")we=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)we=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in we&&"signature"in we&&(typeof we.signedMessage=="string"||we.signedMessage instanceof Uint8Array)&&we.signature instanceof Uint8Array)M=typeof we.signedMessage=="string"?we.signedMessage:new TextDecoder().decode(we.signedMessage),I=we.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${ne.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...ee?["",ee,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(l=(a=F?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=F?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((h=F?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((p=F?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((g=F?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((v=F?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((b=(x=F?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||b===void 0)&&b.length?["Resources",...F.signInWithSolana.resources.map(we=>`- ${we}`)]:[]].join(`
`);const ae=await Y.signMessage(new TextEncoder().encode(M),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=ae}}try{const{data:C,error:J}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:Ev(I)},!((N=n.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(L=n.options)===null||L===void 0?void 0:L.captchaToken}}:null),xform:Kr});if(J)throw J;return!C||!C.session||!C.user?{data:{user:null,session:null},error:new ho}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:Object.assign({},C),error:J})}catch(C){if(Ce(C))return{data:{user:null,session:null},error:C};throw C}}async _exchangeCodeForSession(n){const s=await ts(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(s??"").split("/");try{const{data:c,error:h}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:Kr});if(await kn(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new ho}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:h})}catch(c){if(Ce(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:s,provider:a,token:l,access_token:c,nonce:h}=n,p=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Kr}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new ho}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,a,l,c,h;try{if("email"in n){const{email:p,options:g}=n;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Ks(this.storage,this.storageKey));const{error:b}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(a=g?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:x}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(h=g?.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:x}}throw new po("You must provide either an email or phone number.")}catch(p){if(Ce(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,a;try{let l,c;"options"in n&&(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:h,error:p}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Kr});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const g=h.session,v=h.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(n){var s,a,l;try{let c=null,h=null;return this.flowType==="pkce"&&([c,h]=await Ks(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:Kv})}catch(c){if(Ce(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)throw a;if(!s)throw new jn;const{error:l}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:l}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:a,type:l,options:c}=n,{error:h}=await Re(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in n){const{phone:a,type:l,options:c}=n,{data:h,error:p}=await Re(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new po("You must provide either an email or phone number and a type")}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<su:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const h=await ts(this.userStorage,this.storageKey+"-user");h?.user?n.user=h.user:n.user=ou()}if(this.storage.isServer&&n.user){let h=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,v,x)=>(!h&&v==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,v,x))})}return{data:{session:n},error:null}}const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Sn}):await this._useSession(async s=>{var a,l,c;const{data:h,error:p}=s;if(p)throw p;return!(!((a=h.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Sn})})}catch(s){if(Ce(s))return wv(s)&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new jn;const h=l.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Ks(this.storage,this.storageKey));const{data:v,error:x}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:h.access_token,xform:Sn});if(x)throw x;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new jn;const s=Date.now()/1e3;let a=s,l=!0,c=null;const{payload:h}=au(n.access_token);if(h.exp&&(a=h.exp,l=a<=s),l){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(Ce(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var a;if(!n){const{data:h,error:p}=s;if(p)throw p;n=(a=h.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new jn;const{session:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!gr())throw new mo("No browser detected.");if(n.error||n.error_description||n.error_code)throw new mo(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Cf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Cf("No code detected.");const{data:ee,error:F}=await this._exchangeCodeForSession(n.code);if(F)throw F;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:ee.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:h,expires_in:p,expires_at:g,token_type:v}=n;if(!c||!p||!h||!v)throw new mo("No session defined in URL");const x=Math.round(Date.now()/1e3),b=parseInt(p);let N=x+b;g&&(N=parseInt(g));const L=N-x;L*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${L}s, should have been closer to ${b}s`);const M=N-b;x-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,N,x):x-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,N,x);const{data:I,error:C}=await this._getUser(c);if(C)throw C;const J={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:b,expires_at:N,refresh_token:h,token_type:v,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:J,redirectType:n.type},error:null}}catch(a){if(Ce(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await ts(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:l,error:c}=s;if(c)return{error:c};const h=(a=l.session)===null||a===void 0?void 0:a.access_token;if(h){const{error:p}=await this.admin.signOut(h,n);if(p&&!(xv(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await kn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=Pv(),a={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async s=>{var a,l;try{const{data:{session:c},error:h}=s;if(h)throw h;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,s={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ks(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(Ce(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:a,error:l}=await this._useSession(async c=>{var h,p,g,v,x;const{data:b,error:N}=c;if(N)throw N;const L=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",L,{headers:this.headers,jwt:(x=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(l)throw l;return gr()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:n.provider,url:a?.url},error:null}}catch(a){if(Ce(a))return{data:{provider:n.provider,url:null},error:a};throw a}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var a,l;const{data:c,error:h}=s;if(h)throw h;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Av(async l=>(l>0&&await Lv(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Kr})),(l,c)=>{const h=200*Math.pow(2,l);return c&&iu(c)&&Date.now()+h-a<Zs})}catch(a){if(this._debug(s,"error",a),Ce(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",a),gr()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const l=await ts(this.storage,this.storageKey);if(l&&this.userStorage){let h=await ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await ei(this.userStorage,this.storageKey+"-user",h)),l.user=(n=h?.user)!==null&&n!==void 0?n:ou()}else if(l&&!l.user&&!l.user){const h=await ts(this.storage,this.storageKey+"-user");h&&h?.user?(l.user=h.user,await kn(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,l)):l.user=ou()}if(this._debug(a,"session from storage",l),!this._isValidSession(l)){this._debug(a,"session is not valid"),l!==null&&await this._removeSession();return}const c=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<su;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${su}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),iu(h)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(l.access_token);!p&&h?.user?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(a,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(a,"error",l),console.error(l);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var s,a;if(!n)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new ko;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new jn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={session:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(l,"error",c),Ce(c)){const h={session:null,error:c};return iu(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(h),h}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,s,a=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:s});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){c.push(g)}});if(await Promise.all(h),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await ei(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const c=Rf(l);await ei(this.storage,this.storageKey,c)}else{const l=Rf(s);await ei(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await kn(this.storage,this.storageKey),await kn(this.storage,this.storageKey+"-code-verifier"),await kn(this.storage,this.storageKey+"-user"),this.userStorage&&await kn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&gr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-n)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Zs}ms, refresh threshold is ${_u} ticks`),l<=_u&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof hh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,a){const l=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,h]=await Ks(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(p.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a?.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;return c?{data:null,error:c}:await Re(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var a,l;const{data:c,error:h}=s;if(h)return{data:null,error:h};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:v}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;if(c)return{data:null,error:c};const{data:h,error:p}=await Re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:p})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:l,error:c}=s;return c?{data:null,error:c}:await Re(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:a}=await this._challenge({factorId:n.factorId});return a?{data:null,error:a}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=n?.factors||[],l=a.filter(h=>h.factor_type==="totp"&&h.status==="verified"),c=a.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,a;const{data:{session:l},error:c}=n;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=au(l.access_token);let p=null;h.aal&&(p=h.aal);let g=p;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const x=h.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(n,s={keys:[]}){let a=s.keys.find(p=>p.kid===n);if(a)return a;const l=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+vv>l)return a;const{data:c,error:h}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,a=c.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,s={}){try{let a=n;if(!a){const{data:L,error:M}=await this.getSession();if(M||!L.session)return{data:null,error:M};a=L.session.access_token}const{header:l,payload:c,signature:h,raw:{header:p,payload:g}}=au(a);s?.allowExpired||Fv(c.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:L}=await this.getUser(a);if(L)throw L;return{data:{claims:c,header:l,signature:h},error:null}}const x=Bv(l.alg),b=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,b,h,Cv(`${p}.${g}`)))throw new ju("Invalid JWT signature");return{data:{claims:c,header:l,signature:h},error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}}ra.nextInstanceID=0;const s0=ra;class i0 extends s0{constructor(n){super(n)}}var a0=function(o,n,s,a){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function p(x){try{v(a.next(x))}catch(b){h(b)}}function g(x){try{v(a.throw(x))}catch(b){h(b)}}function v(x){x.done?c(x.value):l(x.value).then(p,g)}v((a=a.apply(o,n||[])).next())})};class o0{constructor(n,s,a){var l,c,h;this.supabaseUrl=n,this.supabaseKey=s;const p=fv(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:rv,realtime:sv,auth:Object.assign(Object.assign({},nv),{storageKey:g}),global:tv},x=dv(a??{},v);this.storageKey=(l=x.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=x.global.headers)!==null&&c!==void 0?c:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(b,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=x.auth)!==null&&h!==void 0?h:{},this.headers,x.global.fetch),this.fetch=lv(s,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new bg(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new Xg(this.storageUrl.href,this.headers,this.fetch,a?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new fg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},a={}){return this.rest.rpc(n,s,a)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return a0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:l,userStorage:c,storageKey:h,flowType:p,lock:g,debug:v},x,b){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i0({url:this.authUrl.href,headers:Object.assign(Object.assign({},N),x),storageKey:h,autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:l,userStorage:c,flowType:p,lock:g,debug:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(L=>L.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Dg(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(n,s,a){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l0=(o,n,s)=>new o0(o,n,s);function u0(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}u0()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const A=l0("https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY"),ph=y.createContext(null);function c0(){const o=y.useContext(ph);if(!o)throw new Error("useToast must be used within <ToastProvider>");return o}function d0({children:o}){const[n,s]=y.useState([]),a=y.useCallback(h=>{const p=Date.now()+Math.random(),g={id:p,timeout:3e3,...h};s(v=>[...v,g]),window.setTimeout(()=>s(v=>v.filter(x=>x.id!==p)),g.timeout)},[]),l=y.useMemo(()=>({push:a,success:(h,p)=>a({kind:"success",text:h,timeout:p}),error:(h,p)=>a({kind:"error",text:h,timeout:p}),info:(h,p)=>a({kind:"info",text:h,timeout:p})}),[a]),c=u.jsx("div",{className:"pointer-events-none fixed inset-0 z-[9999] flex items-start justify-end p-4",children:u.jsx("div",{className:"mt-10 w-full max-w-sm space-y-2",children:n.map(h=>u.jsx("div",{className:["pointer-events-auto rounded-md border px-3 py-2 text-sm shadow",h.kind==="success"?"border-emerald-200 bg-emerald-50 text-emerald-800":h.kind==="error"?"border-red-200 bg-red-50 text-red-700":"border-neutral-200 bg-white text-neutral-800"].join(" "),children:h.text},h.id))})});return u.jsxs(ph.Provider,{value:l,children:[o,em.createPortal(c,document.body)]})}const f0=["All","Games","Study","Outdoors"],Su=[{id:"hokm",name:"Hokm",blurb:"Classic Persian card game",tag:"Games",online:120,groups:8,image:"🎴"},{id:"takhtenard",name:"Takhte Nard",blurb:"Traditional backgammon",tag:"Games",online:95,groups:6,image:"🎲"},{id:"mafia",name:"Mafia",blurb:"Social deduction party game",tag:"Games",online:210,groups:12,image:"🕵️"},{id:"mono",name:"Monopoly",blurb:"Buy, sell, and trade properties",tag:"Games",online:180,groups:10,image:"💰"},{id:"uno",name:"Uno",blurb:"Colorful card matching fun",tag:"Games",online:250,groups:15,image:"🃏"},{id:"chess",name:"Chess",blurb:"Classic strategy board game",tag:"Games",online:130,groups:9,image:"♟️"},{id:"mathematics",name:"Mathematics",blurb:"Study numbers and problem solving",tag:"Study",online:75,groups:5,image:"📐"},{id:"biology",name:"Biology",blurb:"Explore life sciences",tag:"Study",online:60,groups:4,image:"🧬"},{id:"chemistry",name:"Chemistry",blurb:"Learn about chemicals and reactions",tag:"Study",online:50,groups:3,image:"⚗️"},{id:"history",name:"History",blurb:"Discover past events and cultures",tag:"Study",online:45,groups:3,image:"📜"},{id:"dreisam",name:"Mountain Dreisam Hike",blurb:"Join a hike up Dreisam mountain",tag:"Outdoors",online:40,groups:3,image:"⛰️"},{id:"visit",name:"Visiting",blurb:"Cultural and city visits",tag:"Outdoors",online:55,groups:4,image:"🏛️"},{id:"camp",name:"Camping",blurb:"Overnight outdoor camping trips",tag:"Outdoors",online:35,groups:2,image:"🏕️"},{id:"kayak",name:"Kayaking",blurb:"Water adventures on rivers and lakes",tag:"Outdoors",online:30,groups:2,image:"🛶"}];Object.fromEntries(Su.map(o=>[o.id.toLowerCase(),o]));function h0(){const[o,n]=ag(),s=o.get("id"),a=o.get("code"),[l,c]=y.useState(o.get("q")??""),[h,p]=y.useState(o.get("category")??"All"),[g,v]=y.useState([]),[x,b]=y.useState(!1),N=y.useMemo(()=>{const z=(l||"").trim();return/^[A-Za-z0-9]{6,12}$/.test(z)?z.toUpperCase():null},[l]),L=12,[M,I]=y.useState(0),[C,J]=y.useState(!1),[ee,F]=y.useState(!1),[Y,ne]=y.useState(null),[ae,we]=y.useState({}),[Ee,et]=y.useState({}),[Fe,qe]=y.useState(0),[We,Be]=y.useState({}),[G,he]=y.useState(!1),[pe,re]=y.useState(""),[U,$]=y.useState(""),[R,w]=y.useState(!1),[T,q]=y.useState(null);y.useEffect(()=>{const z=new URLSearchParams(o);h&&h!=="All"?z.set("category",h):z.delete("category"),l?z.set("q",l):z.delete("q"),s?z.set("id",s):z.delete("id"),a?z.set("code",a):z.delete("code"),!a&&N?z.set("code",N):N||z.delete("code"),z.toString()!==o.toString()&&n(z,{replace:!0})},[l,h,s,a,N]),y.useEffect(()=>{let z=!0;async function ge(_e){try{if(a||N){const Ue=a||N,{data:Qe,error:bt}=await A.from("groups").select("id, title, description, city, category, game, created_at, code").ilike("code",Ue).single();if(bt)throw bt;if(!z)return;v(Qe?[Qe]:[]),J(!1),ne(null);return}if(s){const{data:Ue,error:Qe}=await A.from("groups").select("id, title, description, city, category, game, created_at, code").eq("id",s).single();if(Qe)throw Qe;if(!z)return;v(Ue?[Ue]:[]),J(!1),ne(null);return}_e&&(b(!0),v([]),I(0),J(!1),ne(null));let Se=A.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(h&&h!=="All"){const Ue=h.toLowerCase(),Qe=We[Ue]??[];if(Qe.length){const bt=Qe.map(Xt=>`"${Xt}"`).join(",");Se=Se.or(`game.in.(${bt}),category.eq.${Ue}`)}else Se=Se.eq("category",Ue)}if(l.trim()){const Ue=l.trim();Se=Se.or(`title.ilike.%${Ue}%,game.ilike.%${Ue}%`)}const V=0,se=L-1,{data:ce,error:je}=await Se.range(V,se);if(je)throw je;if(!z)return;const De=ce??[];v(De),J(De.length===L),ne(null)}catch(Se){if(!z)return;ne(Se?.message??"Failed to load groups")}finally{if(!z)return;b(!1),F(!1)}}return ge(!0),()=>{z=!1}},[h,l,We,s,a,N]);async function X(){if(!(ee||x||!C)&&!s&&!a&&!N){F(!0);try{let z=A.from("groups").select("id, title, description, city, category, game, created_at, code").order("created_at",{ascending:!1});if(h&&h!=="All"){const ce=h.toLowerCase(),je=We[ce]??[];if(je.length){const De=je.map(Ue=>`"${Ue}"`).join(",");z=z.or(`game.in.(${De}),category.eq.${ce}`)}else z=z.eq("category",ce)}if(l.trim()){const ce=l.trim();z=z.or(`title.ilike.%${ce}%,game.ilike.%${ce}%`)}const ge=(M+1)*L,_e=ge+L-1,{data:Se,error:V}=await z.range(ge,_e);if(V)throw V;const se=Se??[];v(ce=>[...ce,...se]),I(ce=>ce+1),J(se.length===L)}catch(z){ne(z?.message??"Failed to load groups")}finally{F(!1)}}}y.useEffect(()=>{let z=!0;return(async()=>{const{data:ge,error:_e}=await A.from("allowed_games").select("id, category").eq("is_active",!0);if(!z)return;if(_e){Be({});return}const Se={};(ge??[]).forEach(V=>{const se=String(V.category||"").toLowerCase(),ce=String(V.id||"").toLowerCase();!se||!ce||(Se[se]||(Se[se]=[]),Se[se].push(ce))}),Be(Se)})(),()=>{z=!1}},[]),y.useEffect(()=>{let z=!0;return(async()=>{const{data:ge}=await A.from("groups").select("id, game");if(!z)return;const _e={};(ge??[]).forEach(je=>{const De=(je.game||"").toLowerCase();De&&(_e[De]=(_e[De]||0)+1)}),we(_e);const{data:Se}=await A.from("group_members").select("user_id, groups(game)");if(!z)return;const V={},se=new Set;(Se??[]).forEach(je=>{const De=je?.groups?.game?String(je.groups.game).toLowerCase():"",Ue=je?.user_id?String(je.user_id):"";!De||!Ue||(se.add(Ue),V[De]||(V[De]=new Set),V[De].add(Ue))});const ce={};Object.entries(V).forEach(([je,De])=>{ce[je]=De.size}),et(ce),qe(se.size)})(),()=>{z=!1}},[]);const le=y.useMemo(()=>{const z=h==="All"?Su:Su.filter(_e=>_e.tag===h);return l.trim()?z.filter(_e=>_e.name.toLowerCase().includes(l.toLowerCase())):z},[l,h]),me=Fe;return u.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-8",children:[u.jsxs("div",{className:"mb-8 flex items-start justify-between gap-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-neutral-900",children:"Browse Games"}),u.jsx("p",{className:"mt-2 text-neutral-600",children:"Discover games and find players to join"}),u.jsxs("div",{className:"mt-5 flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{value:l,onChange:z=>c(z.target.value),placeholder:"Search games…",className:"w-[420px] max-w-full rounded-xl border px-3 py-2 pl-9 text-sm outline-none ring-0 focus:border-emerald-500"}),u.jsx("span",{className:"pointer-events-none absolute left-3 top-2.5 text-neutral-400",children:"🔎"})]}),u.jsx(Ve,{to:"/groups",className:"rounded-md border border-black/10 bg-white px-4 py-2 text-sm hover:bg-black/[0.04]",children:"My Groups"})]}),u.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:f0.map(z=>u.jsx("button",{onClick:()=>p(z),className:`rounded-lg border px-3 py-1.5 text-sm ${z===h?"bg-emerald-600 text-white border-emerald-600":"bg-white text-neutral-700 hover:bg-neutral-50"}`,children:z},z))})]}),u.jsxs("div",{className:"shrink-0 text-right",children:[u.jsx("div",{className:"text-3xl font-semibold text-emerald-700",children:me.toLocaleString()}),u.jsx("div",{className:"text-sm text-neutral-500",children:"Players Online"}),u.jsx("button",{onClick:()=>{he(!0),q(null)},className:"mt-3 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Request Category"})]})]}),u.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:le.map(z=>u.jsx(p0,{game:z,groupCount:ae[z.id]??0,memberCount:Ee[z.id]??0},z.id))}),u.jsxs("div",{className:"mt-10",children:[u.jsxs("div",{className:"flex items-baseline justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold",children:a||N?"Group by Code":s?"Group by ID":h!=="All"?`Groups in ${h}`:l?`Groups matching “${l}”`:"Latest Groups"}),(a||N||s?!1:h!=="All"||l)&&u.jsx("button",{onClick:()=>{p("All"),c("")},className:"text-sm text-neutral-600 hover:text-neutral-800",children:"Clear filter"})]}),u.jsx("div",{className:"mt-4 rounded-xl border border-black/10 bg-white",children:Y?u.jsx("div",{className:"p-6 text-red-700",children:Y}):x&&g.length===0?u.jsx("div",{className:"p-6 text-neutral-500",children:"Loading…"}):g.length===0?u.jsx("div",{className:"p-6 text-neutral-500",children:"No groups found."}):u.jsxs(u.Fragment,{children:[u.jsx("ul",{children:g.map(z=>{const ge=z?.id??z?.group_id??z?.group?.id??z?.groups?.id;return ge?u.jsx("li",{className:"border-t border-black/5 px-6 py-4 first:border-none",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-neutral-900",children:z.title}),u.jsx("div",{className:"text-sm text-neutral-600",children:z.description}),u.jsxs("div",{className:"text-xs text-neutral-400",children:[z.city&&u.jsxs("span",{children:[z.city," · "]}),z.category&&u.jsx("span",{children:z.category}),z.code&&u.jsxs("span",{className:"ml-2 rounded-full bg-neutral-100 px-1.5 py-0.5 text-[10px] font-medium text-neutral-600",children:["Code: ",String(z.code).toUpperCase()]})]})]}),u.jsx(Ve,{to:`/group/${ge}`,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"View"})]})},ge):null})}),C&&u.jsx("div",{className:"border-t border-black/5 p-4 text-center",children:u.jsx("button",{onClick:X,className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] disabled:opacity-60",disabled:ee,children:ee?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):u.jsx(u.Fragment,{children:"Load more"})})})]})})]}),G&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:u.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-xl",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Request new category"}),u.jsx("button",{onClick:()=>he(!1),className:"rounded-md px-2 py-1 text-sm text-neutral-600 hover:bg-neutral-100",children:"✕"})]}),u.jsxs("form",{className:"mt-4 space-y-3",onSubmit:async z=>{z.preventDefault(),w(!0),q(null);const{data:ge,error:_e}=await A.auth.getUser();if(_e||!ge?.user){q("Sign in required."),w(!1);return}const Se={name:pe.trim().toLowerCase(),note:U.trim()||null,requested_by:ge.user.id},{error:V}=await A.from("category_requests").insert(Se);V?q(V.message):(q("Request sent."),re(""),$("")),w(!1)},children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Category name"}),u.jsx("input",{value:pe,onChange:z=>re(z.target.value),placeholder:"e.g., Tournaments",required:!0,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-neutral-800",children:"Note (optional)"}),u.jsx("textarea",{value:U,onChange:z=>$(z.target.value),placeholder:"Why should this category be added?",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",rows:3})]}),T&&u.jsx("div",{className:"text-sm text-neutral-600",children:T}),u.jsxs("div",{className:"flex items-center justify-end gap-2 pt-1",children:[u.jsx("button",{type:"button",onClick:()=>he(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:R||!pe.trim(),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white disabled:opacity-60",children:R?"Sending…":"Send request"})]})]})]})})]})}function p0({game:o,groupCount:n,memberCount:s}){return u.jsxs("div",{className:"rounded-2xl border bg-white p-4 shadow-sm",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-neutral-100 text-neutral-400 text-2xl",children:o.image}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"font-semibold text-neutral-900",children:o.name}),u.jsx("span",{className:"rounded-md bg-emerald-50 px-2 py-0.5 text-[11px] font-medium text-emerald-700",children:"Trending"})]}),u.jsx("p",{className:"text-sm text-neutral-600",children:o.blurb})]})]}),u.jsx("span",{className:"rounded-md border px-2 py-0.5 text-[11px] text-neutral-600",children:o.tag})]}),u.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-neutral-600",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-emerald-600",children:"👥"}),u.jsxs("span",{children:[u.jsx("span",{className:"font-medium text-neutral-900",children:s.toLocaleString()})," online"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:"👤"}),u.jsxs("span",{children:[u.jsx("span",{className:"font-medium text-neutral-900",children:n})," active groups"]})]})]}),u.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[u.jsx(Ve,{to:`/groups/game/${encodeURIComponent(o.id)}`,className:"inline-flex flex-1 items-center justify-center rounded-lg bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-700",children:"Find Groups"}),u.jsx("button",{className:"rounded-lg border px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50",onClick:()=>alert("Quick Match coming soon"),children:"Quick Match"})]})]})}function m0(){const o=ss(),n="Games",s="",[a,l]=y.useState([]),[c,h]=y.useState([]),[p,g]=y.useState(!0),[v,x]=y.useState(""),[b,N]=y.useState([]),[L,M]=y.useState(!0),[I,C]=y.useState([]),[J,ee]=y.useState("");y.useMemo(()=>new Set(b.map(V=>V.id)),[b]);const F=y.useMemo(()=>{const V=J.trim().toLowerCase();return V?b.filter(se=>(se.display_name||"").toLowerCase().includes(V)||(se.id||"").toLowerCase().includes(V)):b},[b,J]);async function Y(V){M(!0);try{const[se,ce]=await Promise.all([A.from("friends").select("friend_id").eq("user_id",V).eq("status","accepted"),A.from("friends").select("user_id").eq("friend_id",V).eq("status","accepted")]),je=[];!se.error&&Array.isArray(se.data)&&je.push(...se.data.map(ze=>ze.friend_id).filter(Boolean)),!ce.error&&Array.isArray(ce.data)&&je.push(...ce.data.map(ze=>ze.user_id).filter(Boolean));const De=Array.from(new Set(je));if(De.length===0){const At=await A.from("profiles").select("id, user_id, display_name, name, avatar_url").neq("id",V).neq("user_id",V).limit(12),qt=(!At.error&&Array.isArray(At.data)?At.data:[]).map(Zt=>({id:Zt.id||Zt.user_id,display_name:(Zt.display_name||Zt.name)??null,avatar_url:Zt.avatar_url??null}));N(qt);return}const Ue="id, user_id, display_name, name, avatar_url";let Qe=[];const bt=await A.from("profiles").select(Ue).in("id",De);if(!bt.error&&bt.data?.length)Qe=bt.data;else{const ze=await A.from("profiles").select(Ue).in("user_id",De);!ze.error&&ze.data?.length&&(Qe=ze.data)}const Xt=(Qe||[]).map(ze=>({id:ze.id||ze.user_id,display_name:(ze.display_name||ze.name)??null,avatar_url:ze.avatar_url??null})).filter(ze=>De.includes(ze.id));N(Xt)}finally{M(!1)}}y.useEffect(()=>{let V=!0;return(async()=>{const{data:se,error:ce}=await A.auth.getUser();if(!V)return;const je=ce?void 0:se?.user?.id;je&&(x(je),await Y(je))})(),()=>{V=!1}},[]),y.useEffect(()=>{let V=!0;return(async()=>{g(!0);const{data:se}=await A.from("allowed_categories").select("name").eq("is_active",!0),{data:ce}=await A.from("allowed_games").select("id,name,category").eq("is_active",!0);V&&(l(se??[]),h((ce??[]).map(je=>({id:je.id,label:je.name,category:je.category}))),g(!1))})(),()=>{V=!1}},[]);const[ne,ae]=y.useState(""),[we,Ee]=y.useState(""),[et,Fe]=y.useState(""),[qe,We]=y.useState(3),[Be,G]=y.useState(!1),[he,pe]=y.useState(""),[re,U]=y.useState("");y.useEffect(()=>{if(!a.length)return;const V=String(n),se=a.find(ce=>ce.name.toLowerCase()===V.toLowerCase());U((se?.name||a[0].name).toLowerCase())},[a,n]);const[$,R]=y.useState(!1),[w,T]=y.useState(""),[q,X]=y.useState("");y.useEffect(()=>{if(!c.length||!re)return;const V="".toLowerCase().replace(/\s+/g,""),se=c.find(ce=>ce.id===V||ce.label.toLowerCase().replace(/\s+/g,"")===V);se&&X(se.id)},[c,s,re]);const le=y.useMemo(()=>{const V=he.trim().toLowerCase(),se=a.map(ce=>ce.name);return V?se.filter(ce=>ce.toLowerCase().includes(V)):se},[he,a]),me=y.useMemo(()=>{const V=c.filter(ce=>ce.category.toLowerCase()===(re||"").toLowerCase()),se=w.trim().toLowerCase();return se?V.filter(ce=>ce.label.toLowerCase().includes(se)||ce.id.includes(se)):V},[re,w,c]),z=!p&&ne.trim().length>0&&re&&q&&qe>=3&&qe<=12;function ge(V){C(se=>se.includes(V)?se.filter(ce=>ce!==V):[...se,V])}async function _e(V,se){if(I.length){try{const ce=I.map(je=>({group_id:V,inviter_id:se,recipient_id:je,status:"pending"}));await A.from("group_invitations").insert(ce)}catch{}try{const ce=I.map(je=>({user_id:je,kind:"group_invite",payload:{group_id:V,inviter_id:se},is_read:!1}));await A.from("notifications").insert(ce)}catch{}}}async function Se(){if(!z)return;const{data:V,error:se}=await A.auth.getUser();if(se||!V?.user?.id){alert(se?.message||"Sign in required");return}const ce=V.user.id,je=Math.max(3,Math.min(12,qe)),De={title:ne.trim(),purpose:we.trim()||null,category:(re||"").toLowerCase(),game:q,capacity:je,visibility:"public",host_id:ce},{data:Ue,error:Qe}=await A.from("groups").insert(De).select("id").single();if(Qe){alert(Qe.message);return}_e(Ue.id,ce),o(`/group/${Ue.id}`)}return u.jsxs("div",{className:"mx-auto max-w-3xl px-4 pb-12 pt-8",children:[u.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[u.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create a new group"}),u.jsx(Ve,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Back"})]}),u.jsxs("div",{className:"grid gap-6",children:[u.jsxs("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:[u.jsx("h2",{className:"mb-4 text-base font-medium",children:"Basics"}),p&&u.jsx("div",{className:"text-sm text-neutral-500",children:"Loading categories…"}),u.jsxs("div",{className:"grid gap-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Title"}),u.jsx("input",{value:ne,onChange:V=>ae(V.target.value),placeholder:"e.g., Friday Night Hokm",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Category"}),u.jsxs("div",{className:"relative mt-1",children:[u.jsx("input",{value:Be?he:re||"",onChange:V=>{G(!0),pe(V.target.value)},onFocus:()=>G(!0),placeholder:"Search or choose category…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p}),Be&&u.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[le.length===0&&u.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),le.map(V=>u.jsx("button",{type:"button",onClick:()=>{U(V.toLowerCase()),G(!1),pe(""),c.some(se=>se.category===V&&se.id===q)||X("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:V},V))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Game / Activity"}),u.jsxs("div",{className:"relative mt-1",children:[u.jsx("input",{value:$?w:c.find(V=>V.category.toLowerCase()===(re||"").toLowerCase()&&V.id===q)?.label||"",onChange:V=>{R(!0),T(V.target.value)},onFocus:()=>R(!0),placeholder:"Search or choose game/activity…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500",disabled:p||!(re&&re.trim().length>0)}),$&&u.jsxs("div",{className:"absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-lg border bg-white shadow",children:[me.length===0&&u.jsx("div",{className:"px-3 py-2 text-sm text-neutral-500",children:"No matches"}),me.map(V=>u.jsx("button",{type:"button",onClick:()=>{X(V.id),R(!1),T("")},className:"block w-full px-3 py-2 text-left text-sm hover:bg-neutral-50",children:V.label},V.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"City (optional)"}),u.jsx("input",{value:et,onChange:V=>Fe(V.target.value),placeholder:"e.g., Freiburg",className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Capacity"}),u.jsx("input",{type:"number",min:3,max:12,value:qe,onChange:V=>We(Math.max(3,Math.min(12,Number(V.target.value||3)))),className:"mt-1 w-32 rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"}),u.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Must be between 3 and 12."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-neutral-700",children:"Description"}),u.jsx("textarea",{value:we,onChange:V=>Ee(V.target.value),placeholder:"Tell people what this group is about…",rows:4,className:"mt-1 w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})]})]})]}),u.jsxs("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:[u.jsx("h2",{className:"mb-4 text-base font-medium",children:"Invite friends (optional)"}),u.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Filters your friends. If you have none yet, we show suggested people so you can test invites."}),u.jsx("div",{className:"mb-3",children:u.jsx("input",{value:J,onChange:V=>ee(V.target.value),placeholder:"Search people by name…",className:"w-full rounded-lg border px-3 py-2 text-sm outline-none focus:border-emerald-500"})}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"mb-2 text-xs font-medium text-neutral-700",children:["Your friends ",u.jsxs("span",{className:"font-normal text-neutral-500",children:["(",F.length,")"]})]}),L&&u.jsx("div",{className:"text-sm text-neutral-500",children:"Loading friends…"}),!L&&F.length===0&&u.jsx("div",{className:"text-sm text-neutral-500",children:"No friends match your search."}),!L&&F.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"mb-2 text-xs text-neutral-500",children:["Selected: ",I.length]}),u.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:F.map(V=>u.jsxs("button",{type:"button",onClick:()=>ge(V.id),className:["flex items-center gap-2 rounded-lg border px-3 py-2 text-left text-sm hover:bg-neutral-50",I.includes(V.id)?"border-emerald-400 ring-2 ring-emerald-200":"border-neutral-200"].join(" "),children:[u.jsx("div",{className:"h-6 w-6 shrink-0 rounded-full bg-neutral-200",style:{backgroundImage:V.avatar_url?`url(${V.avatar_url})`:void 0,backgroundSize:"cover",backgroundPosition:"center"}}),u.jsx("span",{className:"truncate",children:V.display_name||V.id.slice(0,8)})]},V.id))})]})]}),I.length>0&&u.jsx("p",{className:"mt-3 text-xs text-emerald-700",children:"Invitees receive a notification and must accept."})]}),u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx(Ve,{to:"/browse",className:"rounded-md border px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Cancel"}),u.jsx("button",{disabled:!z,onClick:Se,className:"rounded-md bg-emerald-700 px-4 py-2 text-white disabled:opacity-60",children:"Create Group"})]})]})]})}console.log("[SUPABASE]","https://grfvpmetnavfsbugdotg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdyZnZwbWV0bmF2ZnNidWdkb3RnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNjcyMjAsImV4cCI6MjA3Mjk0MzIyMH0.HuPYsL93a8jV6hpCdTwouIzMxcN4EB8tMxkLr-KGYAY".slice(0,8));function g0(){const{id:o=""}=_o();console.debug("[GroupDetail] route id =",o);const n=ss(),[s,a]=y.useState(null),[l,c]=y.useState(!0),[h,p]=y.useState(null),[g,v]=y.useState(null),[x,b]=y.useState(!1),[N,L]=y.useState(!1),[M,I]=y.useState(!1),C=!!(g&&s&&(g===s.host_id||(s?.creator_id??null)===g)),[J,ee]=y.useState(!1),[F,Y]=y.useState(!1),[ne,ae]=y.useState(null),[we,Ee]=y.useState([]),[et,Fe]=y.useState({}),[qe,We]=y.useState(0),[Be,G]=y.useState(0),[he,pe]=y.useState(null),[re,U]=y.useState([]),[$,R]=y.useState(!1),[w,T]=y.useState({}),[q,X]=y.useState(!1),[le,me]=y.useState(null),[z,ge]=y.useState(""),[_e,Se]=y.useState(null),[V,se]=y.useState(!1),[ce,je]=y.useState(!1),[De,Ue]=y.useState("Schedule"),[Qe,bt]=y.useState("");async function Xt(){if(s?.code)try{await navigator.clipboard.writeText(String(s.code)),b(!0),setTimeout(()=>b(!1),1500)}catch(Q){console.warn("Clipboard failed",Q)}}async function ze(){if(s?.id)try{L(!0);const{data:Q}=await A.auth.getUser();if(!Q?.user){localStorage.setItem("postLoginRedirect",window.location.pathname),window.location.href=`${window.location.origin}/onboarding`;return}const{data:xe,error:Ne}=await A.rpc("make_group_invite",{p_group_id:s.id,p_hours:168,p_max_uses:null});if(Ne){p(Ne.message);return}const Te=`${window.location.origin}/invite/${xe}`;try{await navigator.clipboard.writeText(Te),I(!0),setTimeout(()=>I(!1),1500)}catch{}}finally{L(!1)}}y.useEffect(()=>{let Q=!1;return(async()=>{c(!0);const{data:xe}=await A.auth.getUser();Q||v(xe.user?.id??null);let Ne=null,Te=null;const Ae=await A.from("groups").select("*").eq("id",o).maybeSingle();if(Ae.error&&(Te=Ae.error),Ne=Ae.data,Te&&(console.warn("[GroupDetail] fetch error",Te),Q||p(`${Te.code||"err"}:${Te.message}`)),Q||a(Ne??null),Ne?.id){const{count:be,error:Ye}=await A.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",Ne.id).eq("status","active");Q||We(be??0),Ye&&console.warn("[GroupDetail] member count error",Ye)}c(!1)})(),()=>{Q=!0}},[o]),y.useEffect(()=>{let Q=!1;return(async()=>{if(!s?.id){U([]);return}let xe=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),Ne=xe.data||[];xe.error&&(Ne=(await A.from("group_members").select("user_id, role, created_at").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0})).data||[]);const Te=(Ne??[]).map(be=>({user_id:be.user_id,role:be.role??null,created_at:be.created_at,name:be.profiles?.name??null}));if(Q)return;U(Te);const Ae=(await A.auth.getUser()).data.user?.id||null;Ae&&R(Te.some(be=>be.user_id===Ae)),Ae&&await xr(Te.map(be=>be.user_id))})(),()=>{Q=!0}},[s?.id]),y.useEffect(()=>{let Q=!1;return(async()=>{if(!q||!le){Se(null);return}se(!0);const[xe,Ne,Te]=await Promise.all([A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",le).eq("status","active"),A.from("friendships").select("*",{count:"exact",head:!0}).eq("status","accepted").or(`user_id_a.eq.${le},user_id_b.eq.${le}`),A.from("groups").select("*",{count:"exact",head:!0}).eq("host_id",le)]);Q||(Se({games:xe.count??0,friends:Ne.count??0,created:Te.count??0}),se(!1))})(),()=>{Q=!0}},[q,le]);async function At(){if(!s)return;const{data:Q}=await A.auth.getUser(),xe=Q?.user?.id;if(!xe){p("Please sign in.");return}if(xe===s.host_id){p("Host cannot leave their own group.");return}p(null);const{error:Ne}=await A.from("group_members").delete().match({group_id:s.id,user_id:xe});if(Ne){p(Ne.message);return}const{data:Te}=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",s.id).eq("status","active").order("created_at",{ascending:!0}),Ae=(Te??[]).map(be=>({user_id:be.user_id,role:be.role??null,created_at:be.created_at,name:be.profiles?.name??null}));U(Ae),R(!1),p("You left the group.")}async function qt(Q){if(!s)return;const{data:xe}=await A.auth.getUser();if(!xe?.user?.id){p("Please sign in.");return}if(!C){p("Only the host can remove members.");return}if(Q===s.host_id){p("Host cannot remove themselves.");return}if(!window.confirm("Remove this member from the group?"))return;p(null);const{error:Ae}=await A.from("group_members").delete().match({group_id:s.id,user_id:Q});if(Ae){p(Ae.message);return}U(be=>be.filter(Ye=>Ye.user_id!==Q)),We(be=>Math.max(0,(be||1)-1))}y.useEffect(()=>{let Q=!1;return(async()=>{if(!s?.id){ae(null),Ee([]),Fe({}),G(0);return}const{data:xe,error:Ne}=await A.from("group_polls").select("*").eq("group_id",s.id).eq("status","open").order("created_at",{ascending:!1}).limit(1);if(Q)return;if(Ne){p(Ne.message);return}const Te=xe&&xe[0];if(ae(Te||null),!Te){Ee([]),Fe({}),G(0);return}const{data:Ae}=await A.from("group_poll_options").select("*").eq("poll_id",Te.id).order("created_at");if(Q)return;Ee(Ae||[]);const{data:be}=await A.from("group_votes").select("option_id,user_id").eq("poll_id",Te.id);if(Q)return;const Ye={},Xe=new Set;be?.forEach(Wt=>{Ye[Wt.option_id]=(Ye[Wt.option_id]||0)+1,Xe.add(Wt.user_id)}),Fe(Ye),G(Xe.size)})(),()=>{Q=!0}},[s?.id]);async function Zt(){p(null);const{data:Q}=await A.auth.getUser();if(!Q.user){p("Please sign in.");return}if(!o){p("Invalid group id");return}const{error:xe}=await A.from("group_members").insert({group_id:o,user_id:Q.user.id});if(xe&&xe.code!=="23505"){p(xe.message);return}R(!0);const{data:Ne}=await A.from("group_members").select("user_id, role, created_at, profiles(user_id, name)").eq("group_id",o).eq("status","active").order("created_at",{ascending:!0}),Te=(Ne??[]).map(Ae=>({user_id:Ae.user_id,role:Ae.role??null,created_at:Ae.created_at,name:Ae.profiles?.name??null}));U(Te),We(Te.length)}function Rr(Q,xe){return Q?Q.status==="accepted"?"accepted":Q.status==="blocked"?"blocked":Q.status==="pending"?Q.requested_by===xe?"pending_out":"pending_in":"none":"none"}async function xr(Q){const xe=(await A.auth.getUser()).data.user;if(!xe)return;const Ne=Q.filter(be=>be!==xe.id);if(Ne.length===0){T({});return}const{data:Te}=await A.from("friendships").select("user_id_a,user_id_b,status,requested_by").or(Ne.map(be=>`and(user_id_a.eq.${xe.id},user_id_b.eq.${be}),and(user_id_a.eq.${be},user_id_b.eq.${xe.id})`).join(",")),Ae={};Ne.forEach(be=>{const Ye=(Te??[]).find(Xe=>Xe.user_id_a===xe.id&&Xe.user_id_b===be||Xe.user_id_b===xe.id&&Xe.user_id_a===be);Ae[be]=Rr(Ye,xe.id)}),T(Ae)}async function os(Q){await A.rpc("request_friend",{target_id:Q}),await xr([Q])}async function Pn(Q){await A.rpc("accept_friend",{from_id:Q}),await xr([Q])}async function Qr(Q){await A.rpc("remove_friend",{other_id:Q}),await xr([Q])}function ls(Q,xe){me(Q),ge(xe),X(!0)}async function or(){if(!s||!g||!window.confirm("Delete this group? This cannot be undone."))return;p(null);const{error:xe}=await A.from("groups").delete().match({id:s.id,host_id:g});if(xe){p(xe.message);return}n("/browse")}async function wr(){if(!s)return;const{data:Q}=await A.auth.getUser();if(!Q?.user){p("Please sign in."),n("/login");return}if(!C){p("Only the host can create a vote.");return}Ue("Schedule"),bt(""),je(!0)}async function Yr(){if(!s)return;const{data:Q}=await A.auth.getUser();if(!Q?.user){p("Please sign in."),n("/login");return}if(!C){p("Only the host can create a vote.");return}const{data:xe,error:Ne}=await A.from("group_polls").insert({group_id:s.id,title:(De||"Schedule").trim(),created_by:Q.user.id}).select("id").single();if(Ne||!xe?.id){p(Ne?.message||"Failed to create poll");return}const Te=(Qe||"").split(/\r?\n/).map(be=>be.trim()).filter(Boolean).slice(0,20);if(Te.length){const be=Te.map(Xe=>({poll_id:xe.id,label:Xe})),{error:Ye}=await A.from("group_poll_options").insert(be);if(Ye){p(Ye.message);return}}je(!1),p("Voting created"),window.location.hash="polls",ae({id:xe.id,group_id:s.id,title:(De||"Schedule").trim(),status:"open",closes_at:null,created_by:Q.user.id});const{data:Ae}=await A.from("group_poll_options").select("*").eq("poll_id",xe.id).order("created_at");Ee(Ae||[]),Fe({}),setTimeout(()=>document.getElementById("polls")?.scrollIntoView({behavior:"smooth"}),0)}async function $t(Q){if(!ne)return;pe(Q);const{data:xe}=await A.auth.getUser(),Ne=xe?.user?.id;if(!Ne){p("Please sign in."),n("/login"),pe(null);return}await A.from("group_members").upsert({group_id:ne.group_id,user_id:Ne,role:g===s?.host_id?"host":"member"},{onConflict:"group_id,user_id"});const{error:Te}=await A.from("group_votes").upsert({poll_id:ne.id,option_id:Q,user_id:Ne},{onConflict:"poll_id,user_id"});if(Te){p(Te.message),pe(null);return}const{data:Ae}=await A.from("group_votes").select("option_id,user_id").eq("poll_id",ne.id),be={},Ye=new Set;Ae?.forEach(Xe=>{be[Xe.option_id]=(be[Xe.option_id]||0)+1,Ye.add(Xe.user_id)}),Fe(be),G(Ye.size),pe(null)}return l?u.jsx("div",{className:"p-8 grid place-items-center",children:u.jsxs("div",{className:"flex items-center gap-3 text-neutral-600",children:[u.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),u.jsx("span",{children:"Loading…"})]})}):h&&!s&&!l?u.jsxs("div",{className:"p-6 space-y-2",children:[u.jsx("div",{className:"text-red-700 text-sm font-semibold",children:"Error loading group"}),u.jsx("div",{className:"text-xs break-words text-red-800",children:h}),u.jsxs("div",{className:"text-[10px] text-neutral-500",children:["id=",o]})]}):s?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"transition-all duration-300 "+(J&&!F?"mr-[min(92vw,520px)]":""),children:u.jsx("div",{className:"mx-auto max-w-5xl px-4 py-6",children:u.jsxs("div",{className:"grid gap-4 lg:grid-cols-[220px_1fr]",children:[u.jsxs("aside",{className:"order-2 lg:order-1 rounded-2xl border border-black/10 bg-white p-4 h-max shadow",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"Members"}),u.jsx("span",{className:"text-xs text-neutral-600",children:qe})]}),u.jsxs("ul",{className:"mt-3 space-y-2",children:[re.map(Q=>{const xe=Q.user_id===s.host_id,Ne=Q.name??Q.user_id.slice(0,6);return u.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-2.5 py-1.5 text-sm bg-neutral-50",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-6 w-6 grid place-items-center rounded-full ring-1 ring-black/10 dark:ring-white/10 bg-gradient-to-br from-neutral-100 to-neutral-200 dark:from-neutral-800 dark:to-neutral-700 text-[11px] font-medium",children:Ne.slice(0,2).toUpperCase()}),u.jsx("button",{onClick:()=>ls(Q.user_id,Ne),className:"text-neutral-900 underline-offset-2 hover:underline",children:Ne}),C&&Q.user_id!==s.host_id&&u.jsx("button",{onClick:()=>qt(Q.user_id),className:"ml-1 text-[11px] rounded border border-black/10 px-2 py-0.5 hover:bg-black/5",title:"Remove from group",children:"Remove"})]}),u.jsx("div",{className:"flex items-center gap-2",children:xe&&u.jsx("span",{className:"text-[10px] rounded-full bg-amber-500/15 text-amber-700 px-2 py-0.5",children:"HOST"})})]},Q.user_id)}),re.length===0&&u.jsx("li",{className:"text-xs text-neutral-600",children:"No members yet."})]})]}),u.jsxs("div",{className:"order-1 lg:order-2",children:[u.jsxs("div",{className:"rounded-2xl border border-black/10 bg-white p-5 shadow",children:[u.jsxs("div",{className:"mb-3 flex flex-wrap items-start justify-between gap-3",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"mb-1 flex flex-wrap items-center gap-2",children:[u.jsx(Ve,{to:"/browse",className:"text-xs text-neutral-500 hover:underline",children:"Browse"}),u.jsx("span",{className:"text-neutral-300",children:"/"}),u.jsx("span",{className:"text-xs text-neutral-700",children:"Group"}),u.jsx("span",{className:"hidden sm:inline text-neutral-300",children:"·"}),u.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:s.category||"Uncategorized"})]}),u.jsx("h1",{className:"truncate text-3xl font-bold tracking-tight text-neutral-900",children:s.title}),u.jsxs("div",{className:"mt-1 text-xs text-neutral-500",children:["Created ",new Date(s.created_at).toLocaleDateString()," • Host: ",re.find(Q=>Q.user_id===s.host_id)?.name||s.host_id.slice(0,6)]}),s.code&&u.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs",children:[u.jsxs("span",{className:"rounded-full bg-neutral-100 px-2 py-0.5 text-[11px] font-medium text-neutral-700 dark:bg-neutral-800 dark:text-neutral-300",children:["Code: ",String(s.code).toUpperCase()]}),u.jsx("button",{onClick:Xt,className:"rounded border border-black/10 bg-white px-2 py-0.5 hover:bg-black/[0.04]",title:"Copy group code",children:x?"Copied!":"Copy"}),u.jsx(Ve,{to:`/browse?code=${s.code}`,className:"text-emerald-700 hover:underline",title:"Open this group in Browse by code",children:"Open in Browse"})]})]}),u.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[!$&&u.jsx("button",{onClick:Zt,className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-emerald-700",children:"Join"}),$&&g!==s.host_id&&u.jsx("button",{onClick:At,className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Leave"}),u.jsx("button",{onClick:()=>ee(!0),className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04]",children:"Open Chat"}),C&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:ze,disabled:N,className:"rounded-lg border border-black/10 bg-white px-3 py-1.5 text-sm font-medium hover:bg-black/[0.04] disabled:opacity-60",title:"Create an invite link and copy it",children:N?"Creating…":M?"Copied!":"Share invite"}),u.jsx("button",{onClick:wr,className:"rounded-lg bg-indigo-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-indigo-700",children:"Create Voting"}),u.jsx("button",{onClick:or,className:"rounded-lg bg-red-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-red-700",children:"Delete"})]})]})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold text-neutral-900",children:"About"}),u.jsx("p",{className:"mt-1 text-sm text-neutral-700 whitespace-pre-wrap",children:s.purpose||"No description yet."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-neutral-700",children:[u.jsxs("div",{children:["Capacity: ",u.jsx("span",{className:"font-medium text-neutral-900",children:s.capacity})]}),u.jsxs("div",{children:["Visibility: ",u.jsx("span",{className:"font-medium text-neutral-900",children:s.visibility||"private"})]}),u.jsxs("div",{children:["Format: ",u.jsx("span",{className:"font-medium text-neutral-900",children:s.is_online?"Online":"In person"})]}),s.is_online&&s.online_link&&u.jsxs("div",{className:"col-span-2 truncate",children:["Link: ",u.jsx("a",{className:"text-emerald-600 hover:underline",href:s.online_link??"#",target:"_blank",rel:"noreferrer",children:s.online_link})]}),!s.is_online&&s.location&&u.jsxs("div",{className:"col-span-2",children:["Location: ",u.jsx("span",{className:"font-medium text-neutral-900",children:s.location})]})]})]})]}),u.jsxs("section",{id:"polls",className:"mt-6 rounded-2xl border border-black/10 bg-white p-5 shadow",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-neutral-900",children:"Voting"}),C&&ne&&u.jsx("span",{className:"text-xs text-neutral-600",children:"Open"})]}),!ne&&u.jsx("div",{className:"mt-2 text-sm text-neutral-600",children:"No active voting."}),ne&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-sm text-neutral-700",children:ne.title}),u.jsxs("ul",{className:"mt-3 space-y-2",children:[we.map(Q=>u.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-black/10 px-3 py-2 bg-neutral-50",children:[u.jsx("div",{children:u.jsx("div",{className:"font-medium text-neutral-900",children:Q.label})}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-neutral-600",children:[et[Q.id]??0," votes"]}),u.jsxs("button",{onClick:()=>$t(Q.id),disabled:!!he,className:"inline-flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm hover:bg-black/5 disabled:opacity-60 disabled:cursor-not-allowed",children:[he===Q.id?u.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,"Vote"]})]})]},Q.id)),we.length===0&&u.jsx("li",{className:"text-sm text-neutral-600",children:"No options yet."})]}),u.jsxs("div",{className:"mt-3 text-xs text-neutral-600",children:["Voters: ",Be," / Members: ",qe]})]})]})]})]})})}),ce&&u.jsxs("div",{className:"fixed inset-0 z-50",children:[u.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>je(!1)}),u.jsxs("div",{className:"absolute left-1/2 top-1/2 w-[min(92vw,600px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl bg-white p-5 shadow-xl dark:bg-neutral-900",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Create Voting"}),u.jsx("label",{className:"mt-3 block text-sm",children:"Title"}),u.jsx("input",{value:De,onChange:Q=>Ue(Q.target.value),className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),u.jsx("label",{className:"mt-3 block text-sm",children:"Options (one per line)"}),u.jsx("textarea",{value:Qe,onChange:Q=>bt(Q.target.value),rows:6,placeholder:`Sat 19:00 @ Tacheles
Sun 18:00 @ Niko Club`,className:"mt-1 w-full rounded border border-black/10 px-3 py-2 text-sm dark:border-white/10 dark:bg-neutral-800 dark:text-gray-100"}),u.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[u.jsx("button",{type:"button",onClick:()=>je(!1),className:"rounded-md border px-3 py-1.5 text-sm",children:"Cancel"}),u.jsx("button",{type:"button",onClick:Yr,className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Create"})]})]})]}),J&&u.jsx(v0,{groupId:s.id,onClose:()=>{ee(!1),Y(!1)},full:F,setFull:Y}),q&&le&&u.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:u.jsxs("div",{className:"w-[420px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[u.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-semibold",children:z}),u.jsx("button",{onClick:()=>X(!1),className:"rounded-md border px-2 py-1 text-sm",children:"Close"})]}),u.jsxs("div",{className:"space-y-3 text-sm",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[u.jsx("div",{className:"text-[11px] text-neutral-600",children:"Games Played"}),u.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.games??(V?"…":0)})]}),u.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[u.jsx("div",{className:"text-[11px] text-neutral-600",children:"Friends"}),u.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.friends??(V?"…":0)})]}),u.jsxs("div",{className:"rounded-lg border border-black/10 bg-neutral-50 p-2 text-center",children:[u.jsx("div",{className:"text-[11px] text-neutral-600",children:"Groups Created"}),u.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:_e?.created??(V?"…":0)})]})]}),w[le]==="accepted"&&u.jsx("button",{onClick:()=>Qr(le),className:"w-full rounded-md border px-3 py-2",children:"Unfriend"}),w[le]==="none"&&u.jsx("button",{onClick:()=>os(le),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Add friend"}),w[le]==="pending_out"&&u.jsx("div",{children:"Request sent."}),w[le]==="pending_in"&&u.jsx("button",{onClick:()=>Pn(le),className:"w-full rounded-md bg-emerald-600 px-3 py-2 text-white",children:"Accept request"})]})]})})]}):u.jsxs("div",{className:"p-6",children:["Group not found. ",u.jsxs("span",{className:"text-xs text-neutral-500",children:["id=",o]})]})}function v0({groupId:o,onClose:n,full:s,setFull:a}){const[l,c]=y.useState([]),[h,p]=y.useState(""),[g,v]=y.useState(!1),[x,b]=y.useState(null),N=y.useRef(null),[L,M]=y.useState({}),[I,C]=y.useState(null),[J,ee]=y.useState(""),[F,Y]=y.useState(!0),[ne,ae]=y.useState({}),we=y.useRef(null),[Ee,et]=y.useState(null),[Fe,qe]=y.useState(null),[We,Be]=y.useState(!0),[G,he]=y.useState(!1),pe=50;y.useEffect(()=>{(async()=>{const{data:$}=await A.auth.getUser(),R=$.user?.id??null;if(C(R),R){const{data:w}=await A.from("profiles").select("name").eq("user_id",R).maybeSingle();ee(w?.name||R.slice(0,6))}})()},[]),y.useEffect(()=>{let $=!1;return Y(!0),(async()=>{const{data:R,error:w}=await A.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",o).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(pe);if(w){$||(b(w.message),Y(!1));return}if($){Y(!1);return}const T=(R??[]).map(me=>({id:me.id,group_id:me.group_id,user_id:me.user_id,content:me.content??"",created_at:me.created_at})),q=T[T.length-1]||null;et(q?q.created_at:null),qe(q?q.id:null),Be(T.length===pe);const X=[...T].reverse();c(X);const le=Array.from(new Set(X.map(me=>me.user_id)));if(le.length){const{data:me}=await A.from("profiles").select("user_id, name").in("user_id",le),z={};(me??[]).forEach(ge=>{z[ge.user_id]=ge.name??null}),$||M(z)}Y(!1)})(),()=>{$=!0}},[o]);async function re(){if(!We||G||!Ee||!Fe)return;he(!0),b(null);const{data:$,error:R}=await A.from("group_messages").select("id, group_id, user_id, content, created_at").eq("group_id",o).or(`created_at.lt.${Ee},and(created_at.eq.${Ee},id.lt.${Fe})`).order("created_at",{ascending:!1}).order("id",{ascending:!1}).limit(pe);if(R){b(R.message),he(!1);return}const w=($??[]).map(X=>({id:X.id,group_id:X.group_id,user_id:X.user_id,content:X.content??"",created_at:X.created_at})),T=w[w.length-1]||null;et(T?T.created_at:Ee),qe(T?T.id:Fe),Be(w.length===pe);const q=[...w].reverse();c(X=>[...q,...X]),he(!1)}y.useEffect(()=>{const $=A.channel(`grp-msgs-${o}`).on("postgres_changes",{event:"*",schema:"public",table:"group_messages",filter:`group_id=eq.${o}`},R=>{if(R.eventType==="INSERT"){const w=R.new;c(T=>[...T,{id:w.id,group_id:w.group_id,user_id:w.user_id,content:w.content??"",created_at:w.created_at}]),L[w.user_id]||A.from("profiles").select("user_id, name").eq("user_id",w.user_id).maybeSingle().then(({data:T})=>{T&&M(q=>({...q,[T.user_id]:T.name??null}))})}if(R.eventType==="DELETE"){const w=R.old;c(T=>T.filter(q=>q.id!==w.id))}if(R.eventType==="UPDATE"){const w=R.new;c(T=>T.map(q=>q.id===w.id?{...q,content:w.content??""}:q))}}).on("broadcast",{event:"typing"},({payload:R})=>{const{user_id:w,name:T}=R;!w||w===I||(ae(q=>({...q,[w]:{name:T,ts:Date.now()}})),setTimeout(()=>{ae(q=>{const X={...q};return X[w]&&Date.now()-X[w].ts>2500&&delete X[w],X})},3e3))}).subscribe();return()=>{A.removeChannel($)}},[o,I,L]),y.useEffect(()=>{G||N.current?.scrollTo({top:N.current.scrollHeight,behavior:"smooth"})},[l.length,G]);async function U($){$.preventDefault();const R=h.trim();if(!R)return;v(!0),b(null);const w=(await A.auth.getUser()).data.user;if(!w){b("Please sign in"),v(!1);return}const{error:T}=await A.from("group_messages").insert({group_id:o,user_id:w.id,content:R});T?b(T.message):p(""),v(!1)}return u.jsxs(u.Fragment,{children:[s&&u.jsx("div",{className:"fixed inset-0 z-40 bg-black/50",onClick:n}),u.jsx("div",{className:"fixed right-0 top-0 z-50 h-full transform transition-transform duration-300 "+(s?"w-screen translate-x-0":"w-[min(92vw,520px)] translate-x-0"),children:u.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-none border-l border-black/10 bg-white shadow-xl",children:[u.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-white px-3 py-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:n,className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-neutral-900",children:"Group Chat"}),u.jsx("div",{className:"text-[11px] text-neutral-500",children:"Visible to all members"})]})]}),u.jsx("button",{onClick:()=>a(!s),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:s?"Exit Fullscreen":"Fullscreen"})]}),u.jsxs("div",{ref:N,className:"flex-1 overflow-y-auto bg-neutral-50 px-3 py-3",children:[We&&!F&&u.jsx("div",{className:"mb-2 flex justify-center",children:u.jsx("button",{onClick:re,disabled:G,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs hover:bg-black/5 disabled:opacity-60",children:G?"Loading…":"Load older"})}),l.map($=>{const R=I&&$.user_id===I,w=L[$.user_id]??$.user_id.slice(0,6);return u.jsx("div",{className:`mb-2 flex ${R?"justify-end":"justify-start"}`,children:u.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 text-sm ${R?"bg-emerald-600 text-white":"bg-white border border-black/10"}`,children:[!R&&u.jsx("div",{className:"mb-0.5 text-[11px] font-medium text-neutral-600",children:w}),u.jsx("div",{className:"whitespace-pre-wrap break-words",children:$.content}),u.jsx("div",{className:`mt-1 text-[10px] ${R?"text-emerald-50/80":"text-neutral-500"}`,children:new Date($.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},$.id)}),l.length===0&&!F&&u.jsx("div",{className:"text-center text-sm text-neutral-500",children:"No messages yet."}),F&&u.jsx("div",{className:"flex justify-center py-6 text-neutral-400",children:u.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})})]}),Object.keys(ne).length>0&&u.jsxs("div",{className:"px-3 py-1 text-[11px] text-neutral-500",children:[Object.values(ne).map($=>$.name).join(", ")," typing…"]}),u.jsxs("form",{onSubmit:U,className:"border-t border-black/10 bg-white px-3 py-2",children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsx("textarea",{value:h,onChange:$=>p($.target.value),onInput:()=>{if(!I)return;const $=Date.now();we.current&&$-we.current<800||(we.current=$,A.channel(`grp-msgs-${o}`).send({type:"broadcast",event:"typing",payload:{user_id:I,name:J}}))},placeholder:"Type a message…",rows:1,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),$.currentTarget.form?.requestSubmit())},className:"min-h-[40px] max-h-40 flex-1 resize-none rounded-lg border border-black/10 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-500"}),u.jsx("button",{type:"submit",disabled:!h.trim()||g||F,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50",children:g||F?u.jsxs("span",{className:"inline-flex items-center gap-2",children:[u.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a 8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Sending…"]}):"Send"})]}),x&&u.jsx("div",{className:"mt-1 text-xs text-red-600",children:x})]})]})})]})}function y0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function x0(){const o=yr();return y.useMemo(()=>new URLSearchParams(o.search),[o.search])}function w0(){ss();const o=x0(),n=o.get("category")||"",s=o.get("q")||"",a=o.get("joined")==="1",l=o.get("created")==="1",[c,h]=y.useState(null),[p,g]=y.useState([]),[v,x]=y.useState(!1),[b,N]=y.useState(null),L=12,[M,I]=y.useState(0),[C,J]=y.useState(!1),[ee,F]=y.useState(!1),[Y,ne]=y.useState({}),[ae,we]=y.useState({}),[Ee,et]=y.useState({});y.useEffect(()=>{let G=!0;return(async()=>{const{data:he,error:pe}=await A.from("allowed_games").select("id, category").eq("is_active",!0);if(!G)return;if(pe){et({});return}const re={};(he??[]).forEach(U=>{const $=String(U.category||"").toLowerCase(),R=String(U.id||"").toLowerCase();!$||!R||(re[$]||(re[$]=[]),re[$].push(R))}),et(re)})(),()=>{G=!1}},[]),y.useEffect(()=>{(async()=>{const{data:G}=await A.auth.getUser();h(G.user?.id??null)})()},[]),y.useEffect(()=>{if(!c)return;const G=A.channel(`reads:${c}`).on("postgres_changes",{event:"*",schema:"public",table:"group_reads",filter:`user_id=eq.${c}`},async he=>{const pe=he.new?.group_id||he.old?.group_id;pe&&await Fe([pe])}).subscribe();return()=>{A.removeChannel(G)}},[c]),y.useEffect(()=>{if(!c)return;const G=()=>{const re=p.map(U=>U.id);re.length&&Fe(re)};window.addEventListener("focus",G);const he=()=>{document.visibilityState==="visible"&&G()};document.addEventListener("visibilitychange",he);const pe=window.setInterval(G,2e4);return()=>{window.removeEventListener("focus",G),document.removeEventListener("visibilitychange",he),window.clearInterval(pe)}},[c,p]),y.useEffect(()=>{let G=!0;const he=re=>{let U=re;const $=n?n.toLowerCase():"",R=new Set(["games","study","outdoors"]);if($)if(R.has($)){const w=Ee[$]??[];if(w.length>0){const T=w.map(q=>`"${q}"`).join(",");U=U.or(`game.in.(${T}),category.eq.${$}`)}else U=U.eq("category",$)}else{const w=$.replace(/[^a-z0-9]+/g,"");U=U.or(`game.eq.${w},game.ilike.%${$}%,title.ilike.%${$}%`)}if(s.trim()){const w=s.trim();U=U.or(`title.ilike.%${w}%,game.ilike.%${w}%`)}return U};async function pe(re){try{if(re&&(x(!0),g([]),I(0),J(!1)),N(null),(a||l)&&!c){g([]),N("Please sign in to view your groups."),x(!1),F(!1);return}let U=[];const $=(re?0:(M+1)*L)+0,R=$+L-1;if(l&&c){let w=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",c).order("created_at",{ascending:!1}).range($,R);const{data:T,error:q}=await he(w);if(q)throw q;U=T??[]}else if(a&&c){const{data:w,error:T}=await A.from("group_members").select("group_id").eq("user_id",c);if(T)throw T;const q=(w??[]).map(X=>X.group_id);if(q.length>0){let X=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",q).order("created_at",{ascending:!1}).range($,R);const{data:le,error:me}=await he(X);if(me)throw me;U=le??[]}else U=[]}else{let w=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range($,R);const{data:T,error:q}=await he(w);if(q)throw q;U=T??[]}if(!G)return;if(re&&g(U),J(U.length===L),(U??[]).length>0){const w=U.map(X=>X.id);c&&w.length>0&&await Fe(w);const{data:T}=await A.from("group_polls").select("group_id").in("group_id",w).eq("status","open"),q={};(T??[]).forEach(X=>{q[X.group_id]=!0}),ne(X=>({...X,...q}))}}catch(U){if(!G)return;N(U?.message??"Failed to load groups")}finally{if(!G)return;x(!1),F(!1)}}return pe(!0),()=>{G=!1}},[n,s,a,l,c,Ee]);async function Fe(G){try{if(!c||!G.length)return;const{data:he,error:pe}=await A.from("group_reads").select("group_id,last_read_at").eq("user_id",c).in("group_id",G);if(pe)throw pe;const re={};(he??[]).forEach(w=>{re[w.group_id]=w.last_read_at??null});const U=G.map(async w=>{const T=re[w]??"1970-01-01T00:00:00Z",{count:q,error:X}=await A.from("group_messages").select("id",{count:"exact",head:!0}).eq("group_id",w).gt("created_at",T);return X?[w,0]:[w,q??0]}),$=await Promise.all(U),R={};$.forEach(([w,T])=>{R[w]=T}),we(w=>({...w,...R}))}catch{}}async function qe(G){if(c)try{await A.rpc("mark_group_read",{p_group_id:G}),we(he=>({...he,[G]:0})),await A.from("notifications").update({is_read:!0}).eq("user_id",c).eq("payload->>group_id",G).eq("is_read",!1)}catch(he){console.warn("[markGroupRead]",he)}}async function We(){try{F(!0);const G=(M+1)*L,he=G+L-1;let pe=[];const re=$=>{let R=$;const w=n?n.toLowerCase():"",T=new Set(["games","study","outdoors"]);if(w)if(T.has(w)){const q=Ee[w]??[];if(q.length>0){const X=q.map(le=>`"${le}"`).join(",");R=R.or(`game.in.(${X}),category.eq.${w}`)}else R=R.eq("category",w)}else{const q=w.replace(/[^a-z0-9]+/g,"");R=R.or(`game.eq.${q},game.ilike.%${w}%,title.ilike.%${w}%`)}if(s.trim()){const q=s.trim();R=R.or(`title.ilike.%${q}%,game.ilike.%${q}%`)}return R};if(l&&c){let $=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").eq("host_id",c).order("created_at",{ascending:!1}).range(G,he);const{data:R,error:w}=await re($);if(w)throw w;pe=R??[]}else if(a&&c){const{data:$,error:R}=await A.from("group_members").select("group_id").eq("user_id",c);if(R)throw R;const w=($??[]).map(T=>T.group_id);if(w.length>0){let T=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").in("id",w).order("created_at",{ascending:!1}).range(G,he);const{data:q,error:X}=await re(T);if(X)throw X;pe=q??[]}else pe=[]}else{let $=A.from("groups").select("id, title, description, city, capacity, category, game, created_at, host_id").order("created_at",{ascending:!1}).range(G,he);const{data:R,error:w}=await re($);if(w)throw w;pe=R??[]}g($=>[...$,...pe]),I($=>$+1),J(pe.length===L);const U=pe.map($=>$.id);if(U.length){const{data:$}=await A.from("group_polls").select("group_id").in("group_id",U).eq("status","open"),R={};($??[]).forEach(w=>{R[w.group_id]=!0}),ne(w=>({...w,...R}))}}catch{}finally{F(!1)}}const Be=l?"My Groups – Created":a?"My Groups – Joined":n?`Groups • ${n}`:"All Groups";return u.jsxs("main",{className:"mx-auto max-w-5xl px-4 py-8",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-semibold",children:Be}),s&&u.jsxs("p",{className:"text-sm text-neutral-600",children:["Filtered by: “",s,"”"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ve,{to:"/browse",className:"text-sm underline",children:"Back"}),u.jsx(Ve,{to:"/create",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"New Group"})]})]}),u.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/90 p-5 shadow-sm backdrop-blur",children:v?u.jsx("ul",{className:"divide-y divide-black/5",children:Array.from({length:6}).map((G,he)=>u.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[u.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},he))}):b?u.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:b}):p.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 p-10 text-center text-neutral-600",children:[u.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[u.jsx("path",{d:"M8 21h8"}),u.jsx("path",{d:"M12 17v4"}),u.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),u.jsx("div",{className:"text-lg font-medium",children:"No groups found"}),u.jsx("div",{className:"text-sm",children:"Try a different filter or create a new one."}),u.jsxs("div",{className:"mt-2 flex justify-center gap-2",children:[u.jsx(Ve,{to:"/browse",className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Back"}),u.jsx(Ve,{to:"/create",className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm text-white hover:brightness-110",children:"New Group"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("ul",{className:"divide-y divide-black/5",children:p.map(G=>u.jsx("li",{className:"group py-1 first:pt-0 last:pb-0",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ve,{to:`/group/${G.id}`,onClick:()=>we(he=>({...he,[G.id]:0})),className:"block flex-1 rounded-lg px-2 py-2 hover:bg-black/[0.03] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"flex h-9 w-9 select-none items-center justify-center rounded-full border border-black/10 bg-neutral-100 text-sm font-semibold text-neutral-700",children:(G.title||G.game||"G").slice(0,1).toUpperCase()}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"truncate text-base font-medium text-neutral-900",children:G.title??"Untitled group"}),G.host_id===c&&u.jsx("span",{className:"shrink-0 rounded-full border border-amber-300 bg-amber-50 px-2 py-0.5 text-[11px] text-amber-800",children:"Host"}),Y[G.id]&&u.jsx("span",{className:"shrink-0 rounded-full border border-emerald-300 bg-emerald-50 px-2 py-0.5 text-[11px] text-emerald-700",children:"Voting"})]}),u.jsx("div",{className:"mt-0.5 line-clamp-1 text-xs text-neutral-600",children:G.description??"No description"}),u.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-1 text-[11px] text-neutral-700",children:[G.category&&u.jsxs("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:["#",G.category]}),G.game&&u.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:G.game}),G.city&&u.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:G.city}),G.capacity&&u.jsxs("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:[G.capacity," slots"]}),G.created_at&&u.jsx("span",{className:"rounded-full border border-black/10 bg-neutral-50 px-2 py-0.5",children:y0(G.created_at)})]})]}),typeof ae[G.id]=="number"&&ae[G.id]>0&&u.jsx("span",{className:"ml-1 inline-flex h-6 min-w-[1.5rem] items-center justify-center rounded-full bg-emerald-600 px-1 text-xs font-semibold text-white",children:ae[G.id]>99?"99+":ae[G.id]})]})}),typeof ae[G.id]=="number"&&ae[G.id]>0&&u.jsx("button",{onClick:he=>{he.preventDefault(),he.stopPropagation(),qe(G.id)},className:"ml-2 shrink-0 rounded-md border border-black/10 bg-white px-2.5 py-1 text-xs hover:bg-black/[0.04]",title:"Mark as read",children:"Read"})]})},G.id))}),C&&u.jsx("div",{className:"mt-5 border-t border-black/5 p-4 text-center",children:u.jsx("button",{onClick:We,className:"inline-flex items-center gap-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",disabled:ee,children:ee?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading…"]}):u.jsx(u.Fragment,{children:"Load more"})})})]})})]})}function mh(o){const n=new Date(o),s=Math.floor((Date.now()-n.getTime())/1e3);if(s<60)return`${s}s`;const a=Math.floor(s/60);if(a<60)return`${a}m`;const l=Math.floor(a/60);return l<24?`${l}h`:`${Math.floor(l/24)}d`}function Uf(){const o=ss(),n=yr(),{success:s,error:a}=c0(),{userId:l}=_o();y.useLayoutEffect(()=>{n.hash==="#chat"&&Zr(!0)},[n.key,n.hash]),y.useEffect(()=>{const k=()=>Zr(!0);return window.addEventListener("open-chat",k),()=>window.removeEventListener("open-chat",k)},[]);const[c,h]=y.useState(null),p=!!l&&l!==c,[g,v]=y.useState(null),[x,b]=y.useState(""),[N,L]=y.useState(null),[M,I]=y.useState("system"),[C,J]=y.useState(!1),[ee,F]=y.useState(!1),[Y,ne]=y.useState(!0),[ae,we]=y.useState(0),[Ee,et]=y.useState(0),[Fe,qe]=y.useState(!1),[We,Be]=y.useState(""),[G,he]=y.useState(""),[pe,re]=y.useState("UTC"),[U,$]=y.useState(""),[R,w]=y.useState(null),[T,q]=y.useState(!1),[X,le]=y.useState(!1),[me,z]=y.useState(0),[ge,_e]=y.useState(0),[Se,V]=y.useState([]),[se,ce]=y.useState("created"),[je,De]=y.useState(0),[Ue,Qe]=y.useState([]),[bt,Xt]=y.useState(!1),[ze,At]=y.useState([]),[qt,Zt]=y.useState([]),[Rr,xr]=y.useState([]),os=y.useMemo(()=>{if(se==="created")return ze;if(se==="joined")return Se;const k=new Map;for(const D of ze)D?.id&&k.set(D.id,D);for(const D of Se)D?.id&&!k.has(D.id)&&k.set(D.id,D);return Array.from(k.values())},[se,ze,Se]),Pn=y.useMemo(()=>{if(se==="created")return me;if(se==="joined")return ge;const k=new Set;return ze.forEach(D=>D?.id&&k.add(D.id)),Se.forEach(D=>D?.id&&k.add(D.id)),k.size},[se,me,ge,ze,Se]),Qr=y.useMemo(()=>(x||g||"?").slice(0,2).toUpperCase(),[x,g]),[ls,or]=y.useState(!0),[wr,Yr]=y.useState(null),[$t,Q]=y.useState(null),[xe,Ne]=y.useState(!1),[Te,Ae]=y.useState(null),[be,Ye]=y.useState([]),[Xe,Wt]=y.useState(""),ii=y.useRef(null),[Lr,ai]=y.useState([]),[Xr,us]=y.useState(""),[oi,On]=y.useState(!1),[_r,Zr]=y.useState(!1),Ar=y.useRef(null),[li,$r]=y.useState(!1),en=y.useRef(null),[br,ui]=y.useState([]),[Ir,jo]=y.useState([]),[Mu,Ur]=y.useState([]),[lr,ci]=y.useState(new Map),tn=y.useMemo(()=>{const k=new Map;if(Lr.forEach(fe=>k.set(fe.other_id,fe)),!c)return Lr;const D=[...Lr];return br.map(fe=>fe.user_id_a===c?fe.user_id_b:fe.user_id_a).forEach(fe=>{if(k.has(fe))return;const $e=lr.get(fe);D.push({other_id:fe,name:$e?.name&&$e.name.trim()?$e.name:fe.slice(0,6),avatar_url:$e?.avatar_url??null,last_body:"",last_at:new Date(0).toISOString(),last_from_me:!1,unread:!1})}),D.sort((fe,$e)=>$e.last_at>fe.last_at?1:$e.last_at<fe.last_at?-1:0),D},[Lr,br,lr,c]),di=y.useMemo(()=>Lr.filter(k=>!k.last_from_me),[Lr]),cs=y.useMemo(()=>Ir.length+qt.length+Rr.length,[Ir,qt,Rr]),fi=y.useMemo(()=>c?br.map(D=>D.user_id_a===c?D.user_id_b:D.user_id_a).map(D=>({id:D,name:lr.get(D)?.name||D.slice(0,6),avatar_url:lr.get(D)?.avatar_url??null})):[],[br,lr,c]),[sa,ia]=y.useState(!1),[Tt,tt]=y.useState(null),[ds,hi]=y.useState(""),[fs,hs]=y.useState(null),[kt,aa]=y.useState(!0),[ps,Vt]=y.useState(0),[oa,It]=y.useState(0),[ms,pi]=y.useState(0),[Ht,Rn]=y.useState(!1),[gs,rn]=y.useState(null),[nn,mi]=y.useState(null),[Ln,sn]=y.useState("none"),la=p?ds||(l?l.slice(0,6):""):x||g||"",vs=p?fs:N,an=p?ps:ae,ua=p?oa:Ee;function gi(k){const D=Math.floor(k/86400),Z=Math.floor(k%86400/3600),fe=Math.floor(k%3600/60);return D>0?`${D}d ${Z}h`:Z>0?`${Z}h ${fe}m`:`${fe}m`}const Le=y.useMemo(()=>{if(!nn)return 0;const k=new Date(nn).getTime(),D=Math.floor((Date.now()-k)/1e3),Z=168*3600;return Math.max(0,Z-D)},[nn]),ca=y.useMemo(()=>kt&&!Ht&&Le===0,[kt,Ht,Le]),da=(p?ds||l||"?":x||g||"?")?.slice(0,2).toUpperCase()??"?";y.useEffect(()=>{l&&c&&l!==c&&jr(l)},[l,c]),y.useEffect(()=>{ii.current?.scrollIntoView({behavior:"smooth"})},[be.length]),y.useEffect(()=>{function k(D){const Z=D.target;li&&en.current&&!en.current.contains(Z)&&$r(!1),_r&&Ar.current&&!Ar.current.contains(Z)&&Zr(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[li,_r]);async function An(k){if(!c)return;On(!1),Ae(null),Ne(!0),Ye([]),Q(k),ai(Z=>Z.map(fe=>fe.other_id===k?{...fe,unread:!1,last_from_me:!0}:fe));const{data:D}=await A.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`and(from_id.eq.${c},to_id.eq.${k}),and(from_id.eq.${k},to_id.eq.${c})`).order("created_at",{ascending:!0}).limit(200);Ye(D??[]),Ne(!1)}async function $n(k){const{data:D}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${k},user_id_b.eq.${k}`).eq("status","accepted");ui(D??[]);const{data:Z}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`user_id_a.eq.${k},user_id_b.eq.${k}`).eq("status","pending").neq("requested_by",k);jo(Z??[]);const{data:fe}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").eq("requested_by",k).eq("status","pending");Ur(fe??[])}async function ys(k){const{data:D}=await A.from("group_members").select("group_id, role, status, created_at, groups(title)").eq("user_id",k).in("status",["pending","invited"]).order("created_at",{ascending:!1}).limit(50),Z=(D??[]).map(it=>({group_id:it.group_id,group_title:it.groups?.title??null,role:it.role??null,status:it.status??"pending",invited_at:it.created_at}));Zt(Z);const{data:fe}=await A.from("group_members").select("group_id").eq("user_id",k).eq("status","active"),$e=(fe??[]).map(it=>it.group_id);let er=[];if($e.length){const{data:it}=await A.from("group_messages").select("group_id, content:body, created_at, groups(title), user_id").in("group_id",$e).neq("user_id",k).order("created_at",{ascending:!1}).limit(20);er=(it??[]).map(ur=>({group_id:ur.group_id,group_title:ur.groups?.title??null,preview:String(ur.content||"").slice(0,120),created_at:ur.created_at}))}xr(er)}async function fa(k){await A.rpc("request_friend",{target_id:k}),c&&await $n(c),sn("pending_out")}async function In(k){await A.rpc("accept_friend",{from_id:k}),c&&await $n(c),Tt===k&&sn("accepted")}async function on(k){await A.rpc("remove_friend",{other_id:k}),c&&await $n(c),Tt===k&&sn("none")}async function Gt(k){if(!c||!Tt||Ht||Le>0)return;const D=Math.max(0,Math.min(6,Math.round(k)));Rn(!0);const Z=ms;pi(D);try{if(D===0)await A.from("ratings").delete().eq("rater_id",c).eq("ratee_id",Tt),mi(null);else{const{error:$e}=await A.from("ratings").upsert({rater_id:c,ratee_id:Tt,stars:D},{onConflict:"rater_id,ratee_id"});if($e)throw $e;mi(new Date().toISOString())}const{data:fe}=await A.from("profiles").select("rating_avg,rating_count").eq("user_id",Tt).maybeSingle();fe&&(Vt(Number(fe.rating_avg??0)),It(Number(fe.rating_count??0)))}catch(fe){pi(Z);const $e=String(fe?.message||"");/(7\\s*days|week|rate_weekly_limit)/i.test($e)?Yr("You can rate this user once every 7 days."):Yr($e||"Rating failed.")}finally{Rn(!1)}}async function kr(k){if(!c)return;const{error:D}=await A.from("group_members").update({status:"active"}).eq("group_id",k).eq("user_id",c);if(D)try{await A.from("group_members").delete().eq("group_id",k).eq("user_id",c),await A.from("group_members").insert({group_id:k,user_id:c,status:"active",role:"member"})}catch{}await ys(c)}async function jr(k){if(!c)return;tt(k);const{data:D}=await A.from("profiles").select("user_id,name,avatar_url,allow_ratings,rating_avg,rating_count").eq("user_id",k).maybeSingle();hi(D?.name??k.slice(0,6)),hs(D?.avatar_url??null),aa(!!(D?.allow_ratings??!0)),Vt(Number(D?.rating_avg??0)),It(Number(D?.rating_count??0));try{const{data:$e}=await A.from("ratings").select("stars,updated_at").eq("rater_id",c).eq("ratee_id",k).maybeSingle();pi(Number($e?.stars??0)),mi($e?.updated_at??null)}catch{}const{data:Z}=await A.from("friendships").select("id,user_id_a,user_id_b,status,requested_by").or(`and(user_id_a.eq.${c},user_id_b.eq.${k}),and(user_id_a.eq.${k},user_id_b.eq.${c})`).limit(1).maybeSingle();let fe="none";Z&&(Z.status==="accepted"?fe="accepted":Z.status==="blocked"?fe="blocked":Z.status==="pending"&&(fe=Z.requested_by===c?"pending_out":"pending_in")),sn(fe),ia(!1)}async function Un(k){c&&(await A.from("group_members").delete().eq("group_id",k).eq("user_id",c),await ys(c))}function Mn(k){xr(D=>D.filter(Z=>Z.group_id!==k)),$r(!1),o(`/group/${k}`)}const Kt=y.useMemo(()=>{if(!$t)return{name:"",avatar:null};const k=tn.find(Z=>Z.other_id===$t);if(k)return{name:k.name,avatar:k.avatar_url};const D=lr.get($t);return{name:D?.name||$t.slice(0,6),avatar:D?.avatar_url??null}},[$t,tn,lr]);async function So(){if(!c)return;w(null);const{data:k,error:D}=await A.from("profiles").select("name, city, timezone, interests, avatar_url, allow_ratings, rating_avg, rating_count").eq("user_id",c).maybeSingle();if(D){w(D.message),qe(!0);return}Be(k?.name??""),he(k?.city??""),re(k?.timezone??"UTC");const Z=Array.isArray(k?.interests)?k.interests:[];$(Z.join(", ")),L(k?.avatar_url??null),ne(k?.allow_ratings??!0),we(Number(k?.rating_avg??0)),et(Number(k?.rating_count??0)),qe(!0)}function vi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch{return"UTC"}}async function Dn(k){if(k&&k.preventDefault(),!!c){w(null),q(!0);try{const D=We.trim(),Z=G.trim(),fe=pe.trim()||"UTC",$e=U.split(",").map(it=>it.trim()).filter(Boolean),{error:er}=await A.from("profiles").update({name:D,city:Z,timezone:fe,interests:$e}).eq("user_id",c);if(er)throw er;b(D),w("Saved."),s("Profile saved"),localStorage.setItem("theme",M),localStorage.setItem("emailNotifs",C?"1":"0"),localStorage.setItem("pushNotifs",ee?"1":"0"),No(M),qe(!1)}catch(D){const Z=D?.message||"Failed to save";w(Z),a(Z)}finally{q(!1)}}}function No(k){const D=document.documentElement;D.classList.remove("light","dark"),k==="light"?D.classList.add("light"):k==="dark"&&D.classList.add("dark")}async function ha(k){if(ne(k),!!c)try{await A.from("profiles").update({allow_ratings:k}).eq("user_id",c)}catch{}}async function xs(k){const D=k.target.files?.[0];if(!(!c||!D))try{le(!0);const Z=D.name.split(".").pop()||"jpg",fe=`${c}/${Date.now()}.${Z}`,{error:$e}=await A.storage.from("avatars").upload(fe,D,{upsert:!0});if($e)throw $e;const{data:er}=A.storage.from("avatars").getPublicUrl(fe),it=er?.publicUrl||null;it&&(await A.from("profiles").update({avatar_url:it}).eq("user_id",c),L(it))}catch(Z){console.error(Z),w("Avatar upload failed")}finally{le(!1)}}async function pa(){try{await A.auth.signOut()}catch{}try{localStorage.removeItem("onboardingSeen"),sessionStorage.clear()}catch{}const k=`${window.location.origin}/Circles/`;try{if("serviceWorker"in navigator){const D=await navigator.serviceWorker.getRegistrations();await Promise.all(D.map(Z=>Z.unregister()))}}catch{}window.location.replace(k)}y.useEffect(()=>{(async()=>{if(!c){ci(new Map);return}const{data:k}=await A.from("friendships").select("user_id_a,user_id_b,status").or(`user_id_a.eq.${c},user_id_b.eq.${c}`).eq("status","accepted"),D=new Set;(k??[]).forEach(fe=>D.add(fe.user_id_a===c?fe.user_id_b:fe.user_id_a));let Z=new Map;if(D.size){const{data:fe}=await A.from("profiles").select("user_id,name,avatar_url").in("user_id",[...D]);(fe??[]).forEach($e=>Z.set($e.user_id,{name:$e.name??"",avatar_url:$e.avatar_url??null}))}ci(Z)})()},[c,br.length]),y.useEffect(()=>{let k=!1;return(async()=>{or(!0),Yr(null);const{data:D}=await A.auth.getUser(),Z=D?.user?.id||null,fe=D?.user?.email||null,$e=localStorage.getItem("theme");$e&&I($e);const er=localStorage.getItem("emailNotifs");er&&J(er==="1");const it=localStorage.getItem("pushNotifs");if(it&&F(it==="1"),!Z){or(!1),Yr("Please sign in.");return}if(k)return;h(Z),v(fe);const[ur,yi,ga]=await Promise.all([A.from("profiles").select("name, city, timezone, interests, avatar_url, allow_ratings, rating_avg, rating_count").eq("user_id",Z).maybeSingle(),A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",Z).eq("status","active").in("role",["owner","host"]),A.from("group_members").select("*",{count:"exact",head:!0}).eq("user_id",Z).eq("status","active")]);if(!k){const ot=ur.data||{};b(ot?.name??""),he(ot?.city??""),re(ot?.timezone??"UTC"),ot?.timezone||re(vi());const ln=Array.isArray(ot?.interests)?ot.interests:[];$(ln.join(", ")),L(ot?.avatar_url??null),ne(ot?.allow_ratings??!0),we(Number(ot?.rating_avg??0)),et(Number(ot?.rating_count??0)),z(yi.count??0),_e(ga.count??0),or(!1)}(async()=>{const{data:ot,error:ln}=await A.from("group_members").select("group_id, created_at").eq("user_id",Z).eq("status","active").in("role",["owner","host"]).order("created_at",{ascending:!1}).limit(20);!k&&ln&&console.warn("createdMemberships error",ln);const zn=Array.from(new Set((ot??[]).map(Oe=>Oe.group_id))).filter(Boolean);let xi=[];if(zn.length){const{data:Oe}=await A.from("groups").select("id,title,game,category,created_at").in("id",zn).order("created_at",{ascending:!1}).limit(20);xi=Oe??[]}if(!k){const Oe=new Set,rt=xi.filter(ct=>ct?.id&&!Oe.has(ct.id)&&Oe.add(ct.id)).slice(0,5);At(rt)}const{data:ws,error:Fn}=await A.from("group_members").select("group_id, created_at").eq("user_id",Z).eq("status","active").order("created_at",{ascending:!1}).limit(20);!k&&Fn&&console.warn("joinedMemberships error",Fn);const wi=Array.from(new Set((ws??[]).map(Oe=>Oe.group_id))).filter(Boolean);let jt=[];if(wi.length){const{data:Oe}=await A.from("groups").select("id,title,game,category,created_at").in("id",wi).order("created_at",{ascending:!1}).limit(20);jt=Oe??[]}if(!k){const Oe=new Set,rt=jt.filter(ct=>ct?.id&&!Oe.has(ct.id)&&Oe.add(ct.id)).slice(0,5);V(rt)}const{data:Mr}=await A.from("group_members").select("group_id, groups(game)").eq("user_id",Z);if(!k){const Oe=new Map;(Mr??[]).forEach(ct=>{const Dr=ct?.groups?.game||"Unknown";Oe.set(Dr,(Oe.get(Dr)||0)+1)});const rt=Array.from(Oe.entries()).map(([ct,Dr])=>({game:ct,count:Dr}));rt.sort((ct,Dr)=>Dr.count-ct.count||ct.game.localeCompare(Dr.game)),Qe(rt),De((Mr??[]).length)}const{data:_i}=await A.from("direct_messages").select("id,from_id,to_id,body,created_at").or(`from_id.eq.${Z},to_id.eq.${Z}`).order("created_at",{ascending:!1}).limit(100),Sr=new Map;(_i??[]).forEach(Oe=>{const rt=Oe.from_id===Z?Oe.to_id:Oe.from_id;Sr.has(rt)||Sr.set(rt,{last_body:Oe.body,last_at:Oe.created_at,last_from_me:Oe.from_id===Z})});const bi=Array.from(Sr.keys());let _s=new Map;if(bi.length){const{data:Oe}=await A.from("profiles").select("user_id,name,avatar_url").in("user_id",bi);(Oe??[]).forEach(rt=>{_s.set(rt.user_id,{name:rt.name??"",avatar_url:rt.avatar_url??null})})}const ki=bi.map(Oe=>{const rt=Sr.get(Oe),ct=_s.get(Oe)||{name:"",avatar_url:null};return{other_id:Oe,name:ct.name||Oe.slice(0,6),avatar_url:ct.avatar_url??null,last_body:rt.last_body,last_at:rt.last_at,last_from_me:rt.last_from_me,unread:!rt.last_from_me}});k||ai(ki),k||await $n(Z),k||await ys(Z)})()})(),()=>{k=!0}},[]);async function ma(){if(!c||!$t||!Xe.trim())return;const k=Xe.trim();Wt("");const{data:D,error:Z}=await A.from("direct_messages").insert({from_id:c,to_id:$t,body:k}).select("id,from_id,to_id,body,created_at").single();if(Z){Ae(Z.message);return}Ye(fe=>[...fe,D])}return ls?u.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-neutral-600",children:"Loading…"}):wr?u.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 text-sm text-red-600",children:wr}):u.jsxs("div",{className:"mx-auto max-w-6xl px-4 pt-16 md:pt-20 pb-0",children:[u.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_360px]",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[u.jsx("div",{className:"grid h-16 w-16 place-content-center rounded-full bg-emerald-100 text-emerald-800 ring-1 ring-emerald-300/60 overflow-hidden",children:vs?u.jsx("img",{src:vs,alt:"",className:"h-16 w-16 object-cover"}):u.jsx("span",{className:"text-2xl font-semibold tracking-wide",children:da})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-lg font-semibold text-neutral-900",children:la}),!p&&u.jsx("div",{className:"text-sm text-neutral-600",children:g}),u.jsxs("div",{className:"mt-1 flex items-center gap-3 text-sm text-neutral-700",children:[u.jsxs("span",{title:`${an.toFixed(1)} / 6 from ${ua} ratings`,className:"inline-flex items-center gap-1",children:[Array.from({length:6}).map((k,D)=>u.jsx("span",{children:D<Math.round(an||0)?"★":"☆"},D)),u.jsxs("span",{className:"ml-1 text-xs text-neutral-500",children:["(",ua||0,")"]})]}),p&&u.jsxs("div",{className:"ml-2 inline-flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-neutral-500",children:"Rate:"}),Array.from({length:6}).map((k,D)=>{const Z=D+1,fe=(gs??ms)>=Z;return u.jsx("button",{type:"button",disabled:!kt||Ht,onMouseEnter:()=>rn(Z),onMouseLeave:()=>rn(null),onClick:()=>Gt(Z),className:`text-lg leading-none ${!kt||Ht?"opacity-40 cursor-not-allowed":"hover:scale-110 transition-transform"} ${fe?"text-emerald-600":"text-neutral-400"}`,"aria-label":`Give ${Z} star${Z>1?"s":""}`,title:kt?`${Z} / 6`:"Ratings disabled",children:fe?"★":"☆"},Z)}),u.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(0),className:`ml-1 rounded border border-black/10 px-2 py-0.5 text-[11px] ${!kt||Ht?"opacity-40 cursor-not-allowed":"hover:bg-black/[0.04]"}`,title:kt?"Clear my rating":"Ratings disabled",children:"Clear"}),!ca&&u.jsxs("span",{className:"ml-1 text-[11px] text-neutral-500",children:["Next in ",gi(Le)]})]})]}),!p&&u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsxs("div",{ref:en,className:"relative",children:[u.jsxs("button",{onClick:()=>$r(k=>!k),className:"ml-2 inline-flex items-center gap-2 rounded-full border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",title:"Notifications","aria-label":"Notifications",children:[u.jsx("span",{className:"text-base",children:"🔔"}),cs>0&&u.jsx("span",{className:"rounded-full bg-emerald-600 px-2 py-0.5 text-white text-xs leading-none",children:cs})]}),li&&u.jsxs("div",{className:"absolute right-0 z-50 mt-1 w-96 max-w-[92vw] overflow-hidden rounded-xl border border-black/10 bg-white shadow-xl",children:[u.jsxs("div",{className:"flex items-center justify-between border-b border-black/10 bg-neutral-50 px-3 py-2",children:[u.jsx("div",{className:"text-sm font-medium text-neutral-800",children:"Notifications"}),u.jsx("span",{className:"rounded-full bg-neutral-200 px-2 py-0.5 text-[11px] text-neutral-800",children:cs})]}),u.jsxs("div",{className:"max-h-80 overflow-y-auto p-2",children:[u.jsxs("div",{className:"mb-2",children:[u.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Friend requests"}),Ir.length===0?u.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new requests"}):u.jsx("ul",{className:"space-y-1",children:Ir.slice(0,5).map(k=>{const D=k.user_id_a===c?k.user_id_b:k.user_id_a,Z=lr.get(D)?.name||D.slice(0,6);return u.jsxs("li",{className:"flex items-center justify-between rounded-md border border-black/10 px-2 py-1.5",children:[u.jsx("span",{className:"truncate text-sm text-neutral-800",children:Z}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>In(D),className:"rounded-md bg-emerald-600 px-2 py-0.5 text-xs text-white",children:"Accept"}),u.jsx("button",{onClick:()=>on(D),className:"rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Decline"})]})]},k.id)})})]}),u.jsxs("div",{className:"mb-2",children:[u.jsx("div",{className:"mb-1 text-xs font-semibold text-neutral-700",children:"Group messages"}),Rr.length===0?u.jsx("div",{className:"rounded-md border border-black/5 bg-neutral-50 px-2 py-2 text-xs text-neutral-600",children:"No new messages"}):u.jsx("ul",{className:"divide-y",children:Rr.slice(0,5).map(k=>u.jsxs("li",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{className:"min-w-0 pr-2",children:[u.jsx("div",{className:"truncate text-sm font-medium text-neutral-900",children:k.group_title||k.group_id.slice(0,6)}),u.jsx("div",{className:"truncate text-xs text-neutral-600",children:k.preview})]}),u.jsx("button",{onClick:()=>Mn(k.group_id),className:"shrink-0 rounded-md border border-black/10 px-2 py-0.5 text-xs",children:"Open"})]},`${k.group_id}-${k.created_at}`))})]})]})]})]}),u.jsx("button",{onClick:So,className:"ml-2 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"Settings"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4",children:[u.jsx(Mf,{label:"Groups Created",value:me,to:"/browse?created=1"}),u.jsx(Mf,{label:"Games Played",value:je,onClick:()=>Xt(!0)})]}),Ir.length>0&&u.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[u.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[u.jsx("h3",{className:"text-base font-medium text-neutral-900",children:"Friend Requests"}),u.jsx("span",{className:"text-xs text-neutral-600",children:Ir.length})]}),u.jsx("ul",{className:"divide-y",children:Ir.map(k=>{const D=k.user_id_a===c?k.user_id_b:k.user_id_a;return u.jsxs("li",{className:"flex items-center justify-between py-2",children:[u.jsx("div",{className:"text-sm text-neutral-800",children:D}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>In(D),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"}),u.jsx("button",{onClick:()=>on(D),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Decline"})]})]},k.id)})})]}),u.jsxs("section",{className:"mt-8 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm text-neutral-600",children:"Show:"}),u.jsxs("div",{className:"inline-flex rounded-lg border border-black/10 bg-white p-0.5",children:[u.jsx("button",{onClick:()=>ce("created"),className:`px-3 py-1.5 text-sm rounded-md ${se==="created"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Created"}),u.jsx("button",{onClick:()=>ce("joined"),className:`px-3 py-1.5 text-sm rounded-md ${se==="joined"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"Joined"}),u.jsx("button",{onClick:()=>ce("all"),className:`px-3 py-1.5 text-sm rounded-md ${se==="all"?"bg-neutral-900 text-white":"hover:bg-black/[0.04]"}`,children:"All"})]})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(uu,{title:se==="created"?"Created by me":se==="joined"?"Joined":"All my groups",count:Pn,empty:"No groups yet.",children:os.map(k=>{const D=k?.id??k?.group_id??k?.group?.id??k?.groups?.id;return D?u.jsx(_0,{id:D,title:k.title,meta:[k.category||"–",k.game||""].filter(Boolean).join(" · ")},D):null})}),u.jsx(uu,{title:"Friends",count:tn.length,empty:"No friends yet.",children:tn.map(k=>u.jsx(b0,{_otherId:k.other_id,name:k.name,avatarUrl:k.avatar_url,lastBody:k.last_body,lastAt:k.last_at,unread:k.unread,onOpen:()=>An(k.other_id)},k.other_id))})]})]}),qt.length>0&&u.jsx("section",{className:"mt-6",children:u.jsx(uu,{title:"Group Invitations",count:qt.length,empty:"No invitations",children:qt.map(k=>u.jsxs("li",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-neutral-900",children:k.group_title||k.group_id.slice(0,6)}),u.jsxs("div",{className:"text-xs text-neutral-600",children:["Role: ",k.role||"member"," · Status: ",k.status]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>kr(k.group_id),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-xs text-white",children:"Accept"}),u.jsx("button",{onClick:()=>Un(k.group_id),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-xs",children:"Decline"})]})]},k.group_id))})})]}),!p&&_r&&u.jsxs("aside",{ref:Ar,className:"rounded-2xl border border-black/10 bg-white p-4 shadow-sm h-max sticky top-4 transition-all duration-300",children:[!$t&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-3 relative",children:[u.jsx("input",{value:Xr,onChange:k=>{us(k.target.value),On(!0)},onFocus:()=>On(!0),onBlur:()=>setTimeout(()=>On(!1),120),placeholder:"Search friends…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),oi&&Xr.trim().length>0&&u.jsx("div",{className:"absolute z-10 mt-1 w-full overflow-hidden rounded-md border border-black/10 bg-white shadow",children:u.jsxs("ul",{children:[fi.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).slice(0,8).map(k=>u.jsxs("li",{className:"flex items-center justify-between gap-2 px-2 py-2 hover:bg-black/[0.03]",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-8 w-8 rounded-full bg-neutral-200 grid place-items-center text-[11px] font-medium overflow-hidden",children:k.avatar_url?u.jsx("img",{src:k.avatar_url,alt:"",className:"h-8 w-8 rounded-full object-cover"}):k.name.slice(0,2).toUpperCase()}),u.jsx("div",{className:"text-sm text-neutral-900",children:k.name})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onMouseDown:D=>D.preventDefault(),onClick:()=>{us(""),An(k.id)},className:"rounded-md border border-black/10 bg-white px-2 py-1 text-xs hover:bg-black/[0.04]",children:"Chat"}),u.jsx("button",{onMouseDown:D=>D.preventDefault(),onClick:()=>{us(""),o(`/profile/${k.id}`)},className:"rounded-md bg-emerald-600 px-2 py-1 text-xs text-white hover:bg-emerald-700",children:"View"})]})]},k.id)),fi.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).length===0&&u.jsx("li",{className:"px-2 py-2 text-xs text-neutral-600",children:"No matches"})]})})]}),u.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:u.jsxs("ul",{children:[tn.filter(k=>k.name.toLowerCase().includes(Xr.toLowerCase())).map(k=>u.jsxs("li",{className:"flex items-center justify-between gap-2 px-1 py-2 hover:bg-black/[0.03] rounded cursor-pointer",onClick:()=>An(k.other_id),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center text-sm font-medium overflow-hidden",children:k.avatar_url?u.jsx("img",{src:k.avatar_url,alt:"",className:"h-10 w-10 rounded-full object-cover"}):k.name.slice(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-neutral-900",children:k.name}),u.jsxs("div",{className:"text-xs text-neutral-600 truncate max-w-[180px]",children:[k.last_from_me?"You: ":"",k.last_body]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-neutral-500",children:mh(k.last_at)}),k.unread&&u.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"})]})]},k.other_id)),tn.length===0&&u.jsx("li",{className:"px-1 py-2 text-xs text-neutral-600",children:"No conversations yet."})]})})]}),$t&&u.jsxs("div",{className:"flex h-[70vh] flex-col",children:[u.jsxs("div",{className:"mb-2 flex items-center gap-3 border-b border-black/10 pb-2",children:[u.jsx("button",{onClick:()=>Q(null),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Back"}),u.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:Kt.avatar?u.jsx("img",{src:Kt.avatar,alt:"",className:"h-9 w-9 rounded-full object-cover"}):Kt.name.slice(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-neutral-900",children:Kt.name}),u.jsx("div",{className:"text-[11px] text-neutral-500",children:"Direct message"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto rounded-md border border-black/10 p-3 text-sm",children:[xe&&u.jsx("div",{className:"text-neutral-600",children:"Loading…"}),Te&&u.jsx("div",{className:"mb-2 rounded border border-red-200 bg-red-50 px-2 py-1 text-red-700",children:Te}),!xe&&be.length===0&&u.jsx("div",{className:"text-neutral-600",children:"Say hi 👋"}),!xe&&be.map(k=>u.jsx("div",{className:`mb-2 flex ${k.from_id===c?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-[85%] rounded-lg px-3 py-1.5 ${k.from_id===c?"bg-emerald-600 text-white":"bg-neutral-100"}`,children:k.body})},k.id)),u.jsx("div",{ref:ii})]}),u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("input",{value:Xe,onChange:k=>Wt(k.target.value),onKeyDown:k=>{k.key==="Enter"&&ma()},placeholder:"Type a message…",className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm"}),u.jsx("button",{onClick:ma,className:"rounded-md bg-emerald-600 px-3 py-2 text-sm text-white",children:"Send"})]})]})]}),!p&&!_r&&u.jsxs("button",{onClick:()=>{Zr(!0)},className:"fixed bottom-4 right-4 z-40 h-12 w-12 rounded-full bg-emerald-600 text-white shadow-lg flex items-center justify-center hover:bg-emerald-700 transition relative",title:"Open chat","aria-label":"Open chat",children:[u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6",children:u.jsx("path",{d:"M3.25 6.75A2.75 2.75 0 0 1 6 4h12a2.75 2.75 0 0 1 2.75 2.75v6.5A2.75 2.75 0 0 1 18 16H9.414a1.75 1.75 0 0 0-1.238.512l-2.476 2.476A.75.75 0 0 1 4 18.75V6.75z"})}),di.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-emerald-400 text-[10px] font-medium text-white animate-pulse",children:di.length})]})]}),bt&&u.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:u.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Games Played"}),u.jsx("button",{type:"button",onClick:()=>Xt(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),u.jsxs("div",{className:"mb-2 text-sm text-neutral-700",children:["Total sessions joined: ",u.jsx("span",{className:"font-medium text-neutral-900",children:je})]}),u.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:Ue.length===0?u.jsx("div",{className:"text-sm text-neutral-600",children:"No games yet."}):u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-left text-neutral-500",children:[u.jsx("th",{className:"py-1 pr-2",children:"Game"}),u.jsx("th",{className:"py-1 pr-2",children:"Times"}),u.jsx("th",{className:"py-1 pr-2",children:"Share"})]})}),u.jsx("tbody",{children:Ue.map(k=>{const D=je>0?Math.round(k.count/je*100):0;return u.jsxs("tr",{className:"border-t border-black/5",children:[u.jsx("td",{className:"py-1 pr-2 text-neutral-900",children:k.game}),u.jsx("td",{className:"py-1 pr-2",children:k.count}),u.jsxs("td",{className:"py-1 pr-2 text-neutral-600",children:[D,"%"]})]},k.game)})})]})})]})}),Fe&&u.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:u.jsxs("form",{onSubmit:Dn,className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsx("div",{className:"text-base font-semibold text-neutral-900",children:"Edit Profile"}),u.jsx("button",{type:"button",onClick:()=>qe(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Name"}),u.jsx("input",{value:We,onChange:k=>Be(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"Your name",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Avatar"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:N?u.jsx("img",{src:N,alt:"",className:"h-10 w-10 object-cover"}):u.jsx("span",{className:"text-xs",children:Qr})}),u.jsx("input",{type:"file",accept:"image/*",onChange:xs,className:"text-sm"}),X&&u.jsx("span",{className:"text-xs text-neutral-600",children:"Uploading…"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"City"}),u.jsx("input",{value:G,onChange:k=>he(k.target.value),onBlur:()=>{(!pe||pe==="UTC")&&re(vi())},className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"City"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Timezone"}),u.jsx("input",{value:pe,onChange:k=>re(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"e.g., Europe/Berlin"}),u.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Auto-fills from your device when you set City. You can still override manually."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Interests"}),u.jsx("input",{value:U,onChange:k=>$(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",placeholder:"comma, separated, tags"}),u.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Saved as tags in your profile."})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"mb-1 block text-sm font-medium text-neutral-800",children:"Theme"}),u.jsxs("select",{value:M,onChange:k=>I(k.target.value),className:"w-full rounded-md border border-black/10 px-3 py-2 text-sm",children:[u.jsx("option",{value:"system",children:"System"}),u.jsx("option",{value:"light",children:"Light"}),u.jsx("option",{value:"dark",children:"Dark"})]}),u.jsx("div",{className:"mt-1 text-[11px] text-neutral-500",children:"Light/Dark applies after save."})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{id:"emailNotifs",type:"checkbox",checked:C,onChange:k=>J(k.target.checked),className:"h-4 w-4 rounded border-black/20"}),u.jsx("label",{htmlFor:"emailNotifs",className:"text-sm text-neutral-800",children:"Email notifications"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{id:"pushNotifs",type:"checkbox",checked:ee,onChange:k=>F(k.target.checked),className:"h-4 w-4 rounded border-black/20"}),u.jsx("label",{htmlFor:"pushNotifs",className:"text-sm text-neutral-800",children:"Push notifications"})]}),u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-neutral-800",children:"Allow profile ratings"}),u.jsx("div",{className:"text-[11px] text-neutral-500",children:"Others can rate you when enabled."})]}),u.jsx("button",{type:"button",onClick:()=>ha(!Y),className:`h-7 w-12 rounded-full ${Y?"bg-emerald-600":"bg-neutral-300"} relative`,"aria-pressed":Y,children:u.jsx("span",{className:`absolute top-0.5 h-6 w-6 rounded-full bg-white transition ${Y?"right-0.5":"left-0.5"}`})})]}),R&&u.jsx("div",{className:"mt-3 rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:R}),u.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[u.jsx("button",{type:"button",onClick:pa,className:"rounded-md border border-red-200 bg-red-50 px-3 py-1.5 text-sm text-red-700",children:"Log out"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>qe(!1),className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm",children:"Cancel"}),u.jsx("button",{type:"submit",disabled:T,className:`rounded-md px-3 py-1.5 text-sm text-white ${T?"bg-neutral-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:T?"Saving…":"Save"})]})]})]})}),sa&&u.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40",children:u.jsxs("div",{className:"w-[560px] max-w-[92vw] rounded-2xl border border-black/10 bg-white p-5 shadow-xl",children:[u.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-12 w-12 rounded-full bg-neutral-200 grid place-items-center overflow-hidden",children:fs?u.jsx("img",{src:fs,alt:"",className:"h-12 w-12 rounded-full object-cover"}):u.jsx("span",{className:"text-sm font-medium",children:(ds||"").slice(0,2).toUpperCase()})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-base font-semibold text-neutral-900",children:ds}),u.jsx("div",{className:"flex items-center text-neutral-800",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(5),className:`text-lg ${!kt||Ht?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"} ${ms===5?"text-green-600":"text-neutral-400"}`,title:kt?"Thumbs up":"Ratings disabled",children:"👍"}),u.jsx("button",{type:"button",disabled:!kt||Ht,onClick:()=>Gt(1),className:`text-lg ${!kt||Ht?"opacity-50 cursor-not-allowed":"hover:scale-110 transition-transform"} ${ms===1?"text-red-600":"text-neutral-400"}`,title:kt?"Thumbs down":"Ratings disabled",children:"👎"}),u.jsxs("span",{className:"ml-1 text-[11px] text-neutral-500",children:["(",oa,")"]})]})})]}),u.jsx("div",{className:"text-xs text-neutral-600",children:Tt})]})]}),u.jsx("button",{onClick:()=>ia(!1),className:"rounded-md border border-black/10 px-2 py-1 text-sm",children:"Close"})]}),u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"rounded-md border border-black/10 p-3 text-sm",children:[u.jsx("div",{className:"mb-2 font-medium text-neutral-800",children:"Friend status"}),Ln==="accepted"&&u.jsx("div",{className:"text-emerald-700",children:"Friends"}),Ln==="pending_in"&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-neutral-700",children:"Requested you"}),u.jsx("button",{onClick:()=>Tt&&In(Tt),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Accept"})]}),Ln==="pending_out"&&u.jsx("div",{className:"text-neutral-700",children:"Request sent"}),Ln==="none"&&Tt&&u.jsx("button",{onClick:()=>fa(Tt),className:"rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white",children:"Add Friend"}),Ln==="accepted"&&Tt&&u.jsx("button",{onClick:()=>on(Tt),className:"ml-2 rounded-md border border-black/10 px-3 py-1.5 text-sm",children:"Remove"})]})})]})})]})}function Mf({label:o,value:n,to:s,onClick:a}){const l=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-sm text-neutral-600",children:o}),u.jsx("div",{className:"mt-1 text-2xl font-semibold text-neutral-900",children:n})]});return s?u.jsx(Ve,{to:s,className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm hover:shadow",children:l}):u.jsx("button",{onClick:a,className:"w-full rounded-xl border border-black/10 bg-white p-4 text-left shadow-sm hover:shadow",children:l})}function uu({title:o,count:n,empty:s,children:a}){return u.jsxs("div",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[u.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[u.jsx("h3",{className:"text-base font-medium text-neutral-900",children:o}),u.jsx("span",{className:"text-xs text-neutral-600",children:n})]}),xo.Children.count(a)===0?u.jsx("p",{className:"text-sm text-neutral-600",children:s}):u.jsx("ul",{className:"divide-y",children:a})]})}function _0({id:o,title:n,meta:s}){const a=String(o).slice(0,8).toUpperCase();return u.jsxs("li",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{children:[u.jsx(Ve,{to:`/group/${o}`,className:"font-medium text-neutral-900 hover:underline",children:n}),u.jsx("div",{className:"text-xs text-neutral-600",children:s}),u.jsxs("div",{className:"text-[11px] text-neutral-500 tracking-wider",children:["Code: ",a]})]}),u.jsx(Ve,{to:`/group/${o}`,className:"text-sm text-emerald-700 hover:underline",children:"Open"})]})}function b0({_otherId:o,name:n,avatarUrl:s,lastBody:a,lastAt:l,unread:c,onOpen:h}){return u.jsxs("li",{className:"flex items-center justify-between py-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"h-9 w-9 rounded-full bg-neutral-200 grid place-items-center text-xs font-medium overflow-hidden",children:s?u.jsx("img",{src:s,alt:"",className:"h-9 w-9 rounded-full object-cover"}):n.slice(0,2).toUpperCase()}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium text-neutral-900",children:n}),u.jsx("div",{className:"text-xs text-neutral-600 truncate max-w-[220px]",children:a})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-neutral-500",children:mh(l)}),c&&u.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-600"}),u.jsx(Ve,{to:`/profile/${o}`,className:"text-sm text-neutral-700 hover:underline",children:"View"}),u.jsx("button",{onClick:h,className:"text-sm text-emerald-700 hover:underline",children:"Chat"})]})]})}function k0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function Ji(o,n){return u.jsx("span",{className:`rounded-full border px-2 py-0.5 text-xs ${o}`,children:n})}function j0({text:o}){const n=(o||"").trim().slice(0,1).toUpperCase()||"G";return u.jsx("div",{className:"flex h-9 w-9 select-none items-center justify-center rounded-full border border-black/10 bg-neutral-100 text-sm font-semibold text-neutral-700",children:n})}function S0(){const{game:o=""}=_o(),n=(o||"").toLowerCase().replace(/[^a-z0-9]+/g,"").trim(),s=(o||"").replace(/-/g," ").trim(),[a,l]=y.useState([]),[c,h]=y.useState(null),[p,g]=y.useState(!0),[v,x]=y.useState(null),[b,N]=y.useState(new Set),[L,M]=y.useState(null);y.useEffect(()=>{let C=!0;return(async()=>{g(!0);const{data:J,error:ee}=await A.from("groups").select("*").eq("game",n).order("created_at",{ascending:!1}).limit(100);C&&(ee?h(ee.message):l(J??[]),g(!1))})(),()=>{C=!1}},[n]),y.useEffect(()=>{let C=!0;return(async()=>{const{data:J}=await A.auth.getUser(),ee=J?.user?.id??null;if(!C)return;if(x(ee),!ee){N(new Set);return}const{data:F,error:Y}=await A.from("group_members").select("group_id").eq("user_id",ee);if(C){if(Y){N(new Set);return}N(new Set((F??[]).map(ne=>ne.group_id)))}})(),()=>{C=!1}},[]);async function I(C){if(!v){h("Sign in required");return}M(C);const{error:J}=await A.from("group_members").insert({group_id:C,user_id:v,role:"member"});if(J)h(J.message);else{const ee=new Set(b);ee.add(C),N(ee)}M(null)}return u.jsxs("main",{className:"mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:mb-8 sm:flex-row sm:items-center",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-neutral-900 sm:text-3xl",children:["Groups · ",s]}),u.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Join an existing room or create your own."}),u.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:[a.length," group",a.length===1?"":"s"]})]}),u.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[u.jsx(Ve,{to:"/browse",className:"flex-1 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] sm:flex-none",children:"Back"}),u.jsx(Ve,{to:"/create",className:"flex-1 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 sm:flex-none",children:"New Group"})]})]}),p&&u.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/80 p-4 shadow-sm backdrop-blur",children:u.jsx("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((C,J)=>u.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[u.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},J))})}),c&&u.jsx("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:c}),!p&&!c&&a.length===0&&u.jsx("div",{className:"mt-6 rounded-2xl border border-dashed border-black/10 bg-white/80 p-10 text-center shadow-sm backdrop-blur",children:u.jsxs("div",{className:"mx-auto flex max-w-sm flex-col items-center justify-center gap-3 text-neutral-600",children:[u.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[u.jsx("path",{d:"M8 21h8"}),u.jsx("path",{d:"M12 17v4"}),u.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),u.jsxs("div",{className:"text-lg font-medium",children:["No groups for “",s,"”"]}),u.jsx("div",{className:"text-sm",children:"Be the first to create one."}),u.jsx(Ve,{to:"/create",className:"mt-2 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110",children:"New Group"})]})}),u.jsx("div",{className:"mt-6 rounded-2xl border border-black/10 bg-white/80 p-4 shadow-sm backdrop-blur",children:u.jsx("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(C=>u.jsx("li",{className:"group rounded-xl border border-black/10 bg-white p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md focus-within:ring-emerald-500 focus-within:ring-2 focus-within:ring-offset-2",children:u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[u.jsx(j0,{text:C.game||C.name||C.city||""}),u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h2",{className:"truncate text-base font-semibold text-neutral-900",children:C.name||C.title||C.group_name||"Untitled group"}),Ji("border-emerald-300 bg-emerald-50 text-emerald-700",C.is_online?"Online":"In-person")]}),C.description&&u.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-neutral-600",children:C.description}),u.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 text-xs text-neutral-700",children:[Ji("border-black/10 bg-neutral-50",C.category?`#${C.category}`:"#general"),C.game&&Ji("border-black/10 bg-neutral-50",C.game),C.city&&Ji("border-black/10 bg-neutral-50",C.city),C.created_at&&Ji("border-black/10 bg-neutral-50",k0(C.created_at))]}),C.is_online&&C.online_link&&u.jsx("a",{className:"mt-3 inline-block text-sm underline",href:C.online_link,target:"_blank",rel:"noreferrer",children:"Join link"})]})]}),u.jsx("div",{className:"flex shrink-0 flex-col items-stretch gap-2 sm:flex-row sm:items-center",children:b.has(C.id)?u.jsx(Ve,{to:`/group/${C.id}`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:"View"}):u.jsx("button",{onClick:()=>I(C.id),disabled:L===C.id,className:"rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:L===C.id?"Joining…":"Join"})})]})},C.id))})})]})}function N0(o){if(!o)return"";try{return new Date(o).toLocaleDateString()}catch{return""}}function Xs({children:o,className:n=""}){return u.jsx("span",{className:`rounded-full border px-2 py-0.5 text-xs ${n}`,children:o})}function C0(){const[o,n]=y.useState([]),[s,a]=y.useState(!0),[l,c]=y.useState(null);return y.useEffect(()=>{let h=!0;return(async()=>{try{a(!0),c(null);const{data:{session:p}}=await A.auth.getSession(),g=p?.user?.id;if(!g){n([]);return}const{data:v,error:x}=await A.from("group_members").select("group_id").eq("user_id",g);if(x)throw x;const b=(v??[]).map(M=>M.group_id).filter(Boolean);if(b.length===0){n([]);return}const{data:N,error:L}=await A.from("groups").select("id, title, name, description, category, game, city, capacity, is_online, created_at").in("id",b).order("created_at",{ascending:!1});if(L)throw L;if(!h)return;n(N??[])}catch(p){if(!h)return;c(p?.message??"Failed to load your groups"),n([])}finally{h&&a(!1)}})(),()=>{h=!1}},[]),u.jsxs("main",{className:"mx-auto max-w-6xl px-4 py-6 sm:py-8",children:[u.jsxs("div",{className:"mb-6 flex flex-col items-start justify-between gap-4 sm:mb-8 sm:flex-row sm:items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight text-neutral-900 sm:text-3xl",children:"My Groups"}),u.jsx("p",{className:"mt-1 text-sm text-neutral-600",children:"Groups you’ve joined or been added to."})]}),u.jsxs("div",{className:"flex w-full gap-2 sm:w-auto",children:[u.jsx(Ve,{to:"/browse",className:"flex-1 rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04] sm:flex-none",children:"Back"}),u.jsx(Ve,{to:"/create",className:"flex-1 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110 sm:flex-none",children:"New Group"})]})]}),s&&u.jsx("ul",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((h,p)=>u.jsxs("li",{className:"rounded-xl border border-black/10 bg-white p-4 shadow-sm",children:[u.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-2 h-3 w-5/6 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"mt-1 h-3 w-2/3 animate-pulse rounded bg-neutral-200"}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("div",{className:"h-8 w-24 animate-pulse rounded bg-neutral-200"}),u.jsx("div",{className:"h-8 w-28 animate-pulse rounded bg-neutral-200"})]})]},p))}),!!l&&u.jsx("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-4 text-red-800",children:l}),!s&&!l&&o.length===0&&u.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center gap-3 rounded-xl border border-dashed border-black/10 bg-white/70 p-10 text-center text-neutral-600",children:[u.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"opacity-70",children:[u.jsx("path",{d:"M8 21h8"}),u.jsx("path",{d:"M12 17v4"}),u.jsx("path",{d:"M7 3h10l4 7H3l4-7Z"})]}),u.jsxs("div",{className:"text-lg font-medium",children:["No groups for “","","”"]}),u.jsx("div",{className:"text-sm",children:"Be the first to create one."}),u.jsx(Ve,{to:"/create",className:"mt-2 rounded-md bg-emerald-700 px-3 py-1.5 text-sm font-medium text-white hover:brightness-110",children:"New Group"})]}),u.jsx("ul",{className:"mt-6 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.map(h=>u.jsx("li",{className:"group rounded-xl border border-black/10 bg-white p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h2",{className:"truncate text-base font-semibold text-neutral-900",children:h.title||h.name||h.group_name||"Untitled group"}),u.jsx(Xs,{className:h.is_online?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-black/10 bg-neutral-50 text-neutral-700",children:h.is_online?"Online":"In-person"})]}),h.description&&u.jsx("p",{className:"mt-1 line-clamp-2 text-sm text-neutral-600",children:h.description}),u.jsxs("div",{className:"mt-2 flex flex-wrap gap-1 text-xs text-neutral-700",children:[u.jsx(Xs,{className:"border-black/10 bg-neutral-50",children:h.category?`#${h.category}`:"#general"}),h.game&&u.jsx(Xs,{className:"border-black/10 bg-neutral-50",children:h.game}),h.city&&u.jsx(Xs,{className:"border-black/10 bg-neutral-50",children:h.city}),h.capacity&&u.jsxs(Xs,{className:"border-black/10 bg-neutral-50",children:[h.capacity," slots"]}),h.created_at&&u.jsx(Xs,{className:"border-black/10 bg-neutral-50",children:N0(h.created_at)})]})]}),u.jsx("div",{className:"flex shrink-0 items-center gap-2",children:u.jsx(Ve,{to:`/group/${h.id}`,className:"rounded-md border border-black/10 bg-white px-3 py-1.5 text-sm hover:bg-black/[0.04]",children:"View"})})]})},h.id))})]})}const E0=y.lazy(()=>is(()=>import("./Onboarding-BiK8Rrus.js"),[])),T0=y.lazy(()=>is(()=>import("./JoinByCode-ZdGrTB-9.js"),[])),gh=y.createContext({user:null,loading:!0});function Uu(){return y.useContext(gh)}function P0({children:o}){const[n,s]=y.useState(null),[a,l]=y.useState(!0);y.useEffect(()=>{let h=!0;(async()=>{const{data:g}=await A.auth.getUser();h&&(s(g.user??null),l(!1))})();const{data:{subscription:p}}=A.auth.onAuthStateChange((g,v)=>{s(v?.user??null)});return()=>{p.unsubscribe(),h=!1}},[]);const c=y.useMemo(()=>({user:n,loading:a}),[n,a]);return u.jsx(gh.Provider,{value:c,children:o})}function O0({children:o}){const{user:n,loading:s}=Uu(),a=yr();return s?null:n?u.jsx(u.Fragment,{children:o}):u.jsx(bo,{to:"/onboarding",replace:!0,state:{from:a.pathname}})}function R0(){return u.jsx("div",{className:"fixed fab-offset-top left-4 z-50",children:u.jsx(Ve,{to:"/onboarding",className:"flex items-center justify-center h-10 w-10 rounded-full border border-black/10 bg-white/90 text-xl shadow-md hover:bg-black/[0.04]","aria-label":"Onboarding",title:"Onboarding",children:"🎯"})})}function L0(){const{user:o}=Uu(),s=yr().pathname.startsWith("/onboarding");return!o||s?null:u.jsx("div",{className:"fixed inset-x-0 bottom-4 z-[60] flex items-center justify-center pointer-events-none",children:u.jsxs("nav",{className:"pointer-events-auto flex items-center gap-4 rounded-full border border-black/10 bg-white/90 backdrop-blur px-4 py-2 shadow-lg",children:[u.jsx(Ve,{to:"/browse",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Browse",title:"Browse",children:u.jsx("span",{className:"text-2xl",children:"🔍"})}),u.jsx(Ve,{to:"/profile",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Home",title:"Home",children:u.jsx("span",{className:"text-2xl",children:"🏠"})}),u.jsx(Ve,{to:"/create",className:"grid h-12 w-12 place-items-center rounded-full border border-black/10 hover:bg-black/[0.04]","aria-label":"Create group",title:"Create group",children:u.jsx("span",{className:"text-2xl",children:"➕"})})]})})}class A0 extends xo.Component{constructor(n){super(n),this.state={error:null}}static getDerivedStateFromError(n){return{error:n}}render(){return this.state.error?u.jsx("div",{className:"grid min-h-screen place-items-center p-6",children:u.jsxs("div",{className:"max-w-md text-center",children:[u.jsx("h1",{className:"text-2xl font-bold",children:"Something broke"}),u.jsx("p",{className:"text-sm text-neutral-600 break-words mt-2",children:String(this.state.error?.message??this.state.error)}),u.jsx("button",{className:"mt-4 rounded-md border border-black/10 bg-white px-3 py-2 text-sm hover:bg-black/[0.04]",onClick:()=>location.reload(),children:"Reload"})]})}):this.props.children}}function $0(){const{user:o,loading:n}=Uu();return n?null:u.jsx(bo,{to:o?"/profile":"/onboarding",replace:!0})}function I0(){const{id:o}=_o();return u.jsx(bo,{to:`/group/${o}`,replace:!0})}function U0(){y.useEffect(()=>{window.scrollTo(0,0)},[]),y.useEffect(()=>{try{"scrollRestoration"in history&&(history.scrollRestoration="manual")}catch{}},[]);const o=yr();return y.useEffect(()=>{window.scrollTo(0,0)},[o.pathname,o.search]),u.jsx("div",{id:"page-root",className:"min-h-dvh flow-root flex flex-col",children:u.jsx(P0,{children:u.jsxs(d0,{children:[u.jsx(R0,{}),u.jsx(L0,{}),u.jsx(A0,{children:u.jsx(y.Suspense,{fallback:u.jsx("div",{className:"grid min-h-dvh place-items-center text-sm text-neutral-600",children:"Loading…"}),children:u.jsxs(Km,{children:[u.jsx(Lt,{path:"/",element:u.jsx($0,{})}),u.jsx(Lt,{path:"/onboarding",element:u.jsx(E0,{})}),u.jsx(Lt,{path:"/browse",element:u.jsx(h0,{})}),u.jsx(Lt,{path:"/groups",element:u.jsx(w0,{})}),u.jsx(Lt,{path:"/invite/:code",element:u.jsx(T0,{})}),u.jsxs(Lt,{element:u.jsx(O0,{children:u.jsx(Hm,{})}),children:[u.jsx(Lt,{path:"/profile",element:u.jsx(Uf,{})}),u.jsx(Lt,{path:"/profile/:userId",element:u.jsx(Uf,{})}),u.jsx(Lt,{path:"/create",element:u.jsx(m0,{})}),u.jsx(Lt,{path:"/group/:id",element:u.jsx(g0,{})}),u.jsx(Lt,{path:"/groups/game/:game",element:u.jsx(S0,{})}),u.jsx(Lt,{path:"/groups/mine",element:u.jsx(C0,{})})]}),u.jsx(Lt,{path:"/groups/:id",element:u.jsx(I0,{})}),u.jsx(Lt,{path:"*",element:u.jsx(bo,{to:"/",replace:!0})})]})})})]})})})}Zp.createRoot(document.getElementById("root")).render(u.jsx(xo.StrictMode,{children:u.jsx(rg,{basename:"/Circles/",children:u.jsx(U0,{})})}));export{yr as a,_o as b,u as j,y as r,A as s,ss as u};
