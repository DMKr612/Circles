import{s as d,j as e}from"./index-Dxv4Wk-w.js";import{c as s}from"./react-Dymf0t1b.js";import"./supabase-BesQZUkt.js";function y(){const[o,n]=s.useState(null),[c,l]=s.useState(!0);return s.useEffect(()=>{let a=!0;d.auth.getUser().then(({data:i,error:r})=>{a&&(r&&console.error("Error fetching auth user",r),n(i?.user??null),l(!1))});const{data:{subscription:u}}=d.auth.onAuthStateChange((i,r)=>{a&&(n(r?.user??null),l(!1))});return()=>{a=!1,u.unsubscribe()}},[]),{user:o,loading:c}}function S(){const{user:o}=y(),[n,c]=s.useState(""),[l,a]=s.useState(""),[u,i]=s.useState(""),[r,g]=s.useState(""),[m,j]=s.useState(""),[b,f]=s.useState(!1),[x,p]=s.useState(null);if(!o)return null;async function v(t){t.preventDefault(),f(!0),p(null);const{error:h}=await d.from("profiles").update({name:n,username:l,city:u||null,timezone:r||null,interests:m||null,onboarded:!0}).eq("user_id",o.id);if(f(!1),h){p(h.message);return}window.location.href="/profile"}return e.jsx("div",{className:"min-h-dvh flex items-center justify-center px-4 py-8 bg-neutral-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border border-black/10 bg-white p-6 shadow-sm",children:[e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Create your profile"}),e.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Just a few details so Circles can find the best groups for you."}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full name"}),e.jsx("input",{type:"text",value:n,onChange:t=>c(t.target.value),className:"w-full rounded-md border border-neutral-300 px-3 py-2 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),e.jsx("input",{type:"text",value:l,onChange:t=>a(t.target.value),className:"w-full rounded-md border border-neutral-300 px-3 py-2 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"City / Location"}),e.jsx("input",{type:"text",value:u,onChange:t=>i(t.target.value),className:"w-full rounded-md border border-neutral-300 px-3 py-2 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black",placeholder:"e.g., Toronto, Berlin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timezone"}),e.jsx("input",{type:"text",value:r,onChange:t=>g(t.target.value),className:"w-full rounded-md border border-neutral-300 px-3 py-2 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black",placeholder:"e.g., UTC-5, CET, PST"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Interests"}),e.jsx("textarea",{value:m,onChange:t=>j(t.target.value),rows:3,className:"w-full rounded-md border border-neutral-300 px-3 py-2 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black resize-none",placeholder:"Games, study topics, outdoor hobbies…"})]}),x&&e.jsx("p",{className:"text-sm text-red-600",children:x}),e.jsx("button",{type:"submit",disabled:b,className:"mt-2 w-full rounded-md bg-black px-3 py-2 text-sm font-medium text-white hover:bg-black/90 disabled:opacity-60",children:b?"Saving…":"Save and continue"})]})]})})}export{S as default};
