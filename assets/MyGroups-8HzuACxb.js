import{s as o,j as e,U as g}from"./index-D94oHt45.js";import{c as a,L as l}from"./react-Dymf0t1b.js";import{A as p}from"./arrow-left-vBiXD_ID.js";import{P as N}from"./plus-vEpEa3FN.js";import{M as y}from"./map-pin-D7dqedZJ.js";import{C as v}from"./clock-D3X7CLsR.js";import"./supabase-BesQZUkt.js";function k(s){if(!s)return"";try{return new Date(s).toLocaleDateString()}catch{return""}}function P(){const[s,r]=a.useState([]),[c,d]=a.useState(!0),[n,m]=a.useState(null);return a.useEffect(()=>{let t=!0;return(async()=>{try{d(!0),m(null);const{data:{session:i}}=await o.auth.getSession(),x=i?.user?.id;if(!x){r([]);return}const{data:b,error:u}=await o.from("group_members").select("group_id").eq("user_id",x);if(u)throw u;const h=(b??[]).map(w=>w.group_id).filter(Boolean);if(h.length===0){r([]);return}const{data:j,error:f}=await o.from("groups").select("*").in("id",h).order("created_at",{ascending:!1});if(f)throw f;if(!t)return;r(j??[])}catch(i){if(!t)return;m(i?.message??"Failed to load your groups"),r([])}finally{t&&d(!1)}})(),()=>{t=!1}},[]),e.jsxs("main",{className:"mx-auto max-w-3xl px-4 py-8 pb-32",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{to:"/browse",className:"flex h-10 w-10 items-center justify-center rounded-full bg-neutral-100 hover:bg-neutral-200 transition-colors",children:e.jsx(p,{className:"h-5 w-5 text-neutral-700"})}),e.jsx("h1",{className:"text-2xl font-extrabold tracking-tight text-neutral-900",children:"My Groups"})]}),e.jsxs(l,{to:"/create",className:"flex items-center gap-2 rounded-full bg-black px-4 py-2 text-xs font-bold text-white shadow-lg hover:bg-neutral-800 transition-all active:scale-95",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"New"})]})]}),e.jsx("p",{className:"text-sm text-neutral-500 ml-13",children:"Groups youâ€™ve joined or created."})]}),c&&e.jsx("ul",{className:"space-y-3",children:[1,2,3].map(t=>e.jsx("li",{className:"h-24 w-full animate-pulse rounded-2xl bg-white shadow-sm"},t))}),!!n&&e.jsx("div",{className:"rounded-xl border border-red-100 bg-red-50 p-4 text-sm text-red-600 font-medium",children:n}),!c&&!n&&s.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-neutral-100 mb-4",children:e.jsx(g,{className:"h-8 w-8 text-neutral-400"})}),e.jsx("h3",{className:"text-lg font-bold text-neutral-900",children:"No groups yet"}),e.jsx("p",{className:"text-sm text-neutral-500 max-w-xs mx-auto mt-1 mb-6",children:"You haven't joined any circles yet. Find a game or create your own!"}),e.jsx(l,{to:"/browse",className:"rounded-full bg-black px-6 py-3 text-sm font-bold text-white shadow-lg hover:bg-neutral-800 transition-all active:scale-95",children:"Browse Games"})]}),e.jsx("ul",{className:"space-y-3",children:s.map(t=>e.jsx("li",{children:e.jsx(l,{to:`/group/${t.id}`,className:"group block relative overflow-hidden rounded-2xl border border-neutral-100 bg-white p-4 shadow-sm transition-all hover:shadow-md hover:border-neutral-200 active:scale-[0.99]",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"truncate text-base font-bold text-neutral-900",children:t.title||"Untitled Group"}),t.is_online&&e.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-[10px] font-bold text-blue-700 border border-blue-100",children:"ONLINE"})]}),e.jsx("p",{className:"line-clamp-1 text-sm text-neutral-600 mb-3",children:t.description||"No description"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-neutral-500 font-medium",children:[t.category&&e.jsx("span",{className:"capitalize text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded-md font-bold",children:t.game||t.category}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(y,{className:"h-3 w-3"}),t.city||"Online"]}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(v,{className:"h-3 w-3"}),k(t.created_at)]})]})]}),e.jsx("div",{className:"h-8 w-8 flex-shrink-0 rounded-full bg-neutral-50 flex items-center justify-center text-neutral-300 group-hover:bg-black group-hover:text-white transition-colors",children:e.jsx(p,{className:"h-4 w-4 rotate-180"})})]})})},t.id))})]})}export{P as default};
