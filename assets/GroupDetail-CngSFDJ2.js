const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DDNCUbMa.js","assets/index-Buqi4C9v.js","assets/react-Dymf0t1b.js","assets/supabase-BesQZUkt.js","assets/index-Cc7FYaoN.css","assets/map-pin-CafTsBTY.js","assets/message-circle-BQIUAIG4.js","assets/x-DBwCWCUQ.js","assets/clock-BUb1QzH6.js","assets/plus-2a7pX9Z_.js","assets/ChatPanel-BT6OHXL8.js"])))=>i.map(i=>d[i]);
import{c as G,_ as we,s as x,j as e,U as Fe}from"./index-Buqi4C9v.js";import{c as u,f as Ge,i as He,u as Ve,L as ze}from"./react-Dymf0t1b.js";import{M as Re}from"./map-pin-CafTsBTY.js";import{M as Be}from"./message-circle-BQIUAIG4.js";import{C as We,X as xe}from"./x-DBwCWCUQ.js";import{C as Ie}from"./clock-BUb1QzH6.js";import{P as he}from"./plus-2a7pX9Z_.js";const Ke=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pe=G("check",Ke);const Je=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xe=G("chevron-left",Je);const Qe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ye=G("log-out",Qe);const Ze=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],et=G("pen",Ze);const tt=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],st=G("share-2",tt);const rt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],nt=G("trash-2",rt);var F;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(F||(F={}));class ie extends Error{constructor(t,s,n){super(t),this.message=t,this.code=s,this.data=n}}const at=a=>{var t,s;return a?.androidBridge?"android":!((s=(t=a?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},ot=a=>{const t=a.CapacitorCustomPlatform||null,s=a.Capacitor||{},n=s.Plugins=s.Plugins||{},i=()=>t!==null?t.name:at(a),o=()=>i()!=="web",d=p=>{const g=h.get(p);return!!(g?.platforms.has(i())||l(p))},l=p=>{var g;return(g=s.PluginHeaders)===null||g===void 0?void 0:g.find($=>$.name===p)},c=p=>a.console.error(p),h=new Map,U=(p,g={})=>{const $=h.get(p);if($)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),$.proxy;const _=i(),S=l(p);let C;const J=async()=>(!C&&_ in g?C=typeof g[_]=="function"?C=await g[_]():C=g[_]:t!==null&&!C&&"web"in g&&(C=typeof g.web=="function"?C=await g.web():C=g.web),C),X=(j,N)=>{var k,E;if(S){const L=S?.methods.find(P=>N===P.name);if(L)return L.rtype==="promise"?P=>s.nativePromise(p,N.toString(),P):(P,D)=>s.nativeCallback(p,N.toString(),P,D);if(j)return(k=j[N])===null||k===void 0?void 0:k.bind(j)}else{if(j)return(E=j[N])===null||E===void 0?void 0:E.bind(j);throw new ie(`"${p}" plugin is not implemented on ${_}`,F.Unimplemented)}},H=j=>{let N;const k=(...E)=>{const L=J().then(P=>{const D=X(P,j);if(D){const q=D(...E);return N=q?.remove,q}else throw new ie(`"${p}.${j}()" is not implemented on ${_}`,F.Unimplemented)});return j==="addListener"&&(L.remove=async()=>N()),L};return k.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:j,writable:!1,configurable:!1}),k},O=H("addListener"),z=H("removeListener"),V=(j,N)=>{const k=O({eventName:j},N),E=async()=>{const P=await k;z({eventName:j,callbackId:P},N)},L=new Promise(P=>k.then(()=>P({remove:E})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},L},A=new Proxy({},{get(j,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return S?V:O;case"removeListener":return z;default:return H(N)}}});return n[p]=A,h.set(p,{name:p,proxy:A,platforms:new Set([...Object.keys(g),...S?[_]:[]])}),A};return s.convertFileSrc||(s.convertFileSrc=p=>p),s.getPlatform=i,s.handleError=c,s.isNativePlatform=o,s.isPluginAvailable=d,s.registerPlugin=U,s.Exception=ie,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},it=a=>a.Capacitor=ot(a),le=it(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ce=le.registerPlugin;class ve{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,s){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(s);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(t);const d=async()=>this.removeListener(t,s);return Promise.resolve({remove:d})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,s,n){const i=this.listeners[t];if(!i){if(n){let o=this.retainedEventArguments[t];o||(o=[]),o.push(s),this.retainedEventArguments[t]=o}return}i.forEach(o=>o(s))}hasListeners(t){var s;return!!(!((s=this.listeners[t])===null||s===void 0)&&s.length)}registerWindowListener(t,s){this.windowListeners[s]={registered:!1,windowEventName:t,pluginEventName:s,handler:n=>{this.notifyListeners(s,n)}}}unimplemented(t="not implemented"){return new le.Exception(t,F.Unimplemented)}unavailable(t="not available"){return new le.Exception(t,F.Unavailable)}async removeListener(t,s){const n=this.listeners[t];if(!n)return;const i=n.indexOf(s);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const s=this.retainedEventArguments[t];s&&(delete this.retainedEventArguments[t],s.forEach(n=>{this.notifyListeners(t,n)}))}}const be=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ge=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lt extends ve{async getCookies(){const t=document.cookie,s={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=ge(i).trim(),o=ge(o).trim(),s[i]=o}),s}async setCookie(t){try{const s=be(t.key),n=be(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),d=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${s}=${n||""}${i}; path=${o}; ${d};`}catch(s){return Promise.reject(s)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const s of t)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}ce("CapacitorCookies",{web:()=>new lt});const ct=async a=>new Promise((t,s)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>s(i),n.readAsDataURL(a)}),dt=(a={})=>{const t=Object.keys(a);return Object.keys(a).map(i=>i.toLocaleLowerCase()).reduce((i,o,d)=>(i[o]=a[t[d]],i),{})},ut=(a,t=!0)=>a?Object.entries(a).reduce((n,i)=>{const[o,d]=i;let l,c;return Array.isArray(d)?(c="",d.forEach(h=>{l=t?encodeURIComponent(h):h,c+=`${o}=${l}&`}),c.slice(0,-1)):(l=t?encodeURIComponent(d):d,c=`${o}=${l}`),`${n}&${c}`},"").substr(1):null,mt=(a,t={})=>{const s=Object.assign({method:a.method||"GET",headers:a.headers},t),i=dt(a.headers)["content-type"]||"";if(typeof a.data=="string")s.body=a.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[d,l]of Object.entries(a.data||{}))o.set(d,l);s.body=o.toString()}else if(i.includes("multipart/form-data")||a.data instanceof FormData){const o=new FormData;if(a.data instanceof FormData)a.data.forEach((l,c)=>{o.append(c,l)});else for(const l of Object.keys(a.data))o.append(l,a.data[l]);s.body=o;const d=new Headers(s.headers);d.delete("content-type"),s.headers=d}else(i.includes("application/json")||typeof a.data=="object")&&(s.body=JSON.stringify(a.data));return s};class ft extends ve{async request(t){const s=mt(t,t.webFetchExtra),n=ut(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,o=await fetch(i,s),d=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};d.includes("application/json")&&(l="json");let c,h;switch(l){case"arraybuffer":case"blob":h=await o.blob(),c=await ct(h);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const U={};return o.headers.forEach((p,g)=>{U[g]=p}),{data:c,headers:U,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}ce("CapacitorHttp",{web:()=>new ft});function xt(a){a.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return new Proxy({},{get(n,i){return(o,d,l)=>{const c=a.Capacitor.Plugins[s];if(c===void 0){l(new Error(`Capacitor plugin ${s} not found`));return}if(typeof c[i]!="function"){l(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const h=await c[i](o);d(h)}catch(h){l(h)}})()}}})}})}function ht(a){a.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return a.cordova.plugins[s]}})}function pt(a=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!a?xt(window):window.cordova!==void 0&&ht(window))}const bt=ce("Geolocation",{web:()=>we(()=>import("./web-DDNCUbMa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(a=>new a.GeolocationWeb)});pt();function gt(a,t){const[s,n]=u.useState({});u.useEffect(()=>{if(!a||!t)return;const o=async()=>{try{const l=await bt.getCurrentPosition({enableHighAccuracy:!0}),{latitude:c,longitude:h}=l.coords;await x.from("group_live_locations").upsert({user_id:t,group_id:a,lat:c,long:h,updated_at:new Date().toISOString()})}catch{}};o();const d=setInterval(o,15e3);return()=>clearInterval(d)},[a,t]),u.useEffect(()=>{if(!a)return;x.from("group_live_locations").select("user_id, lat, long").eq("group_id",a).then(({data:d})=>{if(d){const l={};d.forEach(c=>{l[c.user_id]={lat:c.lat,long:c.long}}),n(l)}});const o=x.channel(`presence:${a}`).on("postgres_changes",{event:"*",schema:"public",table:"group_live_locations",filter:`group_id=eq.${a}`},d=>{const l=d.new;l&&l.user_id&&n(c=>({...c,[l.user_id]:{lat:l.lat,long:l.long}}))}).subscribe();return()=>{x.removeChannel(o)}},[a]);function i(o){if(!t||!s[t]||!s[o]||o===t)return!1;const d=s[t],l=s[o];return wt(d.lat,d.long,l.lat,l.long)<.05}return{isTogether:i}}function wt(a,t,s,n){const o=K(s-a),d=K(n-t),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(K(a))*Math.cos(K(s))*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function K(a){return a*(Math.PI/180)}const vt=u.lazy(()=>we(()=>import("./ChatPanel-BT6OHXL8.js"),__vite__mapDeps([10,1,2,3,4])));function jt(){const{id:a=""}=Ge(),t=He(),s=Ve(),[n,i]=u.useState(null),[o,d]=u.useState(!0),[l,c]=u.useState(null),[h,U]=u.useState(null),{isTogether:p}=gt(a,h??void 0),[g,$]=u.useState(!1),_=!!(h&&n&&(h===n.host_id||(n?.creator_id??null)===h)),[S,C]=u.useState(!1),[J,X]=u.useState(!1),[H,O]=u.useState(!1),[z,V]=u.useState(!1),[A,j]=u.useState(!1),[N,k]=u.useState(""),[E,L]=u.useState(!1),[P,D]=u.useState(!1),[q,de]=u.useState(!1),[y,R]=u.useState(null),[je,Q]=u.useState([]),[ye,B]=u.useState({}),[T,Y]=u.useState(0),[_e,Z]=u.useState(0),[ue,W]=u.useState(null),[ee,me]=u.useState([]),[te,se]=u.useState(!1),[re,Ne]=u.useState("Schedule"),[fe,Ce]=u.useState(""),[I,ke]=u.useState("24h"),[ne,Pe]=u.useState(""),ae=u.useMemo(()=>y?.closes_at?new Date(y.closes_at)<new Date:!1,[y]);function Ee(r,f){if(r==="closed")return"Voting Closed";if(!f)return"Open";const m=new Date(f).getTime()-Date.now();if(m<=0)return"Time Expired";const w=Math.floor(m/(1e3*60*60*24)),v=Math.floor(m%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(m%(1e3*60*60)/(1e3*60));return w>0?`${w}d ${v}h left`:v>0?`${v}h ${b}m left`:`${b}m left`}u.useEffect(()=>{s.hash==="#chat"&&C(!0)},[s.hash]),u.useEffect(()=>{let r=!1;return(async()=>{d(!0);const{data:f}=await x.auth.getUser();r||U(f.user?.id??null);const m=await x.from("groups").select("*").eq("id",a).maybeSingle();if(r||i(m.data??null),m.data&&k(m.data.purpose||""),m.data?.id){const{count:w}=await x.from("group_members").select("*",{count:"exact",head:!0}).eq("group_id",m.data.id).eq("status","active");r||Y(w??0)}d(!1)})(),()=>{r=!0}},[a]),u.useEffect(()=>{let r=!1;return(async()=>{if(!n?.id){me([]);return}const{data:f}=await x.from("group_members").select("user_id, role, created_at, status, group_id, profiles(name, avatar_url)").eq("group_id",n.id).eq("status","active").order("created_at",{ascending:!0}),m=(f??[]).map(v=>({user_id:v.user_id,role:v.role,created_at:v.created_at,group_id:n.id,status:"active",name:v.profiles?.name??"User",avatar_url:v.profiles?.avatar_url??null}));if(r)return;me(m);const w=(await x.auth.getUser()).data.user?.id||null;w&&se(m.some(v=>v.user_id===w))})(),()=>{r=!0}},[n?.id]),u.useEffect(()=>{let r=!1;return(async()=>{if(!n?.id)return;const{data:f}=await x.from("group_polls").select("*").eq("group_id",n.id).order("created_at",{ascending:!1}).limit(1);if(r)return;const m=f&&f[0];if(R(m||null),!m){Q([]),B({}),Z(0);return}const{data:w}=await x.from("group_poll_options").select("*").eq("poll_id",m.id).order("created_at");if(r)return;Q(w||[]);const{data:v}=await x.from("group_votes").select("option_id,user_id").eq("poll_id",m.id);if(r)return;const b={},M=new Set;v?.forEach(oe=>{b[oe.option_id]=(b[oe.option_id]||0)+1,M.add(oe.user_id)}),B(b),Z(M.size)})(),()=>{r=!0}},[n?.id]);async function Le(){const{data:r}=await x.auth.getUser();if(!r.user){c("Please sign in.");return}await x.from("group_members").insert({group_id:a,user_id:r.user.id}),se(!0),Y(f=>f+1)}async function Se(){if(!(!n||!h)){if(h===n.host_id){c("Host cannot leave their own group.");return}await x.from("group_members").delete().match({group_id:n.id,user_id:h}),se(!1),Y(r=>Math.max(0,r-1))}}async function Oe(){n?.code&&(navigator.clipboard.writeText(n.code),$(!0),setTimeout(()=>$(!1),1500))}async function Me(){if(n?.id){D(!0);try{const{data:r,error:f}=await x.rpc("make_group_invite",{p_group_id:n.id,p_hours:168,p_max_uses:null});if(f)throw f;const m=`${window.location.origin}/invite/${r}`;await navigator.clipboard.writeText(m),de(!0),setTimeout(()=>de(!1),1500)}catch(r){c(r.message)}finally{D(!1)}}}async function $e(){!n||!h||window.confirm("Delete this group?")&&(await x.from("groups").delete().match({id:n.id,host_id:h}),t("/browse"))}async function De(){if(!(!n||!_)){L(!0);try{const{error:r}=await x.from("groups").update({purpose:N}).eq("id",n.id);if(r)throw r;i(f=>f?{...f,purpose:N}:null),j(!1)}catch(r){c(r.message||"Failed to save description")}finally{L(!1)}}}async function Te(){if(!n||!_)return;const{data:r}=await x.auth.getUser();if(!r?.user)return;let f=null;if(I==="custom")ne&&(f=new Date(ne).toISOString());else{const b=new Date,M=parseInt(I);b.setTime(b.getTime()+M*60*60*1e3),f=b.toISOString()}const m=(fe||"").split(/\r?\n/).map(b=>b.trim()).filter(Boolean).slice(0,20);m.some(b=>b.toLowerCase()==="not coming")||m.push("Not Coming");const{data:w,error:v}=await x.from("group_polls").insert({group_id:n.id,title:(re||"Schedule").trim(),created_by:r.user.id,closes_at:f}).select("id").single();if(v||!w?.id){console.error(v),c("Failed to create poll. Check permissions.");return}if(m.length){const b=m.map(M=>({poll_id:w.id,label:M}));await x.from("group_poll_options").insert(b)}O(!1),c("Voting created"),R({id:w.id,group_id:n.id,title:re,status:"open",closes_at:f,created_by:r.user.id}),Q(m.map((b,M)=>({id:`temp-${M}`,poll_id:w.id,label:b,starts_at:null,place:null}))),B({})}async function Ue(){if(!(!y||!_)&&window.confirm("End voting? Everyone who hasn't voted will be marked as 'Not Coming'.")){W("closing");try{await x.rpc("resolve_poll",{p_poll_id:y.id}),R(r=>r&&{...r,status:"closed"}),c("Poll finalized.")}catch(r){c(r.message)}finally{W(null)}}}async function Ae(){if(!y||!window.confirm("Delete this voting?"))return;const{error:r}=await x.from("group_polls").delete().eq("id",y.id);r?(c("Could not delete. Check database permissions."),console.error(r)):(R(null),c("Poll deleted."))}async function qe(r){if(!y||ae||y.status==="closed")return;W(r);const{data:f}=await x.auth.getUser();if(!f?.user){t("/login");return}await x.from("group_votes").upsert({poll_id:y.id,option_id:r,user_id:f.user.id},{onConflict:"poll_id,user_id"});const{data:m}=await x.from("group_votes").select("option_id,user_id").eq("poll_id",y.id),w={},v=new Set;m?.forEach(b=>{w[b.option_id]=(w[b.option_id]||0)+1,v.add(b.user_id)}),B(w),Z(v.size),W(null)}return o?e.jsx("div",{className:"p-20 flex justify-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-neutral-300 border-t-black rounded-full"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"transition-all duration-300 min-h-screen bg-[#FDFBF7] pb-24 "+(S&&!J?"lg:mr-[min(92vw,520px)]":""),children:[e.jsxs("div",{className:"bg-white border-b border-neutral-200 pt-8 pb-6 px-4 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-full blur-3xl -z-10 opacity-60"}),e.jsxs("div",{className:"mx-auto max-w-5xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-sm text-neutral-500",children:[e.jsxs(ze,{to:"/browse",className:"flex items-center gap-1 hover:text-black transition-colors",children:[e.jsx(Xe,{className:"h-4 w-4"})," Browse"]}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"font-medium text-neutral-800",children:"Group Detail"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-neutral-900 tracking-tight leading-tight mb-3",children:n.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-neutral-100 text-neutral-700 px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide",children:n.category||"General"}),n.game&&e.jsx("div",{className:"inline-flex items-center gap-1.5 bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold",children:n.game}),n.city&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(Re,{className:"h-3 w-3"})," ",n.city]}),e.jsxs("div",{className:"inline-flex items-center gap-1.5 border border-neutral-200 text-neutral-600 px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(Fe,{className:"h-3 w-3"})," ",T," / ",n.capacity]})]})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:te?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>C(!0),className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(Be,{className:"h-4 w-4"})," Chat"]}),_&&e.jsxs("button",{onClick:Me,className:"h-10 px-5 rounded-full bg-white border border-neutral-200 text-neutral-800 text-sm font-bold shadow-sm hover:bg-neutral-50 hover:border-neutral-300 flex items-center gap-2 transition-all",children:[e.jsx(st,{className:"h-4 w-4"})," ",P?"...":q?"Copied":"Invite"]})]}):e.jsx("button",{onClick:Le,className:"h-10 px-6 rounded-full bg-emerald-600 text-white text-sm font-bold shadow-md hover:bg-emerald-700 hover:shadow-lg active:scale-95 transition-all",children:"Join Group"})})]})]})]}),e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8 grid gap-8 lg:grid-cols-[2fr_1fr]",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-2xl p-6 shadow-sm border border-neutral-200/60 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-bold text-neutral-900 flex items-center gap-2",children:"About this Circle"}),_&&!A&&e.jsx("button",{onClick:()=>j(!0),className:"p-1.5 rounded-full text-neutral-400 hover:bg-neutral-100 hover:text-neutral-900 transition-colors",children:e.jsx(et,{className:"h-4 w-4"})})]}),A?e.jsxs("div",{className:"animate-in fade-in duration-200",children:[e.jsx("textarea",{value:N,onChange:r=>k(r.target.value),className:"w-full min-h-[120px] p-3 rounded-xl border border-neutral-300 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none resize-y mb-3",placeholder:"What's the plan?"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-3 py-1.5 rounded-lg border border-neutral-200 text-xs font-bold hover:bg-neutral-50 text-neutral-600",children:"Cancel"}),e.jsx("button",{onClick:De,disabled:E,className:"px-3 py-1.5 rounded-lg bg-black text-white text-xs font-bold hover:bg-neutral-800 disabled:opacity-50",children:E?"Saving...":"Save Changes"})]})]}):e.jsx("p",{className:"text-sm text-neutral-600 leading-relaxed whitespace-pre-wrap",children:n.purpose||e.jsx("span",{className:"italic text-neutral-400",children:"No description provided."})}),n.code&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-neutral-100 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-400 uppercase tracking-wider",children:"Invite Code"}),e.jsx("code",{className:"text-sm font-mono bg-neutral-100 px-2 py-1 rounded text-neutral-700 border border-neutral-200",children:String(n.code).toUpperCase()}),e.jsx("button",{onClick:Oe,className:"text-xs font-medium text-emerald-600 hover:underline",children:g?"Copied":"Copy"})]})]}),e.jsxs("section",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(We,{className:"h-3 w-3"})," Created"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:new Date(n.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-neutral-200/60 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold uppercase mb-1",children:[e.jsx(Ie,{className:"h-3 w-3"})," Format"]}),e.jsx("div",{className:"text-sm font-semibold text-neutral-900",children:n.is_online?n.online_link?"Online (Link set)":"Online":"In Person"})]})]}),te&&_&&e.jsxs("button",{onClick:$e,className:"flex items-center gap-2 text-red-600 text-sm font-medium hover:text-red-700 transition-colors px-2",children:[e.jsx(nt,{className:"h-4 w-4"})," Delete this group"]}),te&&!_&&e.jsxs("button",{onClick:Se,className:"flex items-center gap-2 text-neutral-500 text-sm font-medium hover:text-neutral-800 transition-colors px-2",children:[e.jsx(Ye,{className:"h-4 w-4"})," Leave group"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-base font-bold text-neutral-900 flex items-center gap-2",children:"Polls & Events"}),_&&e.jsx("button",{onClick:()=>O(!0),className:"p-1.5 bg-neutral-50 rounded-full text-neutral-600 shadow-sm hover:scale-105 active:scale-95 transition-all border border-neutral-200 hover:bg-white hover:border-neutral-300",children:e.jsx(he,{className:"h-4 w-4"})})]}),y?e.jsxs("div",{className:"animate-in slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-bold text-neutral-900",children:y.title}),e.jsx("div",{className:`text-[10px] font-bold px-2 py-1 rounded-full border ${y.status==="closed"?"bg-neutral-200 text-neutral-600 border-neutral-300":ae?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:Ee(y.status,y.closes_at)})]}),e.jsx("div",{className:"space-y-2 mb-4",children:je.map(r=>{const f=ye[r.id]??0,w=r.label==="Not Coming"?f+(T-_e):f,v=T>0?Math.round(w/T*100):0;return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-neutral-100 rounded-lg transition-all duration-500",style:{width:`${v}%`}}),e.jsxs("div",{className:"relative flex items-center justify-between p-2.5 rounded-lg border border-neutral-100 hover:border-neutral-200 transition-colors",children:[e.jsx("span",{className:"text-sm font-medium text-neutral-800 z-10",children:r.label}),e.jsxs("div",{className:"flex items-center gap-3 z-10",children:[e.jsx("span",{className:"text-xs font-bold text-neutral-600",children:w}),y.status==="open"&&!ae&&e.jsx("button",{onClick:()=>qe(r.id),className:`h-6 w-6 rounded-full flex items-center justify-center border transition-all hover:scale-110 active:scale-95 ${ue===r.id?"bg-black border-black text-white":"bg-white border-neutral-200 text-neutral-600"}`,children:ue===r.id?e.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"}):e.jsx(pe,{className:"h-3 w-3"})})]})]})]},r.id)})}),_&&e.jsxs("div",{className:"flex flex-col gap-2 pt-3 border-t border-neutral-100",children:[y.status==="open"&&e.jsxs("button",{onClick:Ue,className:"w-full bg-black text-white text-xs font-bold py-3 rounded-xl hover:bg-neutral-800 shadow-sm flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"})," End & Count Games"]}),y.status==="closed"&&e.jsxs("button",{onClick:()=>O(!0),className:"w-full bg-neutral-100 text-neutral-700 text-xs font-bold py-3 rounded-xl hover:bg-neutral-200 flex items-center justify-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"})," Create New Vote"]}),e.jsx("button",{onClick:Ae,className:"w-full text-red-600 text-xs font-bold py-2 hover:bg-red-50 rounded-xl",children:"Delete Poll"})]})]}):e.jsxs("div",{className:"text-center py-8 px-4 bg-neutral-50 rounded-xl border border-dashed border-neutral-200",children:[e.jsx("p",{className:"text-sm text-neutral-400 mb-2 font-medium",children:"No active polls"}),_&&e.jsx("button",{onClick:()=>O(!0),className:"text-xs text-black font-bold hover:underline",children:"Create one"})]})]}),e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-bold text-neutral-900",children:["Members (",T,")"]}),e.jsx("button",{onClick:()=>V(!0),className:"text-xs font-medium text-emerald-600 hover:underline",children:"View All"})]}),e.jsxs("div",{className:"flex -space-x-2 overflow-hidden cursor-pointer",onClick:()=>V(!0),children:[ee.slice(0,5).map(r=>e.jsx("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-100 flex items-center justify-center text-[10px] font-bold text-neutral-500",title:r.name||"User",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:"",className:"h-full w-full object-cover rounded-full"}):(r.name||"?").slice(0,1)},r.user_id)),T>5&&e.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-white bg-neutral-50 flex items-center justify-center text-[10px] font-bold text-neutral-400",children:["+",T-5]})]})]})]})]})]}),H&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl p-6 shadow-2xl ring-1 ring-black/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h3",{className:"text-xl font-bold text-neutral-900",children:"New Vote"}),e.jsx("button",{onClick:()=>O(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(xe,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Topic"}),e.jsx("input",{value:re,onChange:r=>Ne(r.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none transition-all",placeholder:"e.g. When to play?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Duration"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:I,onChange:r=>ke(r.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-4 py-3 text-sm font-medium flex-1 outline-none focus:ring-2 focus:ring-black",children:[e.jsx("option",{value:"1",children:"1 Hour"}),e.jsx("option",{value:"24",children:"24 Hours"}),e.jsx("option",{value:"48",children:"2 Days"}),e.jsx("option",{value:"custom",children:"Custom..."})]}),I==="custom"&&e.jsx("input",{type:"datetime-local",value:ne,onChange:r=>Pe(r.target.value),className:"border border-neutral-200 bg-neutral-50 rounded-xl px-3 py-3 text-sm font-medium flex-[1.5] outline-none focus:ring-2 focus:ring-black"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-neutral-400 uppercase mb-1.5",children:"Options (one per line)"}),e.jsx("textarea",{value:fe,onChange:r=>Ce(r.target.value),className:"w-full border border-neutral-200 rounded-xl px-4 py-3 text-sm font-medium focus:ring-2 focus:ring-black outline-none min-h-[100px]",placeholder:`Saturday 20:00
Sunday 14:00`}),e.jsx("p",{className:"text-[10px] text-neutral-400 mt-1 italic text-right",children:'"Not Coming" added automatically.'})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-5 py-2.5 text-sm font-bold text-neutral-500 hover:bg-neutral-50 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Te,className:"px-6 py-2.5 text-sm font-bold bg-black text-white rounded-xl shadow-lg hover:bg-neutral-800 active:scale-95 transition-all",children:"Create Vote"})]})]})]})}),z&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-3xl p-6 shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-neutral-900",children:["Members (",ee.length,")"]}),e.jsx("button",{onClick:()=>V(!1),className:"p-1 rounded-full hover:bg-neutral-100 text-neutral-500",children:e.jsx(xe,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:ee.map(r=>e.jsx("div",{className:"flex items-center justify-between p-2 rounded-xl hover:bg-neutral-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-neutral-200 flex items-center justify-center overflow-hidden",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-sm font-bold text-neutral-500",children:(r.name||"?").slice(0,1)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-neutral-900",children:r.name||"User"}),p(r.user_id)?e.jsxs("div",{className:"flex items-center gap-1 mt-0.5 animate-in fade-in slide-in-from-left-1",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),e.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:"Here with you"})]}):e.jsxs(e.Fragment,{children:[r.role==="host"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Host"}),r.role==="owner"&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold uppercase tracking-wide",children:"Owner"}),r.role!=="host"&&r.role!=="owner"&&e.jsx("div",{className:"text-xs text-neutral-500 capitalize",children:r.role})]})]})]})},r.user_id))})]})}),S&&n&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 animate-in zoom-in-95 duration-200",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>C(!1)}),e.jsx("div",{className:"relative w-full max-w-2xl h-[85vh] bg-white rounded-3xl shadow-2xl overflow-hidden ring-1 ring-black/10",children:e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading..."}),children:e.jsx(vt,{groupId:n.id,onClose:()=>{C(!1),X(!1)},full:!0,setFull:()=>{}})})})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Group not found."})}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));export{Lt as G,ve as W};
